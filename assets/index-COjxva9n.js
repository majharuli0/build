import{e as ie,K as R,br as le,i as ae,f as E,m as $e,r,n as Q,bs as ce,p as O,b2 as de,aZ as je,u as we,j as i,d as Oe,aE as Ee,S as Ie,bq as se}from"./index-DJP8L-_P.js";import"./alertsOverview-W6oAsXbu.js";import{D as Te,a as Pe}from"./RoomMap4-PrTgKq2I.js";import{a as B,t as _e,c as Re,g as De}from"./helper-DzRZPsxz.js";import{g as Be}from"./elderlySupport-CMza2TwG.js";import{S as ze}from"./index-BcZZRqor.js";const Ae=new R("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),We=new R("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),He=new R("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),Fe=new R("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),Me=new R("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),Ze=new R("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),Ve=e=>{const{componentCls:t,iconCls:a,antCls:n,badgeShadowSize:o,textFontSize:m,textFontSizeSM:l,statusSize:x,dotSize:p,textFontWeight:h,indicatorHeight:u,indicatorHeightSM:d,marginXS:b,calc:v}=e,f=`${n}-scroll-number`,N=le(e,(y,s)=>{let{darkColor:g}=s;return{[`&${t} ${t}-color-${y}`]:{background:g,[`&:not(${t}-count)`]:{color:g},"a:hover &":{background:g}}}});return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},ae(e)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${t}-count`]:{display:"inline-flex",justifyContent:"center",zIndex:e.indicatorZIndex,minWidth:u,height:u,color:e.badgeTextColor,fontWeight:h,fontSize:m,lineHeight:E(u),whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:v(u).div(2).equal(),boxShadow:`0 0 0 ${E(o)} ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${t}-count-sm`]:{minWidth:d,height:d,fontSize:l,lineHeight:E(d),borderRadius:v(d).div(2).equal()},[`${t}-multiple-words`]:{padding:`0 ${E(e.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${t}-dot`]:{zIndex:e.indicatorZIndex,width:p,minWidth:p,height:p,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${E(o)} ${e.badgeShadowColor}`},[`${t}-count, ${t}-dot, ${f}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${a}-spin`]:{animationName:Ze,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${t}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${t}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:x,height:x,verticalAlign:"middle",borderRadius:"50%"},[`${t}-status-success`]:{backgroundColor:e.colorSuccess},[`${t}-status-processing`]:{overflow:"visible",color:e.colorInfo,backgroundColor:e.colorInfo,borderColor:"currentcolor","&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:o,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:Ae,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${t}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${t}-status-error`]:{backgroundColor:e.colorError},[`${t}-status-warning`]:{backgroundColor:e.colorWarning},[`${t}-status-text`]:{marginInlineStart:b,color:e.colorText,fontSize:e.fontSize}}}),N),{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:We,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${t}-zoom-leave`]:{animationName:He,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${t}-not-a-wrapper`]:{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:Fe,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${t}-zoom-leave`]:{animationName:Me,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${t}-status)`]:{verticalAlign:"middle"},[`${f}-custom-component, ${t}-count`]:{transform:"none"},[`${f}-custom-component, ${f}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[f]:{overflow:"hidden",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack}`,[`${f}-only`]:{position:"relative",display:"inline-block",height:u,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${f}-only-unit`]:{height:u,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${f}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${t}-count, ${t}-dot, ${f}-custom-component`]:{transform:"translate(-50%, -50%)"}}})}},ue=e=>{const{fontHeight:t,lineWidth:a,marginXS:n,colorBorderBg:o}=e,m=t,l=a,x=e.colorBgContainer,p=e.colorError,h=e.colorErrorHover;return $e(e,{badgeFontHeight:m,badgeShadowSize:l,badgeTextColor:x,badgeColor:p,badgeColorHover:h,badgeShadowColor:o,badgeProcessingDuration:"1.2s",badgeRibbonOffset:n,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},me=e=>{const{fontSize:t,lineHeight:a,fontSizeSM:n,lineWidth:o}=e;return{indicatorZIndex:"auto",indicatorHeight:Math.round(t*a)-2*o,indicatorHeightSM:t,dotSize:n/2,textFontSize:n,textFontSizeSM:n,textFontWeight:"normal",statusSize:n/2}},Le=ie("Badge",e=>{const t=ue(e);return Ve(t)},me),qe=e=>{const{antCls:t,badgeFontHeight:a,marginXS:n,badgeRibbonOffset:o,calc:m}=e,l=`${t}-ribbon`,x=`${t}-ribbon-wrapper`,p=le(e,(h,u)=>{let{darkColor:d}=u;return{[`&${l}-color-${h}`]:{background:d,color:d}}});return{[x]:{position:"relative"},[l]:Object.assign(Object.assign(Object.assign(Object.assign({},ae(e)),{position:"absolute",top:n,padding:`0 ${E(e.paddingXS)}`,color:e.colorPrimary,lineHeight:E(a),whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${l}-text`]:{color:e.colorTextLightSolid},[`${l}-corner`]:{position:"absolute",top:"100%",width:o,height:o,color:"currentcolor",border:`${E(m(o).div(2).equal())} solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter}}),p),{[`&${l}-placement-end`]:{insetInlineEnd:m(o).mul(-1).equal(),borderEndEndRadius:0,[`${l}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${l}-placement-start`]:{insetInlineStart:m(o).mul(-1).equal(),borderEndStartRadius:0,[`${l}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}},Ye=ie(["Badge","Ribbon"],e=>{const t=ue(e);return qe(t)},me),Xe=e=>{const{className:t,prefixCls:a,style:n,color:o,children:m,text:l,placement:x="end",rootClassName:p}=e,{getPrefixCls:h,direction:u}=r.useContext(Q),d=h("ribbon",a),b=`${d}-wrapper`,[v,f,N]=Ye(d,b),y=ce(o,!1),s=O(d,`${d}-placement-${x}`,{[`${d}-rtl`]:u==="rtl",[`${d}-color-${o}`]:y},t),g={},S={};return o&&!y&&(g.background=o,S.color=o),v(r.createElement("div",{className:O(b,p,f,N)},m,r.createElement("div",{className:O(s,f),style:Object.assign(Object.assign({},g),n)},r.createElement("span",{className:`${d}-text`},l),r.createElement("div",{className:`${d}-corner`,style:S}))))},re=e=>{const{prefixCls:t,value:a,current:n,offset:o=0}=e;let m;return o&&(m={position:"absolute",top:`${o}00%`,left:0}),r.createElement("span",{style:m,className:O(`${t}-only-unit`,{current:n})},a)};function ke(e,t,a){let n=e,o=0;for(;(n+10)%10!==t;)n+=a,o+=a;return o}const Ke=e=>{const{prefixCls:t,count:a,value:n}=e,o=Number(n),m=Math.abs(a),[l,x]=r.useState(o),[p,h]=r.useState(m),u=()=>{x(o),h(m)};r.useEffect(()=>{const v=setTimeout(u,1e3);return()=>clearTimeout(v)},[o]);let d,b;if(l===o||Number.isNaN(o)||Number.isNaN(l))d=[r.createElement(re,Object.assign({},e,{key:o,current:!0}))],b={transition:"none"};else{d=[];const v=o+10,f=[];for(let s=o;s<=v;s+=1)f.push(s);const N=f.findIndex(s=>s%10===l);d=f.map((s,g)=>{const S=s%10;return r.createElement(re,Object.assign({},e,{key:s,value:S,offset:g-N,current:g===N}))});const y=p<m?1:-1;b={transform:`translateY(${-ke(l,o,y)}00%)`}}return r.createElement("span",{className:`${t}-only`,style:b,onTransitionEnd:u},d)};var Qe=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]]);return a};const Ue=r.forwardRef((e,t)=>{const{prefixCls:a,count:n,className:o,motionClassName:m,style:l,title:x,show:p,component:h="sup",children:u}=e,d=Qe(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),{getPrefixCls:b}=r.useContext(Q),v=b("scroll-number",a),f=Object.assign(Object.assign({},d),{"data-show":p,style:l,className:O(v,o,m),title:x});let N=n;if(n&&Number(n)%1===0){const y=String(n).split("");N=r.createElement("bdi",null,y.map((s,g)=>r.createElement(Ke,{prefixCls:v,count:Number(n),value:s,key:y.length-g})))}return l!=null&&l.borderColor&&(f.style=Object.assign(Object.assign({},l),{boxShadow:`0 0 0 1px ${l.borderColor} inset`})),u?de(u,y=>({className:O(`${v}-custom-component`,y==null?void 0:y.className,m)})):r.createElement(h,Object.assign({},f,{ref:t}),N)});var Ge=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]]);return a};const Je=r.forwardRef((e,t)=>{var a,n,o,m,l;const{prefixCls:x,scrollNumberPrefixCls:p,children:h,status:u,text:d,color:b,count:v=null,overflowCount:f=99,dot:N=!1,size:y="default",title:s,offset:g,style:S,className:I,rootClassName:ge,classNames:w,styles:$,showZero:M=!1}=e,U=Ge(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","classNames","styles","showZero"]),{getPrefixCls:G,direction:Z,badge:c}=r.useContext(Q),C=G("badge",x),[J,be,fe]=Le(C),V=v>f?`${f}+`:v,z=V==="0"||V===0,pe=v===null||z&&!M,L=(u!=null||b!=null)&&pe,D=N&&!z,T=D?"":V,P=r.useMemo(()=>(T==null||T===""||z&&!M)&&!D,[T,z,M,D]),ee=r.useRef(v);P||(ee.current=v);const _=ee.current,te=r.useRef(T);P||(te.current=T);const q=te.current,oe=r.useRef(D);P||(oe.current=D);const A=r.useMemo(()=>{if(!g)return Object.assign(Object.assign({},c==null?void 0:c.style),S);const j={marginTop:g[1]};return Z==="rtl"?j.left=parseInt(g[0],10):j.right=-parseInt(g[0],10),Object.assign(Object.assign(Object.assign({},j),c==null?void 0:c.style),S)},[Z,g,S,c==null?void 0:c.style]),he=s??(typeof _=="string"||typeof _=="number"?_:void 0),ve=P||!d?null:r.createElement("span",{className:`${C}-status-text`},d),xe=!_||typeof _!="object"?void 0:de(_,j=>({style:Object.assign(Object.assign({},A),j.style)})),W=ce(b,!1),ye=O(w==null?void 0:w.indicator,(a=c==null?void 0:c.classNames)===null||a===void 0?void 0:a.indicator,{[`${C}-status-dot`]:L,[`${C}-status-${u}`]:!!u,[`${C}-color-${b}`]:W}),Y={};b&&!W&&(Y.color=b,Y.background=b);const ne=O(C,{[`${C}-status`]:L,[`${C}-not-a-wrapper`]:!h,[`${C}-rtl`]:Z==="rtl"},I,ge,c==null?void 0:c.className,(n=c==null?void 0:c.classNames)===null||n===void 0?void 0:n.root,w==null?void 0:w.root,be,fe);if(!h&&L){const j=A.color;return J(r.createElement("span",Object.assign({},U,{className:ne,style:Object.assign(Object.assign(Object.assign({},$==null?void 0:$.root),(o=c==null?void 0:c.styles)===null||o===void 0?void 0:o.root),A)}),r.createElement("span",{className:ye,style:Object.assign(Object.assign(Object.assign({},$==null?void 0:$.indicator),(m=c==null?void 0:c.styles)===null||m===void 0?void 0:m.indicator),Y)}),d&&r.createElement("span",{style:{color:j},className:`${C}-status-text`},d)))}return J(r.createElement("span",Object.assign({ref:t},U,{className:ne,style:Object.assign(Object.assign({},(l=c==null?void 0:c.styles)===null||l===void 0?void 0:l.root),$==null?void 0:$.root)}),h,r.createElement(je,{visible:!P,motionName:`${C}-zoom`,motionAppear:!1,motionDeadline:1e3},j=>{let{className:Ce}=j;var X,k;const Se=G("scroll-number",p),K=oe.current,Ne=O(w==null?void 0:w.indicator,(X=c==null?void 0:c.classNames)===null||X===void 0?void 0:X.indicator,{[`${C}-dot`]:K,[`${C}-count`]:!K,[`${C}-count-sm`]:y==="small",[`${C}-multiple-words`]:!K&&q&&q.toString().length>1,[`${C}-status-${u}`]:!!u,[`${C}-color-${b}`]:W});let H=Object.assign(Object.assign(Object.assign({},$==null?void 0:$.indicator),(k=c==null?void 0:c.styles)===null||k===void 0?void 0:k.indicator),A);return b&&!W&&(H=H||{},H.background=b),r.createElement(Ue,{prefixCls:Se,show:!P,motionClassName:Ce,className:Ne,count:q,title:he,style:H,key:"scrollNumber"},xe)}),ve))}),F=Je;F.Ribbon=Xe;function et({data:e=[]}){var n,o,m,l,x,p,h;console.log(e);const t=we(),a=u=>{switch(u){case"Info":return"bg-blue-500";case"Critical":return"bg-red-500";case"Warning":return"bg-yellow-500";default:return"bg-blue-500"}};return i.jsxs("div",{className:"w-full flex flex-col gap-4 p-4 pr-0 h-full pt-0",children:[i.jsxs("div",{id:"roomAlertHeader",className:`alert-header !h-[75px] flex justify-between items-center relative px-4 overflow-hidden rounded-lg ${a((n=B(e))==null?void 0:n.label)}`,children:[i.jsx("div",{className:"loader"}),i.jsxs("div",{className:"text-container flex flex-col gap-0 h-full justify-center text-white",children:[i.jsx("p",{className:"text-sm text-gray-100 m-0 font-medium",children:e.room_name}),i.jsx("h2",{className:"text-lg font-bold m-0 leading-none ",children:(o=B(e))==null?void 0:o.title})]}),i.jsx("span",{onClick:()=>{t(`/supporter/elderlies/elderly-profile/${e==null?void 0:e.elderly_id}`)},className:"text-sm text-gray-100 cursor-pointer p-3 py-2 bg-white/0 rounded-lg hover:bg-white/10 transition-all duration-300",children:"View Elderly"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-col gap-0 border-b border-gray-200 pb-2 ",children:[i.jsx("h2",{className:"text-lg font-bold m-0 leading-none",children:e.elderly_name}),i.jsx("p",{className:"text-sm text-gray-500 m-0",children:e.address})]}),i.jsx("div",{})]}),i.jsxs("div",{id:"roomMapAndDetails",className:"flex gap-4 h-full overflow-hidden",children:[i.jsxs("div",{className:"map-container w-2/3 border overflow-hidden h-full",children:[((m=e==null?void 0:e.rooms)==null?void 0:m.mount_type)===1&&((l=e==null?void 0:e.rooms)==null?void 0:l.is_device_bind)&&i.jsx(Te,{roomInfo:e==null?void 0:e.rooms}),((x=e==null?void 0:e.rooms)==null?void 0:x.mount_type)===2&&((p=e==null?void 0:e.rooms)==null?void 0:p.is_device_bind)&&i.jsx(Pe,{roomInfo:e==null?void 0:e.rooms}),!((h=e==null?void 0:e.rooms)!=null&&h.is_device_bind)&&i.jsx("span",{className:"w-full h-full flex items-center justify-center",children:i.jsx("p",{children:" No Device Data Available"})})]}),i.jsxs("div",{className:"details-container w-1/3 ",children:[i.jsxs("div",{className:"flex flex-col gap-0 p-3",children:[i.jsx("h2",{className:"text-xl font-bold m-0 leading-none",children:_e(e.created_at)}),i.jsx("p",{className:"text-sm text-gray-500 m-0 font-medium",children:"Time of Incident"})]}),i.jsxs("div",{className:"flex flex-col gap-0 p-3",children:[i.jsx("h2",{className:"text-xl font-bold m-0 leading-none",children:Re(e.created_at)}),i.jsx("p",{className:"text-sm text-gray-500 m-0 font-medium",children:"Alert Life"})]})]})]})]})}function at(){r.useState("All");const[e,t]=r.useState([]),[a,n]=r.useState(null),[o,m]=r.useState(null),[l,x]=r.useState(null),[p,h]=r.useState(!1),[u,d]=r.useState(1),b=r.useRef(null),v=r.useCallback(()=>{h(!0),Be({to_date:"2024-11-30",from_date:Oe().format("YYYY-MM-DD"),is_resolved:!1,limit:20,page:u,...l}).then(s=>{t(g=>[...g,...s.data]),h(!1)}).catch(s=>{console.error(s),h(!1)})},[l,u]);r.useEffect(()=>{v()},[u,l]),r.useEffect(()=>{if(e.length>0&&!a){const s=e[0];n(s._id),m(s)}},[e,a]);const f=s=>{n(s);const g=e.find(S=>S._id===s);m(g)},N=()=>{const{scrollTop:s,scrollHeight:g,clientHeight:S}=b.current;s+S>=g-10&&!p&&d(I=>I+1)},y=s=>{x(De(s)),d(1),t([])};return i.jsxs("div",{className:"w-full flex justify-center items-center h-[495px] overflow-hidden",children:[i.jsxs("div",{className:"w-[30%] flex flex-col gap-4 h-full",children:[i.jsx(ze,{style:{width:"100%"},block:!0,options:tt,onChange:s=>y(s)}),i.jsxs("div",{ref:b,className:"w-full overflow-auto",style:{height:"440px"},onScroll:N,children:[e.map(s=>{var g,S,I;return i.jsxs("div",{onClick:()=>f(s._id),className:`custom-tab-label flex justify-between items-center p-2.5 rounded-md cursor-pointer ${a===s._id?"bg-gray-100":""}`,children:[i.jsx("span",{className:"text-black font-semibold",children:s.room_name}),i.jsxs(Ee,{children:[((g=B(s))==null?void 0:g.label)==="Critical"&&i.jsx(F,{color:"red"}),((S=B(s))==null?void 0:S.label)==="Warning"&&i.jsx(F,{color:"orange"}),((I=B(s))==null?void 0:I.label)==="Info"&&i.jsx(F,{color:"blue"})]})]},s._id)}),p&&i.jsx("div",{className:"w-full flex justify-center py-4",children:i.jsx(Ie,{})}),!p&&e.length===0&&i.jsx(se,{description:"No active alerts available"})]})]}),i.jsx("div",{className:"w-[70%] h-full",children:o?i.jsx(et,{data:o}):i.jsx(se,{description:"Select an alert to view details"})})]})}const tt=[{label:"All",value:"All"},{label:"Critical",value:"Critical"},{label:"Warning",value:"Warning"},{label:"Info",value:"Info"}];export{at as R};
