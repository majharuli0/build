import{r as x,j as e,eQ as b,ai as v}from"./index-CbzTNhCW.js";import{u as g,D as j,a as w}from"./RoomMap4-CzzCDCDk.js";import{C as N}from"./UseCustomContext-bjOOqUUP.js";import{F as r}from"./index-DDIXiqx9.js";import"./oth-C9XVnuPJ.js";try{let n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},i=new n.Error().stack;i&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[i]="e7f0c4cb-5429-405c-850c-2561cca009ba",n._sentryDebugIdIdentifier="sentry-dbid-e7f0c4cb-5429-405c-850c-2561cca009ba")}catch{}function k(){var f;const n=x.useContext(N),{elderlyDetails:i}=n||{},u=i==null?void 0:i.deviceId,[m,h]=x.useState({});function p(s){return v(s)}return g({onMessage:s=>{var l;const o=(l=JSON.parse(s==null?void 0:s.message))==null?void 0:l.payload;if(o!=null&&o.deviceCode&&(o!=null&&o.position)){const c=p(o.position);h(d=>({...d,[o.deviceCode]:c}))}},dependencies:[u]}),e.jsx("div",{className:"flex flex-col gap-4 mt-6 overflow-hidden",children:(i==null?void 0:i.rooms)&&((f=i==null?void 0:i.rooms)==null?void 0:f.filter(s=>s.device_no).map((s,o)=>{var d;const c=(((d=s.device_no)==null?void 0:d.split(",").map(t=>t.trim()))||[]).flatMap(t=>m[t]||[]);return e.jsxs("div",{className:"flex flex-col gap-4 bg-white rounded-2xl p-4 h-[700px]",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s==null?void 0:s.name}),e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit z-50",children:[c.length>0&&e.jsx(b,{color:"white",overlayInnerStyle:{color:"black",padding:"10px"},title:c.map((t,a)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{style:{backgroundColor:t==null?void 0:t.color},className:"p-2 rounded-full",children:e.jsx(r,{size:14,color:"white"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm m-0",children:t==null?void 0:t.posture})})]},a)),children:e.jsx("div",{className:"flex -space-x-4 cursor-pointer",children:c.map((t,a)=>e.jsx("div",{style:{backgroundColor:t==null?void 0:t.color},className:"p-1 rounded-full border-2 border-white",children:e.jsx(r,{size:16,color:"white"})},a))})}),c.length===0&&e.jsx("div",{className:"bg-primary p-1 rounded-full border-2 border-white",children:e.jsx(r,{size:16,color:"white"})}),e.jsx("span",{className:"font-bold text-lg",children:c.length})]}),e.jsx("div",{id:"roomMap",className:"w-full h-full scale-[1.2] mt-14",children:(s==null?void 0:s.mount_type)===2?e.jsx(j,{roomInfo:s,position:c}):e.jsx(w,{roomInfo:s,position:c})})]})]},o)}))})}export{k as default};
//# sourceMappingURL=LiveMapTab-DqzKPYYA.js.map
