import{r as a,l as h,j as t,bI as g,ay as f,bJ as b}from"./index-UQ13cnrG.js";function w({report:s}){const[u,i]=a.useState(!1),r=h.get("mainRole"),[o,m]=a.useState((s==null?void 0:s.messages)||[]),[n,c]=a.useState(""),l=a.useRef(null),x=async()=>{const e={text:n,isInstaller:r==="installer",time:new Date().toISOString()};n.trim()&&await b(s==null?void 0:s._id,{text:n,isInstaller:r==="installer",time:new Date().toISOString()})&&(m([...o,e]),c(""))},p=()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)};return a.useEffect(()=>{p()},[o]),t.jsxs(t.Fragment,{children:[t.jsx(g,{size:26,onClick:()=>i(!0),className:"text-text-secondary cursor-pointer"}),t.jsx(f,{modalOPen:u,setModalOpen:i,onCancel:()=>i(!1),title:"Installation Reports",isBottomButtomShow:!1,children:t.jsxs("div",{id:"ReportChatContainer",className:"flex flex-col h-[500px] font-baloo",children:[t.jsx("div",{id:"chatViewArea",className:"flex-1 overflow-y-auto p-4 space-y-4",ref:l,children:o.map((e,d)=>t.jsxs("div",{className:`max-w-[70%] p-3 rounded-lg ${e.isInstaller?"ml-auto bg-[#6dc29a] text-white":"mr-auto bg-[#80CAA7]/10 text-text-primary"}`,children:[t.jsx("p",{className:"text-xs font-bold mb-1",children:r=="installer"?e.isInstaller?"You":"Manager":e.isInstaller?"Installer":"You"}),t.jsx("p",{className:"text-base mb-2",children:e.text}),t.jsx("p",{className:`text-sm  text-right ${e.isInstaller?"text-white":"text-primary"}`,children:new Date(e.time).toDateString()===new Date().toDateString()?new Date(e.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date(e.time).toLocaleString([],{hour:"2-digit",minute:"2-digit",year:"numeric",month:"numeric",day:"numeric"})})]},d))}),t.jsxs("div",{id:"chatInputArea",className:"flex p-4 pb-0 border-t",children:[t.jsx("input",{type:"text",value:n,onChange:e=>c(e.target.value),placeholder:"Type your message...",className:"py-[18px] px-4 text-text-primary placeholder:text-[#A3AED0] h-[50px]  rounded-[16px] w-full text-base outline-none   border-[1px] focus:border-primary rounded-r-none border-r-0",onKeyPress:e=>e.key==="Enter"&&x()}),t.jsx("button",{onClick:x,className:"bg-primary text-white px-8 py-2 rounded-r-[16px] hover:bg-primary focus:outline-none focus:ring-2 ",children:"Send"})]})]})})]})}export{w as R};
