import{e as ae,K as R,bs as ce,i as de,f as I,m as $e,r,n as Q,bt as ue,p as E,b2 as me,aZ as we,u as Oe,j as s,d as Ee,aE as Ie,S as ie,bu as Te}from"./index-DwMZRLJz.js";import{a as G}from"./ActiveAlertsCards--KcrB6as.js";import{D as De,a as Pe}from"./RoomMap4-B8pN2tLR.js";import{a as z,t as Ae,b as Be,g as Re}from"./helper-CkPZVUc-.js";import{g as _e}from"./elderlySupport-Bgys6Zk-.js";import{S as ze}from"./index-DavglImA.js";import{T as We}from"./index-BNwDzEER.js";const He=new R("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),Fe=new R("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),Me=new R("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),Ze=new R("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),Ve=new R("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),Le=new R("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),Ye=e=>{const{componentCls:t,iconCls:l,antCls:o,badgeShadowSize:n,textFontSize:c,textFontSizeSM:i,statusSize:h,dotSize:p,textFontWeight:v,indicatorHeight:m,indicatorHeightSM:d,marginXS:b,calc:g}=e,f=`${o}-scroll-number`,S=ce(e,(C,x)=>{let{darkColor:y}=x;return{[`&${t} ${t}-color-${C}`]:{background:y,[`&:not(${t}-count)`]:{color:y},"a:hover &":{background:y}}}});return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},de(e)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${t}-count`]:{display:"inline-flex",justifyContent:"center",zIndex:e.indicatorZIndex,minWidth:m,height:m,color:e.badgeTextColor,fontWeight:v,fontSize:c,lineHeight:I(m),whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:g(m).div(2).equal(),boxShadow:`0 0 0 ${I(n)} ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${t}-count-sm`]:{minWidth:d,height:d,fontSize:i,lineHeight:I(d),borderRadius:g(d).div(2).equal()},[`${t}-multiple-words`]:{padding:`0 ${I(e.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${t}-dot`]:{zIndex:e.indicatorZIndex,width:p,minWidth:p,height:p,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${I(n)} ${e.badgeShadowColor}`},[`${t}-count, ${t}-dot, ${f}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${l}-spin`]:{animationName:Le,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${t}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${t}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:h,height:h,verticalAlign:"middle",borderRadius:"50%"},[`${t}-status-success`]:{backgroundColor:e.colorSuccess},[`${t}-status-processing`]:{overflow:"visible",color:e.colorInfo,backgroundColor:e.colorInfo,borderColor:"currentcolor","&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:n,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:He,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${t}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${t}-status-error`]:{backgroundColor:e.colorError},[`${t}-status-warning`]:{backgroundColor:e.colorWarning},[`${t}-status-text`]:{marginInlineStart:b,color:e.colorText,fontSize:e.fontSize}}}),S),{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:Fe,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${t}-zoom-leave`]:{animationName:Me,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${t}-not-a-wrapper`]:{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:Ze,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${t}-zoom-leave`]:{animationName:Ve,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${t}-status)`]:{verticalAlign:"middle"},[`${f}-custom-component, ${t}-count`]:{transform:"none"},[`${f}-custom-component, ${f}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[f]:{overflow:"hidden",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack}`,[`${f}-only`]:{position:"relative",display:"inline-block",height:m,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${f}-only-unit`]:{height:m,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${f}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${t}-count, ${t}-dot, ${f}-custom-component`]:{transform:"translate(-50%, -50%)"}}})}},fe=e=>{const{fontHeight:t,lineWidth:l,marginXS:o,colorBorderBg:n}=e,c=t,i=l,h=e.colorBgContainer,p=e.colorError,v=e.colorErrorHover;return $e(e,{badgeFontHeight:c,badgeShadowSize:i,badgeTextColor:h,badgeColor:p,badgeColorHover:v,badgeShadowColor:n,badgeProcessingDuration:"1.2s",badgeRibbonOffset:o,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},be=e=>{const{fontSize:t,lineHeight:l,fontSizeSM:o,lineWidth:n}=e;return{indicatorZIndex:"auto",indicatorHeight:Math.round(t*l)-2*n,indicatorHeightSM:t,dotSize:o/2,textFontSize:o,textFontSizeSM:o,textFontWeight:"normal",statusSize:o/2}},qe=ae("Badge",e=>{const t=fe(e);return Ye(t)},be),Xe=e=>{const{antCls:t,badgeFontHeight:l,marginXS:o,badgeRibbonOffset:n,calc:c}=e,i=`${t}-ribbon`,h=`${t}-ribbon-wrapper`,p=ce(e,(v,m)=>{let{darkColor:d}=m;return{[`&${i}-color-${v}`]:{background:d,color:d}}});return{[h]:{position:"relative"},[i]:Object.assign(Object.assign(Object.assign(Object.assign({},de(e)),{position:"absolute",top:o,padding:`0 ${I(e.paddingXS)}`,color:e.colorPrimary,lineHeight:I(l),whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${i}-text`]:{color:e.colorTextLightSolid},[`${i}-corner`]:{position:"absolute",top:"100%",width:n,height:n,color:"currentcolor",border:`${I(c(n).div(2).equal())} solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter}}),p),{[`&${i}-placement-end`]:{insetInlineEnd:c(n).mul(-1).equal(),borderEndEndRadius:0,[`${i}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${i}-placement-start`]:{insetInlineStart:c(n).mul(-1).equal(),borderEndStartRadius:0,[`${i}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}},ke=ae(["Badge","Ribbon"],e=>{const t=fe(e);return Xe(t)},be),Ke=e=>{const{className:t,prefixCls:l,style:o,color:n,children:c,text:i,placement:h="end",rootClassName:p}=e,{getPrefixCls:v,direction:m}=r.useContext(Q),d=v("ribbon",l),b=`${d}-wrapper`,[g,f,S]=ke(d,b),C=ue(n,!1),x=E(d,`${d}-placement-${h}`,{[`${d}-rtl`]:m==="rtl",[`${d}-color-${n}`]:C},t),y={},w={};return n&&!C&&(y.background=n,w.color=n),g(r.createElement("div",{className:E(b,p,f,S)},c,r.createElement("div",{className:E(x,f),style:Object.assign(Object.assign({},y),o)},r.createElement("span",{className:`${d}-text`},i),r.createElement("div",{className:`${d}-corner`,style:w}))))},le=e=>{const{prefixCls:t,value:l,current:o,offset:n=0}=e;let c;return n&&(c={position:"absolute",top:`${n}00%`,left:0}),r.createElement("span",{style:c,className:E(`${t}-only-unit`,{current:o})},l)};function Ue(e,t,l){let o=e,n=0;for(;(o+10)%10!==t;)o+=l,n+=l;return n}const Ge=e=>{const{prefixCls:t,count:l,value:o}=e,n=Number(o),c=Math.abs(l),[i,h]=r.useState(n),[p,v]=r.useState(c),m=()=>{h(n),v(c)};r.useEffect(()=>{const g=setTimeout(m,1e3);return()=>clearTimeout(g)},[n]);let d,b;if(i===n||Number.isNaN(n)||Number.isNaN(i))d=[r.createElement(le,Object.assign({},e,{key:n,current:!0}))],b={transition:"none"};else{d=[];const g=n+10,f=[];for(let x=n;x<=g;x+=1)f.push(x);const S=f.findIndex(x=>x%10===i);d=f.map((x,y)=>{const w=x%10;return r.createElement(le,Object.assign({},e,{key:x,value:w,offset:y-S,current:y===S}))});const C=p<c?1:-1;b={transform:`translateY(${-Ue(i,n,C)}00%)`}}return r.createElement("span",{className:`${t}-only`,style:b,onTransitionEnd:m},d)};var Qe=function(e,t){var l={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(l[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(l[o[n]]=e[o[n]]);return l};const Je=r.forwardRef((e,t)=>{const{prefixCls:l,count:o,className:n,motionClassName:c,style:i,title:h,show:p,component:v="sup",children:m}=e,d=Qe(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),{getPrefixCls:b}=r.useContext(Q),g=b("scroll-number",l),f=Object.assign(Object.assign({},d),{"data-show":p,style:i,className:E(g,n,c),title:h});let S=o;if(o&&Number(o)%1===0){const C=String(o).split("");S=r.createElement("bdi",null,C.map((x,y)=>r.createElement(Ge,{prefixCls:g,count:Number(o),value:x,key:C.length-y})))}return i!=null&&i.borderColor&&(f.style=Object.assign(Object.assign({},i),{boxShadow:`0 0 0 1px ${i.borderColor} inset`})),m?me(m,C=>({className:E(`${g}-custom-component`,C==null?void 0:C.className,c)})):r.createElement(v,Object.assign({},f,{ref:t}),S)});var et=function(e,t){var l={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(l[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(l[o[n]]=e[o[n]]);return l};const tt=r.forwardRef((e,t)=>{var l,o,n,c,i;const{prefixCls:h,scrollNumberPrefixCls:p,children:v,status:m,text:d,color:b,count:g=null,overflowCount:f=99,dot:S=!1,size:C="default",title:x,offset:y,style:w,className:u,rootClassName:T,classNames:$,styles:j,showZero:D=!1}=e,J=et(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","classNames","styles","showZero"]),{getPrefixCls:ee,direction:V,badge:a}=r.useContext(Q),N=ee("badge",h),[te,ge,pe]=qe(N),L=g>f?`${f}+`:g,W=L==="0"||L===0,xe=g===null||W&&!D,Y=(m!=null||b!=null)&&xe,_=S&&!W,P=_?"":L,A=r.useMemo(()=>(P==null||P===""||W&&!D)&&!_,[P,W,D,_]),oe=r.useRef(g);A||(oe.current=g);const B=oe.current,ne=r.useRef(P);A||(ne.current=P);const q=ne.current,se=r.useRef(_);A||(se.current=_);const H=r.useMemo(()=>{if(!y)return Object.assign(Object.assign({},a==null?void 0:a.style),w);const O={marginTop:y[1]};return V==="rtl"?O.left=parseInt(y[0],10):O.right=-parseInt(y[0],10),Object.assign(Object.assign(Object.assign({},O),a==null?void 0:a.style),w)},[V,y,w,a==null?void 0:a.style]),he=x??(typeof B=="string"||typeof B=="number"?B:void 0),ve=A||!d?null:r.createElement("span",{className:`${N}-status-text`},d),ye=!B||typeof B!="object"?void 0:me(B,O=>({style:Object.assign(Object.assign({},H),O.style)})),F=ue(b,!1),Ce=E($==null?void 0:$.indicator,(l=a==null?void 0:a.classNames)===null||l===void 0?void 0:l.indicator,{[`${N}-status-dot`]:Y,[`${N}-status-${m}`]:!!m,[`${N}-color-${b}`]:F}),X={};b&&!F&&(X.color=b,X.background=b);const re=E(N,{[`${N}-status`]:Y,[`${N}-not-a-wrapper`]:!v,[`${N}-rtl`]:V==="rtl"},u,T,a==null?void 0:a.className,(o=a==null?void 0:a.classNames)===null||o===void 0?void 0:o.root,$==null?void 0:$.root,ge,pe);if(!v&&Y){const O=H.color;return te(r.createElement("span",Object.assign({},J,{className:re,style:Object.assign(Object.assign(Object.assign({},j==null?void 0:j.root),(n=a==null?void 0:a.styles)===null||n===void 0?void 0:n.root),H)}),r.createElement("span",{className:Ce,style:Object.assign(Object.assign(Object.assign({},j==null?void 0:j.indicator),(c=a==null?void 0:a.styles)===null||c===void 0?void 0:c.indicator),X)}),d&&r.createElement("span",{style:{color:O},className:`${N}-status-text`},d)))}return te(r.createElement("span",Object.assign({ref:t},J,{className:re,style:Object.assign(Object.assign({},(i=a==null?void 0:a.styles)===null||i===void 0?void 0:i.root),j==null?void 0:j.root)}),v,r.createElement(we,{visible:!A,motionName:`${N}-zoom`,motionAppear:!1,motionDeadline:1e3},O=>{let{className:Ne}=O;var k,K;const je=ee("scroll-number",p),U=se.current,Se=E($==null?void 0:$.indicator,(k=a==null?void 0:a.classNames)===null||k===void 0?void 0:k.indicator,{[`${N}-dot`]:U,[`${N}-count`]:!U,[`${N}-count-sm`]:C==="small",[`${N}-multiple-words`]:!U&&q&&q.toString().length>1,[`${N}-status-${m}`]:!!m,[`${N}-color-${b}`]:F});let M=Object.assign(Object.assign(Object.assign({},j==null?void 0:j.indicator),(K=a==null?void 0:a.styles)===null||K===void 0?void 0:K.indicator),H);return b&&!F&&(M=M||{},M.background=b),r.createElement(Je,{prefixCls:je,show:!A,motionClassName:Ne,className:Se,count:q,title:he,style:M,key:"scrollNumber"},ye)}),ve))}),Z=tt;Z.Ribbon=Ke;function ot({data:e=[]}){var o,n,c,i,h,p,v;console.log(e);const t=Oe(),l=m=>{switch(m){case"Info":return"bg-blue-500";case"Critical":return"bg-red-500";case"Warning":return"bg-yellow-500";default:return"bg-blue-500"}};return s.jsxs("div",{className:"w-full flex flex-col gap-4 p-4 pr-0 h-full pt-0",children:[s.jsxs("div",{id:"roomAlertHeader",className:`alert-header !h-[75px] flex justify-between items-center relative px-4 overflow-hidden rounded-lg ${l((o=z(e))==null?void 0:o.label)}`,children:[s.jsx("div",{className:"loader"}),s.jsxs("div",{className:"text-container flex flex-col gap-0 h-full justify-center text-white",children:[s.jsx("p",{className:"text-sm text-gray-100 m-0 font-medium",children:e.room_name}),s.jsx("h2",{className:"text-lg font-bold m-0 leading-none ",children:(n=z(e))==null?void 0:n.title})]}),s.jsx("span",{onClick:()=>{t(`/supporter/elderlies/elderly-profile/${e==null?void 0:e.elderly_id}`)},className:"text-sm text-gray-100 cursor-pointer p-3 py-2 bg-white/0 rounded-lg hover:bg-white/10 transition-all duration-300",children:"View Elderly"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-col gap-0 border-b border-gray-200 pb-2 ",children:[s.jsx("h2",{className:"text-lg font-bold m-0 leading-none",children:e.elderly_name}),s.jsx("p",{className:"text-sm text-gray-500 m-0",children:e.address})]}),s.jsx("div",{})]}),s.jsxs("div",{id:"roomMapAndDetails",className:"flex gap-4 h-full overflow-hidden",children:[s.jsxs("div",{className:"map-container w-2/3 border overflow-hidden h-full",children:[((c=e==null?void 0:e.rooms)==null?void 0:c.mount_type)===1&&((i=e==null?void 0:e.rooms)==null?void 0:i.is_device_bind)&&s.jsx(De,{roomInfo:e==null?void 0:e.rooms}),((h=e==null?void 0:e.rooms)==null?void 0:h.mount_type)===2&&((p=e==null?void 0:e.rooms)==null?void 0:p.is_device_bind)&&s.jsx(Pe,{roomInfo:e==null?void 0:e.rooms}),!((v=e==null?void 0:e.rooms)!=null&&v.is_device_bind)&&s.jsx("span",{className:"w-full h-full flex items-center justify-center",children:s.jsx("p",{children:" No Device Data Available"})})]}),s.jsxs("div",{className:"details-container w-1/3 ",children:[s.jsxs("div",{className:"flex flex-col gap-0 p-3",children:[s.jsx("h2",{className:"text-xl font-bold m-0 leading-none",children:Ae(e.created_at)}),s.jsx("p",{className:"text-sm text-gray-500 m-0 font-medium",children:"Time of Incident"})]}),s.jsxs("div",{className:"flex flex-col gap-0 p-3",children:[s.jsx("h2",{className:"text-xl font-bold m-0 leading-none",children:Be(e.created_at)}),s.jsx("p",{className:"text-sm text-gray-500 m-0 font-medium",children:"Alert Life"})]})]})]})]})}function ut({ViewFor:e=""}){const[t,l]=r.useState("All"),[o,n]=r.useState([]),[c,i]=r.useState(null),[h,p]=r.useState(null),[v,m]=r.useState(G),[d,b]=r.useState(null),[g,f]=r.useState(!0),S=r.useCallback(()=>{f(!0),_e({to_date:"2024-11-30",from_date:Ee().format("YYYY-MM-DD"),is_resolved:!1,limit:1e3,...d}).then(u=>{n(u.data),f(!1)}).catch(u=>{console.log(u),f(!1)})},[d]);r.useEffect(()=>{S()},[S]),r.useEffect(()=>{if(o.length>0&&!c){const u=o[0];i(u._id),p(u)}},[o,c]);const C=u=>{console.log(u),i(u);const T=o.find($=>$._id==u);p(T)},x=r.useCallback(u=>u==="All"?G:G.filter(T=>T.alertType===u),[]);r.useEffect(()=>{let u=x(t);e==="endUser"&&(u=u.slice(0,4)),m(u)},[t,x,e]);const y=o==null?void 0:o.map((u,T)=>{var $,j,D;return{label:s.jsxs("span",{className:"text-left w-full custom-tab-label flex justify-between items-center",children:[s.jsx("span",{className:"w-full text-black",children:u.room_name}),s.jsxs(Ie,{children:[(($=z(u))==null?void 0:$.label)==="Critical"&&s.jsx(Z,{color:"red"}),((j=z(u))==null?void 0:j.label)==="Warning"&&s.jsx(Z,{color:"orange"}),((D=z(u))==null?void 0:D.label)==="Info"&&s.jsx(Z,{color:"blue"})]})]}),key:u._id}});function w(u){console.log(u),b(Re(u))}return s.jsxs("div",{className:"w-full flex justify-center items-center h-[495px] overflow-hidden",children:[s.jsxs("div",{id:"RoomNameTabsAnt",className:"w-[30%] flex flex-col gap-4 h-full",children:[s.jsx(ze,{style:{width:"100%"},block:!0,options:nt,onChange:u=>w(u)}),!g&&s.jsx(We,{onChange:C,type:"card",tabPosition:"left",items:y,style:{width:"100%"},activeKey:c,tabBarGutter:8,tabBarStyle:{maxHeight:"460px",overflowY:"auto"}}),g&&s.jsx("span",{className:"w-full h-full flex items-center justify-center",children:s.jsx(ie,{})})]}),s.jsxs("div",{className:"w-[70%] h-full",children:[!g&&c&&s.jsx(ot,{data:h}),g&&s.jsx("span",{className:"w-full h-full flex items-center justify-center",children:s.jsx(ie,{})}),o.length===0&&s.jsx("div",{className:"w-full h-full flex items-center justify-start relative pl-28",children:s.jsx(Te,{description:s.jsx("span",{className:"text-center",children:"No active alert available"})})})]})]})}const nt=[{label:"All",value:"All"},{label:"Critical",value:"Critical"},{label:"Warning",value:"Warning"},{label:"Info",value:"Info"}];export{ut as R};
