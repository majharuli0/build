import{r as n,bZ as M,bW as Ce,dM as xe,da as ee,q as X,bU as ue,dN as Re,z,b4 as pe,dG as Ne,bY as Y,aZ as $,T as Ae}from"./index-gDHMON6F.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},o=new e.Error().stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="92df78b0-9f53-4ff6-9cfd-b05e287be3e6",e._sentryDebugIdIdentifier="sentry-dbid-92df78b0-9f53-4ff6-9cfd-b05e287be3e6")}catch{}var _e=n.forwardRef(function(e,o){var d=e.prefixCls,i=e.style,l=e.className,N=e.duration,g=N===void 0?4.5:N,p=e.showProgress,L=e.pauseOnHover,A=L===void 0?!0:L,F=e.eventKey,H=e.content,m=e.closable,C=e.closeIcon,P=C===void 0?"x":C,y=e.props,f=e.onClick,W=e.onNoticeClose,D=e.times,b=e.hovering,S=n.useState(!1),x=M(S,2),u=x[0],h=x[1],a=n.useState(0),t=M(a,2),c=t[0],r=t[1],R=n.useState(0),_=M(R,2),E=_[0],U=_[1],v=b||u,w=g>0&&p,O=function(){W(F)},q=function(s){(s.key==="Enter"||s.code==="Enter"||s.keyCode===Re.ENTER)&&O()};n.useEffect(function(){if(!v&&g>0){var I=Date.now()-E,s=setTimeout(function(){O()},g*1e3-E);return function(){A&&clearTimeout(s),U(Date.now()-I)}}},[g,v,D]),n.useEffect(function(){if(!v&&w&&(A||E===0)){var I=performance.now(),s,k=function ne(){cancelAnimationFrame(s),s=requestAnimationFrame(function(oe){var G=oe+E-I,j=Math.min(G/(g*1e3),1);r(j*100),j<1&&ne()})};return k(),function(){A&&cancelAnimationFrame(s)}}},[g,E,v,w,D]);var B=n.useMemo(function(){return Ce(m)==="object"&&m!==null?m:m?{closeIcon:P}:{}},[m,P]),te=xe(B,!0),Q=100-(!c||c<0?0:c>100?100:c),T="".concat(d,"-notice");return n.createElement("div",ee({},y,{ref:o,className:X(T,l,ue({},"".concat(T,"-closable"),m)),style:i,onMouseEnter:function(s){var k;h(!0),y==null||(k=y.onMouseEnter)===null||k===void 0||k.call(y,s)},onMouseLeave:function(s){var k;h(!1),y==null||(k=y.onMouseLeave)===null||k===void 0||k.call(y,s)},onClick:f}),n.createElement("div",{className:"".concat(T,"-content")},H),m&&n.createElement("a",ee({tabIndex:0,className:"".concat(T,"-close"),onKeyDown:q,"aria-label":"Close"},te,{onClick:function(s){s.preventDefault(),s.stopPropagation(),O()}}),B.closeIcon),w&&n.createElement("progress",{className:"".concat(T,"-progress"),max:"100",value:Q},Q+"%"))}),he=z.createContext({}),Oe=function(o){var d=o.children,i=o.classNames;return z.createElement(he.Provider,{value:{classNames:i}},d)},de=8,me=3,ye=16,we=function(o){var d={offset:de,threshold:me,gap:ye};if(o&&Ce(o)==="object"){var i,l,N;d.offset=(i=o.offset)!==null&&i!==void 0?i:de,d.threshold=(l=o.threshold)!==null&&l!==void 0?l:me,d.gap=(N=o.gap)!==null&&N!==void 0?N:ye}return[!!o,d]},Le=["className","style","classNames","styles"],Pe=function(o){var d=o.configList,i=o.placement,l=o.prefixCls,N=o.className,g=o.style,p=o.motion,L=o.onAllNoticeRemoved,A=o.onNoticeClose,F=o.stack,H=n.useContext(he),m=H.classNames,C=n.useRef({}),P=n.useState(null),y=M(P,2),f=y[0],W=y[1],D=n.useState([]),b=M(D,2),S=b[0],x=b[1],u=d.map(function(v){return{config:v,key:String(v.key)}}),h=we(F),a=M(h,2),t=a[0],c=a[1],r=c.offset,R=c.threshold,_=c.gap,E=t&&(S.length>0||u.length<=R),U=typeof p=="function"?p(i):p;return n.useEffect(function(){t&&S.length>1&&x(function(v){return v.filter(function(w){return u.some(function(O){var q=O.key;return w===q})})})},[S,u,t]),n.useEffect(function(){var v;if(t&&C.current[(v=u[u.length-1])===null||v===void 0?void 0:v.key]){var w;W(C.current[(w=u[u.length-1])===null||w===void 0?void 0:w.key])}},[u,t]),z.createElement(pe,ee({key:i,className:X(l,"".concat(l,"-").concat(i),m==null?void 0:m.list,N,ue(ue({},"".concat(l,"-stack"),!!t),"".concat(l,"-stack-expanded"),E)),style:g,keys:u,motionAppear:!0},U,{onAllRemoved:function(){L(i)}}),function(v,w){var O=v.config,q=v.className,B=v.style,te=v.index,Q=O,T=Q.key,I=Q.times,s=String(T),k=O,ne=k.className,oe=k.style,G=k.classNames,j=k.styles,ke=Ne(k,Le),ae=u.findIndex(function(V){return V.key===s}),J={};if(t){var Z=u.length-1-(ae>-1?ae:te-1),fe=i==="top"||i==="bottom"?"-50%":"0";if(Z>0){var re,se,ie;J.height=E?(re=C.current[s])===null||re===void 0?void 0:re.offsetHeight:f==null?void 0:f.offsetHeight;for(var ve=0,ce=0;ce<Z;ce++){var le;ve+=((le=C.current[u[u.length-1-ce].key])===null||le===void 0?void 0:le.offsetHeight)+_}var Se=(E?ve:Z*r)*(i.startsWith("top")?1:-1),Ee=!E&&f!==null&&f!==void 0&&f.offsetWidth&&(se=C.current[s])!==null&&se!==void 0&&se.offsetWidth?((f==null?void 0:f.offsetWidth)-r*2*(Z<3?Z:3))/((ie=C.current[s])===null||ie===void 0?void 0:ie.offsetWidth):1;J.transform="translate3d(".concat(fe,", ").concat(Se,"px, 0) scaleX(").concat(Ee,")")}else J.transform="translate3d(".concat(fe,", 0, 0)")}return z.createElement("div",{ref:w,className:X("".concat(l,"-notice-wrapper"),q,G==null?void 0:G.wrapper),style:Y(Y(Y({},B),J),j==null?void 0:j.wrapper),onMouseEnter:function(){return x(function(K){return K.includes(s)?K:[].concat($(K),[s])})},onMouseLeave:function(){return x(function(K){return K.filter(function(be){return be!==s})})}},z.createElement(_e,ee({},ke,{ref:function(K){ae>-1?C.current[s]=K:delete C.current[s]},prefixCls:l,classNames:G,styles:j,className:X(ne,m==null?void 0:m.notice),style:oe,times:I,key:T,eventKey:T,onNoticeClose:A,hovering:t&&S.length>0})))})},Ie=n.forwardRef(function(e,o){var d=e.prefixCls,i=d===void 0?"rc-notification":d,l=e.container,N=e.motion,g=e.maxCount,p=e.className,L=e.style,A=e.onAllRemoved,F=e.stack,H=e.renderNotifications,m=n.useState([]),C=M(m,2),P=C[0],y=C[1],f=function(t){var c,r=P.find(function(R){return R.key===t});r==null||(c=r.onClose)===null||c===void 0||c.call(r),y(function(R){return R.filter(function(_){return _.key!==t})})};n.useImperativeHandle(o,function(){return{open:function(t){y(function(c){var r=$(c),R=r.findIndex(function(U){return U.key===t.key}),_=Y({},t);if(R>=0){var E;_.times=(((E=c[R])===null||E===void 0?void 0:E.times)||0)+1,r[R]=_}else _.times=0,r.push(_);return g>0&&r.length>g&&(r=r.slice(-g)),r})},close:function(t){f(t)},destroy:function(){y([])}}});var W=n.useState({}),D=M(W,2),b=D[0],S=D[1];n.useEffect(function(){var a={};P.forEach(function(t){var c=t.placement,r=c===void 0?"topRight":c;r&&(a[r]=a[r]||[],a[r].push(t))}),Object.keys(b).forEach(function(t){a[t]=a[t]||[]}),S(a)},[P]);var x=function(t){S(function(c){var r=Y({},c),R=r[t]||[];return R.length||delete r[t],r})},u=n.useRef(!1);if(n.useEffect(function(){Object.keys(b).length>0?u.current=!0:u.current&&(A==null||A(),u.current=!1)},[b]),!l)return null;var h=Object.keys(b);return Ae.createPortal(n.createElement(n.Fragment,null,h.map(function(a){var t=b[a],c=n.createElement(Pe,{key:a,configList:t,placement:a,prefixCls:i,className:p==null?void 0:p(a),style:L==null?void 0:L(a),motion:N,onNoticeClose:f,onAllNoticeRemoved:x,stack:F});return H?H(c,{prefixCls:i,key:a}):c})),l)}),Me=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],De=function(){return document.body},ge=0;function Te(){for(var e={},o=arguments.length,d=new Array(o),i=0;i<o;i++)d[i]=arguments[i];return d.forEach(function(l){l&&Object.keys(l).forEach(function(N){var g=l[N];g!==void 0&&(e[N]=g)})}),e}function Fe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=e.getContainer,d=o===void 0?De:o,i=e.motion,l=e.prefixCls,N=e.maxCount,g=e.className,p=e.style,L=e.onAllRemoved,A=e.stack,F=e.renderNotifications,H=Ne(e,Me),m=n.useState(),C=M(m,2),P=C[0],y=C[1],f=n.useRef(),W=n.createElement(Ie,{container:P,ref:f,prefixCls:l,motion:i,maxCount:N,className:g,style:p,onAllRemoved:L,stack:A,renderNotifications:F}),D=n.useState([]),b=M(D,2),S=b[0],x=b[1],u=n.useMemo(function(){return{open:function(a){var t=Te(H,a);(t.key===null||t.key===void 0)&&(t.key="rc-notification-".concat(ge),ge+=1),x(function(c){return[].concat($(c),[{type:"open",config:t}])})},close:function(a){x(function(t){return[].concat($(t),[{type:"close",key:a}])})},destroy:function(){x(function(a){return[].concat($(a),[{type:"destroy"}])})}}},[]);return n.useEffect(function(){y(d())}),n.useEffect(function(){f.current&&S.length&&(S.forEach(function(h){switch(h.type){case"open":f.current.open(h.config);break;case"close":f.current.close(h.key);break;case"destroy":f.current.destroy();break}}),x(function(h){return h.filter(function(a){return!S.includes(a)})}))},[S]),[u,W]}export{_e as N,Oe as a,Fe as u};
//# sourceMappingURL=useNotification-BT4zYQxB.js.map
