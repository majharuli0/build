import{c0 as D,fd as ie,c2 as de,fe as k,ff as ue,fg as me,fh as fe,ab as G,cw as q,fi as xe,fj as he,fk as X,fl as ge,z as be,r as d,aw as Ce,_ as b,j as o,E as A,aA as E,ay as je,B as U,aL as w,a0 as pe,I as Q,aF as Se}from"./index-C-3yAPic.js";import{u as Te,d as ve,c as Be}from"./elderly-C2vF8vJF.js";import{C as ke}from"./UseCustomContext-yShnAv3k.js";import{R as ye}from"./PullRequestOutlined-BU04ux49.js";const ze=s=>{const t=s!=null&&s.algorithm?D(s.algorithm):D(k),r=Object.assign(Object.assign({},ie),s==null?void 0:s.token);return de(r,{override:s==null?void 0:s.token},t,ue)};function Ae(s){const{sizeUnit:t,sizeStep:r}=s,a=r-2;return{sizeXXL:t*(a+10),sizeXL:t*(a+6),sizeLG:t*(a+2),sizeMD:t*(a+2),sizeMS:t*(a+1),size:t*a,sizeSM:t*a,sizeXS:t*(a-1),sizeXXS:t*(a-1)}}const Ee=(s,t)=>{const r=t??k(s),a=r.fontSizeSM,m=r.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),Ae(t??s)),me(a)),{controlHeight:m}),fe(Object.assign(Object.assign({},r),{controlHeight:m})))},u=(s,t)=>new G(s).setAlpha(t).toRgbString(),C=(s,t)=>new G(s).lighten(t).toHexString(),we=s=>{const t=q(s,{theme:"dark"});return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[6],6:t[5],7:t[4],8:t[6],9:t[5],10:t[4]}},Oe=(s,t)=>{const r=s||"#000",a=t||"#fff";return{colorBgBase:r,colorTextBase:a,colorText:u(a,.85),colorTextSecondary:u(a,.65),colorTextTertiary:u(a,.45),colorTextQuaternary:u(a,.25),colorFill:u(a,.18),colorFillSecondary:u(a,.12),colorFillTertiary:u(a,.08),colorFillQuaternary:u(a,.04),colorBgSolid:u(a,.95),colorBgSolidHover:u(a,1),colorBgSolidActive:u(a,.9),colorBgElevated:C(r,12),colorBgContainer:C(r,8),colorBgLayout:C(r,0),colorBgSpotlight:C(r,26),colorBgBlur:u(a,.04),colorBorder:C(r,26),colorBorderSecondary:C(r,19)}},Ie=(s,t)=>{const r=Object.keys(xe).map(m=>{const h=q(s[m],{theme:"dark"});return new Array(10).fill(1).reduce((j,i,x)=>(j[`${m}-${x+1}`]=h[x],j[`${m}${x+1}`]=h[x],j),{})}).reduce((m,h)=>(m=Object.assign(Object.assign({},m),h),m),{}),a=t??k(s);return Object.assign(Object.assign(Object.assign({},a),r),he(s,{generateColorPalettes:we,generateNeutralColorPalettes:Oe}))};function Ne(){const[s,t,r]=be();return{theme:s,token:t,hashId:r}}const Me={defaultSeed:X.token,useToken:Ne,defaultAlgorithm:k,darkAlgorithm:Ie,compactAlgorithm:Ee,getDesignToken:ze,defaultConfig:X,_internalContext:ge};function Xe({setModalOpen:s,modalOpen:t,mode:r="create",diseases:a,custom_condition:m=[],elderly_id:h}){const{token:j}=Me.useToken(),{elderlyDetails:i,getElderlyDetails:x}=d.useContext(ke),[O,I]=d.useState((i==null?void 0:i.diseases)||[]);d.useRef((i==null?void 0:i.diseases)||[]);const[g,v]=d.useState(null),[y,J]=d.useState(!1),[N,Re]=d.useState(!1),[W,Y]=d.useState("");d.useState("");const[p,M]=d.useState(""),[B,R]=d.useState(""),[F,P]=d.useState(""),H=d.useRef(null),Z=d.useRef(null),V=d.useRef(null);d.useEffect(()=>{t||v([]),I(i==null?void 0:i.diseases),v(_(i==null?void 0:i.comments))},[t]),d.useEffect(()=>{v(_(i==null?void 0:i.comments))},[i]);const{register:Fe,handleSubmit:K,reset:ee,formState:{errors:Pe}}=Ce(),te=e=>{console.log("data==============>",e),console.log({...e,diseaseText:O,customText:g})},$=d.useCallback(e=>{Te({id:i==null?void 0:i._id,data:{diseases:e}}).then(()=>{b.custom(n=>o.jsx(A,{t:n,text:"Diseases have been updated!"})),x()}).catch(n=>{b.custom(l=>o.jsx(E,{t:l,title:"Error",text:n.message}))})},[i]),se=()=>r==="create"?"Create Health Condition":"Update Health Condition";d.useEffect(()=>{var e,n;y&&((e=H.current)==null||e.focus()),N&&((n=Z.current)==null||n.focus())},[y,N]);const oe=(e,n,l)=>{n(e.filter(c=>c!==l)),console.log(e.filter(c=>c!==l)),$(e.filter(c=>c!==l))},ne=(e,n,l)=>{n(e.filter(c=>c._id!==l._id)),ve({id:h,data:e,commentId:l._id}).then(c=>{b.custom(f=>o.jsx(A,{t:f,text:"Comment has been deleted!"})),x()}).catch(c=>{b.custom(f=>o.jsx(E,{t:f,title:"Error",text:c.message}))})},ae=(e,n)=>{n(e.target.value)};function re(){p&&B?(P(""),Be({id:h,data:{category:p,comment:B}}).then(e=>{b.custom(n=>o.jsx(A,{t:n,text:"Comment has been added!"})),x()}).catch(e=>{b.custom(n=>o.jsx(E,{t:n,title:"Error",text:e.message}))}),M(""),R("")):P("Please select category and write comment."),console.log(p,B)}const L=(e,n,l,c,f)=>{l&&e.indexOf(l)===-1&&n([...e,l]),$([...e,l]),c(!1),f("")},_=e=>{const n={};return e==null||e.forEach(l=>{const{category:c}=l;n[c]||(n[c]=[]),n[c].push(l)}),n},le=(e,n,l,c,f,S,z,ce="")=>o.jsx("div",{className:"w-fit flex flex-wrap gap-1 h-auto",children:o.jsxs(U,{theme:{token:{colorPrimary:"#8086AC",fontSize:"15px"}},children:[e==null?void 0:e.map((T,He)=>o.jsx(w,{closable:!0,color:"#7E60BF",onClose:()=>oe(e,n,T),children:T},T)),l?o.jsx(Q,{ref:f,type:"text",size:"small",style:{width:120,marginTop:8,paddingLeft:"10px"},value:S,onChange:T=>ae(T,z),onBlur:()=>L(e,n,S,c,z),onPressEnter:()=>L(e,n,S,c,z)}):ce!=="customText"&&o.jsxs(w,{onClick:()=>c(!0),style:{background:j.colorBgContainer,borderStyle:"dashed",marginTop:8},children:[o.jsx(ye,{})," Create New"]})]})});return o.jsx(je,{handleSubmit:K(te),modalOPen:t,setModalOpen:s,title:se(),buttonText:r==="create"?"Create":"Update",isBottomButtomShow:!1,onclose:()=>{ee()},children:o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4 flex flex-col gap-2",children:[o.jsxs("p",{className:"text-base font-semibold text-[#7E60BF] leading-none flex items-center gap-2",children:[o.jsx("div",{id:"dot",className:"w-2 h-2 bg-[#7E60BF] rounded-full"})," ","Diseases"]}),le(O||[],I,y,J,H,W,Y,"diseaseText")]}),g&&Object.keys(g).map((e,n)=>o.jsxs("div",{className:"mb-4",children:[o.jsxs("p",{className:`text-base font-semibold ${e==="Allergies"?"text-[#4ca6cf]":e==="Disabilities"?"text-[#f37f13]":"text-[#0a0a2b]"}  leading-none flex items-center gap-2 mb-2`,children:[o.jsx("div",{id:"dot",className:`w-2 h-2 ${e==="Allergy"?"bg-[#4ca6cf]":e==="Disability"?"bg-[#f37f13]":"bg-[#0a0a2b]"}  rounded-full`})," ",e]}),Array.isArray(g[e])?g[e].map((l,c)=>o.jsx(U,{theme:{token:{colorPrimary:"#8086AC",fontSize:"15px"}},children:o.jsx(w,{closable:!0,color:l.category==="Allergy"?"#4ca6cf":l.category==="Disability"?"#f37f13":"#0a0a2b",onClose:()=>ne(g[e],f=>{v(S=>({...S,[e]:f}))},l),children:l.comment})},c)):o.jsx("p",{children:"No items available for this category"})]},n)),o.jsxs("div",{className:"mb-4 flex flex-col gap-1",children:[o.jsx("h3",{children:"Add New Comments"}),o.jsx(pe,{placeholder:"Select a category",style:{width:"100%"},size:"large",onChange:M,value:p||null,options:[{value:"Allergy",label:"Allergy"},{value:"Disability",label:"Disability"},{value:"Custom Text",label:"Custom Text"}]}),o.jsxs("div",{className:"flex mb-2",children:[o.jsx(Q,{ref:V,value:B,onChange:e=>R(e.target.value),placeholder:"Enter comment",style:{flex:1,paddingLeft:"10px"}}),o.jsx(Se,{onClick:re,type:"primary",style:{marginLeft:8,backgroundColor:"#252f67",width:"100px"},children:"Add"})]}),F&&o.jsx("p",{className:"text-red-500",children:F})]})]})})}export{Xe as H};
