import{r as s,S as z,u as P,ap as T,j as t,i2 as $,i3 as O,de as V,df as W,cP as j,cR as N,i4 as Y,bg as K,dg as Q,bK as U,al as G,i as J,B as X,C as A,bf as q,g as Z,$ as w,as as ee,ce as te,az as ae}from"./index-Cuh2cJkw.js";try{let l=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},d=new l.Error().stack;d&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[d]="ca2c6375-3a73-44b8-9566-ff662af2c1d5",l._sentryDebugIdIdentifier="sentry-dbid-ca2c6375-3a73-44b8-9566-ff662af2c1d5")}catch{}function se(l){const{rolesFormatter:d}=s.useContext(z),i=P(),o=e=>{window.scrollTo(0,0),i(`/supporter/elderlies/elderly-profile/${e.elderly_id}?tab=overview`)},x={recentlyClosedAlertsTableData:["alertName","incidentTime","alertLifetime","alertStatus","closedAt","closedBy","largeText","action2"]},c={alertName:{title:"Title",render:e=>t.jsx(Q,{data:e})},alertType:{title:"Type",render:e=>t.jsx("span",{children:K(e)})},elderlyName:{title:"User Name",dataIndex:"elderly_name",render:e=>t.jsx("span",{children:e})},roomName:{title:"Room Name",dataIndex:"room_name",render:e=>t.jsx("span",{children:e})},incidentTime:{title:"Observation Time",dataIndex:"created_at",render:e=>t.jsx("span",{className:"text-nowrap",children:j(e)})},alertLifetime:{title:"Duration",render:e=>e!=null&&e.closed_at?t.jsx("span",{className:"text-nowrap",children:Y(e==null?void 0:e.created_at,e==null?void 0:e.closed_at)}):t.jsx(N,{date:e==null?void 0:e.created_at})},alertLife:{title:"Duration",dataIndex:"created_at",render:e=>t.jsx("span",{className:"text-nowrap",children:t.jsx(N,{date:e})})},alertStatus:{title:"Status",render:e=>e!=null&&e.closed_at?t.jsx("span",{className:"text-nowrap",children:e!=null&&e.status?"True Notification":"False Notification"}):t.jsx(t.Fragment,{children:"N/A"})},address:{title:"Address",width:"230px",render:e=>t.jsx("span",{className:"!w-[230px] text-nowrap",children:e.address})},closedAt:{title:"Closed At",render:e=>e!=null&&e.closed_at?t.jsx("span",{className:"text-nowrap",children:j(e==null?void 0:e.closed_at)}):t.jsx(t.Fragment,{children:"N/A"})},closedBy:{title:"Closed By",render:e=>e!=null&&e.closed_at?t.jsxs("span",{className:"text-nowrap",children:[e.closed_by," (",d[e.closed_by_role]," )"]}):t.jsx(t.Fragment,{children:"N/A"})},eventName:{title:"Event Name",dataIndex:"eventName",render:e=>t.jsx("span",{children:e})},eventTime:{title:"Event Time",dataIndex:"time",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},eventTimeline:{title:"Event Timeline",dataIndex:"alertLifetime",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},disabilityType:{title:"Disability Type",dataIndex:"disabilityType",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},hospital:{title:"Hospital",dataIndex:"hospital",render:e=>t.jsx("span",{className:"text-nowrap",children:e.name.length>20?`${e.name.substring(0,20)}...`:e.name})},largeText:{title:()=>{switch(l){case"events":return"Additional Info";case"recentlyClosedAlert":return"Comments";default:return""}},render:e=>e!=null&&e.closed_at?t.jsx(W,{data:e==null?void 0:e.comment,title:"Comment"}):"N/A"},expandColumn:T.EXPAND_COLUMN,viewElderly:{render:e=>t.jsxs("span",{onClick:()=>o(e),className:"flex items-center transition-all duration-300 justify-center gap-2 text-sm font-medium text-text-primary hover:text-primary cursor-pointer p-2 rounded-md  text-center hover:bg-slate-100",children:["View ",t.jsx(V,{})]})},action:{title:"Action",render:e=>t.jsx(O,{row:e})},action2:{align:"right",render:e=>t.jsx($,{row:e,onlyFall:!0})}},[u,n]=s.useState(void 0);return s.useEffect(()=>{{const e=x.recentlyClosedAlertsTableData.map(p=>c[p]);n(e)}},[]),u}function ie(){const[l,d]=s.useState(""),[i,o]=s.useState([]),[x,c]=s.useState(!1),u=se("recentlyClosedAlert"),{elderlyDetails:n}=s.useContext(U),[e,p]=s.useState([]),[h,f]=s.useState(1),[g,S]=s.useState(10),[_,I]=s.useState(0),[C,D]=s.useState(null),[E,y]=s.useState(!1),[b,H]=s.useState(null),m=s.useCallback(()=>{y(!0),G({to_date:"2024-11-30",from_date:J().format("YYYY-MM-DD"),is_resolved:b,lookup:!1,elderly_id:n==null?void 0:n._id,page:h,limit:g,...C}).then(a=>{I(a.total),y(!1),p(a.data)}).catch(a=>{console.log(a),y(!1)})},[h,g,C,b,n==null?void 0:n._id]);s.useEffect(()=>{m()},[m]);function L(a){D(te(a)),f(1)}const k=a=>{f(a.current),S(a.pageSize)},F=a=>ae(a).label,v=a=>{const r=F(a);return(r==="Critical"||r==="Warning")&&a.is_resolved===!1};e.filter(v).length;const M=()=>{c(!0)},R={selectedRowKeys:i,onChange:a=>o(a),getCheckboxProps:a=>({disabled:!v(a)})},B=a=>{H(a),f(1)};return t.jsxs("div",{id:"Elderlies",className:"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6 mt-6",children:[t.jsxs("div",{id:"Elderlies_Header",className:"w-full flex justify-between",children:[t.jsx("h1",{className:"text-[24px] font-bold",children:"Activities History"}),t.jsxs("div",{className:"flex gap-4 h-fit items-center",children:[i.length>0&&t.jsxs(X,{type:"primary",onClick:M,style:{backgroundColor:"#252F67",borderColor:"#252F67"},children:["Resolve (",i.length,")"]}),t.jsx(A,{theme:{},children:t.jsx(q,{size:"large",options:le,onChange:a=>L(a)})}),t.jsx(A,{theme:{token:{colorPrimary:"#8086AC"}},children:t.jsx(Z,{size:"large",style:{width:"120px",height:"40px",borderRadius:"10px !important"},onChange:(a,r)=>{B(a)},dropdownMatchSelectWidth:!1,placeholder:"Filter by Alert Status",value:b,options:[{label:"All Activity",value:null},{label:"Resolved",value:!0},{label:"Non-Resolved",value:!1}]})})]})]}),t.jsx(w.Provider,{value:{getLatestAlarmList:{getAlartsHistory:m}},children:t.jsx(A,{theme:{Table:{rowSelectedHoverBg:"#fff",rowSelectedBg:"#ba80f0"}},children:t.jsx(T,{rowSelection:R,columns:Array.isArray(u)?u:[],dataSource:e,rowKey:"_id",loading:E,pagination:{current:h,pageSize:g,total:_,showSizeChanger:!0,showQuickJumper:!0,showTotal:(a,r)=>`${r[0]}-${r[1]} of ${a} items`,pageSizeOptions:["10","20","50","100"]},onChange:k,locale:{emptyText:"No recent alerts"},className:"rounded-lg w-full",scroll:{x:700}})})}),t.jsx(ee,{openAlertCloseModal:x,setOpenAlertCloseModal:c,selectedAlert:i,getAlertListDatas:()=>{m(),o([])}})]})}const le=[{label:"All Activity",value:"All Activity"},{label:"Critical",value:"Critical"},{label:"Warning",value:"Warning"},{label:"Informational",value:"Info"}];export{le as alertHistorySegmentOptions,ie as default};
//# sourceMappingURL=AlertsHistoryTab-BdUJ4fHQ.js.map
