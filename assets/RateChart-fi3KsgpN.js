import{r as y,j as M,bq as k}from"./index-C2rC2gQB.js";import{E}from"./index-XCmpYI5h.js";function O(r){return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][r]}const P=({dateType:r,cheartInfo:s={},color:n,fromDate:c,toDate:f})=>{var p;const[v,D]=y.useState(!1);y.useEffect(()=>{D(!0)},[]);const A=y.useMemo(()=>{try{const{xdata:x,maxArray:W,minArray:z,allAvgNumber:h}=s,m=[],L=new Date(c),$=new Date(f),b=new Map;x.forEach((t,e)=>{const a=new Date(t).toISOString().split("T")[0];b.set(a,{min:z[e],max:W[e]})});const o=[];for(let t=new Date(L);t<=$;t.setDate(t.getDate()+1)){const e=t.toISOString().split("T")[0],a=b.get(e);if(r==="Month"){const i=t.getMonth()+1,l=t.getDate();m.push(`${i<10?"0"+i:i}-${l<10?"0"+l:l}`)}else m.push(O(t.getDay()===0?6:t.getDay()-1));o.push({min:a?a.min:null,max:a?a.max:null})}const g=o.filter(t=>t.min!==null&&t.max!==null),d=Math.min(...g.map(t=>t.min)),u=Math.max(...g.map(t=>t.max)),S=o.findIndex(t=>t.min===d),w=o.findIndex(t=>t.max===u);return{backgroundColor:"#fff",grid:{left:"2%",right:"7%",bottom:"4%",top:"20%",containLabel:!0},tooltip:{trigger:"axis",formatter:function(t){const e=t[0].axisValue,a=t[0].value[1],i=t[0].value[2];return`<span style="font-weight: bold;">Date: ${e}</span><br/><span >Max: ${i||"-"}</span><br/><span >Min: ${a||a>=0&&a!==null?a:"-"}</span>`}},xAxis:{type:"category",splitLine:{show:!1},axisTick:{show:!1},axisLine:{lineStyle:{color:"#ccc"}},axisLabel:{color:"#666"},data:m},yAxis:{type:"value",name:"BPM",nameLocation:"end",axisLine:{show:!1},axisLabel:{color:"#666"},splitLine:{lineStyle:{color:"#eee"}}},series:[{name:"Range",type:"custom",renderItem:(t,e)=>{const a=e.coord([e.value(0),e.value(1)]),l=e.coord([e.value(0),e.value(2)])[1]-a[1];return{type:"rect",shape:{x:a[0]-10,y:a[1],width:20,height:l,r:10},style:{fill:n,lineWidth:1}}},encode:{x:0,y:[1,2]},data:o.map((t,e)=>[e,t.min,t.max])},{name:"Average",type:"line",symbol:"none",lineStyle:{type:"dashed",width:1},markLine:{silent:!0,symbol:"none",data:[{yAxis:h,label:{show:!0,formatter:`Avg: ${h}`,position:"end",color:n},lineStyle:{color:n,width:1}}]}},{name:"Minimum",type:"pictorialBar",symbolSize:[15,15],symbolOffset:[0,-19],symbolPosition:"end",z:12,label:{normal:{show:!0,offset:[1,60],position:"top",fontSize:13,fontWeight:400,color:n,lineHeight:15,formatter:function(t){return`Min
${d}`}}},itemStyle:{borderColor:n,borderWidth:2,borderType:"solid"},color:"#fff",data:new Array(o.length).fill(null).map((t,e)=>({value:e===S?d:"-",symbolSize:[15,15],symbol:e===S?"circle":"none"}))},{name:"Maximum",type:"pictorialBar",symbolSize:[15,15],symbolOffset:[0,2],symbolPosition:"end",z:12,label:{normal:{show:!0,offset:[1,2],position:"top",fontSize:13,fontWeight:400,color:n,lineHeight:15,formatter:function(t){return`Max
${u}`}}},itemStyle:{borderColor:n,borderWidth:2,borderType:"solid"},color:"#fff",data:new Array(o.length).fill(null).map((t,e)=>({value:e===w?u:"-",symbolSize:[15,15],symbol:e===w?"circle":"none"}))}],legend:{data:["Average","Minimum","Maximum"],textStyle:{color:"#666"}}}}catch{return{backgroundColor:"#fff",title:{text:"No data available",show:!0,left:"center",top:"center",textStyle:{color:"#000",fontSize:"20px",fontWeight:400}}}}},[s,r,v,c,f,n]);return(p=s==null?void 0:s.xdata)!=null&&p.length?M.jsx(E,{option:A,notMerge:!0,style:{height:"300px",width:"100%",transition:"all 0.3s ease"}}):M.jsx(k,{description:"No data available to show"})};export{P as default};
