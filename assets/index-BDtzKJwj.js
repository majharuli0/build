import{a5 as U,W as D,r as l,N as R,u as x,a6 as u,a7 as p,L as t,j as E,a8 as I,a9 as L,aa as S}from"./index-CM8bo_fI.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new s.Error().stack;a&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[a]="40b57bb4-a9cb-4b23-8d2d-05f6ed885aa2",s._sentryDebugIdIdentifier="sentry-dbid-40b57bb4-a9cb-4b23-8d2d-05f6ed885aa2")}catch{}function C(){const s=U(),a=D(),{role:b}=a.state||{},[h,y]=l.useState(!0),{setStoreRole:_,setUser:k}=R(),r=x();let n=s.id.split("-");const[T,P]=l.useState(""),d=()=>{let e=t.get("user");const o=L();t.get("rootToken")||(t.set("rootToken",o),t.set("rootRole",e.role))},c=e=>{S(e)},g=l.useCallback(()=>{u({id:n[0]}).then(e=>{var o,f;(o=e==null?void 0:e.data)!=null&&o.role&&m((f=e==null?void 0:e.data)==null?void 0:f.role)}).catch(e=>{console.log(e)})},[]),m=l.useCallback(e=>{if(console.log(T),n.length>=2){p({id:n[0],params:{role:e==="nursing_home"?"nurse":"supports_agent"}}).then(o=>{i({...o.data,sub_role:"elderly"}),d(),c(o.data.access_token)}).catch(o=>{console.log(o)}),u({id:n[0]}).then(o=>{o.data.role!=="nursing_home"&&i({...o.data,sub_role:"elderly"})}).catch(o=>{console.log(o)});return}u({id:s.id}).then(o=>{i(o.data)}).catch(o=>{console.log(o)}),p({id:s.id}).then(o=>{d(),c(o.data.access_token)}).catch(o=>{console.log(o)})},[b,s.id]),w=e=>{e=="super_admin"?r("/support-agent/dashboard/"):e=="supports_agent"?r("/supporter/support-agent/dashboard"):e=="nurse"?r("/supporter/nurse/dashboard"):e=="end_user"?r("/supporter/end-user/dashboard"):e=="elderly"?r(`/supporter/elderlies/elderly-profile/${n[1]}?tab=overview`):r("/support-nurnt/dashboard")};function i(e){t.set("user",e),t.set("mainRole",e.role),t.set("role",e.role),_({role:e.role}),k({role:e.role}),setTimeout(()=>{y(!1),w((e==null?void 0:e.sub_role)||(e==null?void 0:e.role))},1500)}if(l.useEffect(()=>{g()},[g]),h)return E.jsx(I,{loaderTitle:"Loading User Profile"})}export{C as default};
//# sourceMappingURL=index-BDtzKJwj.js.map
