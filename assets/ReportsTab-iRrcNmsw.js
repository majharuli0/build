import{r as l,d as b,j as e,E as F,f5 as H,f6 as y,a3 as I}from"./index-gDHMON6F.js";import{h,E as L}from"./html2canvas.esm-B-H65Fe_.js";import"./FileSaver.min-D8nhuI-y.js";import N from"./DurationStatistic-BtpjY6rv.js";import Y from"./DurationDistribution-kW6Je336.js";import U from"./EfficiencyStatistic-0J4erB7Q.js";import V from"./DeepSleepPercentageDistribution-COJ01z7F.js";import G from"./DeepSleepPercentageStatistic-B_fSWlEC.js";import M from"./EfficiencyDistribution-DQ7bulDU.js";import $ from"./ApneaIndexStatistic-BVXubSFL.js";import z from"./NumberOfBedExitStatistic-BP2RGnhV.js";import _ from"./DistributionOfBedExitTimes-CXllL9g4.js";import Q from"./TimeToFallAsleepStatistic-Dktx-Jmn.js";import q from"./DistributionOfTimeToFallAsleep-DPOeqXzx.js";import K from"./DistributionOfDailyRoutine-iahHIR0l.js";import J from"./RespiratoryRate-DnCKZe0h.js";import X from"./HeartRate-1oBDYU-3.js";import Z from"./HeartRateAnnomalyStatistic-CbTWJN2G.js";import ee from"./HeartRateDistribution-Cbv27Jf9.js";import te from"./BreathRateDistribution-2KA5NKv6.js";import{C as S}from"./UseCustomContext-B_WDFCzc.js";import{C as D}from"./index-CETrtjml.js";import{C as v}from"./Collapse-BKTDhjUE.js";import"./mockData-CatUrcLT.js";import"./barChart-DlL3dTbW.js";import"./index-quZr3_jG.js";import"./helper-BjOOo2dJ.js";import"./Template-CGgJNH7E.js";import"./WeeklyMonthlyPicker-BJe2Kb7_.js";import"./utiles-j6oqm75Y.js";import"./index-DVOtUst9.js";import"./index-j4TdwsCJ.js";import"./index-CCW3BSdW.js";import"./index-DLdxqyDR.js";import"./index-QjEaHwl-.js";import"./scatterChart-CB3_NSgm.js";import"./RateChart-CrmZMsZh.js";import"./mockData-CpfNbFHP.js";import"./Cascader-Bekbr7WA.js";import"./index-5vF-L3UM.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},p=new s.Error().stack;p&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[p]="ef15c667-509e-415d-bf13-d81024bb8460",s._sentryDebugIdIdentifier="sentry-dbid-ef15c667-509e-415d-bf13-d81024bb8460")}catch{}const{RangePicker:ie}=I,{Panel:ae}=v,{SHOW_CHILD:re}=D;function ze(){const[s,p]=l.useState([]),[g,j]=l.useState(b().subtract(1,"day").format("YYYY-MM-DD")),[x,R]=l.useState(b().subtract(31,"day").format("YYYY-MM-DD")),[u,w]=l.useState([]),o=l.useRef(null),B=l.useContext(S),[T,n]=l.useState(!1),C=t=>{p(t),R(t[0]),j(t[1]),console.log(g,x)},k=async()=>{if(o.current){n(!0);try{const t=await h(o.current),i=document.createElement("a");i.href=t.toDataURL("image/png"),i.download="reports.png",i.click()}catch(t){console.error("Error exporting as image:",t)}finally{n(!1)}}},E=async()=>{if(o.current){n(!0);try{const t=await h(o.current,{scale:2,useCORS:!0}),i=t.toDataURL("image/png"),a=`
          <svg xmlns="http://www.w3.org/2000/svg" width="${t.width}" height="${t.height}">
            <image href="${i}" width="${t.width}" height="${t.height}" />
          </svg>
        `,m=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),c=URL.createObjectURL(m),r=document.createElement("a");r.href=c,r.download="reports.svg",r.click(),URL.revokeObjectURL(c)}catch(t){console.error("Error exporting as SVG:",t)}finally{n(!1)}}},P=async()=>{if(o.current){n(!0);try{const t=await h(o.current,{scale:2,useCORS:!0}),i=t.toDataURL("image/png"),a=new L("p","mm","a4"),m=a.internal.pageSize.getWidth(),c=a.internal.pageSize.getHeight(),r=m,f=t.height*r/t.width;let d=0;for(;d<f;)a.addImage(i,"PNG",0,d?-d:0,r,f),d+=c,d<f&&a.addPage();a.save("reports.pdf")}catch(t){console.error("Error exporting as PDF:",t)}finally{n(!1)}}},A=[{value:"sleep",label:"Sleep",children:[{label:"Sleep Duration Overview",value:"sleepDurationStatistic"},{label:"Sleep Duration Trends",value:"sleepDurationDistribution"},{label:"Sleep Quality Overview",value:"efficiencyStatistic"},{label:"Deep Sleep Proportion Trends",value:"deepSleepPercentageDistribution"},{label:"Deep Sleep Proportion Overview",value:"deepSleepPercentageStatistic"},{label:"Sleep Quality Trends",value:"efficiencyDistribution"},{label:"Sleep Disturbances Index Statistic",value:"apneaIndexStatistic"},{label:"Bed Exit Frequency Overview",value:"numberOfBedExitStatistic"},{label:"Bed Exit Times ",value:"distributionOfBedExitTimes"},{label:"Time to Fall Asleep Trends",value:"distributionOfTimeToFallAsleep"},{label:"Time to Fall Asleep Trends",value:"timeToFallAsleepStatistic"},{label:"Daily Routine Trends",value:"distributionOfDailyRoutine"}]},{value:"health",label:"Health",children:[{label:"Breath Rate",value:"respiratoryRate"},{label:"Heart Rate",value:"heartRate"},{label:"Heart Rate Variation Overview",value:"heartRateAnnomalyStatistic"},{label:"Heart Rate Trends",value:"heartRateDistribution"},{label:"Breathing Rate Trends",value:"breathRateDistribution"}]}],O=t=>{const i=t.map(a=>a[a.length-1]);console.log("Flattened selected values:",i),w(i)},W=t=>{if(u.length===0)return!0;const i=u.includes(t);return console.log(`Checking if ${t} is selected:`,i),i};return e.jsx(e.Fragment,{children:e.jsxs("div",{id:"reports",className:"flex flex-col gap-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:"Reports"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs(F,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:[e.jsx(ie,{showTime:!1,style:{width:"200px",borderRadius:"10px"},size:"large",placeholder:["Pick Data Range (Start)","End"],format:"YYYY-MM-DD",onChange:(t,i)=>{C(i)}}),e.jsx(D,{style:{width:"300px"},options:A,placeholder:"Select Specific Analysis",multiple:!0,maxTagCount:"responsive",size:"large",showCheckedStrategy:re,onChange:O,defaultValue:u})]}),e.jsxs(H.Button,{size:"large",style:{backgroundColor:"#fff",width:"fit-content",borderRadius:"10px"},loading:T,menu:{items:[{label:"Export as SVG",key:"1"},{label:"Export as PDF",key:"2"}],onClick:t=>{t.key==="1"?E():t.key==="2"&&P()},icon:e.jsx(y,{})},onClick:k,children:[e.jsx(y,{}),"Export Reports"]})]})]}),e.jsx(S.Provider,{value:{...B,chartFromDate:x,chartToDate:g},children:e.jsx("div",{id:"reports",ref:o,children:e.jsx(v,{defaultActiveKey:["0"],expandIconPosition:"right",children:se.map((t,i)=>e.jsx(ae,{style:{backgroundColor:"transparent"},header:e.jsxs("div",{className:"flex items-center justify-between",style:{border:"none",padding:0},children:[e.jsx("span",{children:t.groupName||"Unnamed Group"}),e.jsx("div",{className:"flex-grow mx-2",style:{borderBottom:"none"}})]}),children:e.jsx("div",{className:"gap-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2",children:t.components.map(({id:a,component:m,fullWidth:c},r)=>W(a)&&e.jsx("div",{className:c?"col-span-2":"",children:m},r))})},i))})})})]})})}const se=[{groupName:"Sleep",components:[{id:"sleepDurationStatistic",component:e.jsx(N,{isSummaryBtn:!1}),fullWidth:!1},{id:"sleepDurationDistribution",component:e.jsx(Y,{isSummaryBtn:!1}),fullWidth:!1},{id:"efficiencyStatistic",component:e.jsx(U,{isSummaryBtn:!1}),fullWidth:!1},{id:"deepSleepPercentageDistribution",component:e.jsx(V,{isSummaryBtn:!1}),fullWidth:!1},{id:"deepSleepPercentageStatistic",component:e.jsx(G,{isSummaryBtn:!1}),fullWidth:!1},{id:"efficiencyDistribution",component:e.jsx(M,{isSummaryBtn:!1}),fullWidth:!1},{id:"apneaIndexStatistic",component:e.jsx($,{isSummaryBtn:!1}),fullWidth:!1},{id:"numberOfBedExitStatistic",component:e.jsx(z,{isSummaryBtn:!1}),fullWidth:!1},{id:"distributionOfBedExitTimes",component:e.jsx(_,{isSummaryBtn:!1}),fullWidth:!0},{id:"timeToFallAsleepStatistic",component:e.jsx(Q,{isSummaryBtn:!1}),fullWidth:!1},{id:"distributionOfTimeToFallAsleep",component:e.jsx(q,{isSummaryBtn:!1}),fullWidth:!1},{id:"distributionOfDailyRoutine",component:e.jsx(K,{isSummaryBtn:!1}),fullWidth:!0}]},{groupName:"Health",components:[{id:"respiratoryRate",component:e.jsx(J,{isSummaryBtn:!1}),fullWidth:!0},{id:"heartRate",component:e.jsx(X,{isSummaryBtn:!1}),fullWidth:!0},{id:"heartRateAnnomalyStatistic",component:e.jsx(Z,{isSummaryBtn:!1}),fullWidth:!1},{id:"heartRateDistribution",component:e.jsx(ee,{isSummaryBtn:!1}),fullWidth:!1},{id:"breathRateDistribution",component:e.jsx(te,{isSummaryBtn:!1}),fullWidth:!1}]}];export{ze as default};
//# sourceMappingURL=ReportsTab-iRrcNmsw.js.map
