import{aA as Ae,aC as De,aE as A,r,aL as Ne,aw as ue,df as gt,ch as ft,da as st,fl as pt,au as xt,dH as bt,e2 as yt,dK as vt,dU as ze,c_ as qe,c$ as jt,d0 as wt,b4 as Ct,b2 as St,b3 as $t,eL as lt,d8 as we,aB as at,aH as Ge,at as ie,f8 as Nt,av as _t,e4 as Ot,ds as Bt,f0 as It,G as rt,j as t,aT as fe,fm as Xe,fn as Je,C as ot,eV as _e,az as re,fo as Ke,fp as Te,fq as Pt,fr as Tt,fs as kt,ft as Ht,af as me,ai as Me,fu as He,fi as Et,fv as At,fw as Dt,fx as zt,fy as je,ar as Ee,e as Ue,fz as Mt,fA as Rt}from"./index-D5gCK70O.js";import{C as it}from"./UseCustomContext-Bo2QbYRq.js";import"./helper-J11Qf81i.js";import{b as Ft,d as Wt,o as Lt,L as Ce,G as qt,a as ge,I as Re,R as Gt,T as Xt,S as ct}from"./oth-DG7TmWeK.js";import{S as Jt,c as Kt,a as Ut,b as Qt,R as Yt}from"./ArrowUpOutlined-BEdEn-D-.js";import{b as Zt,a as Vt}from"./index-BJIa03lH.js";import{G as en}from"./index-C5WJc6vF.js";import{S as Oe}from"./index-Dw-7ennj.js";import{T as Qe}from"./index-BTpPcZ0d.js";import"./index-D4sn5IYG.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new e.Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="0d9207f5-d25d-4604-803f-735404777dd0",e._sentryDebugIdIdentifier="sentry-dbid-0d9207f5-d25d-4604-803f-735404777dd0")}catch{}const Se=(e,n,s,a,l)=>({background:e,border:`${A(a.lineWidth)} ${a.lineType} ${n}`,[`${l}-icon`]:{color:s}}),tn=e=>{const{componentCls:n,motionDurationSlow:s,marginXS:a,marginSM:l,fontSize:c,fontSizeLG:x,lineHeight:i,borderRadiusLG:C,motionEaseInOutCirc:g,withDescriptionIconSize:o,colorText:d,colorTextHeading:p,withDescriptionPadding:w,defaultPadding:u}=e;return{[n]:Object.assign(Object.assign({},De(e)),{position:"relative",display:"flex",alignItems:"center",padding:u,wordWrap:"break-word",borderRadius:C,[`&${n}-rtl`]:{direction:"rtl"},[`${n}-content`]:{flex:1,minWidth:0},[`${n}-icon`]:{marginInlineEnd:a,lineHeight:0},"&-description":{display:"none",fontSize:c,lineHeight:i},"&-message":{color:p},[`&${n}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${s} ${g}, opacity ${s} ${g},
        padding-top ${s} ${g}, padding-bottom ${s} ${g},
        margin-bottom ${s} ${g}`},[`&${n}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${n}-with-description`]:{alignItems:"flex-start",padding:w,[`${n}-icon`]:{marginInlineEnd:l,fontSize:o,lineHeight:0},[`${n}-message`]:{display:"block",marginBottom:a,color:p,fontSize:x},[`${n}-description`]:{display:"block",color:d}},[`${n}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},nn=e=>{const{componentCls:n,colorSuccess:s,colorSuccessBorder:a,colorSuccessBg:l,colorWarning:c,colorWarningBorder:x,colorWarningBg:i,colorError:C,colorErrorBorder:g,colorErrorBg:o,colorInfo:d,colorInfoBorder:p,colorInfoBg:w}=e;return{[n]:{"&-success":Se(l,a,s,e,n),"&-info":Se(w,p,d,e,n),"&-warning":Se(i,x,c,e,n),"&-error":Object.assign(Object.assign({},Se(o,g,C,e,n)),{[`${n}-description > pre`]:{margin:0,padding:0}})}}},sn=e=>{const{componentCls:n,iconCls:s,motionDurationMid:a,marginXS:l,fontSizeIcon:c,colorIcon:x,colorIconHover:i}=e;return{[n]:{"&-action":{marginInlineStart:l},[`${n}-close-icon`]:{marginInlineStart:l,padding:0,overflow:"hidden",fontSize:c,lineHeight:A(c),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${s}-close`]:{color:x,transition:`color ${a}`,"&:hover":{color:i}}},"&-close-text":{color:x,transition:`color ${a}`,"&:hover":{color:i}}}}},ln=e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}),an=Ae("Alert",e=>[tn(e),nn(e),sn(e)],ln);var Ye=function(e,n){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(s[a[l]]=e[a[l]]);return s};const rn={success:bt,info:yt,error:vt,warning:ze},on=e=>{const{icon:n,prefixCls:s,type:a}=e,l=rn[a]||null;return n?pt(n,r.createElement("span",{className:`${s}-icon`},n),()=>({className:ue(`${s}-icon`,{[n.props.className]:n.props.className})})):r.createElement(l,{className:`${s}-icon`})},cn=e=>{const{isClosable:n,prefixCls:s,closeIcon:a,handleClose:l,ariaProps:c}=e,x=a===!0||a===void 0?r.createElement(xt,null):a;return n?r.createElement("button",Object.assign({type:"button",onClick:l,className:`${s}-close-icon`,tabIndex:0},c),x):null},dt=r.forwardRef((e,n)=>{const{description:s,prefixCls:a,message:l,banner:c,className:x,rootClassName:i,style:C,onMouseEnter:g,onMouseLeave:o,onClick:d,afterClose:p,showIcon:w,closable:u,closeText:f,closeIcon:v,action:E,id:k}=e,W=Ye(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[X,j]=r.useState(!1),P=r.useRef(null);r.useImperativeHandle(n,()=>({nativeElement:P.current}));const{getPrefixCls:B,direction:Q,alert:$}=r.useContext(Ne),T=B("alert",a),[Y,K,D]=an(T),R=M=>{var F;j(!0),(F=e.onClose)===null||F===void 0||F.call(e,M)},S=r.useMemo(()=>e.type!==void 0?e.type:c?"warning":"info",[e.type,c]),_=r.useMemo(()=>typeof u=="object"&&u.closeIcon||f?!0:typeof u=="boolean"?u:v!==!1&&v!==null&&v!==void 0?!0:!!($!=null&&$.closable),[f,v,u,$==null?void 0:$.closable]),L=c&&w===void 0?!0:w,se=ue(T,`${T}-${S}`,{[`${T}-with-description`]:!!s,[`${T}-no-icon`]:!L,[`${T}-banner`]:!!c,[`${T}-rtl`]:Q==="rtl"},$==null?void 0:$.className,x,i,D,K),G=gt(W,{aria:!0,data:!0}),U=r.useMemo(()=>{var M,F;return typeof u=="object"&&u.closeIcon?u.closeIcon:f||(v!==void 0?v:typeof($==null?void 0:$.closable)=="object"&&(!((M=$==null?void 0:$.closable)===null||M===void 0)&&M.closeIcon)?(F=$==null?void 0:$.closable)===null||F===void 0?void 0:F.closeIcon:$==null?void 0:$.closeIcon)},[v,u,f,$==null?void 0:$.closeIcon]),Z=r.useMemo(()=>{const M=u??($==null?void 0:$.closable);return typeof M=="object"?Ye(M,["closeIcon"]):{}},[u,$==null?void 0:$.closable]);return Y(r.createElement(ft,{visible:!X,motionName:`${T}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:M=>({maxHeight:M.offsetHeight}),onLeaveEnd:p},(M,F)=>{let{className:pe,style:ce}=M;return r.createElement("div",Object.assign({id:k,ref:st(P,F),"data-show":!X,className:ue(se,pe),style:Object.assign(Object.assign(Object.assign({},$==null?void 0:$.style),C),ce),onMouseEnter:g,onMouseLeave:o,onClick:d,role:"alert"},G),L?r.createElement(on,{description:s,icon:e.icon,prefixCls:T,type:S}):null,r.createElement("div",{className:`${T}-content`},l?r.createElement("div",{className:`${T}-message`},l):null,s?r.createElement("div",{className:`${T}-description`},s):null),E?r.createElement("div",{className:`${T}-action`},E):null,r.createElement(cn,{isClosable:_,prefixCls:T,closeIcon:U,handleClose:R,ariaProps:Z}))}))});function dn(e,n,s){return n=qe(n),jt(e,wt()?Reflect.construct(n,s||[],qe(e).constructor):n.apply(e,s))}let mn=function(e){function n(){var s;return $t(this,n),s=dn(this,n,arguments),s.state={error:void 0,info:{componentStack:""}},s}return Ct(n,e),St(n,[{key:"componentDidCatch",value:function(a,l){this.setState({error:a,info:l})}},{key:"render",value:function(){const{message:a,description:l,id:c,children:x}=this.props,{error:i,info:C}=this.state,g=(C==null?void 0:C.componentStack)||null,o=typeof a>"u"?(i||"").toString():a,d=typeof l>"u"?g:l;return i?r.createElement(dt,{id:c,type:"error",message:o,description:r.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},d)}):x}}])}(r.Component);const Be=dt;Be.ErrorBoundary=mn;const Ze=r.forwardRef((e,n)=>{const{open:s,draggingDelete:a}=e,l=r.useRef(null),c=s&&!a,x=r.useRef(null);function i(){we.cancel(x.current),x.current=null}function C(){x.current=we(()=>{var g;(g=l.current)===null||g===void 0||g.forceAlign(),x.current=null})}return r.useEffect(()=>(c?C():i(),i),[c,e.title]),r.createElement(lt,Object.assign({ref:st(l,n)},e,{open:c}))}),un=e=>{const{componentCls:n,antCls:s,controlSize:a,dotSize:l,marginFull:c,marginPart:x,colorFillContentHover:i,handleColorDisabled:C,calc:g,handleSize:o,handleSizeHover:d,handleActiveColor:p,handleActiveOutlineColor:w,handleLineWidth:u,handleLineWidthHover:f,motionDurationMid:v}=e;return{[n]:Object.assign(Object.assign({},De(e)),{position:"relative",height:a,margin:`${A(x)} ${A(c)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${A(c)} ${A(x)}`},[`${n}-rail`]:{position:"absolute",backgroundColor:e.railBg,borderRadius:e.borderRadiusXS,transition:`background-color ${v}`},[`${n}-track,${n}-tracks`]:{position:"absolute",transition:`background-color ${v}`},[`${n}-track`]:{backgroundColor:e.trackBg,borderRadius:e.borderRadiusXS},[`${n}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${n}-rail`]:{backgroundColor:e.railHoverBg},[`${n}-track`]:{backgroundColor:e.trackHoverBg},[`${n}-dot`]:{borderColor:i},[`${n}-handle::after`]:{boxShadow:`0 0 0 ${A(u)} ${e.colorPrimaryBorderHover}`},[`${n}-dot-active`]:{borderColor:e.dotActiveBorderColor}},[`${n}-handle`]:{position:"absolute",width:o,height:o,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:g(u).mul(-1).equal(),insetBlockStart:g(u).mul(-1).equal(),width:g(o).add(g(u).mul(2)).equal(),height:g(o).add(g(u).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:o,height:o,backgroundColor:e.colorBgElevated,boxShadow:`0 0 0 ${A(u)} ${e.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${v},
            inset-block-start ${v},
            width ${v},
            height ${v},
            box-shadow ${v},
            outline ${v}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:g(d).sub(o).div(2).add(f).mul(-1).equal(),insetBlockStart:g(d).sub(o).div(2).add(f).mul(-1).equal(),width:g(d).add(g(f).mul(2)).equal(),height:g(d).add(g(f).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${A(f)} ${p}`,outline:`6px solid ${w}`,width:d,height:d,insetInlineStart:e.calc(o).sub(d).div(2).equal(),insetBlockStart:e.calc(o).sub(d).div(2).equal()}}},[`&-lock ${n}-handle`]:{"&::before, &::after":{transition:"none"}},[`${n}-mark`]:{position:"absolute",fontSize:e.fontSize},[`${n}-mark-text`]:{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}},[`${n}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${n}-dot`]:{position:"absolute",width:l,height:l,backgroundColor:e.colorBgElevated,border:`${A(u)} solid ${e.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:e.dotActiveBorderColor}},[`&${n}-disabled`]:{cursor:"not-allowed",[`${n}-rail`]:{backgroundColor:`${e.railBg} !important`},[`${n}-track`]:{backgroundColor:`${e.trackBgDisabled} !important`},[`
          ${n}-dot
        `]:{backgroundColor:e.colorBgElevated,borderColor:e.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${n}-handle::after`]:{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:o,height:o,boxShadow:`0 0 0 ${A(u)} ${C}`,insetInlineStart:0,insetBlockStart:0},[`
          ${n}-mark-text,
          ${n}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${s}-tooltip-inner`]:{minWidth:"unset"}})}},mt=(e,n)=>{const{componentCls:s,railSize:a,handleSize:l,dotSize:c,marginFull:x,calc:i}=e,C=n?"paddingBlock":"paddingInline",g=n?"width":"height",o=n?"height":"width",d=n?"insetBlockStart":"insetInlineStart",p=n?"top":"insetInlineStart",w=i(a).mul(3).sub(l).div(2).equal(),u=i(l).sub(a).div(2).equal(),f=n?{borderWidth:`${A(u)} 0`,transform:`translateY(${A(i(u).mul(-1).equal())})`}:{borderWidth:`0 ${A(u)}`,transform:`translateX(${A(e.calc(u).mul(-1).equal())})`};return{[C]:a,[o]:i(a).mul(3).equal(),[`${s}-rail`]:{[g]:"100%",[o]:a},[`${s}-track,${s}-tracks`]:{[o]:a},[`${s}-track-draggable`]:Object.assign({},f),[`${s}-handle`]:{[d]:w},[`${s}-mark`]:{insetInlineStart:0,top:0,[p]:i(a).mul(3).add(n?0:x).equal(),[g]:"100%"},[`${s}-step`]:{insetInlineStart:0,top:0,[p]:a,[g]:"100%",[o]:a},[`${s}-dot`]:{position:"absolute",[d]:i(a).sub(c).div(2).equal()}}},hn=e=>{const{componentCls:n,marginPartWithMark:s}=e;return{[`${n}-horizontal`]:Object.assign(Object.assign({},mt(e,!0)),{[`&${n}-with-marks`]:{marginBottom:s}})}},gn=e=>{const{componentCls:n}=e;return{[`${n}-vertical`]:Object.assign(Object.assign({},mt(e,!1)),{height:"100%"})}},fn=e=>{const s=e.controlHeightLG/4,a=e.controlHeightSM/2,l=e.lineWidth+1,c=e.lineWidth+1*1.5,x=e.colorPrimary,i=new Ge(x).setAlpha(.2).toRgbString();return{controlSize:s,railSize:4,handleSize:s,handleSizeHover:a,dotSize:8,handleLineWidth:l,handleLineWidthHover:c,railBg:e.colorFillTertiary,railHoverBg:e.colorFillSecondary,trackBg:e.colorPrimaryBorder,trackHoverBg:e.colorPrimaryBorderHover,handleColor:e.colorPrimaryBorder,handleActiveColor:x,handleActiveOutlineColor:i,handleColorDisabled:new Ge(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexShortString(),dotBorderColor:e.colorBorderSecondary,dotActiveBorderColor:e.colorPrimaryBorder,trackBgDisabled:e.colorBgContainerDisabled}},pn=Ae("Slider",e=>{const n=at(e,{marginPart:e.calc(e.controlHeight).sub(e.controlSize).div(2).equal(),marginFull:e.calc(e.controlSize).div(2).equal(),marginPartWithMark:e.calc(e.controlHeightLG).sub(e.controlSize).equal()});return[un(n),hn(n),gn(n)]},fn),xn=r.createContext({});function ke(){const[e,n]=r.useState(!1),s=r.useRef(),a=()=>{we.cancel(s.current)},l=c=>{a(),c?n(c):s.current=we(()=>{n(c)})};return r.useEffect(()=>a,[]),[e,l]}var bn=function(e,n){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(s[a[l]]=e[a[l]]);return s};function yn(e,n){return e||e===null?e:n||n===null?n:s=>typeof s=="number"?s.toString():""}const ye=ie.forwardRef((e,n)=>{const{prefixCls:s,range:a,className:l,rootClassName:c,style:x,disabled:i,tooltipPrefixCls:C,tipFormatter:g,tooltipVisible:o,getTooltipPopupContainer:d,tooltipPlacement:p,tooltip:w={},onChangeComplete:u}=e,f=bn(e,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete"]),{vertical:v}=e,{direction:E,slider:k,getPrefixCls:W,getPopupContainer:X}=ie.useContext(Ne),j=ie.useContext(Nt),P=i??j,{handleRender:B,direction:Q}=ie.useContext(xn),T=(Q||E)==="rtl",[Y,K]=ke(),[D,R]=ke(),S=Object.assign({},w),{open:_,placement:L,getPopupContainer:se,prefixCls:G,formatter:U}=S,Z=_??o,M=(Y||D)&&Z!==!1,F=yn(U,g),[pe,ce]=ke(),ve=q=>{u==null||u(q),ce(!1)},le=(q,ne)=>q||(ne?T?"left":"right":"top"),h=W("slider",s),[y,V,ee]=pn(h),te=ue(l,k==null?void 0:k.className,c,{[`${h}-rtl`]:T,[`${h}-lock`]:pe},V,ee);T&&!f.vertical&&(f.reverse=!f.reverse),ie.useEffect(()=>{const q=()=>{we(()=>{R(!1)},1)};return document.addEventListener("mouseup",q),()=>{document.removeEventListener("mouseup",q)}},[]);const ae=a&&!Z,oe=B||((q,ne)=>{const{index:m}=ne,b=q.props;function N(O,H,de){var he,Ie,Le,Pe;de&&((Ie=(he=f)[O])===null||Ie===void 0||Ie.call(he,H)),(Pe=(Le=b)[O])===null||Pe===void 0||Pe.call(Le,H)}const I=Object.assign(Object.assign({},b),{onMouseEnter:O=>{K(!0),N("onMouseEnter",O)},onMouseLeave:O=>{K(!1),N("onMouseLeave",O)},onMouseDown:O=>{R(!0),ce(!0),N("onMouseDown",O)},onFocus:O=>{var H;R(!0),(H=f.onFocus)===null||H===void 0||H.call(f,O),N("onFocus",O,!0)},onBlur:O=>{var H;R(!1),(H=f.onBlur)===null||H===void 0||H.call(f,O),N("onBlur",O,!0)}}),z=ie.cloneElement(q,I),J=(!!Z||M)&&F!==null;return ae?z:ie.createElement(Ze,Object.assign({},S,{prefixCls:W("tooltip",G??C),title:F?F(ne.value):"",open:J,placement:le(L??p,v),key:m,overlayClassName:`${h}-tooltip`,getPopupContainer:se||d||X}),z)}),xe=ae?(q,ne)=>{const m=ie.cloneElement(q,{style:Object.assign(Object.assign({},q.props.style),{visibility:"hidden"})});return ie.createElement(Ze,Object.assign({},S,{prefixCls:W("tooltip",G??C),title:F?F(ne.value):"",open:F!==null&&M,placement:le(L??p,v),key:"tooltip",overlayClassName:`${h}-tooltip`,getPopupContainer:se||d||X,draggingDelete:ne.draggingDelete}),m)}:void 0,be=Object.assign(Object.assign({},k==null?void 0:k.style),x);return y(ie.createElement(Jt,Object.assign({},f,{step:f.step,range:a,className:te,style:be,disabled:P,ref:n,prefixCls:h,handleRender:oe,activeHandleRender:xe,onChangeComplete:ve})))}),vn=e=>{const{componentCls:n,calc:s}=e;return{[n]:Object.assign(Object.assign({},De(e)),{margin:0,padding:0,listStyle:"none",[`${n}-item`]:{position:"relative",margin:0,paddingBottom:e.itemPaddingBottom,fontSize:e.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:e.itemHeadSize,insetInlineStart:s(s(e.itemHeadSize).sub(e.tailWidth)).div(2).equal(),height:`calc(100% - ${A(e.itemHeadSize)})`,borderInlineStart:`${A(e.tailWidth)} ${e.lineType} ${e.tailColor}`},"&-pending":{[`${n}-item-head`]:{fontSize:e.fontSizeSM,backgroundColor:"transparent"},[`${n}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:e.itemHeadSize,height:e.itemHeadSize,backgroundColor:e.dotBg,border:`${A(e.dotBorderWidth)} ${e.lineType} transparent`,borderRadius:"50%","&-blue":{color:e.colorPrimary,borderColor:e.colorPrimary},"&-red":{color:e.colorError,borderColor:e.colorError},"&-green":{color:e.colorSuccess,borderColor:e.colorSuccess},"&-gray":{color:e.colorTextDisabled,borderColor:e.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:s(e.itemHeadSize).div(2).equal(),insetInlineStart:s(e.itemHeadSize).div(2).equal(),width:"auto",height:"auto",marginBlockStart:0,paddingBlock:e.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:s(s(e.fontSize).mul(e.lineHeight).sub(e.fontSize)).mul(-1).add(e.lineWidth).equal(),marginInlineStart:s(e.margin).add(e.itemHeadSize).equal(),marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${n}-item-tail`]:{display:"none"},[`> ${n}-item-content`]:{minHeight:s(e.controlHeightLG).mul(1.2).equal()}}},[`&${n}-alternate,
        &${n}-right,
        &${n}-label`]:{[`${n}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:s(e.marginXXS).mul(-1).equal(),"&-custom":{marginInlineStart:s(e.tailWidth).div(2).equal()}},"&-left":{[`${n}-item-content`]:{insetInlineStart:`calc(50% - ${A(e.marginXXS)})`,width:`calc(50% - ${A(e.marginSM)})`,textAlign:"start"}},"&-right":{[`${n}-item-content`]:{width:`calc(50% - ${A(e.marginSM)})`,margin:0,textAlign:"end"}}}},[`&${n}-right`]:{[`${n}-item-right`]:{[`${n}-item-tail,
            ${n}-item-head,
            ${n}-item-head-custom`]:{insetInlineStart:`calc(100% - ${A(s(s(e.itemHeadSize).add(e.tailWidth)).div(2).equal())})`},[`${n}-item-content`]:{width:`calc(100% - ${A(s(e.itemHeadSize).add(e.marginXS).equal())})`}}},[`&${n}-pending
        ${n}-item-last
        ${n}-item-tail`]:{display:"block",height:`calc(100% - ${A(e.margin)})`,borderInlineStart:`${A(e.tailWidth)} dotted ${e.tailColor}`},[`&${n}-reverse
        ${n}-item-last
        ${n}-item-tail`]:{display:"none"},[`&${n}-reverse ${n}-item-pending`]:{[`${n}-item-tail`]:{insetBlockStart:e.margin,display:"block",height:`calc(100% - ${A(e.margin)})`,borderInlineStart:`${A(e.tailWidth)} dotted ${e.tailColor}`},[`${n}-item-content`]:{minHeight:s(e.controlHeightLG).mul(1.2).equal()}},[`&${n}-label`]:{[`${n}-item-label`]:{position:"absolute",insetBlockStart:s(s(e.fontSize).mul(e.lineHeight).sub(e.fontSize)).mul(-1).add(e.tailWidth).equal(),width:`calc(50% - ${A(e.marginSM)})`,textAlign:"end"},[`${n}-item-right`]:{[`${n}-item-label`]:{insetInlineStart:`calc(50% + ${A(e.marginSM)})`,width:`calc(50% - ${A(e.marginSM)})`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${n}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}},jn=e=>({tailColor:e.colorSplit,tailWidth:e.lineWidthBold,dotBorderWidth:e.wireframe?e.lineWidthBold:e.lineWidth*3,dotBg:e.colorBgContainer,itemPaddingBottom:e.padding*1.25}),wn=Ae("Timeline",e=>{const n=at(e,{itemHeadSize:10,customHeadPaddingVertical:e.paddingXXS,paddingInlineEnd:2});return[vn(n)]},jn);var Cn=function(e,n){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(s[a[l]]=e[a[l]]);return s};const ut=e=>{var{prefixCls:n,className:s,color:a="blue",dot:l,pending:c=!1,position:x,label:i,children:C}=e,g=Cn(e,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:o}=r.useContext(Ne),d=o("timeline",n),p=ue(`${d}-item`,{[`${d}-item-pending`]:c},s),w=/blue|red|green|gray/.test(a||"")?void 0:a,u=ue(`${d}-item-head`,{[`${d}-item-head-custom`]:!!l,[`${d}-item-head-${a}`]:!w});return r.createElement("li",Object.assign({},g,{className:p}),i&&r.createElement("div",{className:`${d}-item-label`},i),r.createElement("div",{className:`${d}-item-tail`}),r.createElement("div",{className:u,style:{borderColor:w,color:w}},l),r.createElement("div",{className:`${d}-item-content`},C))};var Ve=function(e,n){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(s[a[l]]=e[a[l]]);return s};const Sn=e=>{var{prefixCls:n,className:s,pending:a=!1,children:l,items:c,rootClassName:x,reverse:i=!1,direction:C,hashId:g,pendingDot:o,mode:d=""}=e,p=Ve(e,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const w=(j,P)=>d==="alternate"?j==="right"?`${n}-item-right`:j==="left"?`${n}-item-left`:P%2===0?`${n}-item-left`:`${n}-item-right`:d==="left"?`${n}-item-left`:d==="right"?`${n}-item-right`:j==="right"?`${n}-item-right`:"",u=_t(c||[]),f=typeof a=="boolean"?null:a;a&&u.push({pending:!!a,dot:o||r.createElement(Ot,null),children:f}),i&&u.reverse();const v=u.length,E=`${n}-item-last`,k=u.filter(j=>!!j).map((j,P)=>{var B;const Q=P===v-2?E:"",$=P===v-1?E:"",{className:T}=j,Y=Ve(j,["className"]);return r.createElement(ut,Object.assign({},Y,{className:ue([T,!i&&a?Q:$,w((B=j==null?void 0:j.position)!==null&&B!==void 0?B:"",P)]),key:(j==null?void 0:j.key)||P}))}),W=u.some(j=>!!(j!=null&&j.label)),X=ue(n,{[`${n}-pending`]:!!a,[`${n}-reverse`]:!!i,[`${n}-${d}`]:!!d&&!W,[`${n}-label`]:W,[`${n}-rtl`]:C==="rtl"},s,x,g);return r.createElement("ul",Object.assign({},p,{className:X}),k)};function $n(e,n){return e&&Array.isArray(e)?e:Bt(n).map(s=>{var a,l;return Object.assign({children:(l=(a=s==null?void 0:s.props)===null||a===void 0?void 0:a.children)!==null&&l!==void 0?l:""},s.props)})}var Nn=function(e,n){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(e);l<a.length;l++)n.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(e,a[l])&&(s[a[l]]=e[a[l]]);return s};const ht=e=>{const{getPrefixCls:n,direction:s,timeline:a}=r.useContext(Ne),{prefixCls:l,children:c,items:x,className:i,style:C}=e,g=Nn(e,["prefixCls","children","items","className","style"]),o=n("timeline",l),d=It(o),[p,w,u]=wn(o,d),f=$n(x,c);return p(r.createElement(Sn,Object.assign({},g,{className:ue(a==null?void 0:a.className,i,u,d),style:Object.assign(Object.assign({},a==null?void 0:a.style),C),prefixCls:o,direction:s,items:f,hashId:w})))};ht.Item=ut;function _n(e){return rt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"},child:[]}]})(e)}const Fe="/assets/1-DbUCLJeK.png",On={0:{fill:"black",label:"Invalid Area",stroke:"darkred",icon:"oth"},1:{fill:"black",label:"Custom Area",stroke:"black",icon:"oth"},2:{fill:"black",label:"Bed",stroke:"darkblue",icon:"bed"},3:{fill:"black",label:"Interference Area",stroke:"darkorange",icon:"oth"},4:{fill:"black",label:"Door",stroke:"darkgreen",icon:"door"},5:{fill:"black",label:"Monitoring Bed",stroke:"darkpurple",icon:"bed"}},Bn=({objectData:e,scale:n,centerX:s,centerY:a,onUpdate:l,isSelected:c,onSelect:x})=>{const i=r.useRef(null),[C,g]=r.useState(null),[o,d]=r.useState(0),[p,w]=r.useState(0),[u,f]=r.useState(0),[v,E]=r.useState(0),k=r.useRef(),W=r.useRef(),{type:X}=e,j=On[X]||{fill:"lightgray",label:"Unknown",stroke:"gray",icon:"oth"};r.useEffect(()=>{k.current&&(d(k.current.getWidth()),w(k.current.getHeight()));const D=new window.Image;D.src=j.icon==="bed"?Ft:j.icon==="door"?Wt:Lt,D.onload=()=>{g(D),f(40),E(40)}},[j.icon]);const P=(D=[0,0])=>{const[R=0,S=0]=D;return[s-R*n,a+S*n]},B=[...P(e.up_left.split(",").map(Number)),...P(e.low_left.split(",").map(Number)),...P(e.low_right.split(",").map(Number)),...P([e.low_right.split(",").map(Number)[0],e.up_right.split(",").map(Number)[1]])],Q=D=>{const R=(D[0]+D[2]+D[4]+D[6])/4,S=(D[1]+D[3]+D[5]+D[7])/4;return{x:R,y:S}},{x:$,y:T}=Q(B),Y=D=>{c||x(),i.current=e},K=D=>{if(!c||!i.current)return;const R=D.target,S=R.x(),_=R.y(),L=Math.round(-S/n),se=Math.round(_/n);if(L===0&&se===0)return;const G=Z=>{const[M,F]=Z.split(",").map(Number);return`${M+L},${F+se}`},U={...i.current,up_left:G(i.current.up_left),low_left:G(i.current.low_left),up_right:G(i.current.up_right),low_right:G(i.current.low_right)};l(U),R.x(0),R.y(0)};return t.jsx(Ce,{children:t.jsxs(qt,{draggable:!0,onDragStart:Y,onDragMove:K,onClick:x,onTap:x,children:[t.jsx(ge,{points:B,closed:!0,fill:c?"rgba(0,0,0,0.4)":j.fill,stroke:c?"black":"",strokeWidth:c?2:0}),C&&t.jsx(Re,{ref:W,image:C,x:$-u/2,y:T-v/2,width:u,height:v}),t.jsx(Gt,{x:$-o/2-5,y:T-(p+60)/2-5,width:o+10,height:p+10,fill:"rgba(0, 0, 0, 0.7)",cornerRadius:4}),t.jsx(Xt,{ref:k,text:(e==null?void 0:e.label)||j.label,fontSize:14,fontStyle:"bold",fill:"white",x:$-o/2,y:T-(p+60)/2})]})})};function We(e){return fe({url:`/elderly/${e.elderly_id}/room-configuration/${e.room_id}`,method:"get",cancelToken:e.cancelToken})}function In(e){return fe({url:`/devices/${e.elderly_id}/rooms/${e.room_id}/object-areas`,method:"post",data:e.obj,cancelToken:e.cancelToken})}function Pn(e){return fe({url:`/devices/${e.elderly_id}/rooms/${e.room_id}/object-areas/${e.obj_id}`,method:"patch",data:e.obj,cancelToken:e.cancelToken})}function Tn(e){return fe({url:`/devices/${e.elderly_id}/rooms/${e.room_id}/object-areas/${e.obj_id}`,method:"delete",cancelToken:e.cancelToken})}function kn(e){return fe({url:`/elderly/${e.elderly_id}/mount/${e.room_id}`,method:"patch",data:e.data,cancelToken:e.cancelToken})}function Hn(e){return fe({url:`/devices/boundaries-area/${e.elderly_id}`,method:"patch",data:e.data,cancelToken:e.cancelToken})}function En(e){return fe({url:`/elderly/${e.elderly_id}/events`,method:"patch",data:e.data,cancelToken:e.cancelToken})}function An(e){return fe({url:`/elderly/${e.elderly_id}/events/${e.room_id}/${e.event_id}`,method:"patch",data:e.data,cancelToken:e.cancelToken})}const Dn={bedroom:[{type:2,label:"Single Bed",width:18,length:8,icon:t.jsx(Ke,{})},{type:2,label:"Double Bed",width:18,length:13,icon:t.jsx(Ke,{})},{type:4,label:"Door",width:10,length:3,icon:t.jsx(Te,{})},{type:1,label:"Others",width:10,length:10,icon:null}],livingroom:[{type:5,label:"Sofa",width:10,length:10,icon:t.jsx(Pt,{})},{type:6,label:"Table",width:10,length:10,icon:t.jsx(Tt,{})},{type:4,label:"Door",width:10,length:3,icon:t.jsx(Te,{})},{type:1,label:"Others",width:10,length:10,icon:null}],bathroom:[{type:7,label:"Tub",width:15,length:7.5,icon:t.jsx(kt,{})},{type:8,label:"Toilet",width:6,length:6,icon:t.jsx(Ht,{})},{type:4,label:"Door",width:10,length:3,icon:t.jsx(Te,{})},{type:1,label:"Others",width:10,length:10,icon:null}]},et=({template:e,isSelected:n,onSelect:s,children:a})=>t.jsxs("div",{onClick:s,style:{border:n?"2px solid #1B2559":"1px solid #d9d9d9",borderRadius:"8px",padding:"10px",width:"120px",height:"120px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:n?"#f2f3f5":"#fff",boxShadow:n?"0 4px 8px rgba(0, 0, 0, 0.1)":"none",textAlign:"center"},children:[e.icon&&t.jsx("span",{style:{fontSize:"30px",marginBottom:"8px"},children:e.icon}),t.jsx("div",{style:{fontWeight:"500",fontSize:"14px"},children:e.label}),e.label!=="Others"&&t.jsxs("div",{style:{fontSize:"12px",color:"#888",marginTop:"4px"},children:[e.width*10,"cm x ",e.length*10,"cm"]}),a]}),tt=({label:e,icon:n,value:s,onChange:a,max:l})=>t.jsxs("div",{style:{border:"1px solid #d9d9d9",borderRadius:"8px",padding:"15px",width:"180px",height:"150px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[t.jsx("span",{style:{fontSize:"40px",marginBottom:"10px"},children:n}),t.jsx("div",{style:{fontWeight:"500",fontSize:"16px",marginBottom:"10px"},children:e}),t.jsx(me,{type:"number",value:s,onChange:a,placeholder:`${e} (CM)`,min:1,max:l,style:{width:"100%",textAlign:"center",fontSize:"14px"}})]}),zn=({visible:e,onOk:n,onCancel:s,roomType:a,mountType:l})=>{const[c,x]=r.useState(1),[i,C]=r.useState(null),[g,o]=r.useState("horizontal"),[d,p]=r.useState(""),[w,u]=r.useState(""),f=()=>{c===1&&i&&x(2)},v=()=>{x(1),o("horizontal"),p(""),u("")},E=()=>{if(c===2){let j=i.width,P=i.length;i.label==="Others"||i.label==="Sofa"||i.label==="Table"?(j=parseInt(d)/10||10,P=parseInt(w)/10||10):g==="vertical"&&([j,P]=[P,j]),n({...i,width:j,length:P,orientation:g}),x(1),C(null),o("horizontal"),p(""),u("")}},k=l==="ceiling"?600:60,W=l==="ceiling"?400:40,X=[{label:"Horizontal",width:i==null?void 0:i.width,length:i==null?void 0:i.length,icon:t.jsx(Xe,{})},{label:"Vertical",width:i==null?void 0:i.length,length:i==null?void 0:i.width,icon:t.jsx(Je,{})}];return t.jsx(ot,{theme:{token:{colorPrimary:"#1B2559"}},children:t.jsx(_e,{visible:e,onOk:c===1?f:E,onCancel:s,okText:c===1?"Next":"Add",footer:null,centered:!0,width:500,bodyStyle:{height:"400px",padding:"20px",paddingTop:"0"},children:t.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative"},children:[t.jsxs("h2",{className:"text-xl font-bold pt-4 text-primary",children:["Add Object to ",a.charAt(0).toUpperCase()+a.slice(1)]}),t.jsx("div",{style:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",paddingBottom:"30px"},children:c===1?t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"10px",padding:"10px 0",maxWidth:"100%",alignItems:"center",justifyContent:"center",justifyItems:"center",alignContent:"center"},children:Dn[a].map((j,P)=>t.jsx(et,{template:j,isSelected:i===j,onSelect:()=>C(j)},P))}):i.label==="Others"||i.label==="Sofa"||i.label==="Table"?t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 180px)",gap:"20px"},children:[t.jsx(tt,{label:"Width",icon:t.jsx(Xe,{}),value:d,onChange:j=>p(j.target.value),max:k}),t.jsx(tt,{label:"Height",icon:t.jsx(Je,{}),value:w,onChange:j=>u(j.target.value),max:W})]}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 120px)",gap:"20px"},children:X.map((j,P)=>t.jsx(et,{template:j,isSelected:g===j.label.toLowerCase(),onSelect:()=>o(j.label.toLowerCase())},P))})}),t.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"10px"},children:[c===2&&t.jsx(re,{onClick:v,style:{width:"100px",borderColor:"#d9d9d9"},children:"Back"}),t.jsx(re,{onClick:c===1?f:E,disabled:c===1?!i:i.label==="Others"&&(!d||!w),style:{width:"100px",backgroundColor:"#1B2559",color:"#fff",border:"none"},children:c===1?"Next":"Add"})]})]})})})},{confirm:Mn}=_e,Rn={0:{label:"Invalid Area",icon:"oth"},1:{label:"Custom Area",icon:"oth"},2:{label:"Bed",icon:"bed"},3:{label:"Interference Area",icon:"oth"},4:{label:"Door",icon:"door"},5:{label:"Sofa",icon:"sofa"},6:{label:"Table",icon:"table"},7:{label:"Tub",icon:"tub"},8:{label:"Bathroom",icon:"bathroom"}},nt=({device_id:e,elderly_id:n,mountType:s="ceiling",roomType:a="bedroom"})=>{var xe,be,q,ne;const[l,c]=r.useState(null),[x,i]=r.useState(null),[C,g]=r.useState(!1),[o,d]=r.useState(null),[p,w]=r.useState(!1),[u,f]=r.useState(null),[v,E]=r.useState(!1),[k,W]=r.useState(null),[X,j]=r.useState(!1),[P,B]=r.useState({up_left:[0,0],low_left:[0,0],up_right:[0,0],low_right:[0,0]}),Q=700,$=500,T=Q/2,Y=s==="ceiling"?$/2:0,K=10,D={x:35*K,y:s==="ceiling"?25*K:0},R=r.useCallback(()=>{We({room_id:e,elderly_id:n}).then(m=>{d(m.data)}).catch(m=>console.log(m))},[e,n]);r.useEffect(()=>{R()},[R]);const S=(m=[0,0])=>{if(!Array.isArray(m)||m.length<2)throw new Error("Invalid input: coords must be an array with at least two elements.");const[b=0,N=0]=m;return[D.x-b*K,D.y+N*K]},[_,L]=r.useState(()=>{const m=localStorage.getItem("canvasObjects");return m?JSON.parse(m):(o==null?void 0:o.device_areas)||[]}),se=[...S(P.up_left),...S(P.low_left),...S(P.low_right),...S(P.up_right)],G=m=>{const b=[],[N,I,z,J]=[Math.min(...m.filter((O,H)=>H%2===0)),Math.max(...m.filter((O,H)=>H%2===0)),Math.min(...m.filter((O,H)=>H%2!==0)),Math.max(...m.filter((O,H)=>H%2!==0))];for(let O=z+10;O<J;O+=50)b.push([N,O,I,O]);for(let O=N+10;O<I;O+=50)b.push([O,z,O,J]);return b};r.useEffect(()=>{if(o!=null&&o.device_boundaries&&typeof o.device_boundaries=="object"){const b=Object.fromEntries(Object.entries(o.device_boundaries).reduce((N,[I,z])=>(I==="_id"||N.push([I,z.split(",").map(Number)]),N),[]));B(b)}else console.error("device_boundaries is undefined or not an object"),B({});const m=new window.Image;m.src=Fe,m.onload=()=>{W(m)}},[o]),r.useEffect(()=>{o!=null&&o.device_areas&&L(o.device_areas)},[o]),r.useEffect(()=>{l!==null&&l>=_.length&&(c(null),i(null))},[_.length,l]),r.useEffect(()=>{localStorage.setItem("canvasObjects",JSON.stringify(_))},[_]);const U=(m,b)=>{L(N=>{const I=N.map((z,J)=>J===m?{...z,...b}:z);return g(JSON.stringify(I[m])!==JSON.stringify(x)),I})},Z=async m=>{l!==null&&l!==m&&C&&(await oe({oktext:"Save Changes",canceltext:"Discard Changes",titles:"Save Changes!",description:"Please save changes after making any new changes or discard changes to proceed."})?await h():M()),c(m),i(_[m]),g(!1)},M=(m=!1)=>{l!==null&&(L(b=>{const N=b[l];if((N==null?void 0:N._id)===u||m)return f(null),b.filter((J,O)=>O!==l);const z=[...b];return z[l]=x,z}),g(!1),c(null),i(null))},F=()=>{const m=new Set(_.map(b=>parseInt(b.coordKey,10)).filter(b=>!isNaN(b)&&b>=0&&b<=15));for(let b=0;b<=15;b++)if(!m.has(b))return b;return null},pe=m=>{const b=F();if(b===null)return alert("Maximum 16 objects allowed (coordKey 0-15). Delete some objects first."),null;const{type:N,width:I,length:z,label:J}=m,O=I/2,H=z/2;return{_id:`temp-${Date.now()}`,type:N,width:I,length:z,label:J,up_left:`${-O},${H}`,up_right:`${O},${H}`,low_left:`${-O},${-H}`,low_right:`${O},${-H}`,coordKey:b.toString()}},ce=async()=>{if(u){oe({oktext:"Ok",titles:"Action Required!",description:"To proceed, please remove the existing object or save it first.",canceltext:" "});return}if(C)if(await oe({oktext:"Save Changes",canceltext:"Discard Changes",titles:"Save Changes!",description:"Please save changes after making any new changes or discard changes to proceed."}))try{await h()}catch{return}else M(!0);j(!0)},ve=m=>{console.log(m);const b=pe(m);b&&L(N=>{const I=[...N,b];return f(b._id),c(I.length-1),i(b),g(!0),I}),j(!1)},le=()=>{j(!1)},h=async()=>{if(ee)try{w(!0),await y(_[l]),i(_[l]),g(!1)}catch{alert("Save failed! Changes not preserved.")}finally{w(!1)}},y=async m=>{const b=m._id.startsWith("temp-"),N={elderly_id:n,room_id:o._id,obj:{coordKey:m.coordKey,type:m.type,uid:o==null?void 0:o.device_no,lowLeft:m.low_left,upLeft:m.up_left,upRight:m.up_right,lowRight:m.low_right,length:m.length,width:m.width}};b?await In(N).then(()=>{R(),f(null)}).catch(I=>{console.error("Error saving changes:",I),R()}):await Pn({...N,obj_id:m._id}).then(()=>{R()}).catch(I=>{console.error("Error saving changes:",I),R()})},V=async m=>{if(m._id===u){L(b=>b.filter(N=>N._id!==u)),f(null),g(!1),c(null),E(!1);return}(l===null||await oe({oktext:"Delete",canceltext:"Cancel"}))&&(E(!0),Tn({elderly_id:n,room_id:o._id,obj_id:m._id}).then(()=>{R(),c(null),i(null)}).catch(b=>{console.error("Error deleting object:",b)}).finally(()=>E(!1)))},ee=r.useMemo(()=>o!=null&&o.device_areas?JSON.stringify(_)!==JSON.stringify(o.device_areas):!1,[_,o==null?void 0:o.device_areas]),te=(m,b)=>{if(l===null)return;const N=parseInt(b)/10||0,I=_[l];let z={};if(m==="width"){const J=I.up_left.split(",").map(Number),O=I.up_right.split(",").map(Number),H=(O[0]+J[0])/2,de=H-N/2,he=H+N/2;z={width:N,up_left:`${Math.round(de)},${J[1]}`,up_right:`${Math.round(he)},${O[1]}`,low_left:`${Math.round(de)},${I.low_left.split(",")[1]}`,low_right:`${Math.round(he)},${I.low_right.split(",")[1]}`}}else{const J=I.up_left.split(",").map(Number),O=I.low_left.split(",").map(Number),H=(J[1]+O[1])/2,de=H+N/2,he=H-N/2;z={length:N,up_left:`${J[0]},${Math.round(de)}`,up_right:`${I.up_right.split(",")[0]},${Math.round(de)}`,low_left:`${O[0]},${Math.round(he)}`,low_right:`${I.low_right.split(",")[0]},${Math.round(he)}`}}U(l,z)},ae=m=>{if(l===null)return;const b=_[l],N=m==="left"?1:m==="right"?-1:0,I=m==="up"?-1:m==="down"?1:0,z=O=>{const[H,de]=O.split(",").map(Number);return`${H+N},${de+I}`},J={up_left:z(b.up_left),up_right:z(b.up_right),low_left:z(b.low_left),low_right:z(b.low_right)};U(l,J)},oe=({oktext:m="Confirm",canceltext:b="Cancel",titles:N="Delete Object!",description:I="Are you sure you want to delete this item?"})=>new Promise(z=>{Mn({title:N,icon:t.jsx(ze,{}),content:I,className:"mini-modal",centered:!0,okText:m,cancelText:b,okButtonProps:{style:{backgroundColor:m==="Delete"?"#ff4d4f":"#1B2559",color:"white"}},cancelButtonProps:{style:{backgroundColor:b==="Discard Changes"?"#ff4d4f":"#FAFAFA",border:"none",color:b==="Discard Changes"?"#fff":"#1B2559"}},onOk(){z(!0)},onCancel(){z(!1)}})});return t.jsx(Me,{tip:"Loading Objects...",spinning:!(o!=null&&o.device_areas)&&!(o!=null&&o.device_boundaries),children:t.jsxs("div",{className:"flex flex-col w-full h-full",children:[t.jsx("div",{className:"border-b border-b-slate-200 p-2 py-4",children:t.jsx(ot,{theme:{token:{colorPrimary:"#1B2559"}},children:t.jsxs("div",{className:"w-full flex items-center justify-between",children:[t.jsx("div",{children:t.jsx(Be,{message:s==="ceiling"?"Click or drag to edit the area!":"Click or drag to draw the area, click to edit the area, double-click to delete the area",type:"info",showIcon:!0})}),t.jsx("div",{className:"flex items-center justify-center gap-4",children:t.jsx("div",{className:"flex items-center gap-2",children:ee?t.jsx(re,{onClick:h,disabled:!ee,variant:"solid",color:"default",icon:t.jsx(He,{}),loading:p,size:"large",children:ee?"Save Changes":"No Changes"}):t.jsx(re,{onClick:ce,size:"large",variant:"solid",color:"default",disabled:p,icon:t.jsx(Et,{}),children:"Add Object"})})})]})})}),t.jsxs("div",{className:"flex items-start w-full h-full gap-4",children:[t.jsx("div",{className:"w-[70%] h-full flex items-center justify-center border-r border-r-slate-200 py-4",children:t.jsxs(ct,{width:Q,height:$,style:{background:"#F9F9F9"},children:[t.jsxs(Ce,{children:[t.jsx(ge,{points:[T,0,T,500],stroke:"black",strokeWidth:2,opacity:.1}),t.jsx(ge,{points:[0,Y,700,Y],stroke:"black",strokeWidth:2,opacity:.1}),t.jsx(ge,{points:se,closed:!0,stroke:"rgba(250, 181, 21, 1)",strokeWidth:2,dash:[10,5],fill:"#FFFFFF"}),G(se).map((m,b)=>t.jsx(ge,{points:m,stroke:"rgba(250, 181, 21, 1)",strokeWidth:1,dash:[2,3]},b))]}),_==null?void 0:_.map((m,b)=>t.jsx(Bn,{objectData:m,scale:K,centerX:T,centerY:Y,onUpdate:N=>U(b,N),isSelected:l===b,onSelect:()=>Z(b)},m._id||b)),t.jsx(Ce,{children:k&&t.jsx(Re,{image:k,x:D.x-50/2,y:D.y-50/2,width:50,height:50})})]})}),t.jsx("div",{className:"w-[30%] py-4 h-full",children:t.jsx(ht,{items:[{children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Object Info"}),t.jsxs("p",{className:"text-base",children:["Label:"," ",t.jsx("span",{className:"font-medium ml-2",children:_[l]&&Rn[(xe=_[l])==null?void 0:xe.type].label})]}),t.jsxs("p",{className:"text-base",children:["Type:"," ",t.jsx("span",{className:"font-medium ml-2",children:(be=_[l])==null?void 0:be.type})]})]})},{children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Adjust Object Size"}),t.jsxs("div",{className:"flex items-center gap-3 flex-col",children:[t.jsx(me,{type:"number",value:((q=_[l])==null?void 0:q.width)*10||0,onChange:m=>te("width",m.target.value),min:1,max:s==="ceiling"?600:60,size:"large",addonBefore:"Width (CM)",disabled:!_[l]}),t.jsx(me,{type:"number",value:((ne=_[l])==null?void 0:ne.length)*10||0,onChange:m=>te("length",m.target.value),min:1,max:s==="ceiling"?400:40,size:"large",addonBefore:"Length (CM)",disabled:!_[l]})]})]})},{children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Adjust Position"}),t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(re,{icon:t.jsx(Kt,{}),onClick:()=>ae("up"),disabled:!_[l],className:"flex items-center justify-center"}),t.jsxs("div",{className:"flex gap-10",children:[t.jsx(re,{icon:t.jsx(Ut,{}),onClick:()=>ae("left"),disabled:!_[l]}),t.jsx(re,{icon:t.jsx(Qt,{}),onClick:()=>ae("right"),disabled:!_[l]})]}),t.jsx(re,{icon:t.jsx(Yt,{}),onClick:()=>ae("down"),disabled:!_[l]}),t.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Adjust by"," ",s==="ceiling"?"100 centimeters":"1 decimeter"," ","per click"]})]})]})},{color:"red",children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Delete Object"}),t.jsx(re,{onClick:()=>V(_[l]),disabled:!_[l],className:"w-full",size:"large",color:"danger",variant:"dashed",loading:v,children:"Delete"})]})}]})})]}),t.jsx(zn,{visible:X,onOk:ve,onCancel:le,roomType:a,mountType:s})]})})};function Fn({elderly_id:e,device_id:n}){const[s,a]=r.useState(null),l=r.useCallback(()=>{We({room_id:n,elderly_id:e}).then(c=>{a(c.data)}).catch(c=>console.log(c))},[]);return r.useEffect(()=>{l()},[l]),t.jsx(Me,{tip:"Fetching Data...",spinning:!(s!=null&&s.mount_type),children:t.jsxs("div",{className:"min-h-[400px]",children:[s&&(s==null?void 0:s.mount_type)==2&&t.jsx(nt,{elderly_id:e,device_id:n,mountType:"wall",roomType:(s==null?void 0:s.room_type)===3?"bathroom":(s==null?void 0:s.room_type)===2?"bedroom":"livingroom"}),s&&(s==null?void 0:s.mount_type)==1&&t.jsx(nt,{elderly_id:e,device_id:n,mountType:"ceiling",roomType:(s==null?void 0:s.room_type)===3?"bathroom":(s==null?void 0:s.room_type)===2?"bedroom":"livingroom"})]})})}function $e(e){return rt({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"circle",attr:{fill:"#FFF59D",cx:"24",cy:"22",r:"20"},child:[]},{tag:"path",attr:{fill:"#FBC02D",d:"M37,22c0-7.7-6.6-13.8-14.5-12.9c-6,0.7-10.8,5.5-11.4,11.5c-0.5,4.6,1.4,8.7,4.6,11.3 c1.4,1.2,2.3,2.9,2.3,4.8V37h12v-0.1c0-1.8,0.8-3.6,2.2-4.8C35.1,29.7,37,26.1,37,22z"},child:[]},{tag:"path",attr:{fill:"#FFF59D",d:"M30.6,20.2l-3-2c-0.3-0.2-0.8-0.2-1.1,0L24,19.8l-2.4-1.6c-0.3-0.2-0.8-0.2-1.1,0l-3,2 c-0.2,0.2-0.4,0.4-0.4,0.7s0,0.6,0.2,0.8l3.8,4.7V37h2V26c0-0.2-0.1-0.4-0.2-0.6l-3.3-4.1l1.5-1l2.4,1.6c0.3,0.2,0.8,0.2,1.1,0 l2.4-1.6l1.5,1l-3.3,4.1C25.1,25.6,25,25.8,25,26v11h2V26.4l3.8-4.7c0.2-0.2,0.3-0.5,0.2-0.8S30.8,20.3,30.6,20.2z"},child:[]},{tag:"circle",attr:{fill:"#5C6BC0",cx:"24",cy:"44",r:"3"},child:[]},{tag:"path",attr:{fill:"#9FA8DA",d:"M26,45h-4c-2.2,0-4-1.8-4-4v-5h12v5C30,43.2,28.2,45,26,45z"},child:[]},{tag:"g",attr:{fill:"#5C6BC0"},child:[{tag:"path",attr:{d:"M30,41l-11.6,1.6c0.3,0.7,0.9,1.4,1.6,1.8l9.4-1.3C29.8,42.5,30,41.8,30,41z"},child:[]},{tag:"polygon",attr:{points:"18,38.7 18,40.7 30,39 30,37"},child:[]}]}]})(e)}const Wn="/assets/side-m-DV2wDhjh.png",Ln="/assets/top-m-C-v5QQhn.png",qn="/assets/height-m-V8IlAT5_.png",Gn="/assets/height-side-m-DB98vyQD.png",Xn="/assets/boundary-m-S7OQOcQo.png",Jn="/assets/boundary-side-m-CxG_Y0IS.png",Kn=({device_boundaries:e={},mountType:n=1})=>{const c={x:150,y:n===1?100:0},[x,i]=r.useState(null),[C,g]=r.useState({up_left:[0,0],low_left:[0,0],up_right:[0,0],low_right:[0,0]}),o=(p=[0,0])=>{if(!Array.isArray(p)||p.length<2)throw new Error("Invalid input: coords must be an array with at least two elements.");const[w=0,u=0]=p;return[c.x-w*5,c.y+u*5]},d=[...o(C.up_left),...o(C.low_left),...o(C.low_right),...o(C.up_right)];return r.useEffect(()=>{if(e&&typeof e=="object"){const w=Object.fromEntries(Object.entries(e).reduce((u,[f,v])=>(f==="_id"||(typeof v=="string"?u.push([f,v.split(",").map(Number)]):console.warn(`Skipping key "${f}" because value is not a string:`,v)),u),[]));g(w)}else console.error("device_boundaries is undefined or not an object",e),g({});const p=new window.Image;p.src=Fe,p.onload=()=>{i(p)}},[e]),t.jsxs(ct,{width:300,height:200,style:{background:"#F9F9F9",width:"fit-content",scale:"1.2"},children:[t.jsxs(Ce,{children:[Array.from({length:Math.floor(200/25)+1}).map((p,w)=>t.jsx(ge,{points:[0,w*25,300,w*25],stroke:"rgba(0,0,0,0.1)",strokeWidth:1},`h-grid-${w}`)),Array.from({length:Math.floor(300/25)+1}).map((p,w)=>t.jsx(ge,{points:[w*25,0,w*25,200],stroke:"rgba(0,0,0,0.1)",strokeWidth:1},`v-grid-${w}`)),t.jsx(ge,{points:d,closed:!0,stroke:"#FAB515",strokeWidth:2,dash:[5,3],fill:"rgba(250, 181, 21, 0.2)"})]}),t.jsx(Ce,{children:x&&t.jsx(Re,{image:x,x:c.x-30/2,y:c.y-30/2,width:30,height:30})})]})},{confirm:Un}=_e;function Qn({elderly_id:e,device_id:n}){const[s,a]=r.useState({}),l=r.useRef({installationHeight:(s==null?void 0:s.height)??null,mountType:(s==null?void 0:s.mountType)??null,boundary:{},parameters:null,status:null});r.useState(!1);const[c,x]=r.useState(null),[i,C]=r.useState(!1),[g,o]=r.useState(!1);r.useState(!1);const[d,p]=r.useState(!1),[w,u]=r.useState(!1),[f,v]=r.useState(!1),[E,k]=r.useState(0),[W,X]=r.useState(!1),[j,P]=r.useState({}),[B,Q]=r.useState({}),[$,T]=r.useState({}),[Y,K]=r.useState(!1);r.useState(!1),r.useState(null);const[D,R]=r.useState(),[S,_]=r.useState({left:0,right:0,top:0,bottom:0}),[L,se]=r.useState(0),[G,U]=r.useState(null),[Z,M]=r.useState(null);r.useEffect(()=>{console.log("Parameters changed:",j)},[j]),r.useEffect(()=>{R([{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(At,{}),"Installation"]}),key:0,children:t.jsx(Yn,{initialValues:l&&l.current,currentValues:Q,onChange:h=>{Q(y=>({...y,...h}))}},l.current.mountType)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(Zt,{}),"Fall"]}),key:1,children:t.jsx(Zn,{initialValues:l&&l.current.parameters,currentValues:j,onChange:h=>{P(y=>({...y,...h})),U({...h,event:"2"})}},l.current.parameters)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(en,{}),"Sleep"]}),key:2,children:t.jsx(Vn,{initialValues:l&&l.current.parameters,currentValues:j,status:l&&l.current.status,onStatusChange:h=>{T(y=>({...y,[h.event]:h.status})),M(h)},onChange:h=>{P(y=>({...y,...h})),U({...h,event:"3"})}},l.current.parameters)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(Vt,{}),"Off-Bed"]}),key:3,children:t.jsx(es,{initialValues:l&&l.current.parameters,currentValues:j,status:l&&l.current.status,onStatusChange:h=>{T(y=>({...y,[h.event]:h.status})),M(h)},onChange:h=>{P(y=>({...y,...h})),U({...h,event:"6"})}},l.current.parameters)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(Dt,{}),"Stay"]}),key:4,children:t.jsx(ts,{initialValues:l&&l.current.parameters,currentValues:j,status:l&&l.current.status,onStatusChange:h=>{T(y=>({...y,[h.event]:h.status})),M(h)},onChange:h=>{P(y=>({...y,...h})),U({...h,event:"9"})}},l.current.parameters)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(zt,{}),"Activity"]}),key:5,children:t.jsx(ns,{status:l&&l.current.status,onStatusChange:h=>{T(y=>({...y,[h.event]:h.status})),M(h)}},l.current.parameters)}])},[s]);const F=async h=>{W?await pe({oktext:"Save Changes",canceltext:"Discard Chnages",titles:"Save Changes!",description:"Please save changes after making any new changes or discard changes to procced."})?(ce(),k(h)):(k(h),X(null)):k(h)},pe=({oktext:h="Confirm",canceltext:y="Cancel",titles:V="Delete Object!",description:ee="Are you sure you want to delete this item?"})=>new Promise(te=>{Un({title:V,icon:t.jsx(ze,{}),content:ee,className:"mini-modal",centered:!0,okText:h,cancelText:y,okButtonProps:{style:{backgroundColor:h=="Delete"?"#ff4d4f":"#1B2559",color:"white"}},cancelButtonProps:{style:{backgroundColor:y==="Discard Chnages"?"#ff4d4f":"#FAFAFA",border:"none",color:y==="Discard Chnages"?"#fff":"#1B2559"}},onOk(){te(!0)},onCancel(){te(!1)}})}),ce=()=>{u(!0),G&&En({elderly_id:e,data:{uid:s.device_no,...G}}).then(()=>{le(),U(null)}).catch(h=>{console.error(h)}).finally(()=>{u(!1)}),Z&&An({elderly_id:e,room_id:s==null?void 0:s._id,event_id:Z.event,data:{status:Z.status}}).then(()=>{le(),M(null)}).catch(h=>{console.error(h)}).finally(()=>{u(!1)}),B&&kn({room_id:n,elderly_id:e,data:{uid:s.device_no,height:(B==null?void 0:B.installation_height)*10,mount_type:B==null?void 0:B.mount_type,scene:"1"}}).then(()=>{C(!1),o(!1)}).catch(h=>{console.error(h)}).finally(()=>{le(),u(!1)})};r.useEffect(()=>{const h=l.current.parameters&&JSON.stringify(j)!==JSON.stringify(l.current.parameters),y=l.current.status&&JSON.stringify($)!==JSON.stringify(l.current.status);X(y||h);const V=l.current.installationHeight&&B.installation_height!==l.current.installationHeight,ee=l.current.mountType&&B.mount_type!==l.current.mountType;console.log(B,l.current),X(y||h||V||ee)},[j,$,B]),r.useEffect(()=>{const h=JSON.stringify(l.current.boundary)!==JSON.stringify(S);v(h),console.log(S)},[S]);const ve=()=>{p(!0),Hn({elderly_id:e,data:{uid:n,lowLeft:`-${S.right*10},-${S.top*10}`,lowRight:`${S.left*10},-${S.top*10}`,upRight:`${S.left*10},${S.bottom*10}`,upLeft:`-${S.right*10},${S.bottom*10}`}}).then(()=>{v(!1)}).catch(h=>{console.error(h)}).finally(()=>{le(),p(!1)})},le=r.useCallback(()=>{K(!0),We({room_id:n,elderly_id:e}).then(h=>{var xe,be,q,ne,m;const y=h==null?void 0:h.data;a(y);const V=(y==null?void 0:y.device_boundaries)||{},ee={left:te(Number((xe=V.low_right)==null?void 0:xe.split(",")[0]),0),right:te(Number((be=V.low_left)==null?void 0:be.split(",")[0]),0),top:te(Number((q=V.low_left)==null?void 0:q.split(",")[1]),0),bottom:te(Number((ne=V.up_left)==null?void 0:ne.split(",")[1]),0),front:te(Number((m=V.up_left)==null?void 0:m.split(",")[1]),0)};function te(b,N){const I=Number(b);return isNaN(I)?N:Math.abs(I)/10}_(ee);const ae=y==null?void 0:y.mount_type,oe=(y==null?void 0:y.height)/10;x(ae),se(oe),P(y==null?void 0:y.settings),Q({mount_type:ae,installation_height:oe}),T(y==null?void 0:y.eventStatus),l.current={installationHeight:oe,mountType:ae,boundary:ee,parameters:y==null?void 0:y.settings,status:y==null?void 0:y.eventStatus}}).catch(h=>console.log(h)).finally(()=>{K(!1)})},[e]);return r.useEffect(()=>{le()},[le]),t.jsx(Me,{tip:"Loading...",spinning:Y,children:t.jsxs("div",{className:"flex w-full flex-col",children:[t.jsxs("div",{className:"flex border-b border-b-slate-200 flex-col py-4 gap-3",children:[t.jsxs("div",{className:"flex flex-col items-start gap-0",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Working mode"}),t.jsx("p",{className:"text-base text-text-secondary",children:"Please select the working mode for different functions"})]}),t.jsx(je.Group,{value:(s==null?void 0:s.scene)??null,size:"large",className:"flex",children:t.jsx(je,{value:"1",className:"custom-radio",children:"Full Function"})})]}),t.jsxs("div",{className:"flex border-b border-b-slate-200 flex-col py-4 gap-3 bg-slate-50 px-4",children:[t.jsx("div",{className:"w-full flex items-center justify-between",children:t.jsxs("div",{className:"flex flex-col items-start gap-0",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Function Parameter"}),t.jsx("p",{className:"text-base text-text-secondary",children:"Enable or disable alarm, setting alarm parameters."})]})}),t.jsx(Ee,{activeKey:E,onChange:F,type:"card",style:{marginBottom:32},tabBarGutter:10,items:D,className:"!mb-0"}),W&&t.jsx(re,{size:"large",onClick:ce,variant:"solid",color:"default",icon:t.jsx(He,{}),className:"w-[300px] m-auto",loading:w,children:"Save Changes"})]}),t.jsx("div",{className:"flex border-b border-b-slate-200 items-start justify-between py-4 gap-3",children:t.jsxs("div",{className:"flex flex-col gap-8 w-full",children:[t.jsxs("div",{className:"w-full flex justify-between items-center gap-8",children:[t.jsxs("div",{className:"flex flex-col items-start gap-0",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Setting Boundaries"}),t.jsx("p",{className:"text-base text-text-secondary",children:"Walk around the wall to automatically identify boundary or manually input boundary"})]}),f&&t.jsx(re,{variant:"solid",color:"default",icon:t.jsx(He,{}),loading:d,size:"large",onClick:()=>ve(),children:"Save Changes"})]}),t.jsxs("div",{className:"w-full flex justify-between items-center",children:[t.jsxs("div",{className:"flex flex-col gap-3 items-start",children:[t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Left boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",3:"3",[S.left]:`${S.left}`},min:0,max:3,step:.1,value:S.left,onChange:h=>{_(y=>({...y,left:h}))},className:"min-w-[350px]",disabled:l.current.mountType!==(B==null?void 0:B.mount_type)})]}),t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Right boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",3:"3",[S.right]:`${S.right}`},min:0,max:3,step:.1,value:S.right,onChange:h=>{_(y=>({...y,right:h}))},disabled:l.current.mountType!==(B==null?void 0:B.mount_type),className:"min-w-[350px]"})]}),c===2&&t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Front boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",3:"3",4:"4",[S.bottom]:`${S.bottom}`},min:0,max:4,step:.1,value:S.bottom,onChange:h=>{_(y=>({...y,bottom:h}))},disabled:l.current.mountType!==(B==null?void 0:B.mount_type),className:"min-w-[400px]"})]}),c===1&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Up boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",[S.top]:`${S.top}`},min:0,max:2,step:.1,value:S.top,onChange:h=>{_(y=>({...y,top:h}))},disabled:l.current.mountType!==(B==null?void 0:B.mount_type),className:"min-w-[250px]"})]}),t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Front boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",[S.bottom]:`${S.bottom}`},min:0,max:2,step:.1,value:S.bottom,onChange:h=>{_(y=>({...y,bottom:h}))},disabled:l.current.mountType!==(B==null?void 0:B.mount_type),className:"min-w-[250px]"})]})]})]}),t.jsxs("div",{style:{height:"300px",width:"400px"},className:"flex items-center justify-center relative",children:[t.jsx(lt,{title:t.jsxs(t.Fragment,{children:[c===1&&t.jsx("img",{src:Xn,alt:"sidemount",style:{height:"250px",padding:"8px"}}),c===2&&t.jsx("img",{src:Jn,alt:"sidemount",style:{height:"250px",padding:"8px"}})]}),overlayStyle:{maxWidth:"none"},overlayInnerStyle:{padding:0},className:"absolute  -top-4 left-[50%] -translate-x-[50%] cursor-pointer",children:t.jsx(_n,{size:18,className:"text-secondary"})}),t.jsx(Kn,{device_boundaries:{low_left:`-${S.right*10},-${S.top*10}`,low_right:`${S.left*10},-${S.top*10}`,up_right:`${S.left*10},${S.bottom*10}`,up_left:`-${S.right*10},${S.bottom*10}`},mountType:c})]})]})]})})]})})}const Yn=({initialValues:e,currentValues:n,onChange:s})=>{const[a,l]=r.useState(e&&(e==null?void 0:e.mountType)),[c,x]=r.useState(e&&(e==null?void 0:e.installationHeight)),[i,C]=r.useState(!1);console.log(e);const g=(o,d)=>{o==="mount"&&l(d),o==="height"&&x(d),s({installation_height:o==="height"?d:c,mount_type:o==="mount"?d:a}),console.log(c,a);const p=o==="mount"?d:a;if(o==="height"){const w=p===1?d>=2&&d<=3:d>=1.5&&d<=1.6;C(!w)}};return t.jsxs("div",{className:"p-2 bg-white flex gap-3",children:[t.jsxs("div",{className:"flex flex-col items-center py-4 gap-10 w-[40%]",children:[t.jsxs("div",{className:"flex flex-col gap-8 w-full items-center",children:[t.jsxs("div",{className:"flex flex-col items-start gap-0 w-full",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Installation Method"}),t.jsx("p",{className:"text-base text-text-secondary",children:"This radar supports side or top mounting, please choose according to the actual situation"})]}),t.jsxs(je.Group,{value:a,size:"large",className:"flex",onChange:o=>g("mount",o.target.value),children:[t.jsx(je,{value:1,className:"custom-radio",children:"Top Mounting"}),t.jsx(je,{value:2,className:"custom-radio",children:"Side Mounting"})]})]}),a===1&&t.jsx("img",{className:"w-fit",src:Ln,alt:"topemount",style:{height:"200px"}}),a===2&&t.jsx("img",{className:"w-fit",src:Wn,alt:"sidemount",style:{height:"200px"}})]}),t.jsxs("div",{className:"flex flex-col items-center w-[60%] py-4 gap-6",children:[t.jsxs("div",{className:"flex flex-col gap-8 w-full items-center",children:[t.jsx("div",{className:"flex  items-center gap-10 w-full",children:t.jsxs("div",{className:"flex flex-col items-start gap-0 w-full",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Installation Height"}),t.jsx("p",{className:"text-base text-text-secondary",children:"Please set the accurate installation height of the radar, with a deviation within ± 5cm"})]})}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Installation Height (m)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",3:"3",[c]:`${c}`},min:0,max:3.5,step:.1,value:c??0,onChange:o=>{g("height",o),a===1?o>3||o<2?C(!0):C(!1):a===2&&(o>1.6||o<1.5?C(!0):C(!1))},className:"min-w-[350px]"}),i&&t.jsx(Be,{message:"The height is not within the recommended range. Please install and set it according to the diagram",type:"warning",showIcon:!0,style:{marginTop:16}})]})]}),a===1&&t.jsx("img",{className:"w-fit",src:qn,alt:"sidemount",style:{height:"300px"}}),a===2&&t.jsx("img",{className:"w-fit",src:Gn,alt:"sidemount",style:{height:"300px"}})]})]})},Zn=({initialValues:e,currentValues:n,onChange:s})=>{const a=l=>{s({time:Number(l.target.value/10)})};return t.jsxs("div",{className:"p-2 bg-white",children:[t.jsxs("div",{id:"hint",className:"flex items-center gap-2 bg-Warning/10 w-fit p-1 rounded-sm px-2 my-2",children:[t.jsx($e,{}),t.jsx("p",{className:"text-sm ",children:"The fall alarm has been activated, with a detection area of 4 * 6 meters"})]}),t.jsx("div",{id:"item",className:"py-2",children:t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Notification Time"}),t.jsx(me,{type:"number",size:"large",defaultValue:e&&(e==null?void 0:e.time)*10,onChange:a,min:1,max:150,className:"w-fit",suffix:"seconds"})]})})]})},Vn=({initialValues:e,currentValues:n,status:s,onChange:a,onStatusChange:l})=>{const[c,x]=r.useState(s[3]),[i,C]=r.useState(!1),[g,o]=r.useState([{name:"Normal Resp rate range",key:"resp_rate",min:e&&(e==null?void 0:e.lower_breath),max:e&&(e==null?void 0:e.upper_breath)},{name:"Normal heart rate range",key:"heart_rate",min:e&&(e==null?void 0:e.lower_heartbeat),max:e&&(e==null?void 0:e.upper_heartbeat)}]),[d,p]=r.useState([{name:"Detect Duration Threshold",key:"detect_threshold",min:0,max:15,warnPoint:5,value:e&&(e==null?void 0:e.sudden_duration)},{name:"Sensitivity",key:"sensitivity",min:1,max:99,value:e&&(e==null?void 0:e.sensitivity)}]),w=(f,v,E)=>{const k=[...g];k[f][v]=E,o(k);const W=k[f];console.log(`Changed ${W.name}:`,{parameter:W.key,min:W.min,max:W.max})};r.useEffect(()=>{const f={};g.forEach(v=>{v.key==="resp_rate"?(f.upper_breath=v.max,f.lower_breath=v.min):v.key==="heart_rate"&&(f.upper_heartbeat=v.max,f.lower_heartbeat=v.min)}),d.forEach(v=>{v.key==="detect_threshold"?f.sudden_duration=v.value:v.key==="sensitivity"&&(f.sensitivity=v.value)}),a(f)},[g,d,a]);const u=f=>{x(!c),l({event:3,status:!c})};return t.jsxs("div",{className:"p-2 bg-white",children:[t.jsx("div",{id:"item",className:"py-2",children:g.map((f,v)=>t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",style:{marginBottom:g.length-1===v?0:24},children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:f.name}),t.jsxs("div",{className:"flex items-center gap-2 w-fit",children:[t.jsx(me,{type:"number",label:"Min",value:f.min,onChange:E=>w(v,"min",Number(E.target.value)),placeholder:"Minimum",size:"large",addonBefore:"Min",min:1}),"-",t.jsx(me,{type:"number",label:"Max",value:f.max,onChange:E=>w(v,"max",Number(E.target.value)),placeholder:"Maximum",size:"large",addonBefore:"Max",min:2})]})]},f.key))}),t.jsxs("div",{id:"hint",className:"flex items-center gap-2 bg-Warning/10 w-fit p-1 rounded-sm px-2 my-2",children:[t.jsx($e,{}),t.jsx("p",{className:"text-sm ",children:"Record events in sleep report when respiratory rate exceeding the normal range"})]}),t.jsxs("div",{id:"hint",className:"flex items-center gap-2 bg-Warning/10 w-fit p-1 rounded-sm px-2 my-2",children:[t.jsx($e,{}),t.jsx("p",{className:"text-sm ",children:"Respiratory events are datas for sleep report,not alarms"})]}),t.jsx("hr",{className:"w-[50%] bg-slate-200 mx-auto my-8"}),t.jsx("div",{className:"w-full ",children:t.jsxs("div",{id:"item",className:"py-2",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Abnormal Resp & Heart Rate Alarm"}),t.jsx("span",{className:"text-text-secondary",children:"Alarm condition: no respiratory and heart rate detected when person alone in monitoring bed area."})]}),t.jsx(Oe,{value:c,onChange:u,className:"w-fit bg-slate-300"})]}),c&&t.jsxs("div",{className:"mt-4 flex gap-4 justify-between",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Detect Duration Threshold"}),t.jsx("span",{className:"text-text-secondary",children:"Weak warning time for vital signs, default to 10 minutes"})]}),t.jsx(me,{type:"number",size:"large",value:d[0].value,min:d[0].min,max:d[0].max,className:"w-fit",suffix:"minute",onChange:f=>{const v=parseInt(f.target.value,10);isNaN(v)||(v<d[0].warnPoint?C(!0):C(!1),p(E=>E.map(k=>k.key==="detect_threshold"?{...k,value:v}:k)))}}),i&&t.jsx(Be,{message:"Too short detection time may cause false alarm ",type:"warning",showIcon:!0,style:{marginTop:16}})]}),t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Sensitivity"}),t.jsx("span",{className:"text-text-secondary",children:"Higher value will increase both sensitivity and false alarms"})]}),t.jsx("div",{className:"px-4",children:t.jsx(ye,{marks:{0:"Low",[d[1].value]:`${d[1].value}`,100:"High"},value:d[1].value,min:d[1].min,max:d[1].max,onChange:f=>{p(v=>v.map(E=>E.key==="sensitivity"?{...E,value:f}:E))}})})]})]})]})})]})},es=({initialValues:e,currentValues:n,onChange:s,status:a,onStatusChange:l})=>{const[c,x]=r.useState(a[6]),[i,C]=r.useState([{name:"Off-Bed Duration Threshold",key:"offBed_threshold",value:e&&e.leave_detection_time},{name:"Time Range",key:"time_range",from:e.leave_detection_range&&e.leave_detection_range.split("-")[0]||"24:00",to:e.leave_detection_range&&e.leave_detection_range.split("-")[1]||"01:00"}]),g=(d,p,w)=>{const u=[...i];u[d][p]=w,C(u);const f=u[d];console.log(`Changed ${f.name}:`,{parameter:f.key,from:f.from,to:f.to})};r.useEffect(()=>{const d={};i.forEach(p=>{p.key==="offBed_threshold"?d.leave_detection_time=p.value:p.key==="time_range"&&(d.leave_detection_range=`${p.from}-${p.to}`)}),s(d)},[i,s]);const o=d=>{x(!c),l({event:6,status:!c})};return t.jsx("div",{className:"p-2 bg-white",children:t.jsx("div",{className:"w-full ",children:t.jsxs("div",{id:"item",className:"py-2",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Off-bed alarm"}),t.jsx("span",{className:"text-text-secondary",children:"Alarm condition: user leaves the bed during the monitoring time range and not return after duration threshold"})]}),t.jsx(Oe,{value:c,onChange:o,className:"w-fit bg-slate-300"})]}),c&&t.jsxs("div",{className:"mt-4 flex gap-4 justify-between",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full",children:[t.jsx("div",{className:"flex flex-col ",children:t.jsx("h2",{className:"text-lg font-semibold text-primary",children:i[0].name})}),t.jsx(me,{type:"number",size:"large",value:i[0].value,min:i[0].min,max:i[0].max,className:"w-fit",suffix:"minute",onChange:d=>{const p=parseInt(d.target.value,10);C(w=>w.map(u=>u.key==="offBed_threshold"?{...u,value:p}:u))}})]}),t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full mt-2",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Time Range"}),t.jsxs("div",{className:"flex items-center gap-2 w-fit",children:[t.jsx(Qe,{use12Hours:!1,format:"HH:mm",size:"large",onChange:(d,p)=>{g(1,"from",p)},value:Ue(i[1].from,"HH:mm")}),"-",t.jsx(Qe,{use12Hours:!1,format:"HH:mm",size:"large",value:Ue(i[1].to,"HH:mm"),onChange:(d,p)=>{g(1,"to",p)}})]})]})]})]})})})},ts=({initialValues:e,currentValues:n,onChange:s,status:a,onStatusChange:l})=>{const[c,x]=r.useState(a[9]),[i,C]=r.useState([{name:"Stay duration threshold",key:"stay_threshold",value:e&&e.entry_detection_time}]);r.useEffect(()=>{const o={};i.forEach(d=>{d.key==="stay_threshold"&&(o.entry_detection_time=d.value)}),s(o)},[i,s]);const g=o=>{x(!c),l({event:9,status:!c})};return t.jsx("div",{className:"p-2 bg-white",children:t.jsxs("div",{className:"w-full ",children:[t.jsxs("div",{id:"hint",className:"flex items-center gap-2 bg-Warning/10 w-fit p-1 rounded-sm px-2 my-2",children:[t.jsx($e,{}),t.jsx("p",{className:"text-sm ",children:"Constraint: Only applicable to single person bathroom scenes."})]}),t.jsxs("div",{id:"item",className:"py-2",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Stay alarm"}),t.jsx("span",{className:"text-text-secondary",children:"Alarm condition: user enters bathroom for more than the time threshold."})]}),t.jsx(Oe,{value:c,onChange:g,className:"w-fit bg-slate-300"})]}),c&&t.jsx("div",{className:"mt-4 flex gap-4 justify-between",children:t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full",children:[t.jsx("div",{className:"flex flex-col ",children:t.jsx("h2",{className:"text-lg font-semibold text-primary",children:i[0].name})}),t.jsx(me,{type:"number",size:"large",value:i[0].value,className:"w-fit",suffix:"minute",onChange:o=>{const d=parseInt(o.target.value,10);C(p=>p.map(w=>w.key==="stay_threshold"?{...w,value:d}:w))}})]})})]})]})})},ns=({status:e,onStatusChange:n})=>{const[s,a]=r.useState(e[4]),l=c=>{a(!s),n({event:4,status:!s})};return t.jsx("div",{className:"p-2 bg-white",children:t.jsx("div",{className:"w-full ",children:t.jsx("div",{id:"item",className:"py-2",children:t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Inactivity alarm"}),t.jsx("span",{className:"text-text-secondary",children:"Alarm condition: no in-room or out-room event for more than 24 hours"})]}),t.jsx(Oe,{onChange:l,value:s,className:"w-fit bg-slate-300"})]})})})})};function ss({isvisible:e,setVisible:n,device_id:s,elderly_id:a}){const l=()=>{n(!1)},c=[{key:"1",tab:"Device Configuration",content:t.jsx(Qn,{device_id:s,elderly_id:a}),icon:t.jsx(Mt,{})},{key:"2",tab:"Edit Room",content:t.jsx(Fn,{device_id:s,elderly_id:a}),icon:t.jsx(Rt,{})}];return t.jsx(_e,{open:e,onCancel:l,footer:null,centered:!0,width:"80vw",className:"device-configuration-modal my-6",children:t.jsx("div",{className:"min-h-[90vh] h-full p-4",children:t.jsx(Ee,{renderTabBar:(x,i)=>t.jsx("div",{className:"h-full",children:t.jsx(i,{...x})}),children:c.map(x=>t.jsx(Ee.TabPane,{tab:t.jsxs("span",{className:"flex items-center gap-2 !border-none",children:[x.icon,x.tab]}),children:x.content},x.key))})})})}function fs(){var n;const{elderlyDetails:e}=r.useContext(it);return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-4 mt-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("h1",{className:"text-[24px] font-bold text-[#1B2559]",children:"Devices"})}),t.jsx("div",{id:"devices",className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6",children:(n=e==null?void 0:e.rooms)==null?void 0:n.filter(s=>s==null?void 0:s.device_no).map(s=>t.jsx(ls,{device:s},s.id))})]})})}const ls=({device:e})=>{const[n,s]=r.useState(!1),{elderlyDetails:a}=r.useContext(it);return t.jsxs("div",{className:"flex flex-col gap-8 bg-white rounded-xl p-4 group hover:bg-slate-50 cursor-pointer device_modal",children:[t.jsx("div",{className:"flex items-center justify-between gap-4 w-full ",onClick:()=>s(!0),children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{id:"deviceImg",children:t.jsx("img",{src:Fe,alt:"device",width:84,height:84})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("h1",{className:"text-[22px] font-semibold text-[#1B2559]",children:e==null?void 0:e.name}),t.jsxs("div",{id:"status",className:"flex items-center gap-2",children:[t.jsx("div",{id:"dot",className:` ${e!=null&&e.is_device_bind?"bg-[#00c42e]":"bg-[#c42626]"} rounded-full animate-pulse w-[8px] h-[8px]`}),t.jsx("p",{className:"text-[16px] font-semibold text-primary capitalize",children:e!=null&&e.is_device_bind?"Online":"Offline"})]})]})]})}),t.jsx(ss,{isvisible:n,setVisible:s,elderly_id:a._id,device_id:e==null?void 0:e.device_no})]})};export{fs as default};
//# sourceMappingURL=DevicesTab-cLI1aKZa.js.map
