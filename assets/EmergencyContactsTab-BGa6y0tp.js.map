{"version":3,"file":"EmergencyContactsTab-BGa6y0tp.js","sources":["../../src/Pages/Elderlies/Components/TabContents/EmergencyContacts/EmergencyContactsTab.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport { MdPerson } from \"react-icons/md\";\r\nimport { MdPerson2 } from \"react-icons/md\";\r\nimport { RiBuilding3Fill } from \"react-icons/ri\";\r\nimport { MdCrisisAlert } from \"react-icons/md\";\r\nimport { MdCall } from \"react-icons/md\";\r\nimport { Button, Dropdown } from \"antd\";\r\nimport CustomButton from \"@/Shared/button/CustomButton\";\r\nimport { MdOutlineAdd } from \"react-icons/md\";\r\nimport DeleteModal from \"@/Shared/delete/DeleteModal\";\r\nimport CreateAndEditModal from \"@/Components/CreateAndEditModal/CreateAndEditModal\";\r\nimport { CustomContext } from \"@/Context/UseCustomContext\";\r\nimport {\r\n  addEmergencyContactNumber,\r\n  deleteEmergencyContactNumber,\r\n} from \"@/api/elderlySupport\";\r\nimport CustomErrorToast from \"@/Shared/Tosat/CustomErrorToast\";\r\nimport toast from \"react-hot-toast\";\r\nimport CustomToast from \"@/Shared/Tosat/CustomToast\";\r\nimport { TbPhoneCalling } from \"react-icons/tb\";\r\nimport { Empty } from \"antd\";\r\n\r\nexport default function EmergencyContactsTab() {\r\n  const { elderlyDetails, getElderlyDetails } = useContext(CustomContext);\r\n\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const addContactNumber = (data) => {\r\n    addEmergencyContactNumber({ id: elderlyDetails?._id, data: data })\r\n      .then((res) => {\r\n        toast.custom((t) => (\r\n          <CustomToast t={t} text={\"Contact Number Added Successfully!\"} />\r\n        ));\r\n        getElderlyDetails();\r\n      })\r\n      .catch((err) => {\r\n        toast.custom((t) => (\r\n          <CustomErrorToast t={t} title=\"Error\" text={err.message} />\r\n        ));\r\n      });\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"flex flex-col gap-4 mt-6\">\r\n        <div className=\"flex justify-between items-center \">\r\n          <h1 className=\"text-2xl font-bold\">Emergency Contacts</h1>\r\n          <CustomButton\r\n            onClick={() => setIsModalOpen(true)}\r\n            size=\"large\"\r\n            className=\"bg-white !text-primary px-4 py-2 rounded-lg hover:!bg-primary/5 flex items-center gap-2\"\r\n          >\r\n            <MdOutlineAdd size={20} />\r\n            Add New Contact\r\n          </CustomButton>\r\n        </div>\r\n        {elderlyDetails?.emergency_contacts?.length > 0 ? (\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full\">\r\n            {elderlyDetails?.emergency_contacts?.map((contact) => (\r\n              <EmergencyContactCard key={contact.id} contact={contact} />\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"w-full flex items-center justify-center\">\r\n            <Empty description=\"No contact number available to show\" />\r\n          </div>\r\n        )}\r\n      </div>\r\n      <CreateAndEditModal\r\n        modalOpen={isModalOpen}\r\n        setModalOpen={setIsModalOpen}\r\n        type=\"contact\"\r\n        onSubmitData={addContactNumber}\r\n      />\r\n    </>\r\n  );\r\n}\r\nexport const EmergencyContactCard = ({ contact }) => {\r\n  const { elderlyDetails, getElderlyDetails } = useContext(CustomContext);\r\n  const [closeModal, setCloseModal] = useState(false);\r\n  const onDeleteContactNumber = (id) => {\r\n    deleteEmergencyContactNumber({\r\n      id: elderlyDetails?._id,\r\n      emergencyContactId: id,\r\n    })\r\n      .then((res) => {\r\n        toast.custom((t) => (\r\n          <CustomToast t={t} text={\"Contact Number Deleted Successfully!\"} />\r\n        ));\r\n        getElderlyDetails();\r\n      })\r\n      .catch((err) => {\r\n        toast.custom((t) => (\r\n          <CustomErrorToast t={t} title=\"Error\" text={err.message} />\r\n        ));\r\n      });\r\n  };\r\n  const getRandomColor = () => {\r\n    // Generate random RGB values\r\n    const r = Math.floor(Math.random() * 156) + 50; // Keep colors lighter (50-205 range)\r\n    const g = Math.floor(Math.random() * 156) + 50;\r\n    const b = Math.floor(Math.random() * 156) + 50;\r\n\r\n    // Return the color as a hex string\r\n    return `rgb(${r}, ${g}, ${b})`;\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"flex  bg-white p-4 rounded-lg items-center gap-8 justify-between\">\r\n        <div id=\"header\" className=\"flex flex-col gap-2 \">\r\n          <div\r\n            id=\"icon\"\r\n            className=\"text-xl p-3 text-white w-fit rounded-full\"\r\n            style={{\r\n              backgroundColor: getRandomColor(),\r\n            }}\r\n          >\r\n            <TbPhoneCalling />\r\n          </div>\r\n          <div id=\"contact-info\">\r\n            <h1 className=\"text-xl font-semibold\">{contact?.contact_person}</h1>\r\n            <p className=\"text-base text-gray-500\">\r\n              {contact?.contact_number_code + \" \" + contact?.contact_number}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div id=\"callbtnManu\">\r\n          <Dropdown.Button\r\n            menu={{\r\n              items: [{ label: \"Remove\", key: \"1\" }],\r\n              onClick: () => setCloseModal(true),\r\n            }}\r\n          >\r\n            <MdCall />\r\n            Call\r\n          </Dropdown.Button>\r\n        </div>\r\n      </div>\r\n      <DeleteModal\r\n        onDelete={() => onDeleteContactNumber(contact?._id)}\r\n        modalOPen={closeModal}\r\n        setModalOpen={setCloseModal}\r\n        title={`Are you sure to remove this contact?`}\r\n        title2={\"This process cannot be undo.\"}\r\n        okText={\"Remove Contact\"}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nconst contactNumbers = [\r\n  {\r\n    id: 1,\r\n    name: \"Kabir\",\r\n    contactType: \"person\",\r\n    gender: \"male\",\r\n    number: \"+8801234890\",\r\n  },\r\n  {\r\n    id: 2,\r\n    name: \"Hospital ABX\",\r\n    contactType: \"others\",\r\n    number: \"91168\",\r\n  },\r\n  {\r\n    id: 3,\r\n    name: \"Police\",\r\n    contactType: \"emergency\",\r\n    number: \"911\",\r\n  },\r\n];\r\n"],"names":["EmergencyContactsTab","elderlyDetails","getElderlyDetails","useContext","CustomContext","isModalOpen","setIsModalOpen","useState","addContactNumber","data","addEmergencyContactNumber","res","toast","t","jsx","CustomToast","err","CustomErrorToast","jsxs","Fragment","CustomButton","MdOutlineAdd","_a","_b","contact","EmergencyContactCard","Empty","CreateAndEditModal","closeModal","setCloseModal","onDeleteContactNumber","id","deleteEmergencyContactNumber","getRandomColor","g","b","TbPhoneCalling","Dropdown","MdCall","DeleteModal"],"mappings":"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"}