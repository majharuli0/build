import{r as l,h as T,bp as C,j as e,C as _,D as Q,gB as q,hQ as k,hR as S,hS as J}from"./index-DTl7wkHp.js";import K from"./DurationStatistic-bHDoYV8P.js";import X from"./DurationDistribution-BIxLC0pC.js";import Z from"./EfficiencyStatistic-D7qal7cd.js";import ee from"./DeepSleepPercentageDistribution-2QFRRiX4.js";import te from"./DeepSleepPercentageStatistic-DEWTeW91.js";import ie from"./EfficiencyDistribution-BDkNrRuk.js";import ae from"./ApneaIndexStatistic-BGS8iGfp.js";import se from"./NumberOfBedExitStatistic-7S4XPwdo.js";import re from"./DistributionOfBedExitTimes-CiKkusx0.js";import oe from"./TimeToFallAsleepStatistic-CQoOh8am.js";import ne from"./DistributionOfTimeToFallAsleep-D9QEI_h4.js";import le from"./DistributionOfDailyRoutine-BMSmbmqa.js";import ce from"./RespiratoryRate-Doz7-IIs.js";import de from"./HeartRate-BfuRhFxS.js";import"./Template-CK6IE8VO.js";import"./SkeletonBarChart-D7blNsML.js";import me from"./HeartRateDistribution-D7wwLTUi.js";import ue from"./BreathRateDistribution-DCdp7uu2.js";import{C as E}from"./index-CarKI0Dz.js";import{C as P}from"./Collapse--A_4nTMe.js";import"./mockData-x6eIvArf.js";import"./barChart-D53Xatax.js";import"./utiles-_aTuHXeN.js";import"./scatterChart-CDjnvM9h.js";import"./SkeletonRateChart-BOEc_hQH.js";import"./index-BW7OVOCB.js";import"./WeeklyMonthlyPicker-BDZDbGTd.js";import"./Cascader-5VPL_fCt.js";import"./index-CDiynPCJ.js";try{let n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},g=new n.Error().stack;g&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[g]="b07cca6c-f76a-4dc1-84ba-6cc01c339569",n._sentryDebugIdIdentifier="sentry-dbid-b07cca6c-f76a-4dc1-84ba-6cc01c339569")}catch{}const{RangePicker:pe}=Q,{Panel:fe}=P,{SHOW_CHILD:he}=E;function _e(){const[n,g]=l.useState([]);T().subtract(1,"day").format("YYYY-MM-DD");const[O,W]=l.useState(),[A,F]=l.useState(T().subtract(31,"day").format("YYYY-MM-DD")),[x,L]=l.useState([]),p=l.useRef(null),H=l.useContext(C),[I,c]=l.useState(!1),N=t=>{g(t),F(t[0]),W(t[1])},Y=async()=>{if(p.current){c(!0);try{const t=await S(p.current),i=document.createElement("a");i.href=t.toDataURL("image/png"),i.download="reports.png",i.click()}catch(t){console.error("Error exporting as image:",t)}finally{c(!1)}}},M=async()=>{if(p.current){c(!0);try{const t=await S(p.current,{scale:2,useCORS:!0}),i=t.toDataURL("image/png"),r=`
          <svg xmlns="http://www.w3.org/2000/svg" width="${t.width}" height="${t.height}">
            <image href="${i}" width="${t.width}" height="${t.height}" />
          </svg>
        `,a=new Blob([r],{type:"image/svg+xml;charset=utf-8"}),o=URL.createObjectURL(a),s=document.createElement("a");s.href=o,s.download="reports.svg",s.click(),URL.revokeObjectURL(o)}catch(t){console.error("Error exporting as SVG:",t)}finally{c(!1)}}},U=async()=>{try{c(!0);const t=new J({orientation:"portrait",unit:"pt",format:"a4"}),i=t.internal.pageSize.getWidth(),r=t.internal.pageSize.getHeight(),a=15,o=2;let s=a,f=a,h=0,d=0;const D=Array.from(document.querySelectorAll(".chart"));for(let b=0;b<D.length;b++){const v=D[b],j=v.classList.contains("full-width-chart"),y=await S(v,{scale:2}),R=y.width,w=y.height,z=y.toDataURL("image/png");let m,u,B;j?(m=i-a*2,u=w/R*m,B=2):(m=(i-a*(o+1))/o,u=w/R*m,B=1),f+u+a>r&&(t.addPage(),s=a,f=a,d=0,h=0),t.addImage(z,"JPEG",s,f,m,u,void 0,"MEDIUM",0),j?(f+=u+a,s=a,d=0,h=0):(d===0&&(h=u),d++,s+=m+a,d===o&&(f+=h+a,s=a,d=0,h=0))}t.save("export.pdf")}catch(t){console.log(t)}finally{c(!1)}},V=[{value:"sleep",label:"Sleep",children:[{label:"Sleep Duration Overview",value:"sleepDurationStatistic"},{label:"Sleep Duration Trends",value:"sleepDurationDistribution"},{label:"Sleep Quality Overview",value:"efficiencyStatistic"},{label:"Deep Sleep Proportion Trends",value:"deepSleepPercentageDistribution"},{label:"Deep Sleep Proportion Overview",value:"deepSleepPercentageStatistic"},{label:"Sleep Quality Trends",value:"efficiencyDistribution"},{label:"Sleep Disturbances Index Statistic",value:"apneaIndexStatistic"},{label:"Bed Exit Frequency Overview",value:"numberOfBedExitStatistic"},{label:"Bed Exit Times ",value:"distributionOfBedExitTimes"},{label:"Sleep Latency Trends",value:"distributionOfTimeToFallAsleep"},{label:"Sleep Latency Overview",value:"timeToFallAsleepStatistic"},{label:"Daily Routine Trends",value:"distributionOfDailyRoutine"}]},{value:"health",label:"Health",children:[{label:"Breath Rate",value:"respiratoryRate"},{label:"Heart Rate",value:"heartRate"},{label:"Heart Rate Variation Overview",value:"heartRateAnnomalyStatistic"},{label:"Heart Rate Trends",value:"heartRateDistribution"},{label:"Breathing Rate Trends",value:"breathRateDistribution"}]}],G=t=>{const i=t.map(r=>r[r.length-1]);L(i)},$=t=>{if(x.length===0)return!0;const i=x.includes(t);return console.log(`Checking if ${t} is selected:`,i),i};return e.jsx(e.Fragment,{children:e.jsxs("div",{id:"reports",className:"flex flex-col gap-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:"Reports"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs(_,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:[e.jsx(pe,{showTime:!1,style:{width:"200px",borderRadius:"10px"},size:"large",placeholder:["Pick Data Range (Start)","End"],format:"YYYY-MM-DD",onChange:(t,i)=>{N(i)}}),e.jsx(E,{style:{width:"300px"},options:V,placeholder:"Select Specific Analysis",multiple:!0,maxTagCount:"responsive",size:"large",showCheckedStrategy:he,onChange:G,defaultValue:x})]}),e.jsxs(q.Button,{size:"large",style:{backgroundColor:"#fff",width:"fit-content",borderRadius:"10px"},loading:I,menu:{items:[{label:"Export as SVG",key:"1"},{label:"Export as PDF",key:"2"}],onClick:t=>{t.key==="1"?M():t.key==="2"&&U()},icon:e.jsx(k,{})},onClick:Y,children:[e.jsx(k,{}),"Export Report as PNG"]})]})]}),e.jsx(C.Provider,{value:{...H,chartFromDate:A,chartToDate:O},children:e.jsx("div",{id:"reports",ref:p,children:e.jsx(P,{defaultActiveKey:["0"],expandIconPosition:"left",children:ge.map((t,i)=>e.jsx(fe,{style:{backgroundColor:"transparent"},header:e.jsxs("div",{className:"flex items-center justify-between",style:{border:"none",padding:0},children:[e.jsx("span",{children:t.groupName||"Unnamed Group"}),e.jsx("div",{className:"flex-grow mx-2",style:{borderBottom:"none"}})]}),children:e.jsx("div",{className:"gap-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2",children:t.components.map(({id:r,component:a,fullWidth:o},s)=>$(r)&&e.jsx("div",{className:o?"col-span-2 chart full-width-chart":" chart",children:a},s))})},i))})})})]})})}const ge=[{groupName:"Sleep",components:[{id:"sleepDurationStatistic",component:e.jsx(K,{isSummaryBtn:!1}),fullWidth:!1},{id:"sleepDurationDistribution",component:e.jsx(X,{isSummaryBtn:!1}),fullWidth:!1},{id:"efficiencyStatistic",component:e.jsx(Z,{isSummaryBtn:!1}),fullWidth:!1},{id:"deepSleepPercentageDistribution",component:e.jsx(ee,{isSummaryBtn:!1}),fullWidth:!1},{id:"deepSleepPercentageStatistic",component:e.jsx(te,{isSummaryBtn:!1}),fullWidth:!1},{id:"efficiencyDistribution",component:e.jsx(ie,{isSummaryBtn:!1}),fullWidth:!1},{id:"apneaIndexStatistic",component:e.jsx(ae,{isSummaryBtn:!1}),fullWidth:!1},{id:"numberOfBedExitStatistic",component:e.jsx(se,{isSummaryBtn:!1}),fullWidth:!1},{id:"distributionOfBedExitTimes",component:e.jsx(re,{isSummaryBtn:!1}),fullWidth:!0},{id:"timeToFallAsleepStatistic",component:e.jsx(oe,{isSummaryBtn:!1}),fullWidth:!1},{id:"distributionOfTimeToFallAsleep",component:e.jsx(ne,{isSummaryBtn:!1}),fullWidth:!1},{id:"distributionOfDailyRoutine",component:e.jsx(le,{isSummaryBtn:!1}),fullWidth:!0}]},{groupName:"Health",components:[{id:"respiratoryRate",component:e.jsx(ce,{isSummaryBtn:!0,dataType:"Month"}),fullWidth:!0},{id:"heartRate",component:e.jsx(de,{isSummaryBtn:!0,dataType:"Month"}),fullWidth:!0},{id:"heartRateDistribution",component:e.jsx(me,{isSummaryBtn:!1}),fullWidth:!1},{id:"breathRateDistribution",component:e.jsx(ue,{isSummaryBtn:!1}),fullWidth:!1}]}];export{_e as default};
//# sourceMappingURL=ReportsTab-IBjSGOpW.js.map
