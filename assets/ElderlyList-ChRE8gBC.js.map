{"version":3,"file":"ElderlyList-ChRE8gBC.js","sources":["../../src/Pages/Elderlies/Utiles/utiles2.jsx","../../src/Pages/Elderlies/ElderlyList.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport Elderly from \"@/Components/NameCol/Elderly\";\nimport { LuNavigation } from \"react-icons/lu\";\nimport { useNavigate } from \"react-router-dom\";\nimport ls from \"store2\";\nexport default function useElderlyTableColumns(role) {\n  const navigate = useNavigate(); // Initialize the navigate function\n\n  const randomId = Math.floor(Math.random() * 1000000);\n  const handleViewClick = (row) => {\n    window.scrollTo(0, 0);\n    navigate(`/supporter/elderlies/elderly-profile/${row?._id}`); // Navigate to the profile page with the ID\n  };\n  const elderlyTableColsMapping = {\n    support_agent: [\n      \"elderlyName\",\n      \"activeAlert\",\n      \"allergies\",\n      \"diseases\",\n      \"viewProfile\",\n    ],\n    nurse: [\n      \"elderlyName\",\n      \"activeAlert\",\n      \"allergies\",\n      \"diseases\",\n      \"medications\",\n      // \"viewOnMap\",\n      \"viewProfile\",\n    ],\n    end_user: [\n      \"elderlyName\",\n      \"activeAlert\",\n      \"allergies\",\n      \"diseases\",\n      \"medications\",\n      \"viewProfile\",\n    ],\n  };\n  const elderlyTableColumns = {\n    elderlyName: {\n      title: \"User Name\",\n      render: (row) => (\n        <Elderly onClick={() => handleViewClick(row)} data={row} />\n      ),\n    },\n    roomName: {\n      title: \"Room Name\",\n      dataIndex: \"roomName\",\n      render: (text) => <span>{text}</span>,\n    },\n    activeAlert: {\n      title: \"Activity Fall Alerts\",\n      dataIndex: \"unresolved_alarm_count\",\n      render: (text) => <span>{text}</span>,\n    },\n    address: {\n      title: \"Address\",\n      width: \"230px\",\n      render: (row) => (\n        <span className=\"!w-[230px] text-nowrap\">{row.address}</span>\n      ),\n    },\n    allergies: {\n      title: \"Comments\",\n      render: (row) => (\n        <span>\n          {row.comments\n            ?.filter((comment) => comment.category === \"Allergy\")\n            .map((comment) => comment.comment)\n            .join(\", \") || \"N/A\"}\n        </span>\n      ),\n    },\n    diseases: {\n      title: \"Conditions\",\n      render: (row) => (\n        <span>{row.diseases?.map((d) => d).join(\", \") || \"N/A\"}</span>\n      ),\n    },\n    medications: {\n      title: \"Daily Routine\",\n      render: (row) => (\n        <span>{row.medications?.map((d) => d.name).join(\", \")}</span>\n      ),\n    },\n    viewOnMap: {\n      title: \"View On Map\",\n      render: (row) => (\n        <span className=\"flex items-center transition-all duration-300 justify-start gap-2 text-sm font-medium text-text-primary hover:text-primary cursor-pointer p-2 rounded-md w-fit text-center hover:bg-slate-100\">\n          <div className=\"flex items-center gap-2\">\n            <a\n              href={`https://www.google.com/maps?q=${row.latitude},${row.longitude}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-base font-medium !text-blue-500\"\n            >\n              View on Map\n            </a>\n            <LuNavigation size={18} className=\"text-blue-500\" />\n          </div>\n        </span>\n      ),\n    },\n    viewProfile: {\n      title: \"View Profile\",\n      render: (row) => (\n        <span className=\"flex items-center transition-all duration-300 justify-start gap-2 text-sm font-medium text-text-primary hover:text-primary cursor-pointer p-2 rounded-md w-fit text-center hover:bg-slate-100\">\n          <div className=\"flex items-center gap-2\">\n            <a\n              onClick={() => handleViewClick(row)}\n              className=\"text-base font-medium !text-blue-500\"\n            >\n              View\n            </a>\n            {/* <LuNavigation size={18} className=\"text-blue-500\" /> */}\n          </div>\n        </span>\n      ),\n    },\n  };\n\n  const [elderlyTableColumn, setElderlyTableColumns] = useState([]);\n  useEffect(() => {\n    console.log(\"Current role:\");\n    console.log(\"Available roles:\", Object.keys(elderlyTableColsMapping));\n    if (role === \"support_agent\") {\n      const cols = elderlyTableColsMapping.support_agent.map((col) => {\n        return elderlyTableColumns[col];\n      });\n      setElderlyTableColumns(cols);\n    } else if (role === \"nurse\") {\n      const cols = elderlyTableColsMapping.nurse.map((col) => {\n        return elderlyTableColumns[col];\n      });\n      setElderlyTableColumns(cols);\n    } else if (role === \"end_user\") {\n      const cols = elderlyTableColsMapping.end_user.map((col) => {\n        return elderlyTableColumns[col];\n      });\n      setElderlyTableColumns(cols);\n    } else {\n      setElderlyTableColumns([]);\n    }\n  }, []);\n  return elderlyTableColumn;\n}\n\nexport { useElderlyTableColumns };\n","import React, { useEffect, useState, useCallback } from \"react\";\nimport CustomTable from \"@/Shared/Table/CustomTable\";\nimport { useElderlyTableColumns } from \"./Utiles/utiles2\";\nimport { SidebarContext } from \"@/Context/CustomUsertable\";\nimport { Segmented, ConfigProvider, Select } from \"antd\";\nimport { getElderlies } from \"@/api/elderly\";\nimport SearchInput from \"@/Shared/Search/SearchInput\";\n\nexport default function ElderlyList() {\n  const [search, setSearch] = useState(\"\");\n  const [elderlies, setElderlies] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const columns = useElderlyTableColumns(\"support_agent\");\n  const [elderliesQuery, setElderliesQuery] = useState({});\n  const getElderlyList = useCallback(() => {\n    setLoading(true);\n    getElderlies({ ...elderliesQuery, name: search })\n      .then((res) => {\n        setElderlies(res);\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n      });\n  }, [elderliesQuery, search]);\n  useEffect(() => {\n    getElderlyList();\n  }, [getElderlyList]);\n  function hnadleChangeElderlyFilter(data) {\n    switch (data) {\n      case \"diseases\":\n        return setElderliesQuery({ diseases: true });\n      case \"comments\":\n        return setElderliesQuery({ comments: true });\n\n      case \"medications\":\n        return setElderliesQuery({ medications: true });\n      default:\n        return setElderliesQuery({});\n    }\n  }\n  return (\n    <>\n      <div\n        id=\"Elderlies\"\n        className=\"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6 mt-8\"\n      >\n        <div id=\"Elderlies_Header\" className=\"w-full flex justify-between\">\n          <h1 className=\"text-[24px] font-bold\">Users</h1>\n          <div className=\"flex gap-4\">\n            {/* <ConfigProvider\n              theme={{\n                token: {\n                  fontFamily: \"Baloo2\",\n                  colorPrimary: \"#8086AC\",\n                  colorLinkActive: \"#8086AC\",\n                  colorLinkHover: \"#8086AC\",\n                  colorLink: \"#8086AC\",\n                },\n              }}\n            >\n              <Select\n                size=\"large\"\n                options={elderlyListSelectOptions}\n                defaultValue={elderlyListSelectOptions[0].value}\n                onChange={(value) => hnadleChangeElderlyFilter(value)}\n                className=\"min-w-[160px]\"\n              />\n            </ConfigProvider> */}\n            <SearchInput\n              search={search}\n              setSearch={setSearch}\n              placeholder=\"Search Users\"\n            />\n          </div>\n        </div>\n        <SidebarContext.Provider\n          value={{\n            total: elderlies?.data?.length,\n            page: 1,\n            SetPage: () => {},\n          }}\n        >\n          <CustomTable\n            loading={loading}\n            columns={columns}\n            tableData={elderlies?.data}\n          />\n        </SidebarContext.Provider>\n      </div>\n    </>\n  );\n}\nexport const elderlyListSegmentOptions = [\n  \"All Elderlies\",\n  \"With Alerts\",\n  \"With Diseases\",\n  \"With Allergies\",\n  \"Taking Medications\",\n];\nexport const elderlyListSelectOptions = [\n  { label: \"All Users\", value: \"all\" },\n  { label: \"With Sensitivity Factors\", value: \"diseases\" },\n  { label: \"With Comments\", value: \"comments\" },\n];\n"],"names":["useElderlyTableColumns","role","navigate","useNavigate","handleViewClick","row","elderlyTableColsMapping","elderlyTableColumns","jsx","Elderly","text","_a","comment","d","jsxs","LuNavigation","elderlyTableColumn","setElderlyTableColumns","useState","useEffect","cols","col","ElderlyList","search","setSearch","elderlies","setElderlies","loading","setLoading","columns","elderliesQuery","setElderliesQuery","getElderlyList","useCallback","getElderlies","res","err","Fragment","SearchInput","SidebarContext","CustomTable","elderlyListSegmentOptions","elderlyListSelectOptions"],"mappings":"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"}