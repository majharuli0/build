import{r as e,d as y,j as D}from"./index-DKEPlPMw.js";import{T as v}from"./Template-Cw_oAlpT.js";import{g as A}from"./utiles-Cjwxbjlp.js";import"./mockData-DnyFJQLN.js";import b from"./barChart-C5sqZpMH.js";import{C as M}from"./UseCustomContext-DF6VB58j.js";import{m as _}from"./ElderlyProfile-BC3PuKrd.js";import"./WeeklyMonthlyPicker-DIsZmpnl.js";import"./SwapRightOutlined-BDoH_om6.js";import"./weekOfYear-BCMUTNDi.js";import"./index-B9-ofjPq.js";import"./weekday-FwHoDaUK.js";import"./helper-DzRZPsxz.js";import"./index-Bp4H7YC8.js";import"./index-DeLHTZKo.js";import"./index-CZoxq-lL.js";import"./index-BuUnu2EE.js";import"./index-BlmXYDhK.js";import"./index-C88mHCLz.js";import"./elderly-fnALsJad.js";import"./HomeOutlined-CNgJfFmX.js";import"./PullRequestOutlined-zSVGBxYf.js";function et({isSummaryBtn:h=!0}){const{title:x,color:i,icon:R,dataAnalysis:E}=A("Heart Rate Anomaly Statistic"),Y=e.useContext(M),{chartToDate:s="",chartFromDate:c="",elderlyDetails:o}=Y||{},[a,g]=e.useState(y().subtract(1,"day").format("YYYY-MM-DD")),[m,T]=e.useState(y().subtract(31,"day").format("YYYY-MM-DD")),[C,H]=e.useState([]),p=e.useCallback(()=>{console.log("fromDate Todate ",m,a),_({uids:o==null?void 0:o.deviceId,to_date:m,from_date:a}).then(t=>{H(S(t.data||[]))}).catch(t=>{console.log(t)})},[a,o]);e.useEffect(()=>{p()},[p]),e.useEffect(()=>{s&&c&&(g(s),T(c))},[s]);function S(t){const n=[];return t==null||t.forEach(r=>{var u;const f=r.date;(u=r==null?void 0:r.events)==null||u.forEach(l=>{if(l.event_type===14||l.event_type===15){const d=n.find(j=>j.date===f);d?d.anomalyHeartRate+=1:n.push({date:f,anomalyHeartRate:1})}})}),n}return D.jsx(v,{title:x,color:i,icon:R,dataAnalysis:E,isSummaryBtn:h,children:D.jsx(b,{data:C,color:i,dataType:"number",fromDate:m,toDate:a,chartFor:"heartRateAnomaly"})})}export{et as default};
