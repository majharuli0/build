import{Z as E,$ as v,r as x,S as Y,e as l,j as D,ad as B}from"./index-DioY2D19.js";import{E as C}from"./index-B7ULpYEq.js";try{let r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new r.Error().stack;n&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[n]="166aa4d6-650c-41ea-aae9-7ff4c2c25e68",r._sentryDebugIdIdentifier="sentry-dbid-166aa4d6-650c-41ea-aae9-7ff4c2c25e68")}catch{}var O={exports:{}};(function(r,n){(function(i,a){r.exports=a()})(E,function(){return function(i,a){a.prototype.isSameOrAfter=function(o,u){return this.isSame(o,u)||this.isAfter(o,u)}}})})(O);var I=O.exports;const _=v(I);var w={exports:{}};(function(r,n){(function(i,a){r.exports=a()})(E,function(){return function(i,a){a.prototype.isSameOrBefore=function(o,u){return this.isSame(o,u)||this.isBefore(o,u)}}})})(w);var k=w.exports;const N=v(k);l.extend(_);l.extend(N);function F({data:r,fromDate:n,toDate:i,valueType:a="duration"}){const[o,u]=x.useState([]),{sleepEventsType:b,sleepEventsColor:g}=x.useContext(Y);x.useEffect(()=>{u(Array.isArray(r)?r:[])},[r]);const S=(d,p)=>{if(p==="duration"){const y=Math.floor(d/60),h=d%60;return`${y}hr ${h}m`}return d.toString()},$=x.useMemo(()=>{const p=((t,e)=>{const s=[];let f=l(t);const c=l(e);for(;f.isSameOrBefore(c);)s.push(f.format("YYYY-MM-DD")),f=f.add(1,"day");return s})(n,i),y=(Array.isArray(o)?o:[]).reduce((t,e)=>{if(!(e!=null&&e.date)||!(e!=null&&e.data))return t;const s=l(e.date).format("YYYY-MM-DD");return t[s]=e.data,t},{}),h=[...new Set((Array.isArray(o)?o:[]).flatMap(t=>{var e;return((e=t==null?void 0:t.data)==null?void 0:e.map(s=>s.status))||[]}))],m=Object.entries(b).filter(([t])=>h.includes(t)),j=m.map(([t,e])=>{const s=p.map(f=>{const c=y[f],A=c==null?void 0:c.find(M=>M.status===t);return A?Number(A.value):0});return{name:e,type:"bar",stack:"total",data:s,itemStyle:{color:g[e]}}});return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:t=>{let e=`${t[0].axisValue}<br/>`;return t.forEach(s=>{s.value>0&&(e+=`${s.marker} ${s.seriesName}: ${S(s.value,a)}<br/>`)}),e}},legend:{data:m.map(([t,e])=>e)},xAxis:{type:"category",data:p},yAxis:{type:"value",axisLabel:{formatter:t=>S(t,a)}},series:j}},[o,n,i,b,g,a]);return(r==null?void 0:r.length)===0||!i||!n?D.jsx(B,{description:"No data available to show"}):D.jsx(C,{option:$,style:{height:"350px"}})}export{F as default};
//# sourceMappingURL=multibarChart-CObE36XS.js.map
