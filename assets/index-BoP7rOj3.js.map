{"version":3,"file":"index-BoP7rOj3.js","sources":["../../node_modules/dayjs/plugin/isoWeek.js","../../src/Components/TimeSelection/index.jsx"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_isoWeek=t()}(this,(function(){\"use strict\";var e=\"day\";return function(t,i,s){var a=function(t){return t.add(4-t.isoWeekday(),e)},d=i.prototype;d.isoWeekYear=function(){return a(this).year()},d.isoWeek=function(t){if(!this.$utils().u(t))return this.add(7*(t-this.isoWeek()),e);var i,d,n,o,r=a(this),u=(i=this.isoWeekYear(),d=this.$u,n=(d?s.utc:s)().year(i).startOf(\"year\"),o=4-n.isoWeekday(),n.isoWeekday()>4&&(o+=7),n.add(o,e));return r.diff(u,\"week\")+1},d.isoWeekday=function(e){return this.$utils().u(e)?this.day()||7:this.day(this.day()%7?e:e-7)};var n=d.startOf;d.startOf=function(e,t){var i=this.$utils(),s=!!i.u(t)||t;return\"isoweek\"===i.p(e)?s?this.date(this.date()-(this.isoWeekday()-1)).startOf(\"day\"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf(\"day\"):n.bind(this)(e,t)}}}));","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { LeftOutlined, RightOutlined } from \"@ant-design/icons\";\r\nimport dayjs from \"dayjs\";\r\nimport isoWeek from \"dayjs/plugin/isoWeek\";\r\nimport weekOfYear from \"dayjs/plugin/weekOfYear\";\r\n\r\ndayjs.extend(isoWeek);\r\ndayjs.extend(weekOfYear);\r\n\r\nconst TimeSelection = (props) => {\r\n  const { handleClick = () => {}, name, setLoading } = props;\r\n  const [date, setDate] = useState({\r\n    text: \"Today\",\r\n    value: dayjs(),\r\n    endvalue: \"\",\r\n  });\r\n  const isMounted = useRef(true);\r\n\r\n  const handleLeftClick = () => {\r\n    if (name == \"Day\" || name == \"Daily\") {\r\n      const newDate = date.value.subtract(1, \"day\");\r\n      if (newDate.isBefore(dayjs(), \"day\")) {\r\n        setDate({\r\n          text: newDate.isSame(dayjs(), \"day\")\r\n            ? \"Today\"\r\n            : newDate.isSame(dayjs().subtract(1, \"day\"), \"day\")\r\n            ? \"Yesterday\"\r\n            : newDate.format(\"YYYY-MM-DD\"),\r\n          value: newDate,\r\n        });\r\n      }\r\n    } else if (name == \"Week\") {\r\n      let start = date.value.subtract(1, \"week\");\r\n      let end = date.endvalue.subtract(1, \"week\");\r\n\r\n      setDate({\r\n        value: start,\r\n        endvalue: end,\r\n        text: `Week ${start.week()}`,\r\n      });\r\n    } else {\r\n      let startOfMonth = date.value.subtract(1, \"month\");\r\n      let endOfMonth = date.endvalue.subtract(1, \"month\");\r\n      startOfMonth = dayjs(startOfMonth).startOf(\"month\");\r\n      endOfMonth = dayjs(endOfMonth).endOf(\"month\");\r\n      console.log(\"startOfMonth.month()\", startOfMonth.month());\r\n      setDate({\r\n        value: startOfMonth,\r\n        endvalue: endOfMonth,\r\n        text: `Month ${startOfMonth.month() + 1}`,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleRightClick = () => {\r\n    if (name == \"Day\" || name == \"Daily\") {\r\n      let newDate = date.value;\r\n      if (newDate.isBefore(dayjs(), \"day\")) {\r\n        newDate = date.value.add(1, \"day\");\r\n        setDate({\r\n          text: newDate.isSame(dayjs(), \"day\")\r\n            ? \"Today\"\r\n            : newDate.isSame(dayjs().subtract(1, \"day\"), \"day\")\r\n            ? \"Yesterday\"\r\n            : newDate.format(\"YYYY-MM-DD\"),\r\n          value: newDate,\r\n        });\r\n      }\r\n    } else if (name == \"Week\") {\r\n      const nextWeekStart = date.value.add(1, \"week\");\r\n      const nextWeekEnd = date.endvalue.add(1, \"week\");\r\n      // 不允许超过本周\r\n      if (nextWeekStart.isAfter(dayjs().startOf(\"isoWeek\"))) {\r\n        return;\r\n      }\r\n      let str = `Week ${nextWeekStart.week()}`;\r\n\r\n      setDate({\r\n        value: nextWeekStart,\r\n        endvalue: nextWeekEnd,\r\n        text: str,\r\n      });\r\n      return;\r\n    } else {\r\n      let startOfMonth = date.value.add(1, \"month\");\r\n      let endOfMonth = date.endvalue.add(1, \"month\");\r\n      startOfMonth = dayjs(startOfMonth).startOf(\"month\");\r\n      endOfMonth = dayjs(endOfMonth).endOf(\"month\");\r\n\r\n      if (endOfMonth.isAfter(dayjs(), \"month\")) {\r\n        return;\r\n      }\r\n\r\n      setDate({\r\n        value: startOfMonth,\r\n        endvalue: endOfMonth,\r\n        text: `Month ${startOfMonth.month() + 1}`,\r\n      });\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (isMounted.current) {\r\n      isMounted.current = false;\r\n      return;\r\n    }\r\n\r\n    handleClick(date);\r\n  }, [date]);\r\n  useEffect(() => {\r\n    if (name == \"Day\" || name == \"Daily\") {\r\n      setDate({\r\n        value: dayjs(),\r\n        endvalue: \"\",\r\n        text: `Today`,\r\n      });\r\n    } else if (name == \"Week\") {\r\n      let start = dayjs().startOf(\"isoWeek\");\r\n\r\n      setDate({\r\n        value: start,\r\n        endvalue: dayjs().endOf(\"isoWeek\"),\r\n        text: `Week ${start.week()}`,\r\n      });\r\n    } else {\r\n      const startOfMonth = dayjs().startOf(\"month\");\r\n      const endOfMonth = dayjs().endOf(\"month\");\r\n      setDate({\r\n        value: startOfMonth,\r\n        endvalue: endOfMonth,\r\n        text: `Month ${startOfMonth.month() + 1}`,\r\n      });\r\n    }\r\n  }, [name]);\r\n\r\n  return (\r\n    <div className=\"flex w-[200px] justify-between items-center\">\r\n      <div\r\n        className=\"w-[32px] h-[32px] bg-OnButtonNormal rounded-[100px] flex items-center justify-center mr-[5px] \"\r\n        onClick={handleLeftClick}\r\n      >\r\n        {\" \"}\r\n        <LeftOutlined className=\"text-white\" />\r\n      </div>\r\n      <div className=\" text-[16px] text-cblock font-semibold\">{date.text}</div>\r\n      <div\r\n        className=\"w-[32px] h-[32px] bg-OnButtonNormal rounded-[100px] flex items-center justify-center \"\r\n        onClick={handleRightClick}\r\n      >\r\n        {\" \"}\r\n        <RightOutlined className=\"text-white\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TimeSelection;\r\n"],"names":["e","t","module","this","i","s","a","d","n","o","r","u","dayjs","isoWeek","weekOfYear","TimeSelection","props","handleClick","name","setLoading","date","setDate","useState","isMounted","useRef","handleLeftClick","newDate","start","end","startOfMonth","endOfMonth","handleRightClick","nextWeekStart","nextWeekEnd","str","useEffect","jsxs","jsx","LeftOutlined","RightOutlined"],"mappings":"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","x_google_ignoreList":[0]}