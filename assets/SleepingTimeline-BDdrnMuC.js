import{r as a,S as j,j as t,gf as _}from"./index-D5gCK70O.js";import v from"./TimelineGraph-BX2H9gMd.js";import{T as S}from"./Template-CU3x1kLa.js";import{h as b}from"./index-BJIa03lH.js";import{C as E}from"./UseCustomContext-Bo2QbYRq.js";import{p as w}from"./helper-J11Qf81i.js";import{S as C}from"./SkeletonSleepingTimeline-yPIqCxg8.js";import"./index-CWnXfXoq.js";import"./WeeklyMonthlyPicker-XW8bIdb6.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new e.Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2b4761c6-6203-41ea-b855-18314b8ffb1f",e._sentryDebugIdIdentifier="sentry-dbid-2b4761c6-6203-41ea-b855-18314b8ffb1f")}catch{}const g=({time:e,ItemName:n,color:m})=>t.jsxs("div",{className:"flex p-[4px] pr-4 items-center gap-2 rounded-xl",style:{backgroundColor:m},children:[t.jsx("span",{className:"text-[17px] p-2 py-1 font-bold bg-white rounded-[9px] text-primary",children:e}),t.jsx("span",{className:"text-[15px] font-medium text-white leading-[1.2]",children:n})]});function q(){const{sleepData:e,elderlyDetails:n,sleepDataLoading:m}=a.useContext(E),{sleepEventsType:u,sleepEventsColor:f}=a.useContext(j),[y,T]=a.useState([]),h={title:"Sleep Timeline Summary",pickerTypes:["day","range"],chartType:"multibar",dataType:"duration",color:"#FF725E",icon:t.jsx(b,{}),apisProps:{endpoint:_,query:{uids:n==null?void 0:n.deviceId}}};return a.useEffect(()=>{var p;if(!e)return;const o=(p=e==null?void 0:e.statistical_data)==null?void 0:p.reduce((s,r)=>{const l=new Date(r.start_time),c=(new Date(r.end_time)-l)/(1e3*60),i=u[r.status];return s[i]||(s[i]={duration:0,color:f[i]}),s[i].duration+=c,s},{}),d=Object.entries(o||{}).map(([s,{duration:r,color:l}])=>{const x=Math.floor(r/60),c=Math.floor(r%60);return{name:s,duration:`${x}hr ${c}m`,color:l}});T([...d])},[e,u,f]),t.jsx(S,{title:"Sleep Timeline",color:"#FF725E",icon:t.jsx(b,{}),isDataAnalysis:!1,headerClassName:"!text-2xl",summaryProps:h,children:m?t.jsx(C,{}):t.jsxs(t.Fragment,{children:[t.jsx(v,{statisticalData:e==null?void 0:e.statistical_data,enterBedTime:w(e==null?void 0:e.get_bed_idx),getupAfterTime:e==null?void 0:e.leave_bed_idx,noDataText:"No Data Detected for Today"}),t.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-center",children:[y.map((o,d)=>t.jsx(g,{time:o.duration,ItemName:o.name,color:o.color},d)),e&&(e==null?void 0:e.leave_bed_count)&&t.jsx(g,{time:(e==null?void 0:e.leave_bed_count)+"x",ItemName:"Leave bed after sleep",color:"#FF725E"})]})]})})}export{q as default};
//# sourceMappingURL=SleepingTimeline-BDdrnMuC.js.map
