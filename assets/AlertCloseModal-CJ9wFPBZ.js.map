{"version":3,"file":"AlertCloseModal-CJ9wFPBZ.js","sources":["../../src/assets/AlertBGABS.svg","../../src/Components/ActiveAlerts/AlertCloseModal.jsx"],"sourcesContent":["export default \"__VITE_ASSET__YjpHS8ma__\"","import React, { useState } from \"react\";\r\nimport { Modal } from \"antd\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport CustomModal from \"@/Shared/modal/CustomModal\";\r\nimport CustomInput from \"@/Shared/input/CustomInput\";\r\nimport CustomTextArea from \"@/Shared/input/CustomTextArea\";\r\nimport CustomSelector from \"@/Shared/input/CustomSelector\";\r\nimport CustomButton from \"@/Shared/button/CustomButton\";\r\nimport { Controller } from \"react-hook-form\";\r\nimport AlertBG from \"@/assets/AlertBGABS.svg\";\r\nimport CustomErrorToast from \"@/Shared/Tosat/CustomErrorToast\";\r\nimport toast from \"react-hot-toast\";\r\nimport CustomToast from \"@/Shared/Tosat/CustomToast\";\r\nimport {\r\n  transformDateAndTime,\r\n  transformDateAndTimeToDuration,\r\n  getAlertType,\r\n  getAlertInfoViaEvent,\r\n} from \"@/utils/helper\";\r\nimport { markAsResolved } from \"@/api/elderlySupport\";\r\nexport default function AlertCloseModal({\r\n  openAlertCloseModal,\r\n  setOpenAlertCloseModal,\r\n  selectedAlert = [],\r\n  getAlertListDatas,\r\n}) {\r\n  const {\r\n    handleSubmit,\r\n    control,\r\n    reset,\r\n    formState: { errors },\r\n  } = useForm({\r\n    defaultValues: {\r\n      status: \"\",\r\n      comment: \"\",\r\n    },\r\n  });\r\n\r\n  async function onSubmit(data) {\r\n    await markAsResolved({\r\n      id: selectedAlert?._id,\r\n      data: { status: data.status.value, comment: data.comment },\r\n    })\r\n      .then((data) => {\r\n        toast.custom((t) => (\r\n          <CustomToast t={t} text={\"Alert has been marked as resolved!\"} />\r\n        ));\r\n        getAlertListDatas();\r\n      })\r\n      .catch((error) => {\r\n        toast.custom((t) => (\r\n          <CustomErrorToast t={t} title=\"Error\" text={error.message} />\r\n        ));\r\n      });\r\n    reset();\r\n    setOpenAlertCloseModal(false);\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      open={openAlertCloseModal}\r\n      onCancel={() => {\r\n        setOpenAlertCloseModal(false);\r\n        reset();\r\n      }}\r\n      footer={null}\r\n    >\r\n      <div id=\"alertCloseModalHeader\">\r\n        <div id=\"alertCardOverview\">\r\n          <div\r\n            id=\"alertItem\"\r\n            className={`rounded-2xl overflow-hidden w-full ${\r\n              getAlertInfoViaEvent(selectedAlert)?.label === \"Critical\"\r\n                ? \"bg-red-500\"\r\n                : getAlertInfoViaEvent(selectedAlert)?.label === \"Warning\"\r\n                ? \"bg-yellow-500\"\r\n                : \"bg-blue-500\"\r\n            } p-4 w-full !flex justify-between items-center`}\r\n          >\r\n            <div id=\"leftSide\" className=\"z-50\">\r\n              <div id=\"alertItemHeader\">\r\n                <div\r\n                  id=\"alertItemTitleAndDescription\"\r\n                  className=\"flex flex-col gap-4\"\r\n                >\r\n                  <div id=\"time\" className=\"flex gap-2\">\r\n                    <span className=\"bg-white font-semibold p-1 px-2 rounded-full text-text-primary flex items-center gap-2\">\r\n                      {transformDateAndTime(selectedAlert?.created_at)}\r\n                    </span>\r\n                    <span className=\"bg-white font-semibold p-1 px-2 rounded-full text-text-primary\">\r\n                      {transformDateAndTimeToDuration(\r\n                        selectedAlert?.created_at\r\n                      )}\r\n                    </span>\r\n                  </div>\r\n                  <div id=\"alertItemTitleAndDescription\">\r\n                    <h1 className=\"text-xl font-bold text-white m-0\">\r\n                      {getAlertInfoViaEvent(selectedAlert)?.title}\r\n                    </h1>\r\n                    {/* <p className=\"text-white text-base m-0 leading-none\">\r\n                      {selectedAlert?.description}\r\n                    </p> */}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <img\r\n              src={AlertBG}\r\n              alt=\"\"\r\n              className=\"absolute top-0 right-0 w-[280px]\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div id=\"alertsConfirmationAndComment\" className=\"mt-4 px-4\">\r\n          <form onSubmit={handleSubmit(onSubmit)}>\r\n            <Controller\r\n              name=\"status\"\r\n              control={control}\r\n              rules={{\r\n                required: `Please select alert status`,\r\n              }}\r\n              render={({ field }) => (\r\n                <CustomSelector\r\n                  label=\"Notification Status\"\r\n                  error={errors.status}\r\n                  placeholder=\"Select Notification Status\"\r\n                  options={[\r\n                    { value: true, label: \"True Notifications\" },\r\n                    { value: false, label: \"False Notifications\" },\r\n                  ]}\r\n                  value={field.value}\r\n                  {...field}\r\n                />\r\n              )}\r\n            />\r\n            <Controller\r\n              key=\"comment\"\r\n              name=\"comment\"\r\n              control={control}\r\n              rules={{}}\r\n              render={({ field }) => (\r\n                <CustomTextArea\r\n                  label=\"Comment\"\r\n                  placeholder=\"Enter your comment\"\r\n                  error={errors.comment}\r\n                  {...field}\r\n                />\r\n              )}\r\n            />\r\n            <div id=\"alertCloseModalFooter\" className=\"py-4 flex  gap-4\">\r\n              <CustomButton\r\n                type=\"button\"\r\n                style={{\r\n                  width: \"100%\",\r\n                  background: \"#F5F5F5\",\r\n                  color: \"#1B2559\",\r\n                }}\r\n                onClick={() => {\r\n                  setOpenAlertCloseModal(false);\r\n                  reset();\r\n                }}\r\n              >\r\n                Close\r\n              </CustomButton>\r\n              <CustomButton type=\"primary\" htmlType=\"submit\" className=\"w-full\">\r\n                Mark as Done\r\n              </CustomButton>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n"],"names":["AlertBG","AlertCloseModal","openAlertCloseModal","setOpenAlertCloseModal","selectedAlert","getAlertListDatas","handleSubmit","control","reset","errors","useForm","onSubmit","data","markAsResolved","toast","t","jsx","CustomToast","error","CustomErrorToast","Modal","jsxs","_a","getAlertInfoViaEvent","_b","transformDateAndTime","transformDateAndTimeToDuration","_c","Controller","field","CustomSelector","CustomTextArea","CustomButton"],"mappings":"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"}