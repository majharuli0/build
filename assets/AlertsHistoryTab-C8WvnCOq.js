import{r as a,$ as T,u as M,j as t,F as N,bv as v,d as C,B as b,a6 as j,aN as w}from"./index-BhcrJ0Lq.js";import{g as S}from"./elderlySupport-B-xVNHFC.js";import{A as D}from"./AlertName-C9RQQntl.js";import{A as I}from"./ActionManu-CUxfBshX.js";import{L}from"./LargeTextViewerModal-CO7ntwyo.js";import{e as E,t as y,c as _,g as B}from"./helper-DzRZPsxz.js";import{S as H}from"./index-DxgX1N8g.js";import"./index-CNclDzrS.js";import"./SuccessModal-DcQTcFMP.js";import"./index-CyI_KFhz.js";import"./UseCustomContext-CIrMsIcX.js";import"./index-CmqcyRfw.js";const u=c=>{const h=["Critical","Info","Warning"],r=["Living Room","Kitchen","Bedroom","Bathroom","Study","Dining Room","Hallway","Garage","Basement","Attic"],l=["John Doe","Jane Doe","Alice Smith","Bob Johnson","Emma Brown","Michael Wilson","Sarah Davis","David Miller","Lisa Garcia","James Rodriguez"],n=["Fall Detected","Fire Detected","Inactivity Alert","Medication Reminder","Unusual Behavior","High Temperature","Low Temperature","Water Leak","Door Left Open","Window Broken"],o=["Medication Taken","Medication Not Taken","Medication Reminder"],d=["Wheelchair","Crutches","Cane","None"],m=["Yes","No"],e=["Yes","No"],i=["Yes","No"],f=["1","4","2","No"],x=["True","False"];return Array.from({length:c},(g,p)=>({_id:p+1,alertType:h[Math.floor(Math.random()*h.length)],elderlyName:l[Math.floor(Math.random()*l.length)],alertName:n[Math.floor(Math.random()*n.length)],roomId:String(p+1),roomName:r[Math.floor(Math.random()*r.length)],alertLifetime:`${Math.floor(Math.random()*10)}m ${Math.floor(Math.random()*60)}s`,time:new Date().toLocaleString(),alertDescription:`${n[Math.floor(Math.random()*n.length)]} in the ${r[Math.floor(Math.random()*r.length)]}`,status:"Active",isAlert:x[Math.floor(Math.random()*x.length)],address:"123 Main St, Anytown, USA",coordinates:{latitude:37.7749+(Math.random()-.5)*.01,longitude:-122.4194+(Math.random()-.5)*.01},closedAt:new Date().toLocaleString(),closedBy:l[Math.floor(Math.random()*l.length)],eventName:o[Math.floor(Math.random()*o.length)],disabilityType:d[Math.floor(Math.random()*d.length)],additionalInfo:"This is additional info for event",hospital:{name:"Hospital For Special Surgery",phone:"1234567890",latitude:-33.8743612,longitude:151.2261153},allergies:m[Math.floor(Math.random()*m.length)],diseases:e[Math.floor(Math.random()*e.length)],medications:i[Math.floor(Math.random()*i.length)],activeAlert:f[Math.floor(Math.random()*f.length)],alertComments:"This is alert comments",alertLifespan:[{dateTime:"24-01-2024 10:00 AM",description:"At 10:00 AM, the alert was created"},{dateTime:"24-01-2024 10:30 AM",description:"Agent (petar) clicked on the incident in 10:30 (30mins later)"},{dateTime:"24-01-2024 10:32 AM",description:"Agent (petar) clicked on “Call Elderly” in 10:32 (2mins later)"},{dateTime:"24-01-2024 10:34 AM",description:"Agent (petar) clicked on “Call 911” in 10:34 (2mins later)"},{dateTime:"24-01-2024 10:36 AM",description:"Agent (petar) clicked on “Close Alert” in 10:36 (2mins later)"}]}))};u(14);u(20);u(20);u(20);u(20);function k(c){const{rolesFormatter:h}=a.useContext(T),r=M(),l=e=>{window.scrollTo(0,0),r(`/supporter/elderlies/elderly-profile/${e.elderly_id}?tab=overview`)},n={activeAlertsTableData:["alertName","alertType","elderlyName","roomName","incidentTime","alertLifetime","address","viewElderly"],recentlyClosedAlertsTableData:["alertName","alertType","elderlyName","roomName","incidentTime","alertLifetime","alertStatus","closedAt","closedBy","address","viewElderly"],eventsTableData:["eventName","elderlyName","eventTime","eventTimeline","hospital","expandColumn","largeText","disabilityType","action"]},o={alertName:{title:"Alert Name",render:e=>t.jsx(D,{data:e})},alertType:{title:"Alert Type",dataIndex:"event",render:e=>t.jsx("span",{children:E(e)})},elderlyName:{title:"Elderly Name",dataIndex:"elderly_name",render:e=>t.jsx("span",{children:e})},roomName:{title:"Room Name",dataIndex:"room_name",render:e=>t.jsx("span",{children:e})},incidentTime:{title:"Incident Time",dataIndex:"created_at",render:e=>t.jsx("span",{className:"text-nowrap",children:y(e)})},alertLifetime:{title:"Alert Life",dataIndex:"closed_at",render:e=>t.jsx("span",{className:"text-nowrap",children:_(e)})},alertStatus:{title:"Alert Status",dataIndex:"status",render:e=>t.jsx("span",{className:"text-nowrap",children:e==0?"True Alert":"False Alert"})},address:{title:"Address",width:"230px",render:e=>t.jsx("span",{className:"!w-[230px] text-nowrap",children:e.address})},closedAt:{title:"Closed At",dataIndex:"closed_at",render:e=>t.jsx("span",{className:"text-nowrap",children:y(e)})},closedBy:{title:"Closed By",render:e=>t.jsxs("span",{className:"text-nowrap",children:[e.closed_by," (",h[e.closed_by_role]," )"]})},eventName:{title:"Event Name",dataIndex:"eventName",render:e=>t.jsx("span",{children:e})},eventTime:{title:"Event Time",dataIndex:"time",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},eventTimeline:{title:"Event Timeline",dataIndex:"alertLifetime",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},disabilityType:{title:"Disability Type",dataIndex:"disabilityType",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},hospital:{title:"Hospital",dataIndex:"hospital",render:e=>t.jsx("span",{className:"text-nowrap",children:e.name.length>20?`${e.name.substring(0,20)}...`:e.name})},largeText:{title:()=>{switch(c){case"events":return"Additional Info";default:return""}},render:e=>t.jsx(L,{data:e.additionalInfo,title:"Additional Info"})},expandColumn:N.EXPAND_COLUMN,viewElderly:{render:e=>t.jsxs("span",{onClick:()=>l(e),className:"flex items-center transition-all duration-300 justify-center gap-2 text-sm font-medium text-text-primary hover:text-primary cursor-pointer p-2 rounded-md  text-center hover:bg-slate-100",children:["View ",t.jsx(v,{})]})},action:{title:"Action",render:e=>t.jsx(I,{row:e})}},[d,m]=a.useState(void 0);return a.useEffect(()=>{{const e=n.recentlyClosedAlertsTableData.map(i=>o[i]);m(e)}},[]),d}function K(){const[c,h]=a.useState(""),r=k("recentlyClosedAlert"),[l,n]=a.useState([]),[o,d]=a.useState(1),[m,e]=a.useState(0),[i,f]=a.useState(null),[x,g]=a.useState(!1),p=a.useCallback(()=>{g(!0),S({to_date:"2024-11-30",from_date:C().format("YYYY-MM-DD"),is_resolved:!0,page:o,...i}).then(s=>{e(s.total),g(!1),n(s.data)}).catch(s=>{console.log(s),g(!1)})},[o,i,c]);a.useEffect(()=>{p()},[p]);function A(s){f(B(s))}return t.jsxs("div",{id:"Elderlies",className:"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6 mt-6",children:[t.jsxs("div",{id:"Elderlies_Header",className:"w-full flex justify-between",children:[t.jsx("h1",{className:"text-[24px] font-bold",children:"Alerts History"}),t.jsx("div",{className:"flex gap-4 h-fit",children:t.jsx(b,{theme:{components:{Segmented:{itemSelectedBg:"#252F67",itemSelectedColor:"#fff",fontFamily:"Baloo2"}}},children:t.jsx(H,{options:F,onChange:s=>A(s)})})})]}),t.jsx(j.Provider,{value:{total:m,page:1,SetPage:d,limit:6},children:t.jsx(w,{loading:x,tableData:l,columns:r})})]})}const F=[{label:"All Alerts",value:"All Alerts"},{label:"Critical",value:"Critical"},{label:"Warning",value:"Warning"},{label:"Informational",value:"Info"}];export{F as alertHistorySegmentOptions,K as default};
