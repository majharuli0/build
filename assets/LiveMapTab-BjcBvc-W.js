import{r as x,j as e,e_ as b,ao as v}from"./index-BrMMENGu.js";import{D as g}from"./RoomMap3-BerE-b19.js";import{u as j,D as w}from"./RoomMap4-DJVmbZjs.js";import{C as N}from"./UseCustomContext-D3uf1dh5.js";import{F as r}from"./index-DrEfZHe-.js";import"./to-gfa2jJ4a.js";try{let d=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new d.Error().stack;t&&(d._sentryDebugIds=d._sentryDebugIds||{},d._sentryDebugIds[t]="3028e2b6-64ba-4d4a-99f1-a4a69f78cb18",d._sentryDebugIdIdentifier="sentry-dbid-3028e2b6-64ba-4d4a-99f1-a4a69f78cb18")}catch{}function z(){var f;const d=x.useContext(N),{elderlyDetails:t}=d||{},u=t==null?void 0:t.deviceId,[m,h]=x.useState({});function p(s){return v(s)}return j({onMessage:s=>{var c;const i=(c=JSON.parse(s==null?void 0:s.message))==null?void 0:c.payload;if(i!=null&&i.deviceCode&&(i!=null&&i.position)){const n=p(i.position);h(l=>({...l,[i.deviceCode]:n}))}},dependencies:[u]}),e.jsx("div",{className:"flex flex-col gap-4 mt-6 overflow-hidden",children:(t==null?void 0:t.rooms)&&((f=t==null?void 0:t.rooms)==null?void 0:f.filter(s=>s.device_no).map((s,i)=>{var l;const n=(((l=s.device_no)==null?void 0:l.split(",").map(o=>o.trim()))||[]).flatMap(o=>m[o]||[]);return e.jsxs("div",{className:"flex flex-col gap-4 bg-white rounded-2xl p-4 h-[700px]",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s==null?void 0:s.name}),e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit z-50",children:[n.length>0&&e.jsx(b,{color:"white",overlayInnerStyle:{color:"black",padding:"10px"},title:n.map((o,a)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{style:{backgroundColor:o==null?void 0:o.color},className:"p-2 rounded-full",children:e.jsx(r,{size:14,color:"white"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm m-0",children:o==null?void 0:o.posture})})]},a)),children:e.jsx("div",{className:"flex -space-x-4 cursor-pointer",children:n.map((o,a)=>e.jsx("div",{style:{backgroundColor:o==null?void 0:o.color},className:"p-1 rounded-full border-2 border-white",children:e.jsx(r,{size:16,color:"white"})},a))})}),n.length===0&&e.jsx("div",{className:"bg-primary p-1 rounded-full border-2 border-white",children:e.jsx(r,{size:16,color:"white"})}),e.jsx("span",{className:"font-bold text-lg",children:n.length})]}),e.jsx("div",{id:"roomMap",className:"w-full h-full scale-[1.2] mt-14",children:(s==null?void 0:s.mount_type)===2?e.jsx(w,{roomInfo:s,position:n}):e.jsx(g,{roomInfo:s,position:n})})]})]},i)}))})}export{z as default};
//# sourceMappingURL=LiveMapTab-BjcBvc-W.js.map
