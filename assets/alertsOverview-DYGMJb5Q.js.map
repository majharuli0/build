{"version":3,"file":"alertsOverview-DYGMJb5Q.js","sources":["../../src/Pages/Supportnursing/Dashboards/Components/3xLineChart/MultiLineChart.jsx","../../src/Pages/Supportnursing/Dashboards/Components/AlertsOverview/alertsOverview.jsx"],"sourcesContent":["import React from \"react\";\r\nimport ReactEcharts from \"echarts-for-react\";\r\nimport \"echarts/lib/chart/line\";\r\nimport { Empty } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\n\r\nexport default function MultiLineChart({ data = [], fromDate, toDate }) {\r\n  // Function to generate week days between fromDate and toDate\r\n  const generateWeekDays = (fromDate, toDate) => {\r\n    const days = [];\r\n    let current = dayjs(fromDate);\r\n    while (current.isBefore(toDate) || current.isSame(toDate, \"day\")) {\r\n      days.push(current.format(\"YYYY-MM-DD\"));\r\n      current = current.add(1, \"day\");\r\n    }\r\n    return days;\r\n  };\r\n\r\n  // Map data into a structured format for the chart\r\n  const weekDays = generateWeekDays(fromDate, toDate);\r\n\r\n  const structuredData = weekDays.map((day) => {\r\n    const critical = data\r\n      .filter((item) => item.date === day && item.alarm_group === \"Critical\")\r\n      .reduce((sum, item) => sum + item.count, 0);\r\n\r\n    const warning = data\r\n      .filter((item) => item.date === day && item.alarm_group === \"Warning\")\r\n      .reduce((sum, item) => sum + item.count, 0);\r\n\r\n    const problem = data\r\n      .filter((item) => item.date === day && item.alarm_group === \"Info\")\r\n      .reduce((sum, item) => sum + item.count, 0);\r\n\r\n    return { day: dayjs(day).format(\"ddd\"), critical, warning, problem };\r\n  });\r\n\r\n  const option = {\r\n    tooltip: {\r\n      trigger: \"axis\",\r\n    },\r\n    grid: {\r\n      left: \"0%\",\r\n      right: \"0%\",\r\n      bottom: \"20%\",\r\n      top: \"10%\",\r\n      containLabel: true,\r\n    },\r\n    legend: {\r\n      show: true,\r\n      orient: \"horizontal\", // Align horizontally\r\n      bottom: \"10%\", // Position at the bottom\r\n    },\r\n    xAxis: {\r\n      type: \"category\",\r\n      data: structuredData.map((item) => item.day),\r\n    },\r\n    yAxis: {\r\n      type: \"value\",\r\n    },\r\n    series: [\r\n      {\r\n        name: \"Critical\",\r\n        type: \"line\",\r\n        data: structuredData.map((item) => item.critical),\r\n        itemStyle: { color: \"#FF0000\" },\r\n        smooth: true,\r\n      },\r\n      {\r\n        name: \"Warning\",\r\n        type: \"line\",\r\n        data: structuredData.map((item) => item.warning),\r\n        itemStyle: { color: \"#FFA500\" },\r\n        smooth: true,\r\n      },\r\n      {\r\n        name: \"Problem\",\r\n        type: \"line\",\r\n        data: structuredData.map((item) => item.problem),\r\n        itemStyle: { color: \"#800080\" },\r\n        smooth: true,\r\n      },\r\n    ],\r\n  };\r\n\r\n  if (!data.length) {\r\n    return (\r\n      <div className=\"h-full flex items-center w-full justify-center\">\r\n        <Empty description=\"No data available to show\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ReactEcharts\r\n      option={option}\r\n      style={{ width: \"100% !important\", height: \"100%\" }}\r\n    />\r\n  );\r\n}\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { ConfigProvider } from \"antd\";\r\nimport WeeklyPicker from \"@/Components/WeeklyPicker/WeeklyPicker\";\r\nimport MultiLineChart from \"../../Components/3xLineChart/MultiLineChart\";\r\nimport { getAlertsOverviewGraph } from \"@/api/elderlySupport\";\r\nimport dayjs from \"dayjs\";\r\n\r\nexport default function AlertsOverview() {\r\n  const [fromDate, setFromDate] = useState(\r\n    dayjs().subtract(6, \"days\").format(\"YYYY-MM-DD\")\r\n  );\r\n  const [toDate, setToDate] = useState(dayjs().format(\"YYYY-MM-DD\"));\r\n  const [overviewData, setoverviewData] = useState([]);\r\n  const getAlersOverview = useCallback(() => {\r\n    getAlertsOverviewGraph({\r\n      from_date: toDate,\r\n      to_date: fromDate,\r\n    })\r\n      .then((res) => {\r\n        setoverviewData(res?.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [toDate]);\r\n  useEffect(() => {\r\n    getAlersOverview();\r\n  }, [getAlersOverview]);\r\n\r\n  function handleWeeklyMonthly(e) {\r\n    if (e) {\r\n      setFromDate(e.start);\r\n      setToDate(e.end);\r\n    } else {\r\n      setFromDate(dayjs().subtract(6, \"days\").format(\"YYYY-MM-DD\"));\r\n      setToDate(dayjs().format(\"YYYY-MM-DD\"));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full h-full\">\r\n      <div id=\"ChartHeader\" className=\"w-full flex justify-between\">\r\n        <h1 className=\"text-[24px] font-bold\">Overview</h1>\r\n        <div id=\"chartController\" className=\"flex gap-4\">\r\n          <ConfigProvider\r\n            theme={{\r\n              token: {\r\n                fontFamily: \"Baloo2\",\r\n                colorPrimary: \"#8086AC\",\r\n                colorLinkActive: \"#8086AC\",\r\n                colorLinkHover: \"#8086AC\",\r\n                colorLink: \"#8086AC\",\r\n              },\r\n            }}\r\n          >\r\n            <WeeklyPicker\r\n              style={{ height: \"fit-content\" }}\r\n              handleChange={(e) => handleWeeklyMonthly(e)}\r\n            />\r\n          </ConfigProvider>\r\n        </div>\r\n      </div>\r\n      <div className=\"w-full h-full\">\r\n        <MultiLineChart\r\n          data={overviewData}\r\n          fromDate={fromDate}\r\n          toDate={toDate}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["MultiLineChart","data","fromDate","toDate","structuredData","days","current","dayjs","day","critical","item","sum","warning","problem","option","jsx","ReactEcharts","Empty","AlertsOverview","setFromDate","useState","setToDate","overviewData","setoverviewData","getAlersOverview","useCallback","getAlertsOverviewGraph","res","err","useEffect","handleWeeklyMonthly","e","jsxs","ConfigProvider","WeeklyPicker"],"mappings":"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"}