{"version":3,"file":"NurseDashboard-BOtnbNch.js","sources":["../../src/Pages/Supportnursing/Dashboards/Components/RoomvView/nurseRoomMap.jsx","../../src/Pages/Supportnursing/Dashboards/Components/RoomvView/CurrentRateData.jsx","../../src/Pages/Supportnursing/Dashboards/Components/RoomvView/NursingHomeRoomView.jsx","../../src/Pages/Supportnursing/Dashboards/NurseDashboard.jsx"],"sourcesContent":["import React, { useCallback, useState, useEffect, useRef } from \"react\";\r\nimport Slider from \"react-slick\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport Room1 from \"@/Components/RoomMap/RoomMap3\";\r\nimport Room2 from \"@/Components/RoomMap/RoomMap4\";\r\nimport \"./style.css\";\r\nimport { Empty } from \"antd\";\r\nimport useWebSocket from \"@/hook/useWebSoket\";\r\nimport { decodePosition } from \"@/utils/helper\";\r\n\r\nexport default function NurseRoomMap({ rooms = [] }) {\r\n  const [roomData, setRoomData] = useState({}); // Store room-specific data\r\n  const timeoutRefs = useRef({}); // Track timeouts for each device\r\n  const heartBreathRateRefs = useRef({}); // Track heart breath activity for each device\r\n  const lastHeartBreathTimestamps = useRef({}); // Track last heartbreath timestamps for each device\r\n  console.log(rooms);\r\n\r\n  const settings = {\r\n    dots: rooms.length >= 2,\r\n    infinite: rooms.length > 2,\r\n    speed: 500,\r\n    slidesToShow: 1,\r\n    slidesToScroll: 1,\r\n    draggable: true,\r\n    arrows: false,\r\n    appendDots: (dots) => (\r\n      <div\r\n        style={{\r\n          backgroundColor: \"transparent\",\r\n          borderRadius: \"10px\",\r\n          padding: \"2px\",\r\n        }}\r\n      >\r\n        <ul id=\"dots\" style={{ margin: \"0px\" }}>\r\n          {\" \"}\r\n          {dots}{\" \"}\r\n        </ul>\r\n      </div>\r\n    ),\r\n  };\r\n\r\n  const handleDecode = useCallback((code, deviceNo) => {\r\n    const data = decodePosition(code);\r\n\r\n    // Modify people data if heartBreathRateActive is true\r\n    if (heartBreathRateRefs.current[deviceNo] && data[0]?.postureIndex === 4) {\r\n      data[0].postureIndex = 6;\r\n      data[0].posture = \"Resident on Bed\";\r\n      data[0].color = \"#252F67\";\r\n    }\r\n\r\n    setRoomData((prev) => ({\r\n      ...prev,\r\n      [deviceNo]: {\r\n        ...prev[deviceNo],\r\n        peopleData: data,\r\n      },\r\n    }));\r\n  }, []);\r\n\r\n  const handleHeartBreathUpdate = useCallback((deviceNo) => {\r\n    // Set heartBreathRateActive to true for the device\r\n    heartBreathRateRefs.current[deviceNo] = true;\r\n    lastHeartBreathTimestamps.current[deviceNo] = Date.now();\r\n\r\n    // Clear any existing timeout for this device\r\n    if (timeoutRefs.current[deviceNo]) {\r\n      clearTimeout(timeoutRefs.current[deviceNo]);\r\n    }\r\n\r\n    // Set a timeout to reset heart breath activity after 5 seconds\r\n    timeoutRefs.current[deviceNo] = setTimeout(() => {\r\n      heartBreathRateRefs.current[deviceNo] = false;\r\n\r\n      // Reset the posture and update the data for this device\r\n      setRoomData((prev) => ({\r\n        ...prev,\r\n        [deviceNo]: {\r\n          ...prev[deviceNo],\r\n          peopleData: prev[deviceNo]?.peopleData?.map((person) => ({\r\n            ...person,\r\n            postureIndex: person.postureIndex === 6 ? 4 : person.postureIndex,\r\n            posture: person.postureIndex === 6 ? \"Standing\" : person.posture,\r\n            color: person.postureIndex === 6 ? \"#A7E2FE\" : person.color,\r\n          })),\r\n        },\r\n      }));\r\n    }, 5000);\r\n\r\n    // Immediately set heartBreathRateActive to true in roomData\r\n    setRoomData((prev) => ({\r\n      ...prev,\r\n      [deviceNo]: {\r\n        ...prev[deviceNo],\r\n        heartBreathRateActive: true,\r\n      },\r\n    }));\r\n  }, []);\r\n\r\n  // useWebSocket({\r\n  //   onMessage: (data) => {\r\n  //     const payload = JSON.parse(data?.message)?.payload;\r\n\r\n  //     if (payload?.position) {\r\n  //       handleDecode(payload.position, payload.deviceCode);\r\n  //     }\r\n\r\n  //     if (payload?.heartbreath) {\r\n  //       handleHeartBreathUpdate(payload.deviceCode);\r\n  //     }\r\n  //   },\r\n  //   dependencies: [handleDecode, handleHeartBreathUpdate],\r\n  // });\r\n\r\n  // useEffect(() => {\r\n  //   const interval = setInterval(() => {\r\n  //     const now = Date.now();\r\n\r\n  //     // Check each device's last heart-breath timestamp\r\n  //     Object.keys(lastHeartBreathTimestamps.current).forEach((deviceNo) => {\r\n  //       if (\r\n  //         lastHeartBreathTimestamps.current[deviceNo] &&\r\n  //         now - lastHeartBreathTimestamps.current[deviceNo] > 5000\r\n  //       ) {\r\n  //         heartBreathRateRefs.current[deviceNo] = false;\r\n\r\n  //         // Reset the posture and update the data for this device\r\n  //         setRoomData((prev) => ({\r\n  //           ...prev,\r\n  //           [deviceNo]: {\r\n  //             ...prev[deviceNo],\r\n  //             heartBreathRateActive: false,\r\n  //             peopleData: prev[deviceNo]?.peopleData?.map((person) => ({\r\n  //               ...person,\r\n  //               postureIndex:\r\n  //                 person.postureIndex === 6 ? 4 : person.postureIndex,\r\n  //               posture:\r\n  //                 person.postureIndex === 6 ? \"Standing\" : person.posture,\r\n  //               color: person.postureIndex === 6 ? \"#A7E2FE\" : person.color,\r\n  //             })),\r\n  //           },\r\n  //         }));\r\n  //       }\r\n  //     });\r\n  //   }, 1000);\r\n\r\n  //   return () => {\r\n  //     clearInterval(interval);\r\n  //     Object.values(timeoutRefs.current).forEach((timeout) => {\r\n  //       clearTimeout(timeout);\r\n  //     });\r\n  //   };\r\n  // }, []);\r\n\r\n  return (\r\n    <>\r\n      {rooms.length > 0 && (\r\n        <div\r\n          id=\"rooms\"\r\n          className=\"w-full mb-2 transition-all duration-300 h-full\"\r\n        >\r\n          <Slider\r\n            {...settings}\r\n            className=\"w-full transition-all duration-300 h-full\"\r\n          >\r\n            {rooms.map((room, index) => (\r\n              <div\r\n                key={index}\r\n                className=\"px-2 overflow-hidden transition-all duration-300 w-full h-[355px] \"\r\n              >\r\n                <div\r\n                  id=\"roomNmaeAndStatus\"\r\n                  className=\"flex items-center gap-2 w-fit bg-white pr-4 py-1.5 border border-gray-200 p-2 rounded-full absolute top-2 left-2\"\r\n                >\r\n                  <div\r\n                    id=\"dot\"\r\n                    className=\"size-3 rounded-full\"\r\n                    style={{\r\n                      backgroundColor:\r\n                        room?.is_device_bind === true ? \"green\" : \"red\",\r\n                    }}\r\n                  ></div>\r\n                  <p>{room?.name}</p>\r\n                </div>\r\n                {room?.is_device_bind && room?.mount_type === 2 && (\r\n                  <Room2 roomInfo={room} />\r\n                )}\r\n                {room?.is_device_bind && room?.mount_type === 1 && (\r\n                  <Room1 roomInfo={room} />\r\n                )}\r\n                {!room?.is_device_bind && (\r\n                  <span className=\"w-full h-full flex items-center justify-center\">\r\n                    <p>No Device Data Available</p>\r\n                  </span>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </Slider>\r\n        </div>\r\n      )}\r\n      {rooms.length === 0 && <Empty description=\"No Room Found \" />}\r\n    </>\r\n  );\r\n}\r\n","import { WebSocketContext } from \"@/Context/WebSoketHook\";\r\nimport { decodeHeartBreath } from \"@/utils/helper\";\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\nimport { CustomContext } from \"@/Context/UseCustomContext\";\r\n\r\nexport default function CurrentRateData({ style, rooms }) {\r\n  const deviceIDs =\r\n    rooms?.rooms?.length > 0\r\n      ? rooms.rooms\r\n          .filter((item) => item.device_no)\r\n          .map((item) => item.device_no)\r\n          .join(\",\")\r\n      : \"\";\r\n  // const deviceCode = elderlyDetails?.deviceId;\r\n  const { deviceData } = useContext(WebSocketContext);\r\n  const deviceCodes = deviceIDs\r\n    ? deviceIDs.split(\",\").map((code) => code.trim())\r\n    : [];\r\n  const [data, setData] = useState({\r\n    time: [],\r\n    heartRate: [],\r\n    breathRate: [],\r\n  });\r\n\r\n  const [liveRateData, setLiveRateData] = useState(null);\r\n  const [lastUpdate, setLastUpdate] = useState(Date.now());\r\n\r\n  // Decode action handler\r\n  const handleDecode = (base64Input) => {\r\n    const data = decodeHeartBreath(base64Input);\r\n    setLiveRateData(data);\r\n    setLastUpdate(Date.now());\r\n  };\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      const now = Date.now();\r\n      const isStale = now - lastUpdate > 5000;\r\n\r\n      if (isStale) {\r\n        setLiveRateData(null);\r\n        setData({ time: [], heartRate: [], breathRate: [] });\r\n      } else if (liveRateData) {\r\n        const newTime = new Date().toLocaleTimeString();\r\n\r\n        // Update the data state with liveRateData values\r\n        setData((prevData) => ({\r\n          time: [...prevData.time, newTime].slice(-30),\r\n          heartRate: [...prevData.heartRate, liveRateData.heartRateValue].slice(\r\n            -30\r\n          ),\r\n          breathRate: [\r\n            ...prevData.breathRate,\r\n            liveRateData.breathingValue,\r\n          ].slice(-30),\r\n        }));\r\n      }\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [liveRateData, lastUpdate]);\r\n\r\n  useEffect(() => {\r\n    if (!deviceCodes.length) {\r\n      setLiveRateData(null);\r\n      return;\r\n    }\r\n\r\n    for (const code of [deviceCodes]) {\r\n      if (!deviceData[code]) continue;\r\n\r\n      const { heartBreath } = deviceData[code];\r\n      if (heartBreath) {\r\n        console.log(code);\r\n\r\n        handleDecode(heartBreath);\r\n        return;\r\n      }\r\n    }\r\n\r\n    setLiveRateData(null);\r\n  }, [deviceData]);\r\n  return (\r\n    <div id=\"liveHeartAndBreathRate\" className=\"flex w-fit py-4 gap-8\">\r\n      <div\r\n        id=\"heartRate\"\r\n        className=\"flex flex-col items-start justify-start w-full\"\r\n      >\r\n        <h2\r\n          className={`text-[27px] font-bold leading-none ${style.textColor}  text-nowrap`}\r\n        >\r\n          {liveRateData?.heartRateValue ?? \"--\"}{\" \"}\r\n          <span className=\"text-sm\">/BPM</span>\r\n        </h2>\r\n        <h2\r\n          className={`text-sm font-medium ${style.textColor} opacity-80 text-nowrap`}\r\n        >\r\n          Heart Activity\r\n        </h2>\r\n      </div>\r\n      <div\r\n        id=\"breathRate\"\r\n        className=\"flex flex-col items-start justify-start w-full\"\r\n      >\r\n        <h2\r\n          className={`text-[27px] font-bold leading-none ${style.textColor}  text-nowrap`}\r\n        >\r\n          {liveRateData?.breathingValue ?? \"--\"}{\" \"}\r\n          <span className=\"text-sm\">/BPM</span>\r\n        </h2>\r\n        <h2\r\n          className={`text-sm font-medium ${style.textColor} opacity-80  text-nowrap`}\r\n        >\r\n          Breathing Pattern\r\n        </h2>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { Dropdown, ConfigProvider, Spin, Empty } from \"antd\";\r\nimport { IoClose } from \"react-icons/io5\";\r\nimport { LuPhoneCall } from \"react-icons/lu\";\r\nimport \"./style.css\";\r\nimport { getAlertList } from \"@/api/elderlySupport\";\r\nimport {\r\n  decodeHeartBreath,\r\n  transformDateAndTime,\r\n  getAlertInfoViaEvent,\r\n} from \"@/utils/helper\";\r\nimport dayjs from \"dayjs\";\r\nimport { getElderliesPriority } from \"@/api/elderly\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport NurseRoomMap from \"./nurseRoomMap\";\r\nimport AlertCloseModal from \"@/Components/ActiveAlerts/AlertCloseModal\";\r\nimport { subscribeToMqtt, unsubscribeFromMqtt } from \"@/api/deviceReports\";\r\nimport { WebSocketProvider } from \"@/Context/WebSoketHook\";\r\nimport CurrentRateData from \"./CurrentRateData\";\r\n\r\nexport default function NursingHomeRoomView({\r\n  refreshAlertList,\r\n  roomList = [],\r\n  loadingsData,\r\n}) {\r\n  const [selectedRoom, setSelectedRoom] = useState(null);\r\n  const navigate = useNavigate(); // Initialize the navigate function\r\n  const [openAlertCloseModal, setOpenAlertCloseModal] = useState(false);\r\n  const [selectedAlert, setSelectedAlert] = useState(null);\r\n\r\n  const [style, setStyle] = useState({\r\n    textColor: \"text-white\",\r\n    bodyColor: \"text-white\",\r\n    txtc: \"#fff\",\r\n    bgc: \"#fff\",\r\n  });\r\n  const [data, setData] = useState({\r\n    time: [],\r\n    heartRate: [],\r\n    breathRate: [],\r\n  });\r\n\r\n  const [liveRateData, setLiveRateData] = useState(null);\r\n  const [lastUpdate, setLastUpdate] = useState(Date.now());\r\n  const [alertList, setAlertList] = useState([]);\r\n  const [loadingAlert, setLoadingAlert] = useState(false);\r\n  const [page, setPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const listRef = useRef(null);\r\n\r\n  const getAlertListData = useCallback(() => {\r\n    if (loadingAlert) return;\r\n    setLoadingAlert(true);\r\n    getAlertList({\r\n      to_date: \"2024-11-30\",\r\n      from_date: dayjs().format(\"YYYY-MM-DD\"),\r\n      is_resolved: false,\r\n      elderly_id: selectedRoom?._id,\r\n      limit: 20,\r\n      page,\r\n    })\r\n      .then((res) => {\r\n        setAlertList((prev) => [...prev, ...res.data]);\r\n        setLoadingAlert(false);\r\n      })\r\n      .catch((err) => {\r\n        setLoadingAlert(false);\r\n        console.error(err);\r\n      });\r\n  }, [selectedRoom?._id, page]);\r\n\r\n  useEffect(() => {\r\n    if (selectedRoom?._id) {\r\n      setAlertList([]);\r\n      setPage(1);\r\n    }\r\n  }, [selectedRoom?._id]);\r\n\r\n  useEffect(() => {\r\n    if (selectedRoom?._id) {\r\n      getAlertListData();\r\n    }\r\n  }, [getAlertListData]);\r\n\r\n  const handleScroll = () => {\r\n    const { scrollTop, scrollHeight, clientHeight } = listRef.current;\r\n\r\n    // Check if user has scrolled to the bottom\r\n    if (scrollTop + clientHeight >= scrollHeight - 10 && !loadingAlert) {\r\n      setPage((prevPage) => prevPage + 1);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    if (selectedRoom) {\r\n      setStyle({\r\n        textColor:\r\n          getAlertInfoViaEvent(selectedRoom)?.label !==\r\n          (\"Critical\" || \"Warning\" || \"Info\")\r\n            ? \"text-primary\"\r\n            : \"text-white\",\r\n        bodyColor:\r\n          getAlertInfoViaEvent(selectedRoom)?.label !==\r\n          (\"Critical\" || \"Warning\" || \"Info\")\r\n            ? \"text-primary\"\r\n            : \"text-white\",\r\n        txtc:\r\n          getAlertInfoViaEvent(selectedRoom)?.label !==\r\n          (\"Critical\" || \"Warning\" || \"Info\")\r\n            ? \"#fff\"\r\n            : \"#000\",\r\n        bgc:\r\n          getAlertInfoViaEvent(selectedRoom)?.label !==\r\n          (\"Critical\" || \"Warning\" || \"Info\")\r\n            ? \"#fff\"\r\n            : \"#000\",\r\n      });\r\n    }\r\n  }, [selectedRoom]);\r\n  const getInitials = (name = \"\") => {\r\n    const splitName = name?.split(\" \");\r\n    return `${splitName[0]?.[0]?.toUpperCase() || \"\"}${\r\n      splitName[1]?.[0]?.toUpperCase() || \"\"\r\n    }`;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const deviceCode =\r\n      selectedRoom?.rooms?.length > 0\r\n        ? selectedRoom.rooms\r\n            .filter((item) => item.device_no) // Filter out devices with no device number\r\n            .map((item) => item.device_no) // Get the device numbers\r\n            .join(\", \") // Join the device numbers as a comma-separated string\r\n        : \"\";\r\n\r\n    if (deviceCode && selectedRoom) {\r\n      // Split the deviceCode string into an array of device numbers\r\n      const deviceCodesArray = deviceCode.split(\", \");\r\n\r\n      // Loop over each device number and subscribe to MQTT individually\r\n      deviceCodesArray.forEach((deviceNo) => {\r\n        subscribeToMqtt({\r\n          uid: deviceNo,\r\n          messageType: [\"1\", \"2\", \"3\", \"4\"],\r\n          topics: {\r\n            pub: [deviceNo],\r\n          },\r\n        })\r\n          .then((res) => {\r\n            console.log(`Subscription for Device No ${deviceNo}:`, res);\r\n          })\r\n          .catch((err) => {\r\n            console.log(`Error for Device No ${deviceNo}:`, err);\r\n          });\r\n      });\r\n    }\r\n  }, [selectedRoom]);\r\n\r\n  const handleViewClick = (row) => {\r\n    window.scrollTo(0, 0);\r\n    navigate(`/supporter/elderlies/elderly-profile/${row?._id}`); // Navigate to the profile page with the ID\r\n  };\r\n\r\n  const onCloseModal = () => {\r\n    const deviceCode =\r\n      selectedRoom?.rooms?.length > 0\r\n        ? selectedRoom.rooms\r\n            .filter((item) => item.device_no) // Filter out rooms with no device number\r\n            .map((item) => item.device_no) // Map to get only device numbers\r\n            .join(\", \") // Join the device numbers into a comma-separated string\r\n        : \"\";\r\n\r\n    if (deviceCode && selectedRoom) {\r\n      // Split the deviceCode string into an array of device numbers\r\n      const deviceCodesArray = deviceCode.split(\", \");\r\n\r\n      // Loop over each device number and unsubscribe from MQTT individually\r\n      deviceCodesArray.forEach((deviceNo) => {\r\n        unsubscribeFromMqtt({\r\n          uid: deviceNo,\r\n          messageType: [\"1\", \"2\", \"3\", \"4\"],\r\n        })\r\n          .then((res) => {\r\n            // You can handle the response here if needed\r\n          })\r\n          .catch((err) => {\r\n            console.log(`Error unsubscribing for Device No ${deviceNo}:`, err);\r\n          });\r\n      });\r\n    }\r\n\r\n    // Reset the selected room\r\n    setSelectedRoom(null);\r\n  };\r\n\r\n  if (loadingsData) {\r\n    return (\r\n      <>\r\n        {loadingsData && (\r\n          <span className=\"w-full h-full flex items-center justify-center\">\r\n            <Spin />\r\n          </span>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n  if (!roomList.length) {\r\n    return (\r\n      <div className=\"h-full flex items-center w-full justify-center\">\r\n        <Empty description=\"No room available to show\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div id=\"NurseRoomView\" className=\"w-full h-full relative\">\r\n        <div className=\"w-full h-full grid grid-cols-10  overflow-auto\">\r\n          {roomList?.map((item, ind) => (\r\n            <motion.div\r\n              key={ind}\r\n              layoutId={item?._id}\r\n              onClick={() => setSelectedRoom(item)} // Store the entire room object\r\n              className={`text-white text-base ${\r\n                getAlertInfoViaEvent(item?.alarms_data[0])?.label === \"Critical\"\r\n                  ? \"bg-[#FF1D1D] animate-scaleUpDown1\"\r\n                  : getAlertInfoViaEvent(item?.alarms_data[0])?.label ===\r\n                    \"Warning\"\r\n                  ? \"bg-[#FF9831] animate-scaleUpDown2\"\r\n                  : getAlertInfoViaEvent(item?.alarms_data[0])?.label === \"Info\"\r\n                  ? \"bg-[#6471FF]\"\r\n                  : \"bg-[#F4F4F6] !text-primary\"\r\n              }  rounded-lg cursor-pointer flex justify-center m-2 items-center font-semibold min-w-[55px] min-h-[65px] h-fit `}\r\n            >\r\n              <motion.h5>{item?.room_no || \"--\"}</motion.h5>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n        <WebSocketProvider\r\n          deviceId={\r\n            selectedRoom?.rooms?.length > 0\r\n              ? selectedRoom?.rooms\r\n                  .filter((item) => item.device_no)\r\n                  .map((item) => item.device_no)\r\n                  .join(\",\")\r\n              : \"\"\r\n          }\r\n        >\r\n          <AnimatePresence>\r\n            {selectedRoom && (\r\n              <motion.div\r\n                className=\"absolute inset-0 flex justify-center items-center\"\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                exit={{ opacity: 0 }}\r\n              >\r\n                <motion.div\r\n                  className=\"bg-black bg-opacity-50 w-full h-full flex justify-center items-center\"\r\n                  onClick={() => onCloseModal()}\r\n                >\r\n                  <motion.div\r\n                    className={`${\r\n                      getAlertInfoViaEvent(selectedRoom)?.label === \"Critical\"\r\n                        ? \"bg-[#FF1D1D]\"\r\n                        : getAlertInfoViaEvent(selectedRoom)?.label ===\r\n                          \"Warning\"\r\n                        ? \"bg-[#FF9831]\"\r\n                        : getAlertInfoViaEvent(selectedRoom)?.label === \"Info\"\r\n                        ? \"bg-[#6471FF]\"\r\n                        : \"bg-[#F4F4F6]\"\r\n                    } p-4 rounded-xl w-[95%] h-[90%]`}\r\n                    // style={{ margin: \"50px\" }}\r\n                    onClick={(e) => e.stopPropagation()}\r\n                    layoutId={selectedRoom?._id}\r\n                  >\r\n                    <motion.div className=\"flex justify-between items-start\">\r\n                      {\" \"}\r\n                      {/* <motion.div\r\n                      className={`rounded-xl flex flex-col items-start justify-start w-[35%]`}\r\n                    >\r\n                      <motion.h2\r\n                        className={`leading-none font-semibold ${style.bodyColor} opacity-70`}\r\n                      >\r\n                        Room Number\r\n                      </motion.h2>\r\n                      <motion.h5\r\n                        className={`text-4xl font-bold leading-none ${style.textColor}`}\r\n                      >\r\n                        {selectedRoom?.room_no || \"--\"}\r\n                      </motion.h5>\r\n                    </motion.div> */}\r\n                      <div\r\n                        className=\"w-[65%] flex items-start cursor-pointer bg-white hover:bg-white/75 rounded-xl transition-all duration-300 ease-in\"\r\n                        onClick={() => handleViewClick(selectedRoom)}\r\n                      >\r\n                        <div\r\n                          id=\"elderly-profile\"\r\n                          className=\"flex items-center w-full  justify-between px-4 \"\r\n                        >\r\n                          <div className=\"flex items-center gap-2\">\r\n                            {/* <div\r\n                            id=\"image\"\r\n                            className=\"relative rounded-full min-h-[60px]  h-[60px] min-w-[60px] w-[60px] bg-[#fff] flex items-center justify-center font-semibold text-xl\"\r\n                          > */}\r\n                            {/* <div className=\"flex flex-col items-center gap-2\">\r\n                            {selectedRoom.alertStatus !== \"normal\" && (\r\n                              <span\r\n                                className={`animate-ping absolute inline-flex h-full w-full rounded-full ${\r\n                                  selectedRoom.alertStatus === \"critical\"\r\n                                    ? \"bg-red-50\"\r\n                                    : selectedRoom.alertStatus === \"warning\"\r\n                                    ? \"bg-orange-50\"\r\n                                    : selectedRoom.alertStatus === \"normal\"\r\n                                    ? \"bg-none\"\r\n                                    : \"bg-blue-50\"\r\n                                } opacity-75`}\r\n                              ></span>\r\n                            )}\r\n                            <span\r\n                              className={`relative rounded-full h-[80px] w-[80px] ${\r\n                                selectedRoom.alertStatus === \"critical\"\r\n                                  ? \"bg-red-500 border-red-500\"\r\n                                  : selectedRoom.alertStatus === \"warning\"\r\n                                  ? \"bg-orange-500 border-orange-500\"\r\n                                  : selectedRoom.alertStatus === \"normal\"\r\n                                  ? \"bg-green-500 border-green-500 !border-0\"\r\n                                  : \"bg-blue-500 border-blue-500\"\r\n                              } flex items-center justify-center overflow-hidden border-0`}\r\n                            >\r\n                              <img\r\n                                className=\"w-full h-full object-cover overflow-hidden\"\r\n                                src=\"https://www.shutterstock.com/image-photo/elderly-hispanic-man-grey-hair-260nw-2511514837.jpg\"\r\n                                alt=\"\"\r\n                              />\r\n                            </span>\r\n                          </div> */}\r\n                            {/* <img\r\n                            className=\"w-full h-full object-cover overflow-hidden\"\r\n                            src=\"https://www.shutterstock.com/image-photo/elderly-hispanic-man-grey-hair-260nw-2511514837.jpg\"\r\n                            alt=\"\"\r\n                          /> */}\r\n                            {/* {getInitials(selectedRoom?.name)} */}\r\n                            {/* </div> */}\r\n\r\n                            <div className=\"flex flex-col items-start w-full gap-1\">\r\n                              <h2\r\n                                className={`text-xl font-bold ${style.textColor} text-center text-nowrap m-0  leading-none`}\r\n                              >\r\n                                {selectedRoom?.name}\r\n                              </h2>\r\n                              <h2\r\n                                className={`text-base font-medium ${style.textColor} opacity-80 text-center text-nowrap m-0 leading-none`}\r\n                              >\r\n                                Age: <span>{selectedRoom?.age}</span>\r\n                              </h2>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <CurrentRateData style={style} rooms={selectedRoom} />\r\n                        </div>\r\n                      </div>\r\n                      <motion.button\r\n                        className=\"p-2 bg-black/5  hover:bg-black/10 rounded-full\"\r\n                        onClick={() => onCloseModal()}\r\n                      >\r\n                        <IoClose size={24} className={style.textColor} />\r\n                      </motion.button>\r\n                    </motion.div>\r\n                    <motion.div className=\"flex h-[80%] items-center mt-2\">\r\n                      <motion.div className=\"h-full  w-[65%] bg-white rounded-xl flex flex-col items-center justify-center\">\r\n                        <NurseRoomMap\r\n                          rooms={selectedRoom?.rooms?.filter(\r\n                            (room) => room.device_no\r\n                          )}\r\n                        />\r\n                      </motion.div>\r\n                      <motion.div\r\n                        className=\"h-full w-[35%] rounded-xl p-2 border-1 overflow-y-auto overflow-x-hidden gap-2 flex flex-col pt-0\"\r\n                        ref={listRef}\r\n                        onScroll={handleScroll}\r\n                      >\r\n                        {alertList?.map((alarm, indx) => (\r\n                          <div\r\n                            className=\"flex items-center gap-2 w-[350px] bg-white p-2 rounded-lg cursor-pointer \"\r\n                            key={indx}\r\n                            onClick={() => {\r\n                              if (\r\n                                getAlertInfoViaEvent(alarm)?.label !== \"Info\"\r\n                              ) {\r\n                                setSelectedAlert(alarm);\r\n                                setOpenAlertCloseModal(true);\r\n                              }\r\n                            }}\r\n                          >\r\n                            <div id=\"Icon\" className=\"w-[38px] h-[38px]\">\r\n                              {getAlertInfoViaEvent(alarm)?.icon ? (\r\n                                <img\r\n                                  src={getAlertInfoViaEvent(alarm).icon}\r\n                                  alt=\"Alert Icon\"\r\n                                  width={38}\r\n                                  height={38}\r\n                                  className=\"min-w-[38px]\"\r\n                                />\r\n                              ) : null}\r\n                            </div>\r\n                            <div className=\"flex items-center justify-between w-full\">\r\n                              <div className=\"w-fit\">\r\n                                <h4 className=\"text-sm font-medium text-text-primary\">\r\n                                  {getAlertInfoViaEvent(alarm)?.title}\r\n                                </h4>\r\n                                <p className=\"text-xs text-text-secondary\">\r\n                                  {transformDateAndTime(alarm?.created_at)}\r\n                                </p>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                        {alertList.length === 0 && !loadingAlert && (\r\n                          <div className=\"h-full flex items-center w-full justify-center\">\r\n                            <Empty description=\"No alerts available to show\" />\r\n                          </div>\r\n                        )}\r\n                        {loadingAlert && (\r\n                          <div className=\"h-full w-full flex flex-col justify-center items-center\">\r\n                            <Spin />\r\n                          </div>\r\n                        )}\r\n                      </motion.div>\r\n                    </motion.div>\r\n                  </motion.div>\r\n                </motion.div>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n        </WebSocketProvider>\r\n      </div>\r\n      <AlertCloseModal\r\n        openAlertCloseModal={openAlertCloseModal}\r\n        setOpenAlertCloseModal={setOpenAlertCloseModal}\r\n        selectedAlert={selectedAlert}\r\n        getAlertListDatas={() => {\r\n          getAlertListData();\r\n          refreshAlertList();\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\n\r\nimport { Segmented, ConfigProvider, Select } from \"antd\";\r\nimport { HomeOutlined, AimOutlined } from \"@ant-design/icons\";\r\nimport NursingHomeRoomView from \"./Components/RoomvView/NursingHomeRoomView\";\r\nimport MultiLineChart from \"./Components/3xLineChart/MultiLineChart\";\r\nimport WeeklyPicker from \"@/Components/WeeklyPicker/WeeklyPicker\";\r\nimport WeeklyMonthlyPicker from \"@/Components/WeeklyMonthlyPicker/WeeklyMonthlyPicker\";\r\nimport CustomButton from \"@/Shared/button/CustomButton\";\r\nimport { DatePicker, Input } from \"antd\";\r\nconst { RangePicker } = DatePicker;\r\nimport { SidebarContext } from \"@/Context/CustomUsertable\";\r\nimport CustomTable from \"@/Shared/Table/CustomTable\";\r\nimport { LuPlus } from \"react-icons/lu\";\r\nimport { useAlertTableColumns } from \"../Utiles/utiles\";\r\nimport { LuNavigation } from \"react-icons/lu\";\r\nimport {\r\n  activeAlertsTableData,\r\n  recentlyClosedAlertsTableData,\r\n  eventsTableData,\r\n} from \"./mock\";\r\nimport ActiveAlertsCards from \"@/Components/ActiveAlerts/ActiveAlertsCards\";\r\nimport CreateAndEditModal from \"@/Components/CreateAndEditModal/CreateAndEditModal\";\r\nimport { getAlertList, getEventList } from \"@/api/elderlySupport\";\r\nimport dayjs from \"dayjs\";\r\nimport AlertsOverview from \"./Components/AlertsOverview/alertsOverview\";\r\nimport { getAlertsGroup } from \"@/utils/helper\";\r\nimport { getElderlies, getElderliesPriority } from \"@/api/elderly\";\r\nimport { updateUserDetails } from \"@/api/Users\";\r\nimport { requestPermission } from \"@/firebase\";\r\nimport ls from \"store2\";\r\n\r\nexport default function NurseDashboard() {\r\n  const [viewType, setViewType] = useState(\"Map View\");\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [expandedRowKeys, setExpandedRowKeys] = useState([]);\r\n  const activeAlertTableColumns = useAlertTableColumns(\"activeAlert\");\r\n  const recentlyClosedAlertTableColumns = useAlertTableColumns(\r\n    \"recentlyClosedAlert\"\r\n  );\r\n  const eventsTableColumns = useAlertTableColumns(\"events\");\r\n  function handleDatePicker(dateString) {\r\n    console.log(dateString);\r\n  }\r\n  const onExpand = (expanded, record) => {\r\n    if (expanded) {\r\n      setExpandedRowKeys([record._id]);\r\n    } else {\r\n      setExpandedRowKeys([]);\r\n    }\r\n  };\r\n  const [user, SetUser] = useState(ls.get(\"user\"));\r\n\r\n  const [roomList, setRoomList] = useState([]);\r\n  const [loadingsData, setLoadingData] = useState(true);\r\n  const [eventList, setEventList] = useState([]);\r\n  const [eventPage, setEventPage] = useState([]);\r\n  const [page, SetPage] = useState(1);\r\n  const [page2, setPage2] = useState(1);\r\n  const [alertList, setAlertList] = useState([]);\r\n  const [recentlyClosedAlert, setRecentlyClosedAlert] = useState([]);\r\n  const [alertQuery, setAcitveAlertQuery] = useState({});\r\n  const [historyAlertQuery, setHistoryAlertQuery] = useState({});\r\n  const [historyAlartLoading, setHistoryAlartLoading] = useState(true);\r\n  const [activeAlartLoading, setActiveAlartLoading] = useState(true);\r\n  const [searchResult, setSearchResult] = useState();\r\n  const [activeAlertTotal, setActiveAlertTotal] = useState();\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [isFocused, setIsFocused] = useState(false);\r\n  const getAlertListData = useCallback(() => {\r\n    setActiveAlartLoading(true);\r\n    getAlertList({\r\n      to_date: \"2024-11-30\",\r\n      from_date: dayjs().format(\"YYYY-MM-DD\"),\r\n      is_resolved: false,\r\n      ...page,\r\n      ...getAlertsGroup(\"Critical\"),\r\n      // ...alertQuery,\r\n    })\r\n      .then((res) => {\r\n        setAlertList(res?.data);\r\n        setActiveAlertTotal(res?.total);\r\n        setActiveAlartLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        setActiveAlartLoading(false);\r\n      });\r\n  }, [page]);\r\n  // }, [page, alertQuery]);\r\n\r\n  useEffect(() => {\r\n    getAlertListData();\r\n  }, [getAlertListData]);\r\n\r\n  const getRecentlyClosedAlerts = useCallback(() => {\r\n    setHistoryAlartLoading(true);\r\n    getAlertList({\r\n      to_date: \"2024-11-30\",\r\n      from_date: dayjs().format(\"YYYY-MM-DD\"),\r\n      is_resolved: true,\r\n      page: page2,\r\n      ...getAlertsGroup(\"Critical\"),\r\n      // ...historyAlertQuery,\r\n    })\r\n      .then((res) => {\r\n        setRecentlyClosedAlert(res.data);\r\n        setHistoryAlartLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setHistoryAlartLoading(false);\r\n      });\r\n  }, [page2]);\r\n  // }, [page2, historyAlertQuery]);\r\n\r\n  useEffect(() => {\r\n    getRecentlyClosedAlerts();\r\n  }, [getRecentlyClosedAlerts]);\r\n  const getAllEventList = useCallback(() => {\r\n    getEventList({\r\n      to_date: \"2024-11-30\",\r\n      from_date: dayjs().format(\"YYYY-MM-DD\"),\r\n      page: eventPage,\r\n    })\r\n      .then((res) => {\r\n        if (res.data.length > 0) {\r\n          setEventList(res.data);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [eventPage]);\r\n  useEffect(() => {\r\n    getAllEventList();\r\n  }, [getAllEventList]);\r\n\r\n  const getRoomListData = useCallback(() => {\r\n    setLoadingData(true);\r\n    getElderliesPriority()\r\n      .then((res) => {\r\n        setRoomList(res.data);\r\n        setLoadingData(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setLoadingData(false);\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getRoomListData();\r\n  }, [getRoomListData]);\r\n  function refreshAlertList() {\r\n    getAlertListData();\r\n    getRecentlyClosedAlerts();\r\n    getRoomListData();\r\n  }\r\n  function onAlertActiveSegmantChnage(value) {\r\n    setAcitveAlertQuery(getAlertsGroup(value));\r\n  }\r\n  function onAlertHistorySegmantChnage(value) {\r\n    setHistoryAlertQuery(getAlertsGroup(value));\r\n  }\r\n\r\n  const getElderlyBySearch = useCallback(() => {\r\n    if (searchQuery.trim() === \"\") {\r\n      setSearchResult([]); // Clear results if the search query is empty\r\n      return;\r\n    }\r\n\r\n    getElderlies({\r\n      search: searchQuery,\r\n    })\r\n      .then((res) => {\r\n        setSearchResult(res?.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [searchQuery]);\r\n  useEffect(() => {\r\n    getElderlyBySearch();\r\n  }, [getElderlyBySearch]);\r\n  const highlightText = (text, query) => {\r\n    if (!query) return text;\r\n    const regex = new RegExp(`(${query})`, \"gi\");\r\n    return text.replace(\r\n      regex,\r\n      `<mark style=\"background-color: #80CAA7; color: white;\">$1</mark>`\r\n    );\r\n  };\r\n  // const updateUserDetailsWithFCMToken = (id, token) => {\r\n  //   if (!token) return;\r\n  //   console.log(token);\r\n  //   updateUserDetails(id, { fcm_token_web: token })\r\n  //     .then((res) => {\r\n  //       console.log(\"Token Updated\");\r\n  //     })\r\n  //     .catch((err) => console.log(err));\r\n  // };\r\n  // useEffect(() => {\r\n  //   console.log(user);\r\n  //   requestPermission().then((token) => {\r\n  //     if (\r\n  //       (user.role === \"nurse\" ||\r\n  //         user.role === \"support_agent\" ||\r\n  //         user.role === \"end_user\") &&\r\n  //       token\r\n  //     ) {\r\n  //       console.log(token);\r\n\r\n  //       updateUserDetailsWithFCMToken(user?._id, token);\r\n  //     }\r\n  //   });\r\n  // }, [user]);\r\n  return (\r\n    <>\r\n      <div className=\"flex gap-4 flex-col pt-8 pb-8\">\r\n        <div className=\"flex item-center justify-between w-full\">\r\n          <ConfigProvider\r\n            theme={{\r\n              token: {\r\n                fontFamily: \"Baloo2\",\r\n                colorPrimary: \"#8086AC\",\r\n                colorLinkActive: \"#8086AC\",\r\n                colorLinkHover: \"#8086AC\",\r\n                colorLink: \"#8086AC\",\r\n              },\r\n            }}\r\n          >\r\n            <div className=\"w-[350px] relative\">\r\n              <Input\r\n                className=\"rounded-[10px]  min-w-[350px] w-full \"\r\n                size=\"large\"\r\n                placeholder=\"Search Anything\"\r\n                style={{ height: \"44px\" }}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                onFocus={() => setIsFocused(true)}\r\n                // onBlur={() => setIsFocused(false)}\r\n              />\r\n              {isFocused && searchQuery.trim() !== \"\" && (\r\n                <div\r\n                  id=\"searchResult\"\r\n                  className=\"mt-3 max-h-[600px] overflow-auto rounded-lg shadow-lg bg-white border border-gray-300 absolute top-10 left-0 z-[1000] w-full\"\r\n                >\r\n                  <ul>\r\n                    {searchResult?.map((result) => (\r\n                      <li\r\n                        key={result._id}\r\n                        className=\"p-4 hover:bg-gray-100 border-b border-gray-200 cursor-pointer\"\r\n                        onClick={() => {\r\n                          navigate(\r\n                            `/supporter/elderlies/elderly-profile/${result?._id}`\r\n                          );\r\n                        }}\r\n                      >\r\n                        <div className=\"font-semibold text-lg text-gray-800\">\r\n                          <span\r\n                            dangerouslySetInnerHTML={{\r\n                              __html: highlightText(result.name, searchQuery),\r\n                            }}\r\n                          />\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-500\">\r\n                          <strong>Age:</strong>{\" \"}\r\n                          <span\r\n                            dangerouslySetInnerHTML={{\r\n                              __html: highlightText(\r\n                                result.age.toString(),\r\n                                searchQuery\r\n                              ),\r\n                            }}\r\n                          />\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-500\">\r\n                          <strong>Address:</strong>{\" \"}\r\n                          <span\r\n                            dangerouslySetInnerHTML={{\r\n                              __html: highlightText(\r\n                                result.address || \"N/A\",\r\n                                searchQuery\r\n                              ),\r\n                            }}\r\n                          />\r\n                        </div>\r\n\r\n                        <div className=\"text-sm text-gray-500\">\r\n                          <strong>Sensitivity Factors:</strong>{\" \"}\r\n                          <span\r\n                            dangerouslySetInnerHTML={{\r\n                              __html: highlightText(\r\n                                result.diseases.join(\", \"),\r\n                                searchQuery\r\n                              ),\r\n                            }}\r\n                          />\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-500\">\r\n                          <strong>Comments:</strong>{\" \"}\r\n                          <span\r\n                            dangerouslySetInnerHTML={{\r\n                              __html: highlightText(\r\n                                result.comments\r\n                                  .map((c) => c.comment)\r\n                                  .join(\", \"),\r\n                                searchQuery\r\n                              ),\r\n                            }}\r\n                          />\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </ConfigProvider>\r\n        </div>\r\n        <div className=\"w-full\">\r\n          <ActiveAlertsCards\r\n            refreshAlertList={refreshAlertList}\r\n            isElderlyVisible={true}\r\n          />\r\n        </div>\r\n        <div className=\"w-full flex flex-col gap-4 lg3:flex-row\">\r\n          <div className=\"w-full p-0\">\r\n            <div className=\"bg-white rounded-2xl p-6 h-[650px] flex flex-col\">\r\n              <div className=\"flex justify-between items-center mb-5\">\r\n                <h1 className=\"text-2xl font-bold\">Room View</h1>\r\n              </div>\r\n              <div className=\"w-full h-full overflow-y-auto rounded-xl\">\r\n                <NursingHomeRoomView\r\n                  refreshAlertList={refreshAlertList}\r\n                  roomList={roomList}\r\n                  loadingsData={loadingsData}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-white w-full lg3:w-[48%] rounded-2xl p-6 h-[650px] overflow-hidden\">\r\n            <AlertsOverview />\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          id=\"Active_Alerts\"\r\n          className=\"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6\"\r\n        >\r\n          <div\r\n            id=\"Active_Alerts_Header\"\r\n            className=\"w-full flex justify-between\"\r\n          >\r\n            <h1 className=\"text-[24px] font-bold\">Active Notifications</h1>\r\n            <div>\r\n              {/* <ConfigProvider\r\n                theme={{\r\n                  components: {\r\n                    Segmented: {\r\n                      itemSelectedBg: \"#252F67\",\r\n                      itemSelectedColor: \"#fff\",\r\n                      fontFamily: \"Baloo2\",\r\n                    },\r\n                  },\r\n                }}\r\n              >\r\n                <Segmented\r\n                  options={activeAlertSegmentOptions}\r\n                  onChange={(value) => onAlertActiveSegmantChnage(value)}\r\n                />\r\n              </ConfigProvider> */}\r\n            </div>\r\n          </div>\r\n          <div id=\"Active_Alerts_Table\" className=\"w-full\">\r\n            <SidebarContext.Provider\r\n              value={{\r\n                total: activeAlertTotal,\r\n                page: 1,\r\n                SetPage,\r\n              }}\r\n            >\r\n              <CustomTable\r\n                pageSize={6}\r\n                loading={activeAlartLoading}\r\n                tableData={alertList}\r\n                columns={activeAlertTableColumns}\r\n              />\r\n            </SidebarContext.Provider>\r\n          </div>\r\n        </div>\r\n        <div\r\n          id=\"Recently_Closed_Alerts\"\r\n          className=\"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6\"\r\n        >\r\n          <div\r\n            id=\"Recently_Closed_Alerts_Header\"\r\n            className=\"w-full flex justify-between\"\r\n          >\r\n            <h1 className=\"text-[24px] font-bold\">Past Notifications</h1>\r\n            <div>\r\n              {/* <ConfigProvider\r\n                theme={{\r\n                  components: {\r\n                    Segmented: {\r\n                      itemSelectedBg: \"#252F67\",\r\n                      itemSelectedColor: \"#fff\",\r\n                      fontFamily: \"Baloo2\",\r\n                    },\r\n                  },\r\n                }}\r\n              >\r\n                <Segmented\r\n                  options={activeAlertSegmentOptions}\r\n                  onChange={(value) => onAlertHistorySegmantChnage(value)}\r\n                />\r\n              </ConfigProvider> */}\r\n            </div>\r\n          </div>\r\n          <div id=\"Recently_Closed_Alerts_Table\" className=\"w-full\">\r\n            <SidebarContext.Provider\r\n              value={{\r\n                total: recentlyClosedAlert?.length,\r\n                page: 1,\r\n                SetPage: setPage2,\r\n              }}\r\n            >\r\n              <CustomTable\r\n                pageSize={6}\r\n                loading={historyAlartLoading}\r\n                tableData={recentlyClosedAlert}\r\n                columns={recentlyClosedAlertTableColumns}\r\n              />\r\n            </SidebarContext.Provider>\r\n          </div>\r\n        </div>\r\n        <div\r\n          id=\"Events\"\r\n          className=\"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6\"\r\n        >\r\n          <div id=\"Events_Header\" className=\"w-full flex justify-between\">\r\n            <h1 className=\"text-[24px] font-bold\">Events</h1>\r\n          </div>\r\n          <div id=\"Events_Table\" className=\"w-full\">\r\n            <SidebarContext.Provider\r\n              value={{\r\n                total: eventList?.length,\r\n                page: 1,\r\n                SetPage: setEventPage,\r\n                getList: () => getAllEventList,\r\n              }}\r\n            >\r\n              <CustomTable\r\n                pageSize={6}\r\n                tableData={eventList}\r\n                columns={eventsTableColumns}\r\n                // expandable={{\r\n                //   expandedRowRender: (record) => (\r\n                //     <div\r\n                //       style={{ margin: \"0\" }}\r\n                //       className=\"flex gap-14 w-full items-center justify-start px-2\"\r\n                //     >\r\n                //       <div className=\"flex w-[50vw] items-center justify-between\">\r\n                //         <div>\r\n                //           <h2 className=\"text-[16px] font-semibold\">\r\n                //             {record.hospital.name}\r\n                //           </h2>\r\n                //           <p className=\"text-base\">\r\n                //             Phone Number:{\" \"}\r\n                //             {record.hospital.phone\r\n                //               ? record.hospital.phone\r\n                //               : \"Not Available\"}\r\n                //           </p>\r\n                //         </div>\r\n                //         <div className=\"flex items-center gap-2 \">\r\n                //           <a\r\n                //             href={`https://www.google.com/maps?q=${record.hospital.latitude},${record.hospital.longitude}`}\r\n                //             target=\"_blank\"\r\n                //             rel=\"noopener noreferrer\"\r\n                //             className=\"text-base font-medium !text-blue-500\"\r\n                //           >\r\n                //             View on Google Maps\r\n                //           </a>\r\n                //           <LuNavigation size={18} className=\"text-blue-500\" />\r\n                //         </div>\r\n                //       </div>\r\n                //     </div>\r\n                //   ),\r\n                //   rowExpandable: (record) => record.elderlyName !== null,\r\n                //   expandedRowKeys: expandedRowKeys, // Controlled expanded row keys\r\n                //   onExpand: onExpand, // Handle expand/collapse events\r\n                // }}\r\n              />\r\n            </SidebarContext.Provider>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <CreateAndEditModal\r\n        modalOpen={modalOpen}\r\n        setModalOpen={setModalOpen}\r\n        type=\"event\"\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport const alertViewSegmentOptions = [\r\n  {\r\n    label: ` Map View`,\r\n    value: \"Map View\",\r\n    icon: <AimOutlined />,\r\n  },\r\n  {\r\n    label: \"Room View\",\r\n    value: \"Room View\",\r\n    icon: <HomeOutlined />,\r\n  },\r\n];\r\nexport const activeAlertSegmentOptions = [\r\n  {\r\n    label: \"All Alerts\",\r\n    value: \"All Alerts\",\r\n  },\r\n  {\r\n    label: \"Critical\",\r\n    value: \"Critical\",\r\n  },\r\n  {\r\n    label: \"Warning\",\r\n    value: \"Warning\",\r\n  },\r\n  {\r\n    label: \"Informational\",\r\n    value: \"Info\",\r\n  },\r\n];\r\n"],"names":["NurseRoomMap","rooms","roomData","setRoomData","useState","timeoutRefs","useRef","heartBreathRateRefs","lastHeartBreathTimestamps","settings","dots","jsx","jsxs","useCallback","code","deviceNo","data","decodePosition","_a","prev","_b","person","Fragment","Slider","room","index","Room2","Room1","Empty","CurrentRateData","style","deviceIDs","item","deviceData","useContext","WebSocketContext","deviceCodes","setData","liveRateData","setLiveRateData","lastUpdate","setLastUpdate","handleDecode","base64Input","decodeHeartBreath","useEffect","interval","newTime","prevData","heartBreath","NursingHomeRoomView","refreshAlertList","roomList","loadingsData","selectedRoom","setSelectedRoom","navigate","useNavigate","openAlertCloseModal","setOpenAlertCloseModal","selectedAlert","setSelectedAlert","setStyle","alertList","setAlertList","loadingAlert","setLoadingAlert","page","setPage","listRef","getAlertListData","getAlertList","dayjs","res","err","handleScroll","scrollTop","scrollHeight","clientHeight","prevPage","getAlertInfoViaEvent","_c","_d","deviceCode","subscribeToMqtt","handleViewClick","row","onCloseModal","unsubscribeFromMqtt","Spin","ind","motion","WebSocketProvider","AnimatePresence","e","IoClose","_e","alarm","indx","transformDateAndTime","AlertCloseModal","NurseDashboard","modalOpen","setModalOpen","activeAlertTableColumns","useAlertTableColumns","recentlyClosedAlertTableColumns","eventsTableColumns","ls","setRoomList","setLoadingData","eventList","setEventList","eventPage","setEventPage","SetPage","page2","setPage2","recentlyClosedAlert","setRecentlyClosedAlert","historyAlartLoading","setHistoryAlartLoading","activeAlartLoading","setActiveAlartLoading","searchResult","setSearchResult","activeAlertTotal","setActiveAlertTotal","searchQuery","setSearchQuery","isFocused","setIsFocused","getAlertsGroup","getRecentlyClosedAlerts","getAllEventList","getEventList","getRoomListData","getElderliesPriority","getElderlyBySearch","getElderlies","highlightText","text","query","regex","ConfigProvider","Input","result","c","ActiveAlertsCards","AlertsOverview","SidebarContext","CustomTable","CreateAndEditModal","alertViewSegmentOptions","AimOutlined","HomeOutlined","activeAlertSegmentOptions"],"mappings":"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"}