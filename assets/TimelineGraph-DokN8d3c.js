import{r,a1 as C,j as i,bs as L}from"./index-gDHMON6F.js";import{E as D}from"./index-quZr3_jG.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},m=new s.Error().stack;m&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[m]="b695acb3-c822-4324-9923-3c8625b7330a",s._sentryDebugIdIdentifier="sentry-dbid-b695acb3-c822-4324-9923-3c8625b7330a")}catch{}const z=({statisticalData:s=[],alarmEvents:m=[],enterBedTime:p,getupAfterTime:T,noDataText:E="No data available to show"})=>{const{sleepEventsType:c,sleepEventsColor:u}=r.useContext(C),l=r.useMemo(()=>[...s.map(e=>({id:`${e.status}-${e.start_time}-${e.end_time}`,name:c[e.status],startTime:new Date(e.start_time),endTime:new Date(e.end_time),color:u[c[e.status]]})),...m.map(e=>({id:`${e.event_type}-${e.ts}`,name:c[e.event_type],startTime:new Date(e.ts),endTime:new Date(e.ts),color:u[c[e.event_type]]}))].filter(e=>e.name),[s,m,c,u]),f=r.useMemo(()=>[...new Set(l.map(e=>e.name))].filter(Boolean),[l]),[o,w]=r.useState(()=>f.reduce((e,t)=>(e[t]=!0,e),{}));r.useEffect(()=>{const e=f.filter(t=>!(t in o));e.length>0&&w(t=>({...t,...e.reduce((n,a)=>({...n,[a]:!0}),{})}))},[f,o]);const S=e=>{w(t=>({...t,[e]:!t[e]}))},b=r.useMemo(()=>l.filter(e=>o[e.name]),[l,o]),$=Math.min(...l.map(e=>e.startTime.getTime())),j=Math.max(...l.map(e=>e.endTime.getTime())),M=r.useMemo(()=>b.map((e,t)=>{const n=e.startTime.getTime()===e.endTime.getTime();return{id:t,name:e.name,value:[e.startTime.getTime(),e.endTime.getTime(),n?15:10],itemStyle:{color:e.color}}}),[b]);if((s==null?void 0:s.length)===0)return i.jsx(L,{description:E});const _={tooltip:{trigger:"item",formatter:e=>{const t=b[e.data.id],n=t.startTime.getTime()===t.endTime.getTime(),a=new Date(t.startTime).toLocaleString();if(n)return`${t.name}<br/>Date & Time: ${a}`;{const d=new Date(t.endTime).toLocaleString(),y=t.endTime-t.startTime,x=Math.floor(y/(1e3*60)),g=Math.floor(x/60),h=x%60,v=g>0?`${g} hour(s) ${h} minute(s)`:`${h} minute(s)`;return`<b>${t.name}</b> <br/>Start: ${a}<br/>End: ${d}<br/>Duration: ${v}`}}},grid:{left:"5%",right:"5%",bottom:"15%",containLabel:!1},xAxis:{type:"time",boundaryGap:!0,min:$,max:j,splitNumber:5,axisLabel:{formatter:e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),interval:0,margin:5},axisTick:{show:!0,alignWithLabel:!0}},yAxis:{show:!1},series:[{name:"Events",type:"custom",renderItem:(e,t)=>{const n=t.coord([t.value(0),0]),a=t.coord([t.value(1),0]),d=t.size([0,t.value(2)])[1],y=Math.max(a[0]-n[0],5),g=e.dataIndex%10*3;e.coordSys.height-d+60-g;const h=e.coordSys.height-d+60;return{type:"rect",shape:{x:n[0],y:h,width:y,height:d},style:{fill:t.style().fill,stroke:"#fff",lineWidth:1}}},encode:{x:[0,1]},data:M}],graphic:p&&T?[{type:"text",left:"5%",bottom:"1%",style:{text:`Enter Bed ${p}`,fontSize:12}},{type:"text",right:"5%",bottom:"1%",style:{text:`Getup After ${T}`,fontSize:12}}]:[]};return i.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 w-full",children:[i.jsx("div",{id:"customLegend",className:"w-full",children:i.jsx("div",{className:"flex flex-wrap gap-4 items-center justify-center",children:f.map(e=>i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>S(e),children:[i.jsx("div",{id:"legendColorShape",className:"size-3 rounded-[4px] border-2",style:{backgroundColor:o[e]?u[e]:"grey",borderColor:o[e]?"transparent":"#ccc",color:o[e]?"grey":"inherit"}}),i.jsx("div",{children:e})]},e))})}),i.jsx(D,{option:_,style:{height:200,width:"100%"}})]})};export{z as default};
//# sourceMappingURL=TimelineGraph-DokN8d3c.js.map
