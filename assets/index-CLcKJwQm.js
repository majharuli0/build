import{e as se,K as R,bt as re,i as ie,f as E,m as Ne,r as s,n as K,bu as le,p as w,b2 as ae,aZ as Se,u as je,j as a,d as we,aE as Oe}from"./index-CvPtt2zy.js";import{b as k}from"./ActiveAlertsCards-BepaQzAa.js";import{R as Ee}from"./RoomMap2-CIzX1TfT.js";import{t as Ie,a as Te}from"./helper-CzYXuu8w.js";import{g as Pe}from"./elderlySupport-1jBZZNrd.js";import{S as Re}from"./index-D4J72W_-.js";import{T as Be}from"./index-CYD3b6Yi.js";const ze=new R("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),Ae=new R("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),De=new R("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),_e=new R("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),We=new R("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),He=new R("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),Fe=e=>{const{componentCls:t,iconCls:l,antCls:o,badgeShadowSize:n,textFontSize:d,textFontSizeSM:i,statusSize:v,dotSize:f,textFontWeight:C,indicatorHeight:m,indicatorHeightSM:u,marginXS:g,calc:p}=e,b=`${o}-scroll-number`,r=re(e,(h,x)=>{let{darkColor:y}=x;return{[`&${t} ${t}-color-${h}`]:{background:y,[`&:not(${t}-count)`]:{color:y},"a:hover &":{background:y}}}});return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},ie(e)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${t}-count`]:{display:"inline-flex",justifyContent:"center",zIndex:e.indicatorZIndex,minWidth:m,height:m,color:e.badgeTextColor,fontWeight:C,fontSize:d,lineHeight:E(m),whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:p(m).div(2).equal(),boxShadow:`0 0 0 ${E(n)} ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${t}-count-sm`]:{minWidth:u,height:u,fontSize:i,lineHeight:E(u),borderRadius:p(u).div(2).equal()},[`${t}-multiple-words`]:{padding:`0 ${E(e.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${t}-dot`]:{zIndex:e.indicatorZIndex,width:f,minWidth:f,height:f,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${E(n)} ${e.badgeShadowColor}`},[`${t}-count, ${t}-dot, ${b}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${l}-spin`]:{animationName:He,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${t}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${t}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:v,height:v,verticalAlign:"middle",borderRadius:"50%"},[`${t}-status-success`]:{backgroundColor:e.colorSuccess},[`${t}-status-processing`]:{overflow:"visible",color:e.colorInfo,backgroundColor:e.colorInfo,borderColor:"currentcolor","&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:n,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:ze,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${t}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${t}-status-error`]:{backgroundColor:e.colorError},[`${t}-status-warning`]:{backgroundColor:e.colorWarning},[`${t}-status-text`]:{marginInlineStart:g,color:e.colorText,fontSize:e.fontSize}}}),r),{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:Ae,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${t}-zoom-leave`]:{animationName:De,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${t}-not-a-wrapper`]:{[`${t}-zoom-appear, ${t}-zoom-enter`]:{animationName:_e,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${t}-zoom-leave`]:{animationName:We,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${t}-status)`]:{verticalAlign:"middle"},[`${b}-custom-component, ${t}-count`]:{transform:"none"},[`${b}-custom-component, ${b}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[b]:{overflow:"hidden",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack}`,[`${b}-only`]:{position:"relative",display:"inline-block",height:m,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${b}-only-unit`]:{height:m,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${b}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${t}-count, ${t}-dot, ${b}-custom-component`]:{transform:"translate(-50%, -50%)"}}})}},ce=e=>{const{fontHeight:t,lineWidth:l,marginXS:o,colorBorderBg:n}=e,d=t,i=l,v=e.colorBgContainer,f=e.colorError,C=e.colorErrorHover;return Ne(e,{badgeFontHeight:d,badgeShadowSize:i,badgeTextColor:v,badgeColor:f,badgeColorHover:C,badgeShadowColor:n,badgeProcessingDuration:"1.2s",badgeRibbonOffset:o,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},de=e=>{const{fontSize:t,lineHeight:l,fontSizeSM:o,lineWidth:n}=e;return{indicatorZIndex:"auto",indicatorHeight:Math.round(t*l)-2*n,indicatorHeightSM:t,dotSize:o/2,textFontSize:o,textFontSizeSM:o,textFontWeight:"normal",statusSize:o/2}},Me=se("Badge",e=>{const t=ce(e);return Fe(t)},de),Ze=e=>{const{antCls:t,badgeFontHeight:l,marginXS:o,badgeRibbonOffset:n,calc:d}=e,i=`${t}-ribbon`,v=`${t}-ribbon-wrapper`,f=re(e,(C,m)=>{let{darkColor:u}=m;return{[`&${i}-color-${C}`]:{background:u,color:u}}});return{[v]:{position:"relative"},[i]:Object.assign(Object.assign(Object.assign(Object.assign({},ie(e)),{position:"absolute",top:o,padding:`0 ${E(e.paddingXS)}`,color:e.colorPrimary,lineHeight:E(l),whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${i}-text`]:{color:e.colorTextLightSolid},[`${i}-corner`]:{position:"absolute",top:"100%",width:n,height:n,color:"currentcolor",border:`${E(d(n).div(2).equal())} solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter}}),f),{[`&${i}-placement-end`]:{insetInlineEnd:d(n).mul(-1).equal(),borderEndEndRadius:0,[`${i}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${i}-placement-start`]:{insetInlineStart:d(n).mul(-1).equal(),borderEndStartRadius:0,[`${i}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}},Ve=se(["Badge","Ribbon"],e=>{const t=ce(e);return Ze(t)},de),Le=e=>{const{className:t,prefixCls:l,style:o,color:n,children:d,text:i,placement:v="end",rootClassName:f}=e,{getPrefixCls:C,direction:m}=s.useContext(K),u=C("ribbon",l),g=`${u}-wrapper`,[p,b,r]=Ve(u,g),h=le(n,!1),x=w(u,`${u}-placement-${v}`,{[`${u}-rtl`]:m==="rtl",[`${u}-color-${n}`]:h},t),y={},O={};return n&&!h&&(y.background=n,O.color=n),p(s.createElement("div",{className:w(g,f,b,r)},d,s.createElement("div",{className:w(x,b),style:Object.assign(Object.assign({},y),o)},s.createElement("span",{className:`${u}-text`},i),s.createElement("div",{className:`${u}-corner`,style:O}))))},ne=e=>{const{prefixCls:t,value:l,current:o,offset:n=0}=e;let d;return n&&(d={position:"absolute",top:`${n}00%`,left:0}),s.createElement("span",{style:d,className:w(`${t}-only-unit`,{current:o})},l)};function Ye(e,t,l){let o=e,n=0;for(;(o+10)%10!==t;)o+=l,n+=l;return n}const qe=e=>{const{prefixCls:t,count:l,value:o}=e,n=Number(o),d=Math.abs(l),[i,v]=s.useState(n),[f,C]=s.useState(d),m=()=>{v(n),C(d)};s.useEffect(()=>{const p=setTimeout(m,1e3);return()=>clearTimeout(p)},[n]);let u,g;if(i===n||Number.isNaN(n)||Number.isNaN(i))u=[s.createElement(ne,Object.assign({},e,{key:n,current:!0}))],g={transition:"none"};else{u=[];const p=n+10,b=[];for(let x=n;x<=p;x+=1)b.push(x);const r=b.findIndex(x=>x%10===i);u=b.map((x,y)=>{const O=x%10;return s.createElement(ne,Object.assign({},e,{key:x,value:O,offset:y-r,current:y===r}))});const h=f<d?1:-1;g={transform:`translateY(${-Ye(i,n,h)}00%)`}}return s.createElement("span",{className:`${t}-only`,style:g,onTransitionEnd:m},u)};var Xe=function(e,t){var l={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(l[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(l[o[n]]=e[o[n]]);return l};const ke=s.forwardRef((e,t)=>{const{prefixCls:l,count:o,className:n,motionClassName:d,style:i,title:v,show:f,component:C="sup",children:m}=e,u=Xe(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),{getPrefixCls:g}=s.useContext(K),p=g("scroll-number",l),b=Object.assign(Object.assign({},u),{"data-show":f,style:i,className:w(p,n,d),title:v});let r=o;if(o&&Number(o)%1===0){const h=String(o).split("");r=s.createElement("bdi",null,h.map((x,y)=>s.createElement(qe,{prefixCls:p,count:Number(o),value:x,key:h.length-y})))}return i!=null&&i.borderColor&&(b.style=Object.assign(Object.assign({},i),{boxShadow:`0 0 0 1px ${i.borderColor} inset`})),m?ae(m,h=>({className:w(`${p}-custom-component`,h==null?void 0:h.className,d)})):s.createElement(C,Object.assign({},b,{ref:t}),r)});var Ke=function(e,t){var l={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(l[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(l[o[n]]=e[o[n]]);return l};const Ue=s.forwardRef((e,t)=>{var l,o,n,d,i;const{prefixCls:v,scrollNumberPrefixCls:f,children:C,status:m,text:u,color:g,count:p=null,overflowCount:b=99,dot:r=!1,size:h="default",title:x,offset:y,style:O,className:ue,rootClassName:me,classNames:j,styles:N,showZero:H=!1}=e,U=Ke(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","classNames","styles","showZero"]),{getPrefixCls:G,direction:F,badge:c}=s.useContext(K),$=G("badge",v),[J,be,ge]=Me($),M=p>b?`${b}+`:p,z=M==="0"||M===0,fe=p===null||z&&!H,Z=(m!=null||g!=null)&&fe,B=r&&!z,I=B?"":M,T=s.useMemo(()=>(I==null||I===""||z&&!H)&&!B,[I,z,H,B]),Q=s.useRef(p);T||(Q.current=p);const P=Q.current,ee=s.useRef(I);T||(ee.current=I);const V=ee.current,te=s.useRef(B);T||(te.current=B);const A=s.useMemo(()=>{if(!y)return Object.assign(Object.assign({},c==null?void 0:c.style),O);const S={marginTop:y[1]};return F==="rtl"?S.left=parseInt(y[0],10):S.right=-parseInt(y[0],10),Object.assign(Object.assign(Object.assign({},S),c==null?void 0:c.style),O)},[F,y,O,c==null?void 0:c.style]),pe=x??(typeof P=="string"||typeof P=="number"?P:void 0),he=T||!u?null:s.createElement("span",{className:`${$}-status-text`},u),xe=!P||typeof P!="object"?void 0:ae(P,S=>({style:Object.assign(Object.assign({},A),S.style)})),D=le(g,!1),ve=w(j==null?void 0:j.indicator,(l=c==null?void 0:c.classNames)===null||l===void 0?void 0:l.indicator,{[`${$}-status-dot`]:Z,[`${$}-status-${m}`]:!!m,[`${$}-color-${g}`]:D}),L={};g&&!D&&(L.color=g,L.background=g);const oe=w($,{[`${$}-status`]:Z,[`${$}-not-a-wrapper`]:!C,[`${$}-rtl`]:F==="rtl"},ue,me,c==null?void 0:c.className,(o=c==null?void 0:c.classNames)===null||o===void 0?void 0:o.root,j==null?void 0:j.root,be,ge);if(!C&&Z){const S=A.color;return J(s.createElement("span",Object.assign({},U,{className:oe,style:Object.assign(Object.assign(Object.assign({},N==null?void 0:N.root),(n=c==null?void 0:c.styles)===null||n===void 0?void 0:n.root),A)}),s.createElement("span",{className:ve,style:Object.assign(Object.assign(Object.assign({},N==null?void 0:N.indicator),(d=c==null?void 0:c.styles)===null||d===void 0?void 0:d.indicator),L)}),u&&s.createElement("span",{style:{color:S},className:`${$}-status-text`},u)))}return J(s.createElement("span",Object.assign({ref:t},U,{className:oe,style:Object.assign(Object.assign({},(i=c==null?void 0:c.styles)===null||i===void 0?void 0:i.root),N==null?void 0:N.root)}),C,s.createElement(Se,{visible:!T,motionName:`${$}-zoom`,motionAppear:!1,motionDeadline:1e3},S=>{let{className:Ce}=S;var Y,q;const ye=G("scroll-number",f),X=te.current,$e=w(j==null?void 0:j.indicator,(Y=c==null?void 0:c.classNames)===null||Y===void 0?void 0:Y.indicator,{[`${$}-dot`]:X,[`${$}-count`]:!X,[`${$}-count-sm`]:h==="small",[`${$}-multiple-words`]:!X&&V&&V.toString().length>1,[`${$}-status-${m}`]:!!m,[`${$}-color-${g}`]:D});let _=Object.assign(Object.assign(Object.assign({},N==null?void 0:N.indicator),(q=c==null?void 0:c.styles)===null||q===void 0?void 0:q.indicator),A);return g&&!D&&(_=_||{},_.background=g),s.createElement(ke,{prefixCls:ye,show:!T,motionClassName:Ce,className:$e,count:V,title:pe,style:_,key:"scrollNumber"},xe)}),he))}),W=Ue;W.Ribbon=Le;function Ge({data:e=[]}){var d,i,v,f;const t=e!=null&&e.rooms&&((d=e==null?void 0:e.rooms)!=null&&d.width)?(i=e==null?void 0:e.rooms)==null?void 0:i.width:0,l=e!=null&&e.rooms&&((v=e==null?void 0:e.rooms)!=null&&v.length)?(f=e==null?void 0:e.rooms)==null?void 0:f.length:0;console.log("============>",t,l);const o=je(),n=C=>{switch(C){case"Info":return"bg-blue-500";case"Critical":return"bg-red-500";case"Warning":return"bg-yellow-500";default:return"bg-blue-500"}};return a.jsxs("div",{className:"w-full flex flex-col gap-4 p-4 pr-0 h-full pt-0",children:[a.jsxs("div",{id:"roomAlertHeader",className:`alert-header !h-[75px] flex justify-between items-center relative px-4 overflow-hidden rounded-lg ${n(["2","9"].includes(e.event)?"Critical":["3"].includes(e.event)?"Warning":"Info")}`,children:[a.jsx("div",{className:"loader"}),a.jsxs("div",{className:"text-container flex flex-col gap-0 h-full justify-center text-white",children:[a.jsx("p",{className:"text-sm text-gray-100 m-0 font-medium",children:e.room_name}),a.jsx("h2",{className:"text-lg font-bold m-0 leading-none ",children:e.event_name})]}),a.jsx("span",{onClick:()=>{o(`/supporter/elderlies/elderly-profile/${e==null?void 0:e.elderly_id}`)},className:"text-sm text-gray-100 cursor-pointer p-3 py-2 bg-white/0 rounded-lg hover:bg-white/10 transition-all duration-300",children:"View Elderly"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col gap-0 border-b border-gray-200 pb-2 ",children:[a.jsx("h2",{className:"text-lg font-bold m-0 leading-none",children:e.elderly_name}),a.jsx("p",{className:"text-sm text-gray-500 m-0",children:e.address})]}),a.jsx("div",{})]}),a.jsxs("div",{id:"roomMapAndDetails",className:"flex gap-4 h-full",children:[a.jsxs("div",{className:"map-container w-2/3 border",children:[a.jsx(Ee,{roomInfo:e==null?void 0:e.rooms})," "]}),a.jsxs("div",{className:"details-container w-1/3 ",children:[a.jsxs("div",{className:"flex flex-col gap-0 p-3",children:[a.jsx("h2",{className:"text-xl font-bold m-0 leading-none",children:Ie(e.created_at)}),a.jsx("p",{className:"text-sm text-gray-500 m-0 font-medium",children:"Time of Incident"})]}),a.jsxs("div",{className:"flex flex-col gap-0 p-3",children:[a.jsx("h2",{className:"text-xl font-bold m-0 leading-none",children:Te(e.created_at)}),a.jsx("p",{className:"text-sm text-gray-500 m-0 font-medium",children:"Alert Life"})]})]})]})]})}function it({ViewFor:e=""}){const[t,l]=s.useState("All"),[o,n]=s.useState([]),[d,i]=s.useState(null),[v,f]=s.useState(null),[C,m]=s.useState(k),u=s.useCallback(()=>{Pe({to_date:"2024-11-30",from_date:we().format("YYYY-MM-DD"),is_resolved:!1}).then(r=>{r.data.length>0&&n(r.data)}).catch(r=>{console.log(r)})},[]);s.useEffect(()=>{u()},[]),s.useEffect(()=>{if(o.length>0&&!d){const r=o[0];i(r._id),f(r)}},[o,d]);const g=r=>{console.log(r),i(r);const h=o.find(x=>x._id==r);f(h)},p=s.useCallback(r=>r==="All"?k:k.filter(h=>h.alertType===r),[]);s.useEffect(()=>{let r=p(t);e==="endUser"&&(r=r.slice(0,4)),m(r)},[t,p,e]);const b=o==null?void 0:o.map((r,h)=>({label:a.jsxs("span",{className:"text-left w-full custom-tab-label flex justify-between items-center",children:[a.jsx("span",{className:"w-full text-black",children:r.room_name}),a.jsxs(Oe,{children:[["2","9"].includes(r.event)&&a.jsx(W,{color:"red"}),["3"].includes(r.event)&&a.jsx(W,{color:"orange"}),["1","4","5","6","7","8","10"].includes(r.event)&&a.jsx(W,{color:"blue"})]})]}),key:r._id}));return a.jsxs("div",{className:"w-full flex justify-center items-center h-[495px] overflow-hidden",children:[a.jsxs("div",{id:"RoomNameTabsAnt",className:"w-[30%] flex flex-col gap-4 h-full",children:[a.jsx(Re,{style:{width:"100%"},block:!0,options:Je,onChange:r=>l(r)}),a.jsx(Be,{onChange:g,type:"card",tabPosition:"left",items:b,style:{width:"100%"},activeKey:d,tabBarGutter:8,tabBarStyle:{maxHeight:"460px",overflowY:"auto"}})]}),a.jsx("div",{className:"w-[70%] h-full",children:d&&a.jsx(Ge,{data:v})})]})}const Je=[{label:"All",value:"All"},{label:"Critical",value:"Critical"},{label:"Warning",value:"Warning"},{label:"Info",value:"Info"}];export{it as R};
