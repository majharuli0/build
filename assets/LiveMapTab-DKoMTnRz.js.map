{"version":3,"file":"LiveMapTab-DKoMTnRz.js","sources":["../../src/Pages/Elderlies/Components/TabContents/LiveMap/CurrentPeoples.jsx","../../src/Pages/Elderlies/Components/TabContents/LiveMap/LiveMapTab.jsx"],"sourcesContent":["import React, { useContext, useMemo } from \"react\";\r\nimport { WebSocketContext } from \"@/Context/WebSoketHook\";\r\nimport { CustomContext } from \"@/Context/UseCustomContext\";\r\nimport { Tooltip } from \"antd\";\r\nimport { FaUser } from \"react-icons/fa6\";\r\n\r\nexport default function CurrentPeoples({ data = {} }) {\r\n  const { deviceData } = useContext(WebSocketContext);\r\n  const context = useContext(CustomContext);\r\n  const { elderlyDetails } = context || {};\r\n  const deviceCode = data?.device_no || elderlyDetails?.deviceId;\r\n  const peopleData = useMemo(() => {\r\n    return deviceData[deviceCode]?.position || [];\r\n  }, [deviceData[deviceCode]?.position]);\r\n  return (\r\n    <div className=\"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit z-50\">\r\n      {peopleData?.length > 0 ? (\r\n        <Tooltip\r\n          color=\"white\"\r\n          overlayInnerStyle={{ color: \"black\", padding: \"10px\" }}\r\n          title={peopleData?.map((people, indx) => (\r\n            <div key={indx} className=\"flex items-center gap-2 mb-2\">\r\n              <div\r\n                style={{ backgroundColor: people?.color }}\r\n                className=\"p-2 rounded-full\"\r\n              >\r\n                <FaUser size={14} color=\"white\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm m-0\">{people?.posture}</p>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        >\r\n          <div className=\"flex -space-x-4 cursor-pointer\">\r\n            {peopleData?.map((people, indx) => (\r\n              <div\r\n                key={indx}\r\n                style={{ backgroundColor: people?.color }}\r\n                className={`p-1 rounded-full border-2 border-white`}\r\n              >\r\n                <FaUser size={16} color=\"white\" />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </Tooltip>\r\n      ) : (\r\n        <div className={`bg-primary p-1 rounded-full border-2 border-white`}>\r\n          <FaUser size={16} color=\"white\" />\r\n        </div>\r\n      )}\r\n      <span className=\"font-bold text-lg\">\r\n        {peopleData ? peopleData?.length : 0}\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useContext } from \"react\";\r\nimport Room1 from \"@/Components/RoomMap/RoomMap3\";\r\nimport Room2 from \"@/Components/RoomMap/RoomMap4\";\r\nimport { CustomContext } from \"@/Context/UseCustomContext\";\r\nimport useWebSocket from \"@/hook/useWebSoket\";\r\nimport { decodePosition } from \"@/utils/helper\";\r\nimport { FaUser } from \"react-icons/fa6\";\r\nimport { Tooltip } from \"antd\";\r\nimport CurrentPeoples from \"./CurrentPeoples\";\r\n\r\nexport default function LiveMapTab() {\r\n  const context = useContext(CustomContext);\r\n  const { elderlyDetails } = context || {};\r\n  const [positions, setPositions] = useState({});\r\n  return (\r\n    <div className=\"flex flex-col gap-4 mt-6 overflow-hidden\">\r\n      {elderlyDetails?.rooms &&\r\n        elderlyDetails?.rooms\r\n          ?.filter((room) => room.device_no)\r\n          .map((room, indx) => {\r\n            const roomDeviceCodes =\r\n              room.device_no?.split(\",\").map((code) => code.trim()) || [];\r\n            const roomPositions = roomDeviceCodes.flatMap(\r\n              (code) => positions[code] || []\r\n            );\r\n\r\n            return (\r\n              <div\r\n                key={indx}\r\n                className=\"flex flex-col gap-4 bg-white rounded-2xl p-4 h-[700px]\"\r\n              >\r\n                <h1 className=\"text-2xl font-bold\">{room?.name}</h1>\r\n                <div className=\"flex h-full\">\r\n                  {/* <div className=\"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit z-50\">\r\n                    {roomPositions.length > 0 && (\r\n                      <Tooltip\r\n                        color=\"white\"\r\n                        overlayInnerStyle={{ color: \"black\", padding: \"10px\" }}\r\n                        title={roomPositions.map((person, idx) => (\r\n                          <div\r\n                            key={idx}\r\n                            className=\"flex items-center gap-2 mb-2\"\r\n                          >\r\n                            <div\r\n                              style={{ backgroundColor: person?.color }}\r\n                              className=\"p-2 rounded-full\"\r\n                            >\r\n                              <FaUser size={14} color=\"white\" />\r\n                            </div>\r\n                            <div>\r\n                              <p className=\"text-sm m-0\">{person?.posture}</p>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      >\r\n                        <div className=\"flex -space-x-4 cursor-pointer\">\r\n                          {roomPositions.map((person, idx) => (\r\n                            <div\r\n                              key={idx}\r\n                              style={{ backgroundColor: person?.color }}\r\n                              className=\"p-1 rounded-full border-2 border-white\"\r\n                            >\r\n                              <FaUser size={16} color=\"white\" />\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </Tooltip>\r\n                    )}\r\n                    {roomPositions.length === 0 && (\r\n                      <div className=\"bg-primary p-1 rounded-full border-2 border-white\">\r\n                        <FaUser size={16} color=\"white\" />\r\n                      </div>\r\n                    )}\r\n                    <span className=\"font-bold text-lg\">\r\n                      {roomPositions.length}\r\n                    </span>\r\n                  </div> */}\r\n                  <CurrentPeoples data={room} />\r\n                  <div id=\"roomMap\" className=\"w-full h-full scale-[1.2] mt-14\">\r\n                    {room?.mount_type === 2 && <Room2 roomInfo={room} />}\r\n                    {room?.mount_type === 1 && <Room1 roomInfo={room} />}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["CurrentPeoples","data","deviceData","useContext","WebSocketContext","context","CustomContext","elderlyDetails","deviceCode","peopleData","useMemo","_a","jsxs","jsx","Tooltip","people","indx","FaUser","LiveMapTab","positions","setPositions","useState","room","code","Room2","Room1"],"mappings":"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"}