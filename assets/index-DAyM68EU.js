import{W as w,z as T,u as _,s as k,r as l,X as E,Y as p,Z as v,_ as x,j as g,$ as R,a0 as U,q as r,a1 as I}from"./index-Zs39X0Dw.js";try{let o=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new o.Error().stack;a&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[a]="996c929c-1a79-4b9d-aaa8-3dd7a4214ba4",o._sentryDebugIdIdentifier="sentry-dbid-996c929c-1a79-4b9d-aaa8-3dd7a4214ba4")}catch{}function j(){const o=w();T();const a=_(),{setStoreRole:f,setUser:b}=k(),[h,y]=l.useState(!0),n=o.id.split("-"),i=()=>{const e=r.get("user"),s=I();r.get("rootToken")||(r.set("rootToken",s),r.set("rootRole",e==null?void 0:e.role))},d=e=>v(e),m=e=>{const s={super_admin:"/support-agent/dashboard/",supports_agent:"/supporter/support-agent/dashboard",nurse:"/supporter/nurse/dashboard",end_user:"/supporter/end-user/dashboard",monitoring_agency:"/ms/dashboard",elderly:`/supporter/elderlies/elderly-profile/${n[1]}?tab=overview`};a(s[e]||"/support-nurnt/dashboard")},u=e=>{r.set("user",e),r.set("mainRole",e.role),r.set("role",e.role),f({role:e.role}),b({role:e.role}),setTimeout(()=>{y(!1),m(e.sub_role||e.role)},800)},c=l.useCallback(async()=>{var e;try{const s=await E({id:n[0]});if(!((e=s==null?void 0:s.data)!=null&&e.role))throw new Error("Invalid role");if(n.length>=2){const t=await p({id:n[0],params:{role:s.data.role==="nursing_home"?"nurse":"supports_agent"}});i(),d(t.data.access_token),u({...t.data,sub_role:"elderly"})}else{const t=await p({id:n[0]});i(),d(t.data.access_token),u(s.data)}}catch(s){console.error("Error fetching user profile:",s),x.custom(t=>g.jsx(R,{t,title:"Error",text:s.response.data.message})),a(-1)}},[o.id]);if(l.useEffect(()=>{c()},[c]),h)return g.jsx(U,{loaderTitle:"Loading User Profile"})}export{j as default};
//# sourceMappingURL=index-DAyM68EU.js.map
