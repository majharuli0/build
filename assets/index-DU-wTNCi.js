import{h as K,aU as Me,aV as He,K as Re,aW as ot,aX as De,f as rt,m as lt,aY as it,k as ct,aZ as fe,r as n,q as Q,a_ as dt,o as _e,a$ as ut,b0 as ze,b1 as mt,b2 as pt,b3 as gt,b4 as ft,b5 as Ue,b6 as Te,aI as Pe,at as xt,b7 as ht,b8 as bt,b9 as yt,T as Le,az as St,ba as vt,aA as ye,j as s,aB as Nt,bb as Se,aC as ve,aF as $t,_ as Ne,H as $e,bc as jt,l as we,b as Be,u as Xe,a4 as wt,bd as _t,be as Ct,E as qe,a2 as Et,a5 as Ve,a1 as At,bf as It,ac as Ot,a6 as Rt,a7 as Dt,a8 as Ut,a9 as Tt,aa as Pt,ab as Lt}from"./index-C6ihtOFT.js";import{D as Ft}from"./index-C0FheBKf.js";import{u as Mt,a as Ht,d as zt,A as Bt}from"./AdminUser-Cfeyd5CX.js";import{R as Xt,a as qt,b as Vt,c as Wt,d as Gt,U as Fe}from"./Upload-gMCr8Zll.js";import{P as Kt}from"./progress-DUFexIQQ.js";import{A as Jt}from"./AdminSupportAgentTableAction-D9oxlNQY.js";import{E as Yt}from"./Elderly-y4UTUiO2.js";import{S as Zt}from"./index-QP0-4fEP.js";import{g as Qt}from"./elderly-DnXLQ7eR.js";import"./index-D2jTS-Fk.js";import"./index-CTQKRNam.js";import"./index-Bht6Jjll.js";const kt=e=>{const{componentCls:a,iconCls:o}=e;return{[`${a}-wrapper`]:{[`${a}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:e.colorFillAlter,border:`${K(e.lineWidth)} dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[a]:{padding:e.padding},[`${a}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none",borderRadius:e.borderRadiusLG,"&:focus-visible":{outline:`${K(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`}},[`${a}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`
          &:not(${a}-disabled):hover,
          &-hover:not(${a}-disabled)
        `]:{borderColor:e.colorPrimaryHover},[`p${a}-drag-icon`]:{marginBottom:e.margin,[o]:{color:e.colorPrimary,fontSize:e.uploadThumbnailSize}},[`p${a}-text`]:{margin:`0 0 ${K(e.marginXXS)}`,color:e.colorTextHeading,fontSize:e.fontSizeLG},[`p${a}-hint`]:{color:e.colorTextDescription,fontSize:e.fontSize},[`&${a}-disabled`]:{[`p${a}-drag-icon ${o},
            p${a}-text,
            p${a}-hint
          `]:{color:e.colorTextDisabled}}}}}},en=e=>{const{componentCls:a,antCls:o,iconCls:d,fontSize:r,lineHeight:c,calc:i}=e,t=`${a}-list-item`,m=`${t}-actions`,p=`${t}-action`,h=e.fontHeightSM;return{[`${a}-wrapper`]:{[`${a}-list`]:Object.assign(Object.assign({},Me()),{lineHeight:e.lineHeight,[t]:{position:"relative",height:i(e.lineHeight).mul(r).equal(),marginTop:e.marginXS,fontSize:r,display:"flex",alignItems:"center",transition:`background-color ${e.motionDurationSlow}`,"&:hover":{backgroundColor:e.controlItemBgHover},[`${t}-name`]:Object.assign(Object.assign({},He),{padding:`0 ${K(e.paddingXS)}`,lineHeight:c,flex:"auto",transition:`all ${e.motionDurationSlow}`}),[m]:{whiteSpace:"nowrap",[p]:{opacity:0},[d]:{color:e.actionsColor,transition:`all ${e.motionDurationSlow}`},[`
              ${p}:focus-visible,
              &.picture ${p}
            `]:{opacity:1},[`${p}${o}-btn`]:{height:h,border:0,lineHeight:1}},[`${a}-icon ${d}`]:{color:e.colorTextDescription,fontSize:r},[`${t}-progress`]:{position:"absolute",bottom:e.calc(e.uploadProgressOffset).mul(-1).equal(),width:"100%",paddingInlineStart:i(r).add(e.paddingXS).equal(),fontSize:r,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${t}:hover ${p}`]:{opacity:1},[`${t}-error`]:{color:e.colorError,[`${t}-name, ${a}-icon ${d}`]:{color:e.colorError},[m]:{[`${d}, ${d}:hover`]:{color:e.colorError},[p]:{opacity:1}}},[`${a}-list-item-container`]:{transition:`opacity ${e.motionDurationSlow}, height ${e.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}})}}},tn=e=>{const{componentCls:a}=e,o=new Re("uploadAnimateInlineIn",{from:{width:0,height:0,padding:0,opacity:0,margin:e.calc(e.marginXS).div(-2).equal()}}),d=new Re("uploadAnimateInlineOut",{to:{width:0,height:0,padding:0,opacity:0,margin:e.calc(e.marginXS).div(-2).equal()}}),r=`${a}-animate-inline`;return[{[`${a}-wrapper`]:{[`${r}-appear, ${r}-enter, ${r}-leave`]:{animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseInOutCirc,animationFillMode:"forwards"},[`${r}-appear, ${r}-enter`]:{animationName:o},[`${r}-leave`]:{animationName:d}}},{[`${a}-wrapper`]:ot(e)},o,d]},nn=e=>{const{componentCls:a,iconCls:o,uploadThumbnailSize:d,uploadProgressOffset:r,calc:c}=e,i=`${a}-list`,t=`${i}-item`;return{[`${a}-wrapper`]:{[`
        ${i}${i}-picture,
        ${i}${i}-picture-card,
        ${i}${i}-picture-circle
      `]:{[t]:{position:"relative",height:c(d).add(c(e.lineWidth).mul(2)).add(c(e.paddingXS).mul(2)).equal(),padding:e.paddingXS,border:`${K(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusLG,"&:hover":{background:"transparent"},[`${t}-thumbnail`]:Object.assign(Object.assign({},He),{width:d,height:d,lineHeight:K(c(d).add(e.paddingSM).equal()),textAlign:"center",flex:"none",[o]:{fontSize:e.fontSizeHeading2,color:e.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),[`${t}-progress`]:{bottom:r,width:`calc(100% - ${K(c(e.paddingSM).mul(2).equal())})`,marginTop:0,paddingInlineStart:c(d).add(e.paddingXS).equal()}},[`${t}-error`]:{borderColor:e.colorError,[`${t}-thumbnail ${o}`]:{[`svg path[fill='${De[0]}']`]:{fill:e.colorErrorBg},[`svg path[fill='${De.primary}']`]:{fill:e.colorError}}},[`${t}-uploading`]:{borderStyle:"dashed",[`${t}-name`]:{marginBottom:r}}},[`${i}${i}-picture-circle ${t}`]:{[`&, &::before, ${t}-thumbnail`]:{borderRadius:"50%"}}}}},sn=e=>{const{componentCls:a,iconCls:o,fontSizeLG:d,colorTextLightSolid:r,calc:c}=e,i=`${a}-list`,t=`${i}-item`,m=e.uploadPicCardSize;return{[`
      ${a}-wrapper${a}-picture-card-wrapper,
      ${a}-wrapper${a}-picture-circle-wrapper
    `]:Object.assign(Object.assign({},Me()),{display:"block",[`${a}${a}-select`]:{width:m,height:m,textAlign:"center",verticalAlign:"top",backgroundColor:e.colorFillAlter,border:`${K(e.lineWidth)} dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[`> ${a}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${a}-disabled):hover`]:{borderColor:e.colorPrimary}},[`${i}${i}-picture-card, ${i}${i}-picture-circle`]:{display:"flex",flexWrap:"wrap","@supports not (gap: 1px)":{"& > *":{marginBlockEnd:e.marginXS,marginInlineEnd:e.marginXS}},"@supports (gap: 1px)":{gap:e.marginXS},[`${i}-item-container`]:{display:"inline-block",width:m,height:m,verticalAlign:"top"},"&::after":{display:"none"},"&::before":{display:"none"},[t]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${K(c(e.paddingXS).mul(2).equal())})`,height:`calc(100% - ${K(c(e.paddingXS).mul(2).equal())})`,backgroundColor:e.colorBgMask,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'" "'}},[`${t}:hover`]:{[`&::before, ${t}-actions`]:{opacity:1}},[`${t}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${e.motionDurationSlow}`,[`
            ${o}-eye,
            ${o}-download,
            ${o}-delete
          `]:{zIndex:10,width:d,margin:`0 ${K(e.marginXXS)}`,fontSize:d,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,color:r,"&:hover":{color:r},svg:{verticalAlign:"baseline"}}},[`${t}-thumbnail, ${t}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${t}-name`]:{display:"none",textAlign:"center"},[`${t}-file + ${t}-name`]:{position:"absolute",bottom:e.margin,display:"block",width:`calc(100% - ${K(c(e.paddingXS).mul(2).equal())})`},[`${t}-uploading`]:{[`&${t}`]:{backgroundColor:e.colorFillAlter},[`&::before, ${o}-eye, ${o}-download, ${o}-delete`]:{display:"none"}},[`${t}-progress`]:{bottom:e.marginXL,width:`calc(100% - ${K(c(e.paddingXS).mul(2).equal())})`,paddingInlineStart:0}}}),[`${a}-wrapper${a}-picture-circle-wrapper`]:{[`${a}${a}-select`]:{borderRadius:"50%"}}}},an=e=>{const{componentCls:a}=e;return{[`${a}-rtl`]:{direction:"rtl"}}},on=e=>{const{componentCls:a,colorTextDisabled:o}=e;return{[`${a}-wrapper`]:Object.assign(Object.assign({},ct(e)),{[a]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${a}-select`]:{display:"inline-block"},[`${a}-disabled`]:{color:o,cursor:"not-allowed"}})}},rn=e=>({actionsColor:e.colorTextDescription}),ln=rt("Upload",e=>{const{fontSizeHeading3:a,fontHeight:o,lineWidth:d,controlHeightLG:r,calc:c}=e,i=lt(e,{uploadThumbnailSize:c(a).mul(2).equal(),uploadProgressOffset:c(c(o).div(2)).add(d).equal(),uploadPicCardSize:c(r).mul(2.55).equal()});return[on(i),kt(i),nn(i),sn(i),en(i),tn(i),an(i),it(i)]},rn);function pe(e){return Object.assign(Object.assign({},e),{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})}function ge(e,a){const o=fe(a),d=o.findIndex(r=>{let{uid:c}=r;return c===e.uid});return d===-1?o.push(e):o[d]=e,o}function je(e,a){const o=e.uid!==void 0?"uid":"name";return a.filter(d=>d[o]===e[o])[0]}function cn(e,a){const o=e.uid!==void 0?"uid":"name",d=a.filter(r=>r[o]!==e[o]);return d.length===a.length?null:d}const dn=function(){const a=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").split("/"),d=a[a.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(d)||[""])[0]},We=e=>e.indexOf("image/")===0,un=e=>{if(e.type&&!e.thumbUrl)return We(e.type);const a=e.thumbUrl||e.url||"",o=dn(a);return/^data:image\//.test(a)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(o)?!0:!(/^data:/.test(a)||o)},ie=200;function mn(e){return new Promise(a=>{if(!e.type||!We(e.type)){a("");return}const o=document.createElement("canvas");o.width=ie,o.height=ie,o.style.cssText=`position: fixed; left: 0; top: 0; width: ${ie}px; height: ${ie}px; z-index: 9999; display: none;`,document.body.appendChild(o);const d=o.getContext("2d"),r=new Image;if(r.onload=()=>{const{width:c,height:i}=r;let t=ie,m=ie,p=0,h=0;c>i?(m=i*(ie/c),h=-(m-t)/2):(t=c*(ie/i),p=-(t-m)/2),d.drawImage(r,p,h,t,m);const D=o.toDataURL();document.body.removeChild(o),window.URL.revokeObjectURL(r.src),a(D)},r.crossOrigin="anonymous",e.type.startsWith("image/svg+xml")){const c=new FileReader;c.onload=()=>{c.result&&typeof c.result=="string"&&(r.src=c.result)},c.readAsDataURL(e)}else if(e.type.startsWith("image/gif")){const c=new FileReader;c.onload=()=>{c.result&&a(c.result)},c.readAsDataURL(e)}else r.src=window.URL.createObjectURL(e)})}const pn=n.forwardRef((e,a)=>{let{prefixCls:o,className:d,style:r,locale:c,listType:i,file:t,items:m,progress:p,iconRender:h,actionIconRender:D,itemRender:M,isImgUrl:F,showPreviewIcon:U,showRemoveIcon:q,showDownloadIcon:O,previewIcon:y,removeIcon:S,downloadIcon:l,extra:H,onPreview:V,onDownload:ne,onClose:J}=e;var k,W;const{status:Y}=t,[T,se]=n.useState(Y);n.useEffect(()=>{Y!=="removed"&&se(Y)},[Y]);const[ee,oe]=n.useState(!1);n.useEffect(()=>{const A=setTimeout(()=>{oe(!0)},300);return()=>{clearTimeout(A)}},[]);const ae=h(t);let P=n.createElement("div",{className:`${o}-icon`},ae);if(i==="picture"||i==="picture-card"||i==="picture-circle")if(T==="uploading"||!t.thumbUrl&&!t.url){const A=Q(`${o}-list-item-thumbnail`,{[`${o}-list-item-file`]:T!=="uploading"});P=n.createElement("div",{className:A},ae)}else{const A=F!=null&&F(t)?n.createElement("img",{src:t.thumbUrl||t.url,alt:t.name,className:`${o}-list-item-image`,crossOrigin:t.crossOrigin}):ae,I=Q(`${o}-list-item-thumbnail`,{[`${o}-list-item-file`]:F&&!F(t)});P=n.createElement("a",{className:I,onClick:le=>V(t,le),href:t.url||t.thumbUrl,target:"_blank",rel:"noopener noreferrer"},A)}const g=Q(`${o}-list-item`,`${o}-list-item-${T}`),z=typeof t.linkProps=="string"?JSON.parse(t.linkProps):t.linkProps,j=(typeof q=="function"?q(t):q)?D((typeof S=="function"?S(t):S)||n.createElement(Xt,null),()=>J(t),o,c.removeFile,!0):null,b=(typeof O=="function"?O(t):O)&&T==="done"?D((typeof l=="function"?l(t):l)||n.createElement(qt,null),()=>ne(t),o,c.downloadFile):null,v=i!=="picture-card"&&i!=="picture-circle"&&n.createElement("span",{key:"download-delete",className:Q(`${o}-list-item-actions`,{picture:i==="picture"})},b,j),E=typeof H=="function"?H(t):H,u=E&&n.createElement("span",{className:`${o}-list-item-extra`},E),w=Q(`${o}-list-item-name`),L=t.url?n.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:w,title:t.name},z,{href:t.url,onClick:A=>V(t,A)}),t.name,u):n.createElement("span",{key:"view",className:w,onClick:A=>V(t,A),title:t.name},t.name,u),_=(typeof U=="function"?U(t):U)&&(t.url||t.thumbUrl)?n.createElement("a",{href:t.url||t.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:A=>V(t,A),title:c.previewFile},typeof y=="function"?y(t):y||n.createElement(dt,null)):null,G=(i==="picture-card"||i==="picture-circle")&&T!=="uploading"&&n.createElement("span",{className:`${o}-list-item-actions`},_,T==="done"&&b,j),{getPrefixCls:Z}=n.useContext(_e),$=Z(),B=n.createElement("div",{className:g},P,L,v,G,ee&&n.createElement(ze,{motionName:`${$}-fade`,visible:T==="uploading",motionDeadline:2e3},A=>{let{className:I}=A;const le="percent"in t?n.createElement(Kt,Object.assign({},p,{type:"line",percent:t.percent,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"]})):null;return n.createElement("div",{className:Q(`${o}-list-item-progress`,I)},le)})),te=t.response&&typeof t.response=="string"?t.response:((k=t.error)===null||k===void 0?void 0:k.statusText)||((W=t.error)===null||W===void 0?void 0:W.message)||c.uploadError,re=T==="error"?n.createElement(ut,{title:te,getPopupContainer:A=>A.parentNode},B):B;return n.createElement("div",{className:Q(`${o}-list-item-container`,d),style:r,ref:a},M?M(re,t,m,{download:ne.bind(null,t),preview:V.bind(null,t),remove:J.bind(null,t)}):re)}),gn=(e,a)=>{const{listType:o="text",previewFile:d=mn,onPreview:r,onDownload:c,onRemove:i,locale:t,iconRender:m,isImageUrl:p=un,prefixCls:h,items:D=[],showPreviewIcon:M=!0,showRemoveIcon:F=!0,showDownloadIcon:U=!1,removeIcon:q,previewIcon:O,downloadIcon:y,extra:S,progress:l={size:[-1,2],showInfo:!1},appendAction:H,appendActionVisible:V=!0,itemRender:ne,disabled:J}=e,k=mt(),[W,Y]=n.useState(!1),T=["picture-card","picture-circle"].includes(o);n.useEffect(()=>{o.startsWith("picture")&&(D||[]).forEach(u=>{!(u.originFileObj instanceof File||u.originFileObj instanceof Blob)||u.thumbUrl!==void 0||(u.thumbUrl="",d==null||d(u.originFileObj).then(w=>{u.thumbUrl=w||"",k()}))})},[o,D,d]),n.useEffect(()=>{Y(!0)},[]);const se=(u,w)=>{if(r)return w.preventDefault(),r(u)},ee=u=>{typeof c=="function"?c(u):u.url&&window.open(u.url)},oe=u=>{i==null||i(u)},ae=u=>{if(m)return m(u,o);const w=u.status==="uploading";if(o.startsWith("picture")){const L=o==="picture"?n.createElement(Te,null):t.uploading,_=p!=null&&p(u)?n.createElement(Vt,null):n.createElement(Wt,null);return w?L:_}return w?n.createElement(Te,null):n.createElement(Gt,null)},P=(u,w,L,_,G)=>{const Z={type:"text",size:"small",title:_,onClick:$=>{var B,te;w(),n.isValidElement(u)&&((te=(B=u.props).onClick)===null||te===void 0||te.call(B,$))},className:`${L}-list-item-action`};return G&&(Z.disabled=J),n.isValidElement(u)?n.createElement(Pe,Object.assign({},Z,{icon:Ue(u,Object.assign(Object.assign({},u.props),{onClick:()=>{}}))})):n.createElement(Pe,Object.assign({},Z),n.createElement("span",null,u))};n.useImperativeHandle(a,()=>({handlePreview:se,handleDownload:ee}));const{getPrefixCls:g}=n.useContext(_e),z=g("upload",h),j=g(),b=Q(`${z}-list`,`${z}-list-${o}`),v=n.useMemo(()=>pt(gt(j),["onAppearEnd","onEnterEnd","onLeaveEnd"]),[j]),E=Object.assign(Object.assign({},T?{}:v),{motionDeadline:2e3,motionName:`${z}-${T?"animate-inline":"animate"}`,keys:fe(D.map(u=>({key:u.uid,file:u}))),motionAppear:W});return n.createElement("div",{className:b},n.createElement(ft,Object.assign({},E,{component:!1}),u=>{let{key:w,file:L,className:_,style:G}=u;return n.createElement(pn,{key:w,locale:t,prefixCls:z,className:_,style:G,file:L,items:D,progress:l,listType:o,isImgUrl:p,showPreviewIcon:M,showRemoveIcon:F,showDownloadIcon:U,removeIcon:q,previewIcon:O,downloadIcon:y,extra:S,iconRender:ae,actionIconRender:P,itemRender:ne,onPreview:se,onDownload:ee,onClose:oe})}),H&&n.createElement(ze,Object.assign({},E,{visible:V,forceRender:!0}),u=>{let{className:w,style:L}=u;return Ue(H,_=>({className:Q(_.className,w),style:Object.assign(Object.assign(Object.assign({},L),{pointerEvents:w?"none":void 0}),_.style)}))}))},fn=n.forwardRef(gn);var xn=function(e,a,o,d){function r(c){return c instanceof o?c:new o(function(i){i(c)})}return new(o||(o=Promise))(function(c,i){function t(h){try{p(d.next(h))}catch(D){i(D)}}function m(h){try{p(d.throw(h))}catch(D){i(D)}}function p(h){h.done?c(h.value):r(h.value).then(t,m)}p((d=d.apply(e,[])).next())})};const me=`__LIST_IGNORE_${Date.now()}__`,hn=(e,a)=>{const{fileList:o,defaultFileList:d,onRemove:r,showUploadList:c=!0,listType:i="text",onPreview:t,onDownload:m,onChange:p,onDrop:h,previewFile:D,disabled:M,locale:F,iconRender:U,isImageUrl:q,progress:O,prefixCls:y,className:S,type:l="select",children:H,style:V,itemRender:ne,maxCount:J,data:k={},multiple:W=!1,hasControlInside:Y=!0,action:T="",accept:se="",supportServerRender:ee=!0,rootClassName:oe}=e,ae=n.useContext(xt),P=M??ae,[g,z]=ht(d||[],{value:o,postState:f=>f??[]}),[j,b]=n.useState("drop"),v=n.useRef(null),E=n.useRef(null);n.useMemo(()=>{const f=Date.now();(o||[]).forEach((N,R)=>{!N.uid&&!Object.isFrozen(N)&&(N.uid=`__AUTO__${f}_${R}__`)})},[o]);const u=(f,N,R)=>{let x=fe(N),C=!1;J===1?x=x.slice(-1):J&&(C=x.length>J,x=x.slice(0,J)),Le.flushSync(()=>{z(x)});const X={file:f,fileList:x};R&&(X.event=R),(!C||f.status==="removed"||x.some(ce=>ce.uid===f.uid))&&Le.flushSync(()=>{p==null||p(X)})},w=(f,N)=>xn(void 0,void 0,void 0,function*(){const{beforeUpload:R,transformFile:x}=e;let C=f;if(R){const X=yield R(f,N);if(X===!1)return!1;if(delete f[me],X===me)return Object.defineProperty(f,me,{value:!0,configurable:!0}),!1;typeof X=="object"&&X&&(C=X)}return x&&(C=yield x(C)),C}),L=f=>{const N=f.filter(C=>!C.file[me]);if(!N.length)return;const R=N.map(C=>pe(C.file));let x=fe(g);R.forEach(C=>{x=ge(C,x)}),R.forEach((C,X)=>{let ce=C;if(N[X].parsedFile)C.status="uploading";else{const{originFileObj:ue}=C;let de;try{de=new File([ue],ue.name,{type:ue.type})}catch{de=new Blob([ue],{type:ue.type}),de.name=ue.name,de.lastModifiedDate=new Date,de.lastModified=new Date().getTime()}de.uid=C.uid,ce=de}u(ce,x)})},_=(f,N,R)=>{try{typeof f=="string"&&(f=JSON.parse(f))}catch{}if(!je(N,g))return;const x=pe(N);x.status="done",x.percent=100,x.response=f,x.xhr=R;const C=ge(x,g);u(x,C)},G=(f,N)=>{if(!je(N,g))return;const R=pe(N);R.status="uploading",R.percent=f.percent;const x=ge(R,g);u(R,x,f)},Z=(f,N,R)=>{if(!je(R,g))return;const x=pe(R);x.error=f,x.response=N,x.status="error";const C=ge(x,g);u(x,C)},$=f=>{let N;Promise.resolve(typeof r=="function"?r(f):r).then(R=>{var x;if(R===!1)return;const C=cn(f,g);C&&(N=Object.assign(Object.assign({},f),{status:"removed"}),g==null||g.forEach(X=>{const ce=N.uid!==void 0?"uid":"name";X[ce]===N[ce]&&!Object.isFrozen(X)&&(X.status="removed")}),(x=v.current)===null||x===void 0||x.abort(N),u(N,C))})},B=f=>{b(f.type),f.type==="drop"&&(h==null||h(f))};n.useImperativeHandle(a,()=>({onBatchStart:L,onSuccess:_,onProgress:G,onError:Z,fileList:g,upload:v.current,nativeElement:E.current}));const{getPrefixCls:te,direction:re,upload:A}=n.useContext(_e),I=te("upload",y),le=Object.assign(Object.assign({onBatchStart:L,onError:Z,onProgress:G,onSuccess:_},e),{data:k,multiple:W,action:T,accept:se,supportServerRender:ee,prefixCls:I,disabled:P,beforeUpload:w,onChange:void 0,hasControlInside:Y});delete le.className,delete le.style,(!H||P)&&delete le.id;const Ee=`${I}-wrapper`,[xe,Ae,Ke]=ln(I,Ee),[Je]=bt("Upload",yt.Upload),{showRemoveIcon:Ie,showPreviewIcon:Ye,showDownloadIcon:Ze,removeIcon:Qe,previewIcon:ke,downloadIcon:et,extra:tt}=typeof c=="boolean"?{}:c,nt=typeof Ie>"u"?!P:Ie,he=(f,N)=>c?n.createElement(fn,{prefixCls:I,listType:i,items:g,previewFile:D,onPreview:t,onDownload:m,onRemove:$,showRemoveIcon:nt,showPreviewIcon:Ye,showDownloadIcon:Ze,removeIcon:Qe,previewIcon:ke,downloadIcon:et,iconRender:U,extra:tt,locale:Object.assign(Object.assign({},Je),F),isImageUrl:q,progress:O,appendAction:f,appendActionVisible:N,itemRender:ne,disabled:P}):f,be=Q(Ee,S,oe,Ae,Ke,A==null?void 0:A.className,{[`${I}-rtl`]:re==="rtl",[`${I}-picture-card-wrapper`]:i==="picture-card",[`${I}-picture-circle-wrapper`]:i==="picture-circle"}),st=Object.assign(Object.assign({},A==null?void 0:A.style),V);if(l==="drag"){const f=Q(Ae,I,`${I}-drag`,{[`${I}-drag-uploading`]:g.some(N=>N.status==="uploading"),[`${I}-drag-hover`]:j==="dragover",[`${I}-disabled`]:P,[`${I}-rtl`]:re==="rtl"});return xe(n.createElement("span",{className:be,ref:E},n.createElement("div",{className:f,style:st,onDrop:B,onDragOver:B,onDragLeave:B},n.createElement(Fe,Object.assign({},le,{ref:v,className:`${I}-btn`}),n.createElement("div",{className:`${I}-drag-container`},H))),he()))}const at=Q(I,`${I}-select`,{[`${I}-disabled`]:P}),Oe=n.createElement("div",{className:at,style:H?void 0:{display:"none"}},n.createElement(Fe,Object.assign({},le,{ref:v})));return xe(i==="picture-card"||i==="picture-circle"?n.createElement("span",{className:be,ref:E},he(Oe,!!H)):n.createElement("span",{className:be,ref:E},Oe,he()))},Ge=n.forwardRef(hn);var bn=function(e,a){var o={};for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&a.indexOf(d)<0&&(o[d]=e[d]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,d=Object.getOwnPropertySymbols(e);r<d.length;r++)a.indexOf(d[r])<0&&Object.prototype.propertyIsEnumerable.call(e,d[r])&&(o[d[r]]=e[d[r]]);return o};const yn=n.forwardRef((e,a)=>{var{style:o,height:d,hasControlInside:r=!1}=e,c=bn(e,["style","height","hasControlInside"]);return n.createElement(Ge,Object.assign({ref:a,hasControlInside:r},c,{type:"drag",style:Object.assign(Object.assign({},o),{height:d})}))}),Ce=Ge;Ce.Dragger=yn;Ce.LIST_IGNORE=me;const Sn=({modalOPen:e,setModalOpen:a,role:o="",getlist:d,item:r={},distributorId:c="",changeParams:i={}})=>{const{register:t,handleSubmit:m,formState:{errors:p},reset:h,setValue:D,getValues:M,watch:F,control:U}=St({defaultValues:{testArray:[]}}),{fields:q,append:O,remove:y}=vt({control:U,name:"testArray"});F("Nursing Home");const[S,l]=n.useState("Create Elderly"),[H,V]=n.useState("Create Elderly"),[ne,J]=n.useState("create");n.useState([]),n.useState([]);const[k,W]=n.useState(!1),[Y,T]=n.useState("");n.useEffect(()=>{if(e)if(ye(r))h({testArray:[]}),l("Create Elderly"),V("Create Elderly"),setTimeout(()=>{O({roomNumber:void 0,firstName:void 0,lastName:void 0})},100);else{h({testArray:[]}),T(r.role),l("Edit Elderly"),V("Save");const{roomNumber:j,firstName:b,lastName:v}=r;console.log("oitem",r.roomNumber,r.firstName,r.lastName),setTimeout(()=>{O({roomNumber:j,firstName:b,lastName:v})},500)}},[e]);const se=j=>{if(ye(r))Ht([...j.guests]).then(b=>{(b==null?void 0:b.code)=="00000"&&(Ne.custom(v=>s.jsx($e,{t:v,text:`${r.role} has been created Successfully!`})),a(!1),d(),h())});else{let b=j.guests[0];Mt({...b,id:r.id}).then(v=>{(v==null?void 0:v.code)=="00000"&&(Ne.custom(E=>s.jsx($e,{t:E,text:"Modified successfully"})),a(!1),d(),h())})}},ee=()=>{W(!0)};function oe(j){const b={A:"roomNumber",B:"firstName",C:"lastName"};return Object.keys(j).reduce((v,E)=>{var _;const u=E.charAt(0),w=E.slice(1),L=b[u]||u;return v[`row${w}`]=v[`row${w}`]||{},v[`row${w}`][L]=(_=j[E])==null?void 0:_.v,v},{})}const P={showUploadList:!1,beforeUpload:!1,onChange:j=>{j.file;let b=!0,v=j.file;if(v.status!=="error")return;const E=new FileReader;E.readAsBinaryString(v.originFileObj),E.onload=function(u){try{b=!1;const w=u.target.result;let _=jt.read(w,{type:"binary"}).Sheets.Sheet1;delete _["!margins"],delete _["!ref"];let G=Object.values(oe(_));G.shift(),G.forEach((Z,$)=>{O(Z)});return}catch{return}}}},g=()=>ye(r)?s.jsx(Ce,{className:"w-full",...P,children:s.jsx("button",{type:"button",style:{width:"518px"},className:"mt-[10px] font-[500] text-[14px] h-[40px] w-full hover:border-primary hover:text-primary duration-300 px-5 rounded-[10px] bg-transparent text-[#666D90] border border-gray-300",children:"Import from File"})}):s.jsx("div",{onClick:()=>ee(),className:"hover:brightness-110 duration-300  cursor-pointer mt-[7px] w-full text-center pt-[12px] pb-[12px]  pt-[7px] text-onBackWarring rounded-[10px] border border-onBackWarring pt-[7px] ",children:"Delete Distributor"}),z=async()=>{W(!1),zt({id:r.id}),await d(),setTimeout(()=>{a(!1),Ne.custom(j=>s.jsx($e,{t:j,text:`${r.role} has been successfully deleted`}))},900)};return s.jsxs(Nt,{modalOPen:e,setModalOpen:a,handleSubmit:m(se),handalDelete:ee,width:590,title:S,cstatus:ne,id:r==null?void 0:r.id,Foot:s.jsx(g,{}),buttonText:H,children:[q.map((j,b)=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Se,{name:`guests[${b}].roomNumber`,control:U,defaultValue:j.roomNumber,render:({field:v})=>s.jsx(ve,{label:"Room Number",type:"text",register:t(`guests[${b}].roomNumber`,{required:{value:!0,message:"Please enter Room Number"}}),error:p.roomNumber,placeholder:"Enter Room Number"})}),s.jsx(Se,{name:`guests[${b}].firstName`,control:U,defaultValue:j.firstName,render:({field:v})=>s.jsx(ve,{label:"firstName",type:"text",register:t(`guests[${b}].firstName`,{required:{value:!0,message:"Please enter first name"}}),error:p.firstName,placeholder:"Enter firstName"})}),s.jsx(Se,{name:`guests[${b}].lastName`,control:U,defaultValue:j.lastName,render:({field:v})=>s.jsx(ve,{label:"lastName",type:"text",register:t(`guests[${b}].lastName`,{required:{value:!0,message:"Please enter lastName"}}),error:p.lastName,placeholder:"Enter lastName"})})]},b)),s.jsx($t,{onDelete:()=>z(),modalOPen:k,setModalOpen:W,title:`Are you sure to delete this ${Y} account? This`,title2:" process CAN’T be undo."})]})};function vn({row:e}){const[a,o]=n.useState(e==null?void 0:e.status),[d,r]=n.useState(!1),c=i=>{r(!0),Ve(e==null?void 0:e._id,{status:i}).then(t=>{var m;console.log(t),t&&o((m=t==null?void 0:t.user)==null?void 0:m.status)}).finally(()=>{r(!1)})};return n.useEffect(()=>{o(e==null?void 0:e.status)},[e]),s.jsx(qe,{theme:{token:{colorText:"#707EAE",colorPrimary:"#06A44F",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:s.jsx(Zt,{loading:d,onChange:c,handleBg:"#00000",className:"bg-slate-200",value:a})})}function Nn({row:e}){const[a,o]=n.useState(e==null?void 0:e.status),[d,r]=n.useState(!1),c=i=>{r(!0),Ve(e==null?void 0:e._id,{status:i}).then(t=>{var m;console.log(t),t&&o((m=t==null?void 0:t.user)==null?void 0:m.status)}).finally(()=>{r(!1)})};return n.useEffect(()=>{o(e==null?void 0:e.status)},[e]),s.jsxs("div",{className:"flex items-center space-x-2 mr-0 ",children:[s.jsx("span",{className:`w-3 h-3 rounded-full relative -right-2 ${a==!0?"bg-[#1EB564]":"bg-red-500"}`}),s.jsx(qe,{theme:{token:{colorText:"#707EAE",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:s.jsx(Et,{value:a,variant:"borderless",onChange:c,loading:d,optionSelectedColor:"#8086AC",className:"w-fit !text-red-100",options:[{value:!1,label:s.jsx("span",{children:"Disable"})},{value:!0,label:s.jsx("span",{children:"Active"})}]})})]})}const $n=e=>{const[a,o]=n.useState(we.get("mainRole")),[d,r]=n.useState(void 0);Be(),Xe();const c={distributor:{office:["name","address","contact_person","contact_number","seles_agent_count","end_user_count","nursing_home_count","monitoring_company_count","action"],sales_agent:["name","address","contact_number","agent_id","nursing_home_count","monitoring_company_count","end_user_count","device_count","action"]},sales_agent:{nursing_home:["name","address","contact_person","contact_number","assigned_nurse_count","action"],end_user:["name","address","contact_number"],monitoring_station:["name","address","contact_person","contact_number","action"],installer:["name","address","contact_number","action"],support_agent:["name","address","contact_number","action"]},nursing_home:{nurse:["name","contact_number","action"],elderly:["elderlyName","activeAlert","allergies","diseases","medications","viewOnMap"]},monitoring_station:{support_agent:["name","address","contact_number","action"],installer:["name","address","contact_number","action"],elderly:["elderlyName","activeAlert","allergies","diseases","medications","viewOnMap"]},nurse:{elderly:["name","age","alert_count","device_count"]},installer:{end_user:["name","address","contact_number","action"]},office:{sales_agent:["name","address","contact_number","agent_id","nursing_home_count","monitoring_company_count","end_user_count","device_count"],installer:["name","address","contact_number","action"]}},i={name:{title:t=>{switch(t){case"office":return"Office";case"nurse":return"Nurse Name";case"distributor":return"Distributor Name";case"sales_agent":return"Sales Agent Name";case"nursing_home":return"Nursing Home";case"end_user":return"Customer";case"monitoring_station":return"Monitoring Station";case"support_agent":return"Support Agent";case"installer":return"Installer";default:return"Name"}},key:"id",render:t=>(t==null?void 0:t.role)=="elderly"?s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.name})}):s.jsx("button",{children:s.jsx(wt,{data:t})})},elderlyName:{title:"Elderly Name",render:t=>s.jsx(Yt,{data:t})},address:{title:t=>{switch(t){case"sales_agent":return"Address";default:return"Address"}},render:t=>s.jsx("button",{style:{width:"200px",textAlign:"left"},children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.address})})},activeAlert:{title:"Active Alert",dataIndex:"unresolved_alarm_count",render:t=>s.jsx("span",{children:t})},allergies:{title:"Allergies",render:t=>{var m;return s.jsx("span",{children:(m=t.comments)==null?void 0:m.filter(p=>p.category==="Allergy").map(p=>p.comment).join(", ")})}},diseases:{title:"Diseases",render:t=>{var m;return s.jsx("span",{children:(m=t.diseases)==null?void 0:m.map(p=>p).join(", ")})}},medications:{title:"Medications",render:t=>{var m;return s.jsx("span",{children:(m=t.medications)==null?void 0:m.map(p=>p.name).join(", ")})}},viewOnMap:{title:"View On Map",render:t=>s.jsx("span",{className:"flex items-center transition-all duration-300 justify-start gap-2 text-sm font-medium text-text-primary hover:text-primary cursor-pointer p-2 rounded-md w-fit text-center hover:bg-slate-100",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("a",{href:`https://www.google.com/maps?q=${t.latitude},${t.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"text-base font-medium !text-blue-500",children:"View on Map"}),s.jsx(_t,{size:18,className:"text-blue-500"})]})})},email:{title:"Email Address",render:t=>s.jsx("button",{style:{width:"150px",textAlign:"left"},children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.email})})},contact_number:{title:"Contact Number",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.contact_number})})},contact_person:{title:"Contact Person",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.contact_person})})},date:{title:"Date of Sales",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.date})})},age:{title:"Age",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.age})})},external_id:{title:"External ID",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.date})})},products:{title:"Products",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.products})})},products_price:{title:"Products Price",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.products_price})})},addons:{title:"Addons",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.addons})})},addons_price:{title:"Addons Price",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.addon_price})})},total_price:{title:"Total Price",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.total})})},alert_count:{title:"Alert Count",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.alert_count})})},device_count:{title:"Device Count",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.device_count})})},sales_agent_count:{title:"Sales Agents",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.sales_agent})})},end_user_count:{title:"End Users",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.end_user})})},nursing_home_count:{title:"Nursing Homes",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.nursing_home})})},monitoring_company_count:{title:"Monitoring Station",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.monitoring_station})})},assigned_nurse_count:{title:"Assigned Nurse",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.nurse})})},office_name:{title:"Office",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.office_name})})},installer:{title:"Installer Name",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.installer_name})})},agent_id:{title:"Agent ID",render:t=>s.jsx("button",{children:s.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.agent_id})})},status:{title:"Status",render:t=>(t==null?void 0:t.role)=="sales_agent"?s.jsx(vn,{row:t}):s.jsx(Nn,{row:t})},report:{title:"Report",render:t=>s.jsx("div",{className:"flex justify-center",children:s.jsx(Ct,{report:t})})},status2:{title:"Installation Status",render:t=>{let m;switch(t.status){case"not started":m="bg-gray-500";break;case"problem":m="bg-red-500";break;case"pending":m="bg-yellow-500";break;case"complete":m="bg-[#1EB564]";break}return s.jsx("button",{children:s.jsx("span",{className:`text-[14px] xl:text-base capitalize font-semibold font-normal text-white p-2 px-3 ${m} rounded-lg`,children:t.status})})}},action:{title:"",key:"id",width:100,render:t=>s.jsx(Jt,{data:t})}};return n.useEffect(()=>{var t,m,p,h,D,M,F,U,q;if(e=="Offices"){const y=(((t=c[a])==null?void 0:t.office)||[]).map(S=>{const l=i[S];return{...l,title:l&&typeof l.title=="function"?l.title("office"):l==null?void 0:l.title}});r(y)}else if(e=="Support Agents"){const y=(((m=c[a])==null?void 0:m.support_agent)||[]).map(S=>{const l=i[S];return{...l,title:l&&typeof l.title=="function"?l.title("support_agent"):l==null?void 0:l.title}});r(y)}else if(e=="Nursing Homes"){const y=(((p=c[a])==null?void 0:p.nursing_home)||[]).map(S=>{const l=i[S];return{...l,title:l&&typeof l.title=="function"?l.title("nursing_home"):l==null?void 0:l.title}});r(y)}else if(e=="Sales Agents"){const y=(((h=c[a])==null?void 0:h.sales_agent)||[]).map(S=>{const l=i[S];return{...l,title:l&&typeof l.title=="function"?l.title("sales_agent"):l==null?void 0:l.title}});r(y)}else if(e=="End Users"){const y=(((D=c[a])==null?void 0:D.end_user)||[]).map(S=>{const l=i[S];return{...l,title:l&&typeof l.title=="function"?l.title("end_user"):l==null?void 0:l.title}});r(y)}else if(e=="Installers"){const y=(((M=c[a])==null?void 0:M.installer)||[]).map(S=>{const l=i[S];return{...l,title:l&&typeof l.title=="function"?l.title("installer"):l==null?void 0:l.title}});r(y)}else if(e=="Monitoring Stations"){const y=(((F=c[a])==null?void 0:F.monitoring_station)||[]).map(S=>{const l=i[S];return{...l,title:l&&typeof l.title=="function"?l.title("monitoring_station"):l==null?void 0:l.title}});r(y)}else if(e=="Nurse"){console.log(e);const y=(((U=c[a])==null?void 0:U.nurse)||[]).map(S=>{const l=i[S];return{...l,title:l&&typeof l.title=="function"?l.title("nurse"):l==null?void 0:l.title}});r(y)}else if(e=="Elderly"){const y=(((q=c[a])==null?void 0:q.elderly)||[]).map(S=>{const l=i[S];return{...l,title:l&&typeof l.title=="function"?l.title("elderly"):l==null?void 0:l.title}});r(y)}},[e]),d};let jn={NursingHomes:{placeholder:"Search Nursing Home",btnName:"Add New Nursing Home",menuName:"Nursing Homes",role:"nursing_home"},SalesAgents:{placeholder:"Search Sales Agents",btnName:"Add New Sales Agent",menuName:"Sales Agents",role:"sales_agent"},Offices:{placeholder:"Search Office",btnName:"Add New Office",menuName:"Offices",role:"office"},SupportAgents:{placeholder:"Search Support Agents",btnName:"Add New Support Agents",menuName:"Support Agents",role:"supports_agent"},EndUsers:{placeholder:"Search End User",btnName:"Add New End User",menuName:"End Users",role:"end_user"},MonitoringStations:{placeholder:"Search Monitoring Station",btnName:"Add New Monitoring Company",menuName:"Monitoring Stations",role:"monitoring_station"},Installers:{placeholder:"Search Installers",btnName:"Add New Installer",menuName:"Installers",role:"installer"},Nurse:{placeholder:"Search Nurse",btnName:"Add New Nurse",menuName:"Nurse",role:"nurse"},Elderly:{placeholder:"Search Elderly",btnName:"",menuName:"Elderlies",role:"elderly"}};function Fn(){Be(),Xe(),n.useRef(!1);const[e,a]=n.useState({}),[o,d]=n.useState("Dashboard");n.useContext(At);const[r,c]=n.useState(we.get("mainRole"));n.useState(!1);const[i,t]=n.useState(""),[m,p]=n.useState(""),[h,D]=n.useState("Add New Support Agent"),[M,F]=n.useState(""),[U,q]=n.useState("Time"),[O,y]=n.useState(!1),[S,l]=n.useState(!1),[H,V]=n.useState([]),[ne,J]=n.useState({}),[k,W]=n.useState([]),[Y,T]=n.useState(0),[se,ee]=n.useState("Search Nursing Home"),oe=["Time","Name"],[ae,P]=n.useState(!1),[g,z]=n.useState({}),[j,b]=n.useState([]),v=()=>{y(!0)},E=$n(i);n.useEffect(()=>{E&&W(E)},[E,i]);const[u,w]=n.useState(we.get("user")),L=n.useCallback(()=>{d("Users"),W(E);let $=r||u.role;const B={nursing_home:{menus:[{text:"Nurse"},{text:"Elderly"}],activeTab:"Nurse"},distributor:{menus:[{text:"Offices"},{text:"Sales Agents"}],activeTab:"Offices"},office:{menus:[{text:"Sales Agents"},{text:"Installers"}],activeTab:"Sales Agents"},sales_agent:{menus:[{text:"End Users"},{text:"Nursing Homes"},{text:"Monitoring Stations"},{text:"Installers"},{text:"Support Agents"}],activeTab:"End Users"},monitoring_station:{menus:[{text:"Elderly"},{text:"Installers"},{text:"Support Agents"}],activeTab:"Elderly"},nurse:{menus:[{text:"Elderly"}],activeTab:"Elderly"},installer:{menus:[{text:"End Users"}],activeTab:"End Users"}};if(B[$]){const{menus:te,activeTab:re}=B[$];V(te),t(re)}},[r]),_=n.useCallback(()=>{!g||!g.role||i==""||(P(!0),console.log(i),["monitoring_station","installer"].includes(r)&&i==="End Users"?(delete g.role,It(g).then($=>{b($.data),T($.total)}).catch($=>{console.error("Error fetching users:",$)}).finally(()=>{P(!1)})):["nursing_home","monitoring_station"].includes(r)&&i==="Elderly"?(delete g.role,Qt(g).then($=>{b($.data),T($.total)}).catch($=>{console.log($)}).finally(()=>{P(!1)})):Ot(g).then($=>{b($.data),T($.total)}).catch($=>{$.code==="ECONNABORTED"?console.error("Request timed out"):console.error("Error fetching users:",$)}).finally(()=>{P(!1)}))},[g,e]),G=n.useCallback(()=>{const $=i.replace(/\s/g,""),B=jn[$];if(B){const{placeholder:te,btnName:re,menuName:A,role:I}=B;ee(te),D(re),p(A),z({...g,role:I}),a({...e,page:1}),J({nursingHomeId:u.id})}else console.warn(`Role "${$}" not found in roleConfig.`)},[i]);n.useEffect(()=>{L()},[L]),n.useEffect(()=>{G()},[G]),n.useEffect(()=>{_()},[_]),n.useEffect(()=>{U&&g.orderType!==U&&(delete g.sort_by_created_at,delete g.sort_by_name,z({...g,...U==="Name"?{sort_by_name:-1}:{sort_by_created_at:-1}}),a({...e,page:1}))},[U]);const Z=()=>{console.log("handleblure ======================>"),z({...g,search:M.trim()}),a({...e,page:1})};return s.jsxs("div",{className:"",children:[s.jsx("div",{className:"py-[20px] flex",children:s.jsx(Ft,{menus:H,activeTab:i,setActiveTab:t})}),s.jsx("div",{className:"",children:["Support Agents","Nursing Homes","Sales Agents","Offices","End Users","Monitoring Stations","Installers","Nurse","Elderly"].includes(i)&&s.jsxs("div",{children:[s.jsxs("div",{className:" bg-white rounded-2xl overflow-hidden",children:[s.jsxs("div",{className:" px-[22px] py-6 flex items-start flex-col lg:flex-row justify-between gap-2",children:[s.jsx("div",{className:" flex items-center justify-between w-full",children:s.jsx("h2",{className:" text-2xl font-bold text-text-primary",children:m})}),s.jsxs("div",{className:" flex items-center justify-end gap-5 w-full",children:[s.jsx(Rt,{search:M,setSearch:F,handBlurchange:Z,placeholder:se}),s.jsx(Dt,{query:g,setQuery:z,selected:U,setSelected:q,data:oe}),["Elderly","End Users","Sales Agents"].includes(i)&&["installer","monitoring_station","office","sales_agent","nursing_home"].includes(r)?null:s.jsxs(Ut,{onClick:()=>v(),className:" hidden lg:flex min-w-[80px]",children:[s.jsx(Bt,{})," ",h]})]})]}),s.jsx("div",{className:" grid grid-cols-1",children:s.jsx(Tt.Provider,{value:{role:g.role,getlist:_,query:g,total:Y,page:e,setPage:a},children:s.jsx(Pt,{loading:ae,tableData:j,columns:k,getlist:_})})})]}),s.jsx(Lt,{item:{},changeParams:ne,getlist:_,role:g.role,modalOPen:O,setModalOpen:y,parentID:u._id})]})}),s.jsx(Sn,{modalOPen:S,setModalOpen:l})]})}export{Fn as default};
