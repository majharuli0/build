import{r as o,$ as f,j as t}from"./index-d_7D8AC7.js";import E from"./TimelineBar-BeJO6g5B.js";import{n as _}from"./ElderlyProfile-X6c9ohwi.js";import{f as y}from"./index-CW9g4gi2.js";import{T as C}from"./Template-Bpa_YZxf.js";import{e as l}from"./helper-C8eLjNk9.js";import{C as g}from"./UseCustomContext-BYJWDH5N.js";import"./index-BJ-cyjPg.js";import"./elderly-DGDfldGv.js";import"./HomeOutlined-D2iAwmem.js";import"./PullRequestOutlined-DvJqbn2p.js";import"./index-DPl3-Ffu.js";import"./PlusOutlined-0pGP15jW.js";import"./WeeklyMonthlyPicker-BKsW_N_U.js";import"./SwapRightOutlined-Bx2j7N39.js";import"./weekOfYear-eIduJwO4.js";import"./index-BZEQOSrH.js";import"./weekday-BN-8Rh09.js";function J(){const{sleepEventsType:s,sleepEventsColor:m}=o.useContext(f),{sleepData:e,elderlyDetails:i}=o.useContext(g),[c,x]=o.useState([]),d={title:"Sleep Events Summary",pickerTypes:["day","range"],chartType:"multibar_sleep_events",dataType:"time",color:"#FF725E",apisProps:{endpoint:_,query:{uids:i==null?void 0:i.deviceId}}};return o.useEffect(()=>{if(e!=null&&e.alarm_events){console.log("sleepData?.alarm_events =============>",e==null?void 0:e.alarm_events);const r=e==null?void 0:e.alarm_events.reduce((n,u)=>{const a=s[u.event_type],p=n.find(v=>v.event_name===a);return p?p.count+=1:n.push({event_name:a,count:1,color:m[a]}),n},[]);x(r)}},[e]),t.jsx(t.Fragment,{children:t.jsxs(C,{title:"Sleep Events",color:"#FF725E",icon:t.jsx(y,{}),isDataAnalysis:!1,headerClassName:"!text-2xl",summaryProps:d,children:[t.jsx(E,{alarmEvents:e==null?void 0:e.alarm_events,enterBedTime:l(e==null?void 0:e.get_bed_idx),getupAfterTime:l(e==null?void 0:e.leave_bed_idx)}),t.jsx("div",{className:"flex flex-wrap gap-4 items-center justify-center ",children:c.map((r,n)=>t.jsx(h,{count:r.count,eventName:r.event_name,color:r.color},n))})]})})}const h=({count:s,eventName:m,color:e})=>t.jsxs("div",{className:"flex p-[4px] pr-4 items-center gap-2 rounded-xl",style:{backgroundColor:e},children:[t.jsx("span",{className:"text-[17px] p-2 py-1 font-bold bg-white rounded-[9px] text-primary",children:s}),t.jsx("span",{className:"text-[15px] font-medium text-white leading-[1.2]",children:m})]});export{J as default};
