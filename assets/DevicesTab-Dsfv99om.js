import{ax as Be,az as Fe,aB as M,r as a,aI as je,at as oe,dc as $t,ce as _t,d7 as mt,fd as It,ar as ut,dA as Ot,dX as Pt,dD as Bt,dN as We,cX as Qe,cY as Tt,cZ as At,b1 as Et,a$ as Mt,b0 as kt,eE as gt,d5 as Ne,ay as Ie,aE as ue,aq as ce,f0 as Dt,fe as zt,ff as Rt,fg as Ht,eR as Lt,dY as Ft,e5 as Wt,eU as qe,aN as ht,f5 as Oe,av as Ke,dP as qt,as as Xt,dZ as Gt,dk as Ut,G as pt,j as t,aQ as fe,fh as Ze,fi as Ve,C as ft,eN as Te,aw as le,fj as et,fk as De,fl as Yt,fm as Jt,fn as Qt,fo as Kt,ac as ge,af as Xe,fp as Re,fa as Zt,fq as Vt,fr as en,fs as tn,ft as Se,ao as He,e as tt,fu as nn,fv as sn,fw as on}from"./index-B3-g7mOM.js";import{C as xt}from"./UseCustomContext-CAXRHvLj.js";import"./helper-CfgxuBHb.js";import{b as rn,d as an,o as ln,L as $e,G as cn,a as pe,I as Ge,R as dn,T as mn,S as bt}from"./oth-DPpwHhbD.js";import{S as un,d as gn,e as hn,g as pn,h as fn,f as nt,I as vt,c as xn,a as bn,b as vn,R as yn}from"./ZoomOutOutlined-lKBwbIvK.js";import{b as jn,a as wn,c as Cn}from"./index--B9iBwFt.js";import{G as Sn}from"./index-BA0kz_36.js";import{S as Ae}from"./index-bN8cb70X.js";import{T as st}from"./index-C_ab-uLQ.js";import{c as Nn,d as $n}from"./elderly-w8jB2O9L.js";import{U as _n}from"./index-CG8tbylw.js";import"./index-DsY6TqqE.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new e.Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="afe385d3-f9fc-41f7-9bc8-54783371614e",e._sentryDebugIdIdentifier="sentry-dbid-afe385d3-f9fc-41f7-9bc8-54783371614e")}catch{}const _e=(e,n,s,o,r)=>({background:e,border:`${M(o.lineWidth)} ${o.lineType} ${n}`,[`${r}-icon`]:{color:s}}),In=e=>{const{componentCls:n,motionDurationSlow:s,marginXS:o,marginSM:r,fontSize:c,fontSizeLG:x,lineHeight:l,borderRadiusLG:b,motionEaseInOutCirc:g,withDescriptionIconSize:i,colorText:d,colorTextHeading:h,withDescriptionPadding:v,defaultPadding:m}=e;return{[n]:Object.assign(Object.assign({},Fe(e)),{position:"relative",display:"flex",alignItems:"center",padding:m,wordWrap:"break-word",borderRadius:b,[`&${n}-rtl`]:{direction:"rtl"},[`${n}-content`]:{flex:1,minWidth:0},[`${n}-icon`]:{marginInlineEnd:o,lineHeight:0},"&-description":{display:"none",fontSize:c,lineHeight:l},"&-message":{color:h},[`&${n}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${s} ${g}, opacity ${s} ${g},
        padding-top ${s} ${g}, padding-bottom ${s} ${g},
        margin-bottom ${s} ${g}`},[`&${n}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${n}-with-description`]:{alignItems:"flex-start",padding:v,[`${n}-icon`]:{marginInlineEnd:r,fontSize:i,lineHeight:0},[`${n}-message`]:{display:"block",marginBottom:o,color:h,fontSize:x},[`${n}-description`]:{display:"block",color:d}},[`${n}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},On=e=>{const{componentCls:n,colorSuccess:s,colorSuccessBorder:o,colorSuccessBg:r,colorWarning:c,colorWarningBorder:x,colorWarningBg:l,colorError:b,colorErrorBorder:g,colorErrorBg:i,colorInfo:d,colorInfoBorder:h,colorInfoBg:v}=e;return{[n]:{"&-success":_e(r,o,s,e,n),"&-info":_e(v,h,d,e,n),"&-warning":_e(l,x,c,e,n),"&-error":Object.assign(Object.assign({},_e(i,g,b,e,n)),{[`${n}-description > pre`]:{margin:0,padding:0}})}}},Pn=e=>{const{componentCls:n,iconCls:s,motionDurationMid:o,marginXS:r,fontSizeIcon:c,colorIcon:x,colorIconHover:l}=e;return{[n]:{"&-action":{marginInlineStart:r},[`${n}-close-icon`]:{marginInlineStart:r,padding:0,overflow:"hidden",fontSize:c,lineHeight:M(c),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${s}-close`]:{color:x,transition:`color ${o}`,"&:hover":{color:l}}},"&-close-text":{color:x,transition:`color ${o}`,"&:hover":{color:l}}}}},Bn=e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}),Tn=Be("Alert",e=>[In(e),On(e),Pn(e)],Bn);var ot=function(e,n){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(s[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(s[o[r]]=e[o[r]]);return s};const An={success:Ot,info:Pt,error:Bt,warning:We},En=e=>{const{icon:n,prefixCls:s,type:o}=e,r=An[o]||null;return n?It(n,a.createElement("span",{className:`${s}-icon`},n),()=>({className:oe(`${s}-icon`,{[n.props.className]:n.props.className})})):a.createElement(r,{className:`${s}-icon`})},Mn=e=>{const{isClosable:n,prefixCls:s,closeIcon:o,handleClose:r,ariaProps:c}=e,x=o===!0||o===void 0?a.createElement(ut,null):o;return n?a.createElement("button",Object.assign({type:"button",onClick:r,className:`${s}-close-icon`,tabIndex:0},c),x):null},yt=a.forwardRef((e,n)=>{const{description:s,prefixCls:o,message:r,banner:c,className:x,rootClassName:l,style:b,onMouseEnter:g,onMouseLeave:i,onClick:d,afterClose:h,showIcon:v,closable:m,closeText:u,closeIcon:y,action:E,id:A}=e,L=ot(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[W,C]=a.useState(!1),P=a.useRef(null);a.useImperativeHandle(n,()=>({nativeElement:P.current}));const{getPrefixCls:O,direction:G,alert:N}=a.useContext(je),B=O("alert",o),[Y,J,D]=Tn(B),H=R=>{var F;C(!0),(F=e.onClose)===null||F===void 0||F.call(e,R)},S=a.useMemo(()=>e.type!==void 0?e.type:c?"warning":"info",[e.type,c]),_=a.useMemo(()=>typeof m=="object"&&m.closeIcon||u?!0:typeof m=="boolean"?m:y!==!1&&y!==null&&y!==void 0?!0:!!(N!=null&&N.closable),[u,y,m,N==null?void 0:N.closable]),q=c&&v===void 0?!0:v,se=oe(B,`${B}-${S}`,{[`${B}-with-description`]:!!s,[`${B}-no-icon`]:!q,[`${B}-banner`]:!!c,[`${B}-rtl`]:G==="rtl"},N==null?void 0:N.className,x,l,D,J),U=$t(L,{aria:!0,data:!0}),K=a.useMemo(()=>{var R,F;return typeof m=="object"&&m.closeIcon?m.closeIcon:u||(y!==void 0?y:typeof(N==null?void 0:N.closable)=="object"&&(!((R=N==null?void 0:N.closable)===null||R===void 0)&&R.closeIcon)?(F=N==null?void 0:N.closable)===null||F===void 0?void 0:F.closeIcon:N==null?void 0:N.closeIcon)},[y,m,u,N==null?void 0:N.closeIcon]),Z=a.useMemo(()=>{const R=m??(N==null?void 0:N.closable);return typeof R=="object"?ot(R,["closeIcon"]):{}},[m,N==null?void 0:N.closable]);return Y(a.createElement(_t,{visible:!W,motionName:`${B}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:R=>({maxHeight:R.offsetHeight}),onLeaveEnd:h},(R,F)=>{let{className:xe,style:de}=R;return a.createElement("div",Object.assign({id:A,ref:mt(P,F),"data-show":!W,className:oe(se,xe),style:Object.assign(Object.assign(Object.assign({},N==null?void 0:N.style),b),de),onMouseEnter:g,onMouseLeave:i,onClick:d,role:"alert"},U),q?a.createElement(En,{description:s,icon:e.icon,prefixCls:B,type:S}):null,a.createElement("div",{className:`${B}-content`},r?a.createElement("div",{className:`${B}-message`},r):null,s?a.createElement("div",{className:`${B}-description`},s):null),E?a.createElement("div",{className:`${B}-action`},E):null,a.createElement(Mn,{isClosable:_,prefixCls:B,closeIcon:K,handleClose:H,ariaProps:Z}))}))});function kn(e,n,s){return n=Qe(n),Tt(e,At()?Reflect.construct(n,s||[],Qe(e).constructor):n.apply(e,s))}let Dn=function(e){function n(){var s;return kt(this,n),s=kn(this,n,arguments),s.state={error:void 0,info:{componentStack:""}},s}return Et(n,e),Mt(n,[{key:"componentDidCatch",value:function(o,r){this.setState({error:o,info:r})}},{key:"render",value:function(){const{message:o,description:r,id:c,children:x}=this.props,{error:l,info:b}=this.state,g=(b==null?void 0:b.componentStack)||null,i=typeof o>"u"?(l||"").toString():o,d=typeof r>"u"?g:r;return l?a.createElement(yt,{id:c,type:"error",message:i,description:a.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},d)}):x}}])}(a.Component);const Ee=yt;Ee.ErrorBoundary=Dn;const rt=a.forwardRef((e,n)=>{const{open:s,draggingDelete:o}=e,r=a.useRef(null),c=s&&!o,x=a.useRef(null);function l(){Ne.cancel(x.current),x.current=null}function b(){x.current=Ne(()=>{var g;(g=r.current)===null||g===void 0||g.forceAlign(),x.current=null})}return a.useEffect(()=>(c?b():l(),l),[c,e.title]),a.createElement(gt,Object.assign({ref:mt(r,n)},e,{open:c}))}),zn=e=>{const{componentCls:n,antCls:s,controlSize:o,dotSize:r,marginFull:c,marginPart:x,colorFillContentHover:l,handleColorDisabled:b,calc:g,handleSize:i,handleSizeHover:d,handleActiveColor:h,handleActiveOutlineColor:v,handleLineWidth:m,handleLineWidthHover:u,motionDurationMid:y}=e;return{[n]:Object.assign(Object.assign({},Fe(e)),{position:"relative",height:o,margin:`${M(x)} ${M(c)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${M(c)} ${M(x)}`},[`${n}-rail`]:{position:"absolute",backgroundColor:e.railBg,borderRadius:e.borderRadiusXS,transition:`background-color ${y}`},[`${n}-track,${n}-tracks`]:{position:"absolute",transition:`background-color ${y}`},[`${n}-track`]:{backgroundColor:e.trackBg,borderRadius:e.borderRadiusXS},[`${n}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${n}-rail`]:{backgroundColor:e.railHoverBg},[`${n}-track`]:{backgroundColor:e.trackHoverBg},[`${n}-dot`]:{borderColor:l},[`${n}-handle::after`]:{boxShadow:`0 0 0 ${M(m)} ${e.colorPrimaryBorderHover}`},[`${n}-dot-active`]:{borderColor:e.dotActiveBorderColor}},[`${n}-handle`]:{position:"absolute",width:i,height:i,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:g(m).mul(-1).equal(),insetBlockStart:g(m).mul(-1).equal(),width:g(i).add(g(m).mul(2)).equal(),height:g(i).add(g(m).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:i,height:i,backgroundColor:e.colorBgElevated,boxShadow:`0 0 0 ${M(m)} ${e.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${y},
            inset-block-start ${y},
            width ${y},
            height ${y},
            box-shadow ${y},
            outline ${y}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:g(d).sub(i).div(2).add(u).mul(-1).equal(),insetBlockStart:g(d).sub(i).div(2).add(u).mul(-1).equal(),width:g(d).add(g(u).mul(2)).equal(),height:g(d).add(g(u).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${M(u)} ${h}`,outline:`6px solid ${v}`,width:d,height:d,insetInlineStart:e.calc(i).sub(d).div(2).equal(),insetBlockStart:e.calc(i).sub(d).div(2).equal()}}},[`&-lock ${n}-handle`]:{"&::before, &::after":{transition:"none"}},[`${n}-mark`]:{position:"absolute",fontSize:e.fontSize},[`${n}-mark-text`]:{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}},[`${n}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${n}-dot`]:{position:"absolute",width:r,height:r,backgroundColor:e.colorBgElevated,border:`${M(m)} solid ${e.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:e.dotActiveBorderColor}},[`&${n}-disabled`]:{cursor:"not-allowed",[`${n}-rail`]:{backgroundColor:`${e.railBg} !important`},[`${n}-track`]:{backgroundColor:`${e.trackBgDisabled} !important`},[`
          ${n}-dot
        `]:{backgroundColor:e.colorBgElevated,borderColor:e.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${n}-handle::after`]:{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:i,height:i,boxShadow:`0 0 0 ${M(m)} ${b}`,insetInlineStart:0,insetBlockStart:0},[`
          ${n}-mark-text,
          ${n}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${s}-tooltip-inner`]:{minWidth:"unset"}})}},jt=(e,n)=>{const{componentCls:s,railSize:o,handleSize:r,dotSize:c,marginFull:x,calc:l}=e,b=n?"paddingBlock":"paddingInline",g=n?"width":"height",i=n?"height":"width",d=n?"insetBlockStart":"insetInlineStart",h=n?"top":"insetInlineStart",v=l(o).mul(3).sub(r).div(2).equal(),m=l(r).sub(o).div(2).equal(),u=n?{borderWidth:`${M(m)} 0`,transform:`translateY(${M(l(m).mul(-1).equal())})`}:{borderWidth:`0 ${M(m)}`,transform:`translateX(${M(e.calc(m).mul(-1).equal())})`};return{[b]:o,[i]:l(o).mul(3).equal(),[`${s}-rail`]:{[g]:"100%",[i]:o},[`${s}-track,${s}-tracks`]:{[i]:o},[`${s}-track-draggable`]:Object.assign({},u),[`${s}-handle`]:{[d]:v},[`${s}-mark`]:{insetInlineStart:0,top:0,[h]:l(o).mul(3).add(n?0:x).equal(),[g]:"100%"},[`${s}-step`]:{insetInlineStart:0,top:0,[h]:o,[g]:"100%",[i]:o},[`${s}-dot`]:{position:"absolute",[d]:l(o).sub(c).div(2).equal()}}},Rn=e=>{const{componentCls:n,marginPartWithMark:s}=e;return{[`${n}-horizontal`]:Object.assign(Object.assign({},jt(e,!0)),{[`&${n}-with-marks`]:{marginBottom:s}})}},Hn=e=>{const{componentCls:n}=e;return{[`${n}-vertical`]:Object.assign(Object.assign({},jt(e,!1)),{height:"100%"})}},Ln=e=>{const s=e.controlHeightLG/4,o=e.controlHeightSM/2,r=e.lineWidth+1,c=e.lineWidth+1*1.5,x=e.colorPrimary,l=new ue(x).setAlpha(.2).toRgbString();return{controlSize:s,railSize:4,handleSize:s,handleSizeHover:o,dotSize:8,handleLineWidth:r,handleLineWidthHover:c,railBg:e.colorFillTertiary,railHoverBg:e.colorFillSecondary,trackBg:e.colorPrimaryBorder,trackHoverBg:e.colorPrimaryBorderHover,handleColor:e.colorPrimaryBorder,handleActiveColor:x,handleActiveOutlineColor:l,handleColorDisabled:new ue(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexShortString(),dotBorderColor:e.colorBorderSecondary,dotActiveBorderColor:e.colorPrimaryBorder,trackBgDisabled:e.colorBgContainerDisabled}},Fn=Be("Slider",e=>{const n=Ie(e,{marginPart:e.calc(e.controlHeight).sub(e.controlSize).div(2).equal(),marginFull:e.calc(e.controlSize).div(2).equal(),marginPartWithMark:e.calc(e.controlHeightLG).sub(e.controlSize).equal()});return[zn(n),Rn(n),Hn(n)]},Ln),Wn=a.createContext({});function ze(){const[e,n]=a.useState(!1),s=a.useRef(),o=()=>{Ne.cancel(s.current)},r=c=>{o(),c?n(c):s.current=Ne(()=>{n(c)})};return a.useEffect(()=>o,[]),[e,r]}var qn=function(e,n){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(s[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(s[o[r]]=e[o[r]]);return s};function Xn(e,n){return e||e===null?e:n||n===null?n:s=>typeof s=="number"?s.toString():""}const ye=ce.forwardRef((e,n)=>{const{prefixCls:s,range:o,className:r,rootClassName:c,style:x,disabled:l,tooltipPrefixCls:b,tipFormatter:g,tooltipVisible:i,getTooltipPopupContainer:d,tooltipPlacement:h,tooltip:v={},onChangeComplete:m}=e,u=qn(e,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete"]),{vertical:y}=e,{direction:E,slider:A,getPrefixCls:L,getPopupContainer:W}=ce.useContext(je),C=ce.useContext(Dt),P=l??C,{handleRender:O,direction:G}=ce.useContext(Wn),B=(G||E)==="rtl",[Y,J]=ze(),[D,H]=ze(),S=Object.assign({},v),{open:_,placement:q,getPopupContainer:se,prefixCls:U,formatter:K}=S,Z=_??i,R=(Y||D)&&Z!==!1,F=Xn(K,g),[xe,de]=ze(),we=X=>{m==null||m(X),de(!1)},re=(X,ne)=>X||(ne?B?"left":"right":"top"),f=L("slider",s),[w,V,ee]=Fn(f),te=oe(r,A==null?void 0:A.className,c,{[`${f}-rtl`]:B,[`${f}-lock`]:xe},V,ee);B&&!u.vertical&&(u.reverse=!u.reverse),ce.useEffect(()=>{const X=()=>{Ne(()=>{H(!1)},1)};return document.addEventListener("mouseup",X),()=>{document.removeEventListener("mouseup",X)}},[]);const ae=o&&!Z,ie=O||((X,ne)=>{const{index:p}=ne,j=X.props;function $(I,k,me){var he,Me,Je,ke;me&&((Me=(he=u)[I])===null||Me===void 0||Me.call(he,k)),(ke=(Je=j)[I])===null||ke===void 0||ke.call(Je,k)}const T=Object.assign(Object.assign({},j),{onMouseEnter:I=>{J(!0),$("onMouseEnter",I)},onMouseLeave:I=>{J(!1),$("onMouseLeave",I)},onMouseDown:I=>{H(!0),de(!0),$("onMouseDown",I)},onFocus:I=>{var k;H(!0),(k=u.onFocus)===null||k===void 0||k.call(u,I),$("onFocus",I,!0)},onBlur:I=>{var k;H(!1),(k=u.onBlur)===null||k===void 0||k.call(u,I),$("onBlur",I,!0)}}),z=ce.cloneElement(X,T),Q=(!!Z||R)&&F!==null;return ae?z:ce.createElement(rt,Object.assign({},S,{prefixCls:L("tooltip",U??b),title:F?F(ne.value):"",open:Q,placement:re(q??h,y),key:p,overlayClassName:`${f}-tooltip`,getPopupContainer:se||d||W}),z)}),be=ae?(X,ne)=>{const p=ce.cloneElement(X,{style:Object.assign(Object.assign({},X.props.style),{visibility:"hidden"})});return ce.createElement(rt,Object.assign({},S,{prefixCls:L("tooltip",U??b),title:F?F(ne.value):"",open:F!==null&&R,placement:re(q??h,y),key:"tooltip",overlayClassName:`${f}-tooltip`,getPopupContainer:se||d||W,draggingDelete:ne.draggingDelete}),p)}:void 0,ve=Object.assign(Object.assign({},A==null?void 0:A.style),x);return w(ce.createElement(un,Object.assign({},u,{step:u.step,range:o,className:te,style:ve,disabled:P,ref:n,prefixCls:f,handleRender:ie,activeHandleRender:be,onChangeComplete:we})))}),Le=e=>({position:e||"absolute",inset:0}),Gn=e=>{const{iconCls:n,motionDurationSlow:s,paddingXXS:o,marginXXS:r,prefixCls:c,colorTextLightSolid:x}=e;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:x,background:new ue("#000").setAlpha(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${s}`,[`.${c}-mask-info`]:Object.assign(Object.assign({},Lt),{padding:`0 ${M(o)}`,[n]:{marginInlineEnd:r,svg:{verticalAlign:"baseline"}}})}},Un=e=>{const{previewCls:n,modalMaskBg:s,paddingSM:o,marginXL:r,margin:c,paddingLG:x,previewOperationColorDisabled:l,previewOperationHoverColor:b,motionDurationSlow:g,iconCls:i,colorTextLightSolid:d}=e,h=new ue(s).setAlpha(.1),v=h.clone().setAlpha(.2);return{[`${n}-footer`]:{position:"fixed",bottom:r,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:e.previewOperationColor,transform:"translateX(-50%)"},[`${n}-progress`]:{marginBottom:c},[`${n}-close`]:{position:"fixed",top:r,right:{_skip_check_:!0,value:r},display:"flex",color:d,backgroundColor:h.toRgbString(),borderRadius:"50%",padding:o,outline:0,border:0,cursor:"pointer",transition:`all ${g}`,"&:hover":{backgroundColor:v.toRgbString()},[`& > ${i}`]:{fontSize:e.previewOperationSize}},[`${n}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${M(x)}`,backgroundColor:h.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:o,padding:o,cursor:"pointer",transition:`all ${g}`,userSelect:"none",[`&:not(${n}-operations-operation-disabled):hover > ${i}`]:{color:b},"&-disabled":{color:l,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${i}`]:{fontSize:e.previewOperationSize}}}}},Yn=e=>{const{modalMaskBg:n,iconCls:s,previewOperationColorDisabled:o,previewCls:r,zIndexPopup:c,motionDurationSlow:x}=e,l=new ue(n).setAlpha(.1),b=l.clone().setAlpha(.2);return{[`${r}-switch-left, ${r}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:e.calc(c).add(1).equal(),display:"flex",alignItems:"center",justifyContent:"center",width:e.imagePreviewSwitchSize,height:e.imagePreviewSwitchSize,marginTop:e.calc(e.imagePreviewSwitchSize).mul(-1).div(2).equal(),color:e.previewOperationColor,background:l.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${x}`,userSelect:"none","&:hover":{background:b.toRgbString()},"&-disabled":{"&, &:hover":{color:o,background:"transparent",cursor:"not-allowed",[`> ${s}`]:{cursor:"not-allowed"}}},[`> ${s}`]:{fontSize:e.previewOperationSize}},[`${r}-switch-left`]:{insetInlineStart:e.marginSM},[`${r}-switch-right`]:{insetInlineEnd:e.marginSM}}},Jn=e=>{const{motionEaseOut:n,previewCls:s,motionDurationSlow:o,componentCls:r}=e;return[{[`${r}-preview-root`]:{[s]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${s}-body`]:Object.assign(Object.assign({},Le()),{overflow:"hidden"}),[`${s}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${o} ${n} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},Le()),{transition:`transform ${o} ${n} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${s}-moving`]:{[`${s}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${r}-preview-root`]:{[`${s}-wrap`]:{zIndex:e.zIndexPopup}}},{[`${r}-preview-operations-wrapper`]:{position:"fixed",zIndex:e.calc(e.zIndexPopup).add(1).equal()},"&":[Un(e),Yn(e)]}]},Qn=e=>{const{componentCls:n}=e;return{[n]:{position:"relative",display:"inline-block",[`${n}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${n}-img-placeholder`]:{backgroundColor:e.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${n}-mask`]:Object.assign({},Gn(e)),[`${n}-mask:hover`]:{opacity:1},[`${n}-placeholder`]:Object.assign({},Le())}}},Kn=e=>{const{previewCls:n}=e;return{[`${n}-root`]:Rt(e,"zoom"),"&":Ht(e,!0)}},Zn=e=>({zIndexPopup:e.zIndexPopupBase+80,previewOperationColor:new ue(e.colorTextLightSolid).setAlpha(.65).toRgbString(),previewOperationHoverColor:new ue(e.colorTextLightSolid).setAlpha(.85).toRgbString(),previewOperationColorDisabled:new ue(e.colorTextLightSolid).setAlpha(.25).toRgbString(),previewOperationSize:e.fontSizeIcon*1.5}),wt=Be("Image",e=>{const n=`${e.componentCls}-preview`,s=Ie(e,{previewCls:n,modalMaskBg:new ue("#000").setAlpha(.45).toRgbString(),imagePreviewSwitchSize:e.controlHeightLG});return[Qn(s),Jn(s),zt(Ie(s,{componentCls:n})),Kn(s)]},Zn);var Vn=function(e,n){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(s[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(s[o[r]]=e[o[r]]);return s};const Ct={rotateLeft:a.createElement(gn,null),rotateRight:a.createElement(hn,null),zoomIn:a.createElement(pn,null),zoomOut:a.createElement(fn,null),close:a.createElement(ut,null),left:a.createElement(Ft,null),right:a.createElement(Wt,null),flipX:a.createElement(nt,null),flipY:a.createElement(nt,{rotate:90})},es=e=>{var{previewPrefixCls:n,preview:s}=e,o=Vn(e,["previewPrefixCls","preview"]);const{getPrefixCls:r}=a.useContext(je),c=r("image",n),x=`${c}-preview`,l=r(),b=qe(c),[g,i,d]=wt(c,b),[h]=ht("ImagePreview",typeof s=="object"?s.zIndex:void 0),v=a.useMemo(()=>{var m;if(s===!1)return s;const u=typeof s=="object"?s:{},y=oe(i,d,b,(m=u.rootClassName)!==null&&m!==void 0?m:"");return Object.assign(Object.assign({},u),{transitionName:Oe(l,"zoom",u.transitionName),maskTransitionName:Oe(l,"fade",u.maskTransitionName),rootClassName:y,zIndex:h})},[s]);return g(a.createElement(vt.PreviewGroup,Object.assign({preview:v,previewPrefixCls:x,icons:Ct},o)))};var at=function(e,n){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(s[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(s[o[r]]=e[o[r]]);return s};const Ce=e=>{var n;const{prefixCls:s,preview:o,className:r,rootClassName:c,style:x}=e,l=at(e,["prefixCls","preview","className","rootClassName","style"]),{getPrefixCls:b,locale:g=Ke,getPopupContainer:i,image:d}=a.useContext(je),h=b("image",s),v=b(),m=g.Image||Ke.Image,u=qe(h),[y,E,A]=wt(h,u),L=oe(c,E,A,u),W=oe(r,E,d==null?void 0:d.className),[C]=ht("ImagePreview",typeof o=="object"?o.zIndex:void 0),P=a.useMemo(()=>{var G;if(o===!1)return o;const N=typeof o=="object"?o:{},{getContainer:B,closeIcon:Y}=N,J=at(N,["getContainer","closeIcon"]);return Object.assign(Object.assign({mask:a.createElement("div",{className:`${h}-mask-info`},a.createElement(qt,null),m==null?void 0:m.preview),icons:Ct},J),{getContainer:B??i,transitionName:Oe(v,"zoom",N.transitionName),maskTransitionName:Oe(v,"fade",N.maskTransitionName),zIndex:C,closeIcon:Y??((G=d==null?void 0:d.preview)===null||G===void 0?void 0:G.closeIcon)})},[o,m,(n=d==null?void 0:d.preview)===null||n===void 0?void 0:n.closeIcon]),O=Object.assign(Object.assign({},d==null?void 0:d.style),x);return y(a.createElement(vt,Object.assign({prefixCls:h,preview:P,rootClassName:L,className:W,style:O},l)))};Ce.PreviewGroup=es;const ts=e=>{const{componentCls:n,calc:s}=e;return{[n]:Object.assign(Object.assign({},Fe(e)),{margin:0,padding:0,listStyle:"none",[`${n}-item`]:{position:"relative",margin:0,paddingBottom:e.itemPaddingBottom,fontSize:e.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:e.itemHeadSize,insetInlineStart:s(s(e.itemHeadSize).sub(e.tailWidth)).div(2).equal(),height:`calc(100% - ${M(e.itemHeadSize)})`,borderInlineStart:`${M(e.tailWidth)} ${e.lineType} ${e.tailColor}`},"&-pending":{[`${n}-item-head`]:{fontSize:e.fontSizeSM,backgroundColor:"transparent"},[`${n}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:e.itemHeadSize,height:e.itemHeadSize,backgroundColor:e.dotBg,border:`${M(e.dotBorderWidth)} ${e.lineType} transparent`,borderRadius:"50%","&-blue":{color:e.colorPrimary,borderColor:e.colorPrimary},"&-red":{color:e.colorError,borderColor:e.colorError},"&-green":{color:e.colorSuccess,borderColor:e.colorSuccess},"&-gray":{color:e.colorTextDisabled,borderColor:e.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:s(e.itemHeadSize).div(2).equal(),insetInlineStart:s(e.itemHeadSize).div(2).equal(),width:"auto",height:"auto",marginBlockStart:0,paddingBlock:e.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:s(s(e.fontSize).mul(e.lineHeight).sub(e.fontSize)).mul(-1).add(e.lineWidth).equal(),marginInlineStart:s(e.margin).add(e.itemHeadSize).equal(),marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${n}-item-tail`]:{display:"none"},[`> ${n}-item-content`]:{minHeight:s(e.controlHeightLG).mul(1.2).equal()}}},[`&${n}-alternate,
        &${n}-right,
        &${n}-label`]:{[`${n}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:s(e.marginXXS).mul(-1).equal(),"&-custom":{marginInlineStart:s(e.tailWidth).div(2).equal()}},"&-left":{[`${n}-item-content`]:{insetInlineStart:`calc(50% - ${M(e.marginXXS)})`,width:`calc(50% - ${M(e.marginSM)})`,textAlign:"start"}},"&-right":{[`${n}-item-content`]:{width:`calc(50% - ${M(e.marginSM)})`,margin:0,textAlign:"end"}}}},[`&${n}-right`]:{[`${n}-item-right`]:{[`${n}-item-tail,
            ${n}-item-head,
            ${n}-item-head-custom`]:{insetInlineStart:`calc(100% - ${M(s(s(e.itemHeadSize).add(e.tailWidth)).div(2).equal())})`},[`${n}-item-content`]:{width:`calc(100% - ${M(s(e.itemHeadSize).add(e.marginXS).equal())})`}}},[`&${n}-pending
        ${n}-item-last
        ${n}-item-tail`]:{display:"block",height:`calc(100% - ${M(e.margin)})`,borderInlineStart:`${M(e.tailWidth)} dotted ${e.tailColor}`},[`&${n}-reverse
        ${n}-item-last
        ${n}-item-tail`]:{display:"none"},[`&${n}-reverse ${n}-item-pending`]:{[`${n}-item-tail`]:{insetBlockStart:e.margin,display:"block",height:`calc(100% - ${M(e.margin)})`,borderInlineStart:`${M(e.tailWidth)} dotted ${e.tailColor}`},[`${n}-item-content`]:{minHeight:s(e.controlHeightLG).mul(1.2).equal()}},[`&${n}-label`]:{[`${n}-item-label`]:{position:"absolute",insetBlockStart:s(s(e.fontSize).mul(e.lineHeight).sub(e.fontSize)).mul(-1).add(e.tailWidth).equal(),width:`calc(50% - ${M(e.marginSM)})`,textAlign:"end"},[`${n}-item-right`]:{[`${n}-item-label`]:{insetInlineStart:`calc(50% + ${M(e.marginSM)})`,width:`calc(50% - ${M(e.marginSM)})`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${n}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}},ns=e=>({tailColor:e.colorSplit,tailWidth:e.lineWidthBold,dotBorderWidth:e.wireframe?e.lineWidthBold:e.lineWidth*3,dotBg:e.colorBgContainer,itemPaddingBottom:e.padding*1.25}),ss=Be("Timeline",e=>{const n=Ie(e,{itemHeadSize:10,customHeadPaddingVertical:e.paddingXXS,paddingInlineEnd:2});return[ts(n)]},ns);var os=function(e,n){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(s[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(s[o[r]]=e[o[r]]);return s};const St=e=>{var{prefixCls:n,className:s,color:o="blue",dot:r,pending:c=!1,position:x,label:l,children:b}=e,g=os(e,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:i}=a.useContext(je),d=i("timeline",n),h=oe(`${d}-item`,{[`${d}-item-pending`]:c},s),v=/blue|red|green|gray/.test(o||"")?void 0:o,m=oe(`${d}-item-head`,{[`${d}-item-head-custom`]:!!r,[`${d}-item-head-${o}`]:!v});return a.createElement("li",Object.assign({},g,{className:h}),l&&a.createElement("div",{className:`${d}-item-label`},l),a.createElement("div",{className:`${d}-item-tail`}),a.createElement("div",{className:m,style:{borderColor:v,color:v}},r),a.createElement("div",{className:`${d}-item-content`},b))};var lt=function(e,n){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(s[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(s[o[r]]=e[o[r]]);return s};const rs=e=>{var{prefixCls:n,className:s,pending:o=!1,children:r,items:c,rootClassName:x,reverse:l=!1,direction:b,hashId:g,pendingDot:i,mode:d=""}=e,h=lt(e,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const v=(C,P)=>d==="alternate"?C==="right"?`${n}-item-right`:C==="left"?`${n}-item-left`:P%2===0?`${n}-item-left`:`${n}-item-right`:d==="left"?`${n}-item-left`:d==="right"?`${n}-item-right`:C==="right"?`${n}-item-right`:"",m=Xt(c||[]),u=typeof o=="boolean"?null:o;o&&m.push({pending:!!o,dot:i||a.createElement(Gt,null),children:u}),l&&m.reverse();const y=m.length,E=`${n}-item-last`,A=m.filter(C=>!!C).map((C,P)=>{var O;const G=P===y-2?E:"",N=P===y-1?E:"",{className:B}=C,Y=lt(C,["className"]);return a.createElement(St,Object.assign({},Y,{className:oe([B,!l&&o?G:N,v((O=C==null?void 0:C.position)!==null&&O!==void 0?O:"",P)]),key:(C==null?void 0:C.key)||P}))}),L=m.some(C=>!!(C!=null&&C.label)),W=oe(n,{[`${n}-pending`]:!!o,[`${n}-reverse`]:!!l,[`${n}-${d}`]:!!d&&!L,[`${n}-label`]:L,[`${n}-rtl`]:b==="rtl"},s,x,g);return a.createElement("ul",Object.assign({},h,{className:W}),A)};function as(e,n){return e&&Array.isArray(e)?e:Ut(n).map(s=>{var o,r;return Object.assign({children:(r=(o=s==null?void 0:s.props)===null||o===void 0?void 0:o.children)!==null&&r!==void 0?r:""},s.props)})}var ls=function(e,n){var s={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(s[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(s[o[r]]=e[o[r]]);return s};const Nt=e=>{const{getPrefixCls:n,direction:s,timeline:o}=a.useContext(je),{prefixCls:r,children:c,items:x,className:l,style:b}=e,g=ls(e,["prefixCls","children","items","className","style"]),i=n("timeline",r),d=qe(i),[h,v,m]=ss(i,d),u=as(x,c);return h(a.createElement(rs,Object.assign({},g,{className:oe(o==null?void 0:o.className,l,m,d),style:Object.assign(Object.assign({},o==null?void 0:o.style),b),prefixCls:i,direction:s,items:u,hashId:v})))};Nt.Item=St;function is(e){return pt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"},child:[]}]})(e)}const Ue="/assets/1-DbUCLJeK.png",cs={0:{fill:"black",label:"Invalid Area",stroke:"darkred",icon:"oth"},1:{fill:"black",label:"Custom Area",stroke:"black",icon:"oth"},2:{fill:"black",label:"Bed",stroke:"darkblue",icon:"bed"},3:{fill:"black",label:"Interference Area",stroke:"darkorange",icon:"oth"},4:{fill:"black",label:"Door",stroke:"darkgreen",icon:"door"},5:{fill:"black",label:"Monitoring Bed",stroke:"darkpurple",icon:"bed"}},ds=({objectData:e,scale:n,centerX:s,centerY:o,onUpdate:r,isSelected:c,onSelect:x})=>{const l=a.useRef(null),[b,g]=a.useState(null),[i,d]=a.useState(0),[h,v]=a.useState(0),[m,u]=a.useState(0),[y,E]=a.useState(0),A=a.useRef(),L=a.useRef(),{type:W}=e,C=cs[W]||{fill:"lightgray",label:"Unknown",stroke:"gray",icon:"oth"};a.useEffect(()=>{A.current&&(d(A.current.getWidth()),v(A.current.getHeight()));const D=new window.Image;D.src=C.icon==="bed"?rn:C.icon==="door"?an:ln,D.onload=()=>{g(D),u(40),E(40)}},[C.icon]);const P=(D=[0,0])=>{const[H=0,S=0]=D;return[s-H*n,o+S*n]},O=[...P(e.up_left.split(",").map(Number)),...P(e.low_left.split(",").map(Number)),...P(e.low_right.split(",").map(Number)),...P([e.low_right.split(",").map(Number)[0],e.up_right.split(",").map(Number)[1]])],G=D=>{const H=(D[0]+D[2]+D[4]+D[6])/4,S=(D[1]+D[3]+D[5]+D[7])/4;return{x:H,y:S}},{x:N,y:B}=G(O),Y=D=>{c||x(),l.current=e},J=D=>{if(!c||!l.current)return;const H=D.target,S=H.x(),_=H.y(),q=Math.round(-S/n),se=Math.round(_/n);if(q===0&&se===0)return;const U=Z=>{const[R,F]=Z.split(",").map(Number);return`${R+q},${F+se}`},K={...l.current,up_left:U(l.current.up_left),low_left:U(l.current.low_left),up_right:U(l.current.up_right),low_right:U(l.current.low_right)};r(K),H.x(0),H.y(0)};return t.jsx($e,{children:t.jsxs(cn,{draggable:!0,onDragStart:Y,onDragMove:J,onClick:x,onTap:x,children:[t.jsx(pe,{points:O,closed:!0,fill:c?"rgba(0,0,0,0.4)":C.fill,stroke:c?"black":"",strokeWidth:c?2:0}),b&&t.jsx(Ge,{ref:L,image:b,x:N-m/2,y:B-y/2,width:m,height:y}),t.jsx(dn,{x:N-i/2-5,y:B-(h+60)/2-5,width:i+10,height:h+10,fill:"rgba(0, 0, 0, 0.7)",cornerRadius:4}),t.jsx(mn,{ref:A,text:(e==null?void 0:e.label)||C.label,fontSize:14,fontStyle:"bold",fill:"white",x:N-i/2,y:B-(h+60)/2})]})})};function Ye(e){return fe({url:`/elderly/${e.elderly_id}/room-configuration/${e.room_id}`,method:"get",cancelToken:e.cancelToken})}function ms(e){return fe({url:`/devices/${e.elderly_id}/rooms/${e.room_id}/object-areas`,method:"post",data:e.obj,cancelToken:e.cancelToken})}function us(e){return fe({url:`/devices/${e.elderly_id}/rooms/${e.room_id}/object-areas/${e.obj_id}`,method:"patch",data:e.obj,cancelToken:e.cancelToken})}function gs(e){return fe({url:`/devices/${e.elderly_id}/rooms/${e.room_id}/object-areas/${e.obj_id}`,method:"delete",cancelToken:e.cancelToken})}function hs(e){return fe({url:`/elderly/${e.elderly_id}/mount/${e.room_id}`,method:"patch",data:e.data,cancelToken:e.cancelToken})}function ps(e){return fe({url:`/devices/boundaries-area/${e.elderly_id}`,method:"patch",data:e.data,cancelToken:e.cancelToken})}function fs(e){return fe({url:`/elderly/${e.elderly_id}/events`,method:"patch",data:e.data,cancelToken:e.cancelToken})}function xs(e){return fe({url:`/elderly/${e.elderly_id}/events/${e.room_id}/${e.event_id}`,method:"patch",data:e.data,cancelToken:e.cancelToken})}const bs={bedroom:[{type:2,label:"Single Bed",width:18,length:8,icon:t.jsx(et,{})},{type:2,label:"Double Bed",width:18,length:13,icon:t.jsx(et,{})},{type:4,label:"Door",width:10,length:3,icon:t.jsx(De,{})},{type:1,label:"Others",width:10,length:10,icon:null}],livingroom:[{type:5,label:"Sofa",width:10,length:10,icon:t.jsx(Yt,{})},{type:6,label:"Table",width:10,length:10,icon:t.jsx(Jt,{})},{type:4,label:"Door",width:10,length:3,icon:t.jsx(De,{})},{type:1,label:"Others",width:10,length:10,icon:null}],bathroom:[{type:7,label:"Tub",width:15,length:7.5,icon:t.jsx(Qt,{})},{type:8,label:"Toilet",width:6,length:6,icon:t.jsx(Kt,{})},{type:4,label:"Door",width:10,length:3,icon:t.jsx(De,{})},{type:1,label:"Others",width:10,length:10,icon:null}]},it=({template:e,isSelected:n,onSelect:s,children:o})=>t.jsxs("div",{onClick:s,style:{border:n?"2px solid #1B2559":"1px solid #d9d9d9",borderRadius:"8px",padding:"10px",width:"120px",height:"120px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:n?"#f2f3f5":"#fff",boxShadow:n?"0 4px 8px rgba(0, 0, 0, 0.1)":"none",textAlign:"center"},children:[e.icon&&t.jsx("span",{style:{fontSize:"30px",marginBottom:"8px"},children:e.icon}),t.jsx("div",{style:{fontWeight:"500",fontSize:"14px"},children:e.label}),e.label!=="Others"&&t.jsxs("div",{style:{fontSize:"12px",color:"#888",marginTop:"4px"},children:[e.width*10,"cm x ",e.length*10,"cm"]}),o]}),ct=({label:e,icon:n,value:s,onChange:o,max:r})=>t.jsxs("div",{style:{border:"1px solid #d9d9d9",borderRadius:"8px",padding:"15px",width:"180px",height:"150px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[t.jsx("span",{style:{fontSize:"40px",marginBottom:"10px"},children:n}),t.jsx("div",{style:{fontWeight:"500",fontSize:"16px",marginBottom:"10px"},children:e}),t.jsx(ge,{type:"number",value:s,onChange:o,placeholder:`${e} (CM)`,min:1,max:r,style:{width:"100%",textAlign:"center",fontSize:"14px"}})]}),vs=({visible:e,onOk:n,onCancel:s,roomType:o,mountType:r})=>{const[c,x]=a.useState(1),[l,b]=a.useState(null),[g,i]=a.useState("horizontal"),[d,h]=a.useState(""),[v,m]=a.useState(""),u=()=>{c===1&&l&&x(2)},y=()=>{x(1),i("horizontal"),h(""),m("")},E=()=>{if(c===2){let C=l.width,P=l.length;l.label==="Others"||l.label==="Sofa"||l.label==="Table"?(C=parseInt(d)/10||10,P=parseInt(v)/10||10):g==="vertical"&&([C,P]=[P,C]),n({...l,width:C,length:P,orientation:g}),x(1),b(null),i("horizontal"),h(""),m("")}},A=r==="ceiling"?600:60,L=r==="ceiling"?400:40,W=[{label:"Horizontal",width:l==null?void 0:l.width,length:l==null?void 0:l.length,icon:t.jsx(Ze,{})},{label:"Vertical",width:l==null?void 0:l.length,length:l==null?void 0:l.width,icon:t.jsx(Ve,{})}];return t.jsx(ft,{theme:{token:{colorPrimary:"#1B2559"}},children:t.jsx(Te,{visible:e,onOk:c===1?u:E,onCancel:s,okText:c===1?"Next":"Add",footer:null,centered:!0,width:500,bodyStyle:{height:"400px",padding:"20px",paddingTop:"0"},children:t.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"relative"},children:[t.jsxs("h2",{className:"text-xl font-bold pt-4 text-primary",children:["Add Object to ",o.charAt(0).toUpperCase()+o.slice(1)]}),t.jsx("div",{style:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",paddingBottom:"30px"},children:c===1?t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(120px, 1fr))",gap:"10px",padding:"10px 0",maxWidth:"100%",alignItems:"center",justifyContent:"center",justifyItems:"center",alignContent:"center"},children:bs[o].map((C,P)=>t.jsx(it,{template:C,isSelected:l===C,onSelect:()=>b(C)},P))}):l.label==="Others"||l.label==="Sofa"||l.label==="Table"?t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 180px)",gap:"20px"},children:[t.jsx(ct,{label:"Width",icon:t.jsx(Ze,{}),value:d,onChange:C=>h(C.target.value),max:A}),t.jsx(ct,{label:"Height",icon:t.jsx(Ve,{}),value:v,onChange:C=>m(C.target.value),max:L})]}):t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 120px)",gap:"20px"},children:W.map((C,P)=>t.jsx(it,{template:C,isSelected:g===C.label.toLowerCase(),onSelect:()=>i(C.label.toLowerCase())},P))})}),t.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"10px"},children:[c===2&&t.jsx(le,{onClick:y,style:{width:"100px",borderColor:"#d9d9d9"},children:"Back"}),t.jsx(le,{onClick:c===1?u:E,disabled:c===1?!l:l.label==="Others"&&(!d||!v),style:{width:"100px",backgroundColor:"#1B2559",color:"#fff",border:"none"},children:c===1?"Next":"Add"})]})]})})})},{confirm:ys}=Te,js={0:{label:"Invalid Area",icon:"oth"},1:{label:"Custom Area",icon:"oth"},2:{label:"Bed",icon:"bed"},3:{label:"Interference Area",icon:"oth"},4:{label:"Door",icon:"door"},5:{label:"Sofa",icon:"sofa"},6:{label:"Table",icon:"table"},7:{label:"Tub",icon:"tub"},8:{label:"Bathroom",icon:"bathroom"}},dt=({device_id:e,elderly_id:n,mountType:s="ceiling",roomType:o="bedroom"})=>{var be,ve,X,ne;const[r,c]=a.useState(null),[x,l]=a.useState(null),[b,g]=a.useState(!1),[i,d]=a.useState(null),[h,v]=a.useState(!1),[m,u]=a.useState(null),[y,E]=a.useState(!1),[A,L]=a.useState(null),[W,C]=a.useState(!1),[P,O]=a.useState({up_left:[0,0],low_left:[0,0],up_right:[0,0],low_right:[0,0]}),G=700,N=500,B=G/2,Y=s==="ceiling"?N/2:0,J=10,D={x:35*J,y:s==="ceiling"?25*J:0},H=a.useCallback(()=>{Ye({room_id:e,elderly_id:n}).then(p=>{d(p.data)}).catch(p=>console.log(p))},[e,n]);a.useEffect(()=>{H()},[H]);const S=(p=[0,0])=>{if(!Array.isArray(p)||p.length<2)throw new Error("Invalid input: coords must be an array with at least two elements.");const[j=0,$=0]=p;return[D.x-j*J,D.y+$*J]},[_,q]=a.useState(()=>{const p=localStorage.getItem("canvasObjects");return p?JSON.parse(p):(i==null?void 0:i.device_areas)||[]}),se=[...S(P.up_left),...S(P.low_left),...S(P.low_right),...S(P.up_right)],U=p=>{const j=[],[$,T,z,Q]=[Math.min(...p.filter((I,k)=>k%2===0)),Math.max(...p.filter((I,k)=>k%2===0)),Math.min(...p.filter((I,k)=>k%2!==0)),Math.max(...p.filter((I,k)=>k%2!==0))];for(let I=z+10;I<Q;I+=50)j.push([$,I,T,I]);for(let I=$+10;I<T;I+=50)j.push([I,z,I,Q]);return j};a.useEffect(()=>{if(i!=null&&i.device_boundaries&&typeof i.device_boundaries=="object"){const j=Object.fromEntries(Object.entries(i.device_boundaries).reduce(($,[T,z])=>(T==="_id"||$.push([T,z.split(",").map(Number)]),$),[]));O(j)}else console.error("device_boundaries is undefined or not an object"),O({});const p=new window.Image;p.src=Ue,p.onload=()=>{L(p)}},[i]),a.useEffect(()=>{i!=null&&i.device_areas&&q(i.device_areas)},[i]),a.useEffect(()=>{r!==null&&r>=_.length&&(c(null),l(null))},[_.length,r]),a.useEffect(()=>{localStorage.setItem("canvasObjects",JSON.stringify(_))},[_]);const K=(p,j)=>{q($=>{const T=$.map((z,Q)=>Q===p?{...z,...j}:z);return g(JSON.stringify(T[p])!==JSON.stringify(x)),T})},Z=async p=>{r!==null&&r!==p&&b&&(await ie({oktext:"Save Changes",canceltext:"Discard Changes",titles:"Save Changes!",description:"Please save changes after making any new changes or discard changes to proceed."})?await f():R()),c(p),l(_[p]),g(!1)},R=(p=!1)=>{r!==null&&(q(j=>{const $=j[r];if(($==null?void 0:$._id)===m||p)return u(null),j.filter((Q,I)=>I!==r);const z=[...j];return z[r]=x,z}),g(!1),c(null),l(null))},F=()=>{const p=new Set(_.map(j=>parseInt(j.coordKey,10)).filter(j=>!isNaN(j)&&j>=0&&j<=15));for(let j=0;j<=15;j++)if(!p.has(j))return j;return null},xe=p=>{const j=F();if(j===null)return alert("Maximum 16 objects allowed (coordKey 0-15). Delete some objects first."),null;const{type:$,width:T,length:z,label:Q}=p,I=T/2,k=z/2;return{_id:`temp-${Date.now()}`,type:$,width:T,length:z,label:Q,up_left:`${-I},${k}`,up_right:`${I},${k}`,low_left:`${-I},${-k}`,low_right:`${I},${-k}`,coordKey:j.toString()}},de=async()=>{if(m){ie({oktext:"Ok",titles:"Action Required!",description:"To proceed, please remove the existing object or save it first.",canceltext:" "});return}if(b)if(await ie({oktext:"Save Changes",canceltext:"Discard Changes",titles:"Save Changes!",description:"Please save changes after making any new changes or discard changes to proceed."}))try{await f()}catch{return}else R(!0);C(!0)},we=p=>{console.log(p);const j=xe(p);j&&q($=>{const T=[...$,j];return u(j._id),c(T.length-1),l(j),g(!0),T}),C(!1)},re=()=>{C(!1)},f=async()=>{if(ee)try{v(!0),await w(_[r]),l(_[r]),g(!1)}catch{alert("Save failed! Changes not preserved.")}finally{v(!1)}},w=async p=>{const j=p._id.startsWith("temp-"),$={elderly_id:n,room_id:i._id,obj:{coordKey:p.coordKey,type:p.type,uid:i==null?void 0:i.device_no,lowLeft:p.low_left,upLeft:p.up_left,upRight:p.up_right,lowRight:p.low_right,length:p.length,width:p.width}};j?await ms($).then(()=>{H(),u(null)}).catch(T=>{console.error("Error saving changes:",T),H()}):await us({...$,obj_id:p._id}).then(()=>{H()}).catch(T=>{console.error("Error saving changes:",T),H()})},V=async p=>{if(p._id===m){q(j=>j.filter($=>$._id!==m)),u(null),g(!1),c(null),E(!1);return}(r===null||await ie({oktext:"Delete",canceltext:"Cancel"}))&&(E(!0),gs({elderly_id:n,room_id:i._id,obj_id:p._id}).then(()=>{H(),c(null),l(null)}).catch(j=>{console.error("Error deleting object:",j)}).finally(()=>E(!1)))},ee=a.useMemo(()=>i!=null&&i.device_areas?JSON.stringify(_)!==JSON.stringify(i.device_areas):!1,[_,i==null?void 0:i.device_areas]),te=(p,j)=>{if(r===null)return;const $=parseInt(j)/10||0,T=_[r];let z={};if(p==="width"){const Q=T.up_left.split(",").map(Number),I=T.up_right.split(",").map(Number),k=(I[0]+Q[0])/2,me=k-$/2,he=k+$/2;z={width:$,up_left:`${Math.round(me)},${Q[1]}`,up_right:`${Math.round(he)},${I[1]}`,low_left:`${Math.round(me)},${T.low_left.split(",")[1]}`,low_right:`${Math.round(he)},${T.low_right.split(",")[1]}`}}else{const Q=T.up_left.split(",").map(Number),I=T.low_left.split(",").map(Number),k=(Q[1]+I[1])/2,me=k+$/2,he=k-$/2;z={length:$,up_left:`${Q[0]},${Math.round(me)}`,up_right:`${T.up_right.split(",")[0]},${Math.round(me)}`,low_left:`${I[0]},${Math.round(he)}`,low_right:`${T.low_right.split(",")[0]},${Math.round(he)}`}}K(r,z)},ae=p=>{if(r===null)return;const j=_[r],$=p==="left"?1:p==="right"?-1:0,T=p==="up"?-1:p==="down"?1:0,z=I=>{const[k,me]=I.split(",").map(Number);return`${k+$},${me+T}`},Q={up_left:z(j.up_left),up_right:z(j.up_right),low_left:z(j.low_left),low_right:z(j.low_right)};K(r,Q)},ie=({oktext:p="Confirm",canceltext:j="Cancel",titles:$="Delete Object!",description:T="Are you sure you want to delete this item?"})=>new Promise(z=>{ys({title:$,icon:t.jsx(We,{}),content:T,className:"mini-modal",centered:!0,okText:p,cancelText:j,okButtonProps:{style:{backgroundColor:p==="Delete"?"#ff4d4f":"#1B2559",color:"white"}},cancelButtonProps:{style:{backgroundColor:j==="Discard Changes"?"#ff4d4f":"#FAFAFA",border:"none",color:j==="Discard Changes"?"#fff":"#1B2559"}},onOk(){z(!0)},onCancel(){z(!1)}})});return t.jsx(Xe,{tip:"Loading Objects...",spinning:!(i!=null&&i.device_areas)&&!(i!=null&&i.device_boundaries),children:t.jsxs("div",{className:"flex flex-col w-full h-full",children:[t.jsx("div",{className:"border-b border-b-slate-200 p-2 py-4",children:t.jsx(ft,{theme:{token:{colorPrimary:"#1B2559"}},children:t.jsxs("div",{className:"w-full flex items-center justify-between",children:[t.jsx("div",{children:t.jsx(Ee,{message:s==="ceiling"?"Click or drag to edit the area!":"Click or drag to draw the area, click to edit the area, double-click to delete the area",type:"info",showIcon:!0})}),t.jsx("div",{className:"flex items-center justify-center gap-4",children:t.jsx("div",{className:"flex items-center gap-2",children:ee?t.jsx(le,{onClick:f,disabled:!ee,variant:"solid",color:"default",icon:t.jsx(Re,{}),loading:h,size:"large",children:ee?"Save Changes":"No Changes"}):t.jsx(le,{onClick:de,size:"large",variant:"solid",color:"default",disabled:h,icon:t.jsx(Zt,{}),children:"Add Object"})})})]})})}),t.jsxs("div",{className:"flex items-start w-full h-full gap-4",children:[t.jsx("div",{className:"w-[70%] h-full flex items-center justify-center border-r border-r-slate-200 py-4",children:t.jsxs(bt,{width:G,height:N,style:{background:"#F9F9F9"},children:[t.jsxs($e,{children:[t.jsx(pe,{points:[B,0,B,500],stroke:"black",strokeWidth:2,opacity:.1}),t.jsx(pe,{points:[0,Y,700,Y],stroke:"black",strokeWidth:2,opacity:.1}),t.jsx(pe,{points:se,closed:!0,stroke:"rgba(250, 181, 21, 1)",strokeWidth:2,dash:[10,5],fill:"#FFFFFF"}),U(se).map((p,j)=>t.jsx(pe,{points:p,stroke:"rgba(250, 181, 21, 1)",strokeWidth:1,dash:[2,3]},j))]}),_==null?void 0:_.map((p,j)=>t.jsx(ds,{objectData:p,scale:J,centerX:B,centerY:Y,onUpdate:$=>K(j,$),isSelected:r===j,onSelect:()=>Z(j)},p._id||j)),t.jsx($e,{children:A&&t.jsx(Ge,{image:A,x:D.x-50/2,y:D.y-50/2,width:50,height:50})})]})}),t.jsx("div",{className:"w-[30%] py-4 h-full",children:t.jsx(Nt,{items:[{children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Object Info"}),t.jsxs("p",{className:"text-base",children:["Label:"," ",t.jsx("span",{className:"font-medium ml-2",children:_[r]&&js[(be=_[r])==null?void 0:be.type].label})]}),t.jsxs("p",{className:"text-base",children:["Type:"," ",t.jsx("span",{className:"font-medium ml-2",children:(ve=_[r])==null?void 0:ve.type})]})]})},{children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Adjust Object Size"}),t.jsxs("div",{className:"flex items-center gap-3 flex-col",children:[t.jsx(ge,{type:"number",value:((X=_[r])==null?void 0:X.width)*10||0,onChange:p=>te("width",p.target.value),min:1,max:s==="ceiling"?600:60,size:"large",addonBefore:"Width (CM)",disabled:!_[r]}),t.jsx(ge,{type:"number",value:((ne=_[r])==null?void 0:ne.length)*10||0,onChange:p=>te("length",p.target.value),min:1,max:s==="ceiling"?400:40,size:"large",addonBefore:"Length (CM)",disabled:!_[r]})]})]})},{children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Adjust Position"}),t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(le,{icon:t.jsx(xn,{}),onClick:()=>ae("up"),disabled:!_[r],className:"flex items-center justify-center"}),t.jsxs("div",{className:"flex gap-10",children:[t.jsx(le,{icon:t.jsx(bn,{}),onClick:()=>ae("left"),disabled:!_[r]}),t.jsx(le,{icon:t.jsx(vn,{}),onClick:()=>ae("right"),disabled:!_[r]})]}),t.jsx(le,{icon:t.jsx(yn,{}),onClick:()=>ae("down"),disabled:!_[r]}),t.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Adjust by"," ",s==="ceiling"?"100 centimeters":"1 decimeter"," ","per click"]})]})]})},{color:"red",children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Delete Object"}),t.jsx(le,{onClick:()=>V(_[r]),disabled:!_[r],className:"w-full",size:"large",color:"danger",variant:"dashed",loading:y,children:"Delete"})]})}]})})]}),t.jsx(vs,{visible:W,onOk:we,onCancel:re,roomType:o,mountType:s})]})})};function ws({elderly_id:e,device_id:n}){const[s,o]=a.useState(null),r=a.useCallback(()=>{Ye({room_id:n,elderly_id:e}).then(c=>{o(c.data)}).catch(c=>console.log(c))},[]);return a.useEffect(()=>{r()},[r]),t.jsx(Xe,{tip:"Fetching Data...",spinning:!(s!=null&&s.mount_type),children:t.jsxs("div",{className:"min-h-[400px]",children:[s&&(s==null?void 0:s.mount_type)==2&&t.jsx(dt,{elderly_id:e,device_id:n,mountType:"wall",roomType:(s==null?void 0:s.room_type)===3?"bathroom":(s==null?void 0:s.room_type)===2?"bedroom":"livingroom"}),s&&(s==null?void 0:s.mount_type)==1&&t.jsx(dt,{elderly_id:e,device_id:n,mountType:"ceiling",roomType:(s==null?void 0:s.room_type)===3?"bathroom":(s==null?void 0:s.room_type)===2?"bedroom":"livingroom"})]})})}function Pe(e){return pt({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"circle",attr:{fill:"#FFF59D",cx:"24",cy:"22",r:"20"},child:[]},{tag:"path",attr:{fill:"#FBC02D",d:"M37,22c0-7.7-6.6-13.8-14.5-12.9c-6,0.7-10.8,5.5-11.4,11.5c-0.5,4.6,1.4,8.7,4.6,11.3 c1.4,1.2,2.3,2.9,2.3,4.8V37h12v-0.1c0-1.8,0.8-3.6,2.2-4.8C35.1,29.7,37,26.1,37,22z"},child:[]},{tag:"path",attr:{fill:"#FFF59D",d:"M30.6,20.2l-3-2c-0.3-0.2-0.8-0.2-1.1,0L24,19.8l-2.4-1.6c-0.3-0.2-0.8-0.2-1.1,0l-3,2 c-0.2,0.2-0.4,0.4-0.4,0.7s0,0.6,0.2,0.8l3.8,4.7V37h2V26c0-0.2-0.1-0.4-0.2-0.6l-3.3-4.1l1.5-1l2.4,1.6c0.3,0.2,0.8,0.2,1.1,0 l2.4-1.6l1.5,1l-3.3,4.1C25.1,25.6,25,25.8,25,26v11h2V26.4l3.8-4.7c0.2-0.2,0.3-0.5,0.2-0.8S30.8,20.3,30.6,20.2z"},child:[]},{tag:"circle",attr:{fill:"#5C6BC0",cx:"24",cy:"44",r:"3"},child:[]},{tag:"path",attr:{fill:"#9FA8DA",d:"M26,45h-4c-2.2,0-4-1.8-4-4v-5h12v5C30,43.2,28.2,45,26,45z"},child:[]},{tag:"g",attr:{fill:"#5C6BC0"},child:[{tag:"path",attr:{d:"M30,41l-11.6,1.6c0.3,0.7,0.9,1.4,1.6,1.8l9.4-1.3C29.8,42.5,30,41.8,30,41z"},child:[]},{tag:"polygon",attr:{points:"18,38.7 18,40.7 30,39 30,37"},child:[]}]}]})(e)}const Cs="/assets/side-m-DV2wDhjh.png",Ss="/assets/top-m-C-v5QQhn.png",Ns="/assets/height-m-V8IlAT5_.png",$s="/assets/height-side-m-DB98vyQD.png",_s="/assets/boundary-m-S7OQOcQo.png",Is="/assets/boundary-side-m-CxG_Y0IS.png",Os=({device_boundaries:e={},mountType:n=1})=>{const c={x:150,y:n===1?100:0},[x,l]=a.useState(null),[b,g]=a.useState({up_left:[0,0],low_left:[0,0],up_right:[0,0],low_right:[0,0]}),i=(h=[0,0])=>{if(!Array.isArray(h)||h.length<2)throw new Error("Invalid input: coords must be an array with at least two elements.");const[v=0,m=0]=h;return[c.x-v*5,c.y+m*5]},d=[...i(b.up_left),...i(b.low_left),...i(b.low_right),...i(b.up_right)];return a.useEffect(()=>{if(e&&typeof e=="object"){const v=Object.fromEntries(Object.entries(e).reduce((m,[u,y])=>(u==="_id"||(typeof y=="string"?m.push([u,y.split(",").map(Number)]):console.warn(`Skipping key "${u}" because value is not a string:`,y)),m),[]));g(v)}else console.error("device_boundaries is undefined or not an object",e),g({});const h=new window.Image;h.src=Ue,h.onload=()=>{l(h)}},[e]),t.jsxs(bt,{width:300,height:200,style:{background:"#F9F9F9",width:"fit-content",scale:"1.2"},children:[t.jsxs($e,{children:[Array.from({length:Math.floor(200/25)+1}).map((h,v)=>t.jsx(pe,{points:[0,v*25,300,v*25],stroke:"rgba(0,0,0,0.1)",strokeWidth:1},`h-grid-${v}`)),Array.from({length:Math.floor(300/25)+1}).map((h,v)=>t.jsx(pe,{points:[v*25,0,v*25,200],stroke:"rgba(0,0,0,0.1)",strokeWidth:1},`v-grid-${v}`)),t.jsx(pe,{points:d,closed:!0,stroke:"#FAB515",strokeWidth:2,dash:[5,3],fill:"rgba(250, 181, 21, 0.2)"})]}),t.jsx($e,{children:x&&t.jsx(Ge,{image:x,x:c.x-30/2,y:c.y-30/2,width:30,height:30})})]})},{confirm:Ps}=Te;function Bs({elderly_id:e,device_id:n}){const[s,o]=a.useState({}),r=a.useRef({installationHeight:(s==null?void 0:s.height)??null,mountType:(s==null?void 0:s.mountType)??null,boundary:{},parameters:null,status:null});a.useState(!1);const[c,x]=a.useState(null),[l,b]=a.useState(!1),[g,i]=a.useState(!1);a.useState(!1);const[d,h]=a.useState(!1),[v,m]=a.useState(!1),[u,y]=a.useState(!1),[E,A]=a.useState(0),[L,W]=a.useState(!1),[C,P]=a.useState({}),[O,G]=a.useState({}),[N,B]=a.useState({}),[Y,J]=a.useState(!1);a.useState(!1),a.useState(null);const[D,H]=a.useState(),[S,_]=a.useState({left:0,right:0,top:0,bottom:0}),[q,se]=a.useState(0),[U,K]=a.useState(null),[Z,R]=a.useState(null);a.useEffect(()=>{console.log("Parameters changed:",C)},[C]),a.useEffect(()=>{H([{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(Vt,{}),"Installation"]}),key:0,children:t.jsx(Ts,{initialValues:r&&r.current,currentValues:G,onChange:f=>{G(w=>({...w,...f}))}},r.current.mountType)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(jn,{}),"Fall"]}),key:1,children:t.jsx(As,{initialValues:r&&r.current.parameters,currentValues:C,onChange:f=>{P(w=>({...w,...f})),K({...f,event:"2"})}},r.current.parameters)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(Sn,{}),"Sleep"]}),key:2,children:t.jsx(Es,{initialValues:r&&r.current.parameters,currentValues:C,status:r&&r.current.status,onStatusChange:f=>{B(w=>({...w,[f.event]:f.status})),R(f)},onChange:f=>{P(w=>({...w,...f})),K({...f,event:"3"})}},r.current.parameters)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(wn,{}),"Off-Bed"]}),key:3,children:t.jsx(Ms,{initialValues:r&&r.current.parameters,currentValues:C,status:r&&r.current.status,onStatusChange:f=>{B(w=>({...w,[f.event]:f.status})),R(f)},onChange:f=>{P(w=>({...w,...f})),K({...f,event:"6"})}},r.current.parameters)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(en,{}),"Stay"]}),key:4,children:t.jsx(ks,{initialValues:r&&r.current.parameters,currentValues:C,status:r&&r.current.status,onStatusChange:f=>{B(w=>({...w,[f.event]:f.status})),R(f)},onChange:f=>{P(w=>({...w,...f})),K({...f,event:"9"})}},r.current.parameters)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(tn,{}),"Activity"]}),key:5,children:t.jsx(Ds,{status:r&&r.current.status,onStatusChange:f=>{B(w=>({...w,[f.event]:f.status})),R(f)}},r.current.parameters)}])},[s]);const F=async f=>{L?await xe({oktext:"Save Changes",canceltext:"Discard Chnages",titles:"Save Changes!",description:"Please save changes after making any new changes or discard changes to procced."})?(de(),A(f)):(A(f),W(null)):A(f)},xe=({oktext:f="Confirm",canceltext:w="Cancel",titles:V="Delete Object!",description:ee="Are you sure you want to delete this item?"})=>new Promise(te=>{Ps({title:V,icon:t.jsx(We,{}),content:ee,className:"mini-modal",centered:!0,okText:f,cancelText:w,okButtonProps:{style:{backgroundColor:f=="Delete"?"#ff4d4f":"#1B2559",color:"white"}},cancelButtonProps:{style:{backgroundColor:w==="Discard Chnages"?"#ff4d4f":"#FAFAFA",border:"none",color:w==="Discard Chnages"?"#fff":"#1B2559"}},onOk(){te(!0)},onCancel(){te(!1)}})}),de=()=>{m(!0),U&&fs({elderly_id:e,data:{uid:s.device_no,...U}}).then(()=>{re(),K(null)}).catch(f=>{console.error(f)}).finally(()=>{m(!1)}),Z&&xs({elderly_id:e,room_id:s==null?void 0:s._id,event_id:Z.event,data:{status:Z.status}}).then(()=>{re(),R(null)}).catch(f=>{console.error(f)}).finally(()=>{m(!1)}),O&&hs({room_id:n,elderly_id:e,data:{uid:s.device_no,height:(O==null?void 0:O.installation_height)*10,mount_type:O==null?void 0:O.mount_type,scene:"1"}}).then(()=>{b(!1),i(!1)}).catch(f=>{console.error(f)}).finally(()=>{re(),m(!1)})};a.useEffect(()=>{const f=r.current.parameters&&JSON.stringify(C)!==JSON.stringify(r.current.parameters),w=r.current.status&&JSON.stringify(N)!==JSON.stringify(r.current.status);W(w||f);const V=r.current.installationHeight&&O.installation_height!==r.current.installationHeight,ee=r.current.mountType&&O.mount_type!==r.current.mountType;console.log(O,r.current),W(w||f||V||ee)},[C,N,O]),a.useEffect(()=>{const f=JSON.stringify(r.current.boundary)!==JSON.stringify(S);y(f),console.log(S)},[S]);const we=()=>{h(!0),ps({elderly_id:e,data:{uid:n,lowLeft:`-${S.right*10},-${S.top*10}`,lowRight:`${S.left*10},-${S.top*10}`,upRight:`${S.left*10},${S.bottom*10}`,upLeft:`-${S.right*10},${S.bottom*10}`}}).then(()=>{y(!1)}).catch(f=>{console.error(f)}).finally(()=>{re(),h(!1)})},re=a.useCallback(()=>{J(!0),Ye({room_id:n,elderly_id:e}).then(f=>{var be,ve,X,ne,p;const w=f==null?void 0:f.data;o(w);const V=(w==null?void 0:w.device_boundaries)||{},ee={left:te(Number((be=V.low_right)==null?void 0:be.split(",")[0]),0),right:te(Number((ve=V.low_left)==null?void 0:ve.split(",")[0]),0),top:te(Number((X=V.low_left)==null?void 0:X.split(",")[1]),0),bottom:te(Number((ne=V.up_left)==null?void 0:ne.split(",")[1]),0),front:te(Number((p=V.up_left)==null?void 0:p.split(",")[1]),0)};function te(j,$){const T=Number(j);return isNaN(T)?$:Math.abs(T)/10}_(ee);const ae=w==null?void 0:w.mount_type,ie=(w==null?void 0:w.height)/10;x(ae),se(ie),P(w==null?void 0:w.settings),G({mount_type:ae,installation_height:ie}),B(w==null?void 0:w.eventStatus),r.current={installationHeight:ie,mountType:ae,boundary:ee,parameters:w==null?void 0:w.settings,status:w==null?void 0:w.eventStatus}}).catch(f=>console.log(f)).finally(()=>{J(!1)})},[e]);return a.useEffect(()=>{re()},[re]),t.jsx(Xe,{tip:"Loading...",spinning:Y,children:t.jsxs("div",{className:"flex w-full flex-col",children:[t.jsxs("div",{className:"flex border-b border-b-slate-200 flex-col py-4 gap-3",children:[t.jsxs("div",{className:"flex flex-col items-start gap-0",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Working mode"}),t.jsx("p",{className:"text-base text-text-secondary",children:"Please select the working mode for different functions"})]}),t.jsx(Se.Group,{value:(s==null?void 0:s.scene)??null,size:"large",className:"flex",children:t.jsx(Se,{value:"1",className:"custom-radio",children:"Full Function"})})]}),t.jsxs("div",{className:"flex border-b border-b-slate-200 flex-col py-4 gap-3 bg-slate-50 px-4",children:[t.jsx("div",{className:"w-full flex items-center justify-between",children:t.jsxs("div",{className:"flex flex-col items-start gap-0",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Function Parameter"}),t.jsx("p",{className:"text-base text-text-secondary",children:"Enable or disable alarm, setting alarm parameters."})]})}),t.jsx(He,{activeKey:E,onChange:F,type:"card",style:{marginBottom:32},tabBarGutter:10,items:D,className:"!mb-0"}),L&&t.jsx(le,{size:"large",onClick:de,variant:"solid",color:"default",icon:t.jsx(Re,{}),className:"w-[300px] m-auto",loading:v,children:"Save Changes"})]}),t.jsx("div",{className:"flex border-b border-b-slate-200 items-start justify-between py-4 gap-3",children:t.jsxs("div",{className:"flex flex-col gap-8 w-full",children:[t.jsxs("div",{className:"w-full flex justify-between items-center gap-8",children:[t.jsxs("div",{className:"flex flex-col items-start gap-0",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Setting Boundaries"}),t.jsx("p",{className:"text-base text-text-secondary",children:"Walk around the wall to automatically identify boundary or manually input boundary"})]}),u&&t.jsx(le,{variant:"solid",color:"default",icon:t.jsx(Re,{}),loading:d,size:"large",onClick:()=>we(),children:"Save Changes"})]}),t.jsxs("div",{className:"w-full flex justify-between items-center",children:[t.jsxs("div",{className:"flex flex-col gap-3 items-start",children:[t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Left boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",3:"3",[S.left]:`${S.left}`},min:0,max:3,step:.1,value:S.left,onChange:f=>{_(w=>({...w,left:f}))},className:"min-w-[350px]",disabled:r.current.mountType!==(O==null?void 0:O.mount_type)})]}),t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Right boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",3:"3",[S.right]:`${S.right}`},min:0,max:3,step:.1,value:S.right,onChange:f=>{_(w=>({...w,right:f}))},disabled:r.current.mountType!==(O==null?void 0:O.mount_type),className:"min-w-[350px]"})]}),c===2&&t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Front boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",3:"3",4:"4",[S.bottom]:`${S.bottom}`},min:0,max:4,step:.1,value:S.bottom,onChange:f=>{_(w=>({...w,bottom:f}))},disabled:r.current.mountType!==(O==null?void 0:O.mount_type),className:"min-w-[400px]"})]}),c===1&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Up boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",[S.top]:`${S.top}`},min:0,max:2,step:.1,value:S.top,onChange:f=>{_(w=>({...w,top:f}))},disabled:r.current.mountType!==(O==null?void 0:O.mount_type),className:"min-w-[250px]"})]}),t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Front boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",[S.bottom]:`${S.bottom}`},min:0,max:2,step:.1,value:S.bottom,onChange:f=>{_(w=>({...w,bottom:f}))},disabled:r.current.mountType!==(O==null?void 0:O.mount_type),className:"min-w-[250px]"})]})]})]}),t.jsxs("div",{style:{height:"300px",width:"400px"},className:"flex items-center justify-center relative",children:[t.jsx(gt,{title:t.jsxs(t.Fragment,{children:[c===1&&t.jsx("img",{src:_s,alt:"sidemount",style:{height:"250px",padding:"8px"}}),c===2&&t.jsx("img",{src:Is,alt:"sidemount",style:{height:"250px",padding:"8px"}})]}),overlayStyle:{maxWidth:"none"},overlayInnerStyle:{padding:0},className:"absolute  -top-4 left-[50%] -translate-x-[50%] cursor-pointer",children:t.jsx(is,{size:18,className:"text-secondary"})}),t.jsx(Os,{device_boundaries:{low_left:`-${S.right*10},-${S.top*10}`,low_right:`${S.left*10},-${S.top*10}`,up_right:`${S.left*10},${S.bottom*10}`,up_left:`-${S.right*10},${S.bottom*10}`},mountType:c})]})]})]})})]})})}const Ts=({initialValues:e,currentValues:n,onChange:s})=>{const[o,r]=a.useState(e&&(e==null?void 0:e.mountType)),[c,x]=a.useState(e&&(e==null?void 0:e.installationHeight)),[l,b]=a.useState(!1);console.log(e);const g=(i,d)=>{i==="mount"&&r(d),i==="height"&&x(d),s({installation_height:i==="height"?d:c,mount_type:i==="mount"?d:o}),console.log(c,o);const h=i==="mount"?d:o;if(i==="height"){const v=h===1?d>=2&&d<=3:d>=1.5&&d<=1.6;b(!v)}};return t.jsxs("div",{className:"p-2 bg-white flex gap-3",children:[t.jsxs("div",{className:"flex flex-col items-center py-4 gap-10 w-[40%]",children:[t.jsxs("div",{className:"flex flex-col gap-8 w-full items-center",children:[t.jsxs("div",{className:"flex flex-col items-start gap-0 w-full",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Installation Method"}),t.jsx("p",{className:"text-base text-text-secondary",children:"This radar supports side or top mounting, please choose according to the actual situation"})]}),t.jsxs(Se.Group,{value:o,size:"large",className:"flex",onChange:i=>g("mount",i.target.value),children:[t.jsx(Se,{value:1,className:"custom-radio",children:"Top Mounting"}),t.jsx(Se,{value:2,className:"custom-radio",children:"Side Mounting"})]})]}),o===1&&t.jsx("img",{className:"w-fit",src:Ss,alt:"topemount",style:{height:"200px"}}),o===2&&t.jsx("img",{className:"w-fit",src:Cs,alt:"sidemount",style:{height:"200px"}})]}),t.jsxs("div",{className:"flex flex-col items-center w-[60%] py-4 gap-6",children:[t.jsxs("div",{className:"flex flex-col gap-8 w-full items-center",children:[t.jsx("div",{className:"flex  items-center gap-10 w-full",children:t.jsxs("div",{className:"flex flex-col items-start gap-0 w-full",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Installation Height"}),t.jsx("p",{className:"text-base text-text-secondary",children:"Please set the accurate installation height of the radar, with a deviation within  5cm"})]})}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Installation Height (m)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",3:"3",[c]:`${c}`},min:0,max:3.5,step:.1,value:c??0,onChange:i=>{g("height",i),o===1?i>3||i<2?b(!0):b(!1):o===2&&(i>1.6||i<1.5?b(!0):b(!1))},className:"min-w-[350px]"}),l&&t.jsx(Ee,{message:"The height is not within the recommended range. Please install and set it according to the diagram",type:"warning",showIcon:!0,style:{marginTop:16}})]})]}),o===1&&t.jsx("img",{className:"w-fit",src:Ns,alt:"sidemount",style:{height:"300px"}}),o===2&&t.jsx("img",{className:"w-fit",src:$s,alt:"sidemount",style:{height:"300px"}})]})]})},As=({initialValues:e,currentValues:n,onChange:s})=>{const o=r=>{s({time:Number(r.target.value/10)})};return t.jsxs("div",{className:"p-2 bg-white",children:[t.jsxs("div",{id:"hint",className:"flex items-center gap-2 bg-Warning/10 w-fit p-1 rounded-sm px-2 my-2",children:[t.jsx(Pe,{}),t.jsx("p",{className:"text-sm ",children:"The fall alarm has been activated, with a detection area of 4 * 6 meters"})]}),t.jsx("div",{id:"item",className:"py-2",children:t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Notification Time"}),t.jsx(ge,{type:"number",size:"large",defaultValue:e&&(e==null?void 0:e.time)*10,onChange:o,min:1,max:150,className:"w-fit",suffix:"seconds"})]})})]})},Es=({initialValues:e,currentValues:n,status:s,onChange:o,onStatusChange:r})=>{const[c,x]=a.useState(s[3]),[l,b]=a.useState(!1),[g,i]=a.useState([{name:"Normal Resp rate range",key:"resp_rate",min:e&&(e==null?void 0:e.lower_breath),max:e&&(e==null?void 0:e.upper_breath)},{name:"Normal heart rate range",key:"heart_rate",min:e&&(e==null?void 0:e.lower_heartbeat),max:e&&(e==null?void 0:e.upper_heartbeat)}]),[d,h]=a.useState([{name:"Detect Duration Threshold",key:"detect_threshold",min:0,max:15,warnPoint:5,value:e&&(e==null?void 0:e.sudden_duration)},{name:"Sensitivity",key:"sensitivity",min:1,max:99,value:e&&(e==null?void 0:e.sensitivity)}]),v=(u,y,E)=>{const A=[...g];A[u][y]=E,i(A);const L=A[u];console.log(`Changed ${L.name}:`,{parameter:L.key,min:L.min,max:L.max})};a.useEffect(()=>{const u={};g.forEach(y=>{y.key==="resp_rate"?(u.upper_breath=y.max,u.lower_breath=y.min):y.key==="heart_rate"&&(u.upper_heartbeat=y.max,u.lower_heartbeat=y.min)}),d.forEach(y=>{y.key==="detect_threshold"?u.sudden_duration=y.value:y.key==="sensitivity"&&(u.sensitivity=y.value)}),o(u)},[g,d,o]);const m=u=>{x(!c),r({event:3,status:!c})};return t.jsxs("div",{className:"p-2 bg-white",children:[t.jsx("div",{id:"item",className:"py-2",children:g.map((u,y)=>t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",style:{marginBottom:g.length-1===y?0:24},children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:u.name}),t.jsxs("div",{className:"flex items-center gap-2 w-fit",children:[t.jsx(ge,{type:"number",label:"Min",value:u.min,onChange:E=>v(y,"min",Number(E.target.value)),placeholder:"Minimum",size:"large",addonBefore:"Min",min:1}),"-",t.jsx(ge,{type:"number",label:"Max",value:u.max,onChange:E=>v(y,"max",Number(E.target.value)),placeholder:"Maximum",size:"large",addonBefore:"Max",min:2})]})]},u.key))}),t.jsxs("div",{id:"hint",className:"flex items-center gap-2 bg-Warning/10 w-fit p-1 rounded-sm px-2 my-2",children:[t.jsx(Pe,{}),t.jsx("p",{className:"text-sm ",children:"Record events in sleep report when respiratory rate exceeding the normal range"})]}),t.jsxs("div",{id:"hint",className:"flex items-center gap-2 bg-Warning/10 w-fit p-1 rounded-sm px-2 my-2",children:[t.jsx(Pe,{}),t.jsx("p",{className:"text-sm ",children:"Respiratory events are datas for sleep report,not alarms"})]}),t.jsx("hr",{className:"w-[50%] bg-slate-200 mx-auto my-8"}),t.jsx("div",{className:"w-full ",children:t.jsxs("div",{id:"item",className:"py-2",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Abnormal Resp & Heart Rate Alarm"}),t.jsx("span",{className:"text-text-secondary",children:"Alarm condition: no respiratory and heart rate detected when person alone in monitoring bed area."})]}),t.jsx(Ae,{value:c,onChange:m,className:"w-fit bg-slate-300"})]}),c&&t.jsxs("div",{className:"mt-4 flex gap-4 justify-between",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Detect Duration Threshold"}),t.jsx("span",{className:"text-text-secondary",children:"Weak warning time for vital signs, default to 10 minutes"})]}),t.jsx(ge,{type:"number",size:"large",value:d[0].value,min:d[0].min,max:d[0].max,className:"w-fit",suffix:"minute",onChange:u=>{const y=parseInt(u.target.value,10);isNaN(y)||(y<d[0].warnPoint?b(!0):b(!1),h(E=>E.map(A=>A.key==="detect_threshold"?{...A,value:y}:A)))}}),l&&t.jsx(Ee,{message:"Too short detection time may cause false alarm ",type:"warning",showIcon:!0,style:{marginTop:16}})]}),t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Sensitivity"}),t.jsx("span",{className:"text-text-secondary",children:"Higher value will increase both sensitivity and false alarms"})]}),t.jsx("div",{className:"px-4",children:t.jsx(ye,{marks:{0:"Low",[d[1].value]:`${d[1].value}`,100:"High"},value:d[1].value,min:d[1].min,max:d[1].max,onChange:u=>{h(y=>y.map(E=>E.key==="sensitivity"?{...E,value:u}:E))}})})]})]})]})})]})},Ms=({initialValues:e,currentValues:n,onChange:s,status:o,onStatusChange:r})=>{const[c,x]=a.useState(o[6]),[l,b]=a.useState([{name:"Off-Bed Duration Threshold",key:"offBed_threshold",value:e&&e.leave_detection_time},{name:"Time Range",key:"time_range",from:e.leave_detection_range&&e.leave_detection_range.split("-")[0]||"24:00",to:e.leave_detection_range&&e.leave_detection_range.split("-")[1]||"01:00"}]),g=(d,h,v)=>{const m=[...l];m[d][h]=v,b(m);const u=m[d];console.log(`Changed ${u.name}:`,{parameter:u.key,from:u.from,to:u.to})};a.useEffect(()=>{const d={};l.forEach(h=>{h.key==="offBed_threshold"?d.leave_detection_time=h.value:h.key==="time_range"&&(d.leave_detection_range=`${h.from}-${h.to}`)}),s(d)},[l,s]);const i=d=>{x(!c),r({event:6,status:!c})};return t.jsx("div",{className:"p-2 bg-white",children:t.jsx("div",{className:"w-full ",children:t.jsxs("div",{id:"item",className:"py-2",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Off-bed alarm"}),t.jsx("span",{className:"text-text-secondary",children:"Alarm condition: user leaves the bed during the monitoring time range and not return after duration threshold"})]}),t.jsx(Ae,{value:c,onChange:i,className:"w-fit bg-slate-300"})]}),c&&t.jsxs("div",{className:"mt-4 flex gap-4 justify-between",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full",children:[t.jsx("div",{className:"flex flex-col ",children:t.jsx("h2",{className:"text-lg font-semibold text-primary",children:l[0].name})}),t.jsx(ge,{type:"number",size:"large",value:l[0].value,min:l[0].min,max:l[0].max,className:"w-fit",suffix:"minute",onChange:d=>{const h=parseInt(d.target.value,10);b(v=>v.map(m=>m.key==="offBed_threshold"?{...m,value:h}:m))}})]}),t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full mt-2",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Time Range"}),t.jsxs("div",{className:"flex items-center gap-2 w-fit",children:[t.jsx(st,{use12Hours:!1,format:"HH:mm",size:"large",onChange:(d,h)=>{g(1,"from",h)},value:tt(l[1].from,"HH:mm")}),"-",t.jsx(st,{use12Hours:!1,format:"HH:mm",size:"large",value:tt(l[1].to,"HH:mm"),onChange:(d,h)=>{g(1,"to",h)}})]})]})]})]})})})},ks=({initialValues:e,currentValues:n,onChange:s,status:o,onStatusChange:r})=>{const[c,x]=a.useState(o[9]),[l,b]=a.useState([{name:"Stay duration threshold",key:"stay_threshold",value:e&&e.entry_detection_time}]);a.useEffect(()=>{const i={};l.forEach(d=>{d.key==="stay_threshold"&&(i.entry_detection_time=d.value)}),s(i)},[l,s]);const g=i=>{x(!c),r({event:9,status:!c})};return t.jsx("div",{className:"p-2 bg-white",children:t.jsxs("div",{className:"w-full ",children:[t.jsxs("div",{id:"hint",className:"flex items-center gap-2 bg-Warning/10 w-fit p-1 rounded-sm px-2 my-2",children:[t.jsx(Pe,{}),t.jsx("p",{className:"text-sm ",children:"Constraint: Only applicable to single person bathroom scenes."})]}),t.jsxs("div",{id:"item",className:"py-2",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Stay alarm"}),t.jsx("span",{className:"text-text-secondary",children:"Alarm condition: user enters bathroom for more than the time threshold."})]}),t.jsx(Ae,{value:c,onChange:g,className:"w-fit bg-slate-300"})]}),c&&t.jsx("div",{className:"mt-4 flex gap-4 justify-between",children:t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full",children:[t.jsx("div",{className:"flex flex-col ",children:t.jsx("h2",{className:"text-lg font-semibold text-primary",children:l[0].name})}),t.jsx(ge,{type:"number",size:"large",value:l[0].value,className:"w-fit",suffix:"minute",onChange:i=>{const d=parseInt(i.target.value,10);b(h=>h.map(v=>v.key==="stay_threshold"?{...v,value:d}:v))}})]})})]})]})})},Ds=({status:e,onStatusChange:n})=>{const[s,o]=a.useState(e[4]),r=c=>{o(!s),n({event:4,status:!s})};return t.jsx("div",{className:"p-2 bg-white",children:t.jsx("div",{className:"w-full ",children:t.jsx("div",{id:"item",className:"py-2",children:t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Inactivity alarm"}),t.jsx("span",{className:"text-text-secondary",children:"Alarm condition: no in-room or out-room event for more than 24 hours"})]}),t.jsx(Ae,{onChange:r,value:s,className:"w-fit bg-slate-300"})]})})})})},zs=e=>new Promise((n,s)=>{const o=new FileReader;o.readAsDataURL(e),o.onload=()=>n(o.result),o.onerror=r=>s(r)});function Rs({elderly_id:e,room_id:n}){a.useState({deviceName:"Reaz",location:"other",photos:[],videos:[],note:"This is simple note"}),a.useState({name:"Reaz",birthDate:"2000-01-01",checkIn:null,gender:"male",medication:"1",diagnosis:null,aid:null,galt:null,metalStatus:null}),a.useState({region:"Asia/Dhaka",ip:"0.0.0.0"});const[s,o]=a.useState(!1),[r,c]=a.useState(""),[x,l]=a.useState([]),[b,g]=a.useState([]);a.useCallback(()=>{var m;Nn({elderly_id:e,room_id:n,file:(m=x[0])==null?void 0:m.originFileObj}).then(u=>{console.log(u.data)}).catch(u=>{console.log(u)}).finally(()=>{})},[]);const i=a.useCallback(()=>{$n({elderly_id:e,room_id:n}).then(m=>{g(m==null?void 0:m.data)}).catch(m=>{console.log(m)}).finally(()=>{})},[]);a.useEffect(()=>{i()},[i]);const d=async m=>{!m.url&&!m.preview&&(m.preview=await zs(m.originFileObj)),c(m.url||m.preview),o(!0)},h=({fileList:m})=>{l(m)},v=t.jsxs("button",{style:{border:0,background:"none"},type:"button",className:"flex flex-col items-center justify-center",children:[t.jsx(Cn,{}),t.jsx("div",{style:{marginTop:8},children:"Upload"})]});return t.jsx("div",{className:"flex w-full flex-col",children:t.jsx("div",{className:"flex flex-col py-4 gap-3",children:t.jsxs("div",{className:"flex flex-col items-start gap-0",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Environment Information"}),t.jsx("p",{className:"text-base text-text-secondary",children:"Attached files:"}),t.jsxs("div",{className:"w-full flex flex-wrap justify-start gap-2 mt-4",children:[b.map((m,u)=>t.jsx(Ce,{width:200,src:m.url},u)),t.jsx(Ce,{width:200,src:"https://sb.kaleidousercontent.com/67418/1920x1100/2ed9107761/bg.png"}),t.jsx(Ce,{width:200,preview:{destroyOnClose:!0,imageRender:()=>t.jsx("video",{muted:!0,width:"100%",controls:!0,src:"https://sb.kaleidousercontent.com/67418/1920x1100/2ed9107761/bg.png"}),toolbarRender:()=>null},src:"https://sb.kaleidousercontent.com/67418/1920x1100/2ed9107761/bg.png"})]}),t.jsx(_n,{action:`https://backend.elderlycareplatform.com/api/v1/elderly/upload-object/${e}/${n}`,listType:"picture-card",fileList:x,onPreview:d,onChange:h,className:"p-4",children:x.length>=8?null:v}),r&&t.jsx(Ce,{wrapperStyle:{display:"none"},preview:{visible:s,onVisibleChange:m=>o(m),afterOpenChange:m=>!m&&c("")},src:r})]})})})}function Hs({isvisible:e,setVisible:n,device_id:s,elderly_id:o,room_id:r}){const c=()=>{n(!1)},x=[{key:"1",tab:"Device Configuration",content:t.jsx(Bs,{device_id:s,elderly_id:o}),icon:t.jsx(nn,{})},{key:"2",tab:"Edit Room",content:t.jsx(ws,{device_id:s,elderly_id:o}),icon:t.jsx(sn,{})},{key:"3",tab:"Device Info",content:t.jsx(Rs,{elderly_id:o,room_id:r}),icon:t.jsx(on,{})}];return t.jsx(Te,{open:e,onCancel:c,footer:null,centered:!0,width:"80vw",className:"device-configuration-modal my-6",children:t.jsx("div",{className:"min-h-[90vh] h-full p-4",children:t.jsx(He,{renderTabBar:(l,b)=>t.jsx("div",{className:"h-full",children:t.jsx(b,{...l})}),children:x.map(l=>t.jsx(He.TabPane,{tab:t.jsxs("span",{className:"flex items-center gap-2 !border-none",children:[l.icon,l.tab]}),children:l.content},l.key))})})})}function eo(){var n;const{elderlyDetails:e}=a.useContext(xt);return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-4 mt-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("h1",{className:"text-[24px] font-bold text-[#1B2559]",children:"Devices"})}),t.jsx("div",{id:"devices",className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6",children:(n=e==null?void 0:e.rooms)==null?void 0:n.filter(s=>s==null?void 0:s.device_no).map(s=>t.jsx(Ls,{device:s},s.id))})]})})}const Ls=({device:e})=>{const[n,s]=a.useState(!1),{elderlyDetails:o}=a.useContext(xt);return t.jsxs("div",{className:"flex flex-col gap-8 bg-white rounded-xl p-4 group hover:bg-slate-50 cursor-pointer device_modal",children:[t.jsx("div",{className:"flex items-center justify-between gap-4 w-full ",onClick:()=>s(!0),children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{id:"deviceImg",children:t.jsx("img",{src:Ue,alt:"device",width:84,height:84})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("h1",{className:"text-[22px] font-semibold text-[#1B2559]",children:e==null?void 0:e.name}),t.jsxs("div",{id:"status",className:"flex items-center gap-2",children:[t.jsx("div",{id:"dot",className:` ${e!=null&&e.is_device_bind?"bg-[#00c42e]":"bg-[#c42626]"} rounded-full animate-pulse w-[8px] h-[8px]`}),t.jsx("p",{className:"text-[16px] font-semibold text-primary capitalize",children:e!=null&&e.is_device_bind?"Online":"Offline"})]})]})]})}),t.jsx(Hs,{isvisible:n,setVisible:s,elderly_id:o._id,device_id:e==null?void 0:e.device_no,room_id:e==null?void 0:e._id})]})};export{eo as default};
//# sourceMappingURL=DevicesTab-Dsfv99om.js.map
