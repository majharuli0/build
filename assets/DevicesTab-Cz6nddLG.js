import{f as Me,k as He,h as H,r as o,o as Ne,q as pe,dM as pt,b0 as xt,eN as Ze,fS as bt,R as yt,t as vt,v as jt,x as wt,y as $e,dB as qe,dC as Ct,dD as St,bS as _t,bQ as Nt,bR as $t,a$ as Ve,dR as je,m as et,ae as Xe,z as fe,at as Ot,aZ as Bt,b6 as It,bB as Pt,p as Tt,aT as tt,j as t,bH as xe,S as Re,E as st,fT as ie,aI as le,fU as Se,I as ge,M as Oe,fV as kt,fW as Dt,d as Ke,fX as Et,fY as At}from"./index-gDHMON6F.js";import{C as nt}from"./UseCustomContext-B_WDFCzc.js";import"./helper-BjOOo2dJ.js";import{b as Mt,d as Ht,o as Rt,a as ve,G as zt,L as de,I as Be,R as Ft,T as Wt,S as ze}from"./oth-Cr0BM_XZ.js";import{S as Lt,c as at,a as lt,b as rt,R as ot}from"./ArrowUpOutlined-BOfzYbhD.js";import{d as Ge,a as qt}from"./index-CCW3BSdW.js";import{G as Xt}from"./index-QjEaHwl-.js";import{T as Ae}from"./ElderlyProfile-76jfUULE.js";import{S as Ie}from"./index-ujqUl6vQ.js";import{T as Je}from"./index-Cs5sSG7r.js";import"./elderly-BUTOAjKC.js";import"./HomeOutlined-KcBYnstW.js";import"./PullRequestOutlined-CHNw9gqN.js";import"./index-x3yaAz7Y.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new e.Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="c040005f-31d5-4253-808a-f9d620aebf42",e._sentryDebugIdIdentifier="sentry-dbid-c040005f-31d5-4253-808a-f9d620aebf42")}catch{}const Ce=(e,n,s,a,r)=>({background:e,border:`${H(a.lineWidth)} ${a.lineType} ${n}`,[`${r}-icon`]:{color:s}}),Kt=e=>{const{componentCls:n,motionDurationSlow:s,marginXS:a,marginSM:r,fontSize:m,fontSizeLG:S,lineHeight:h,borderRadiusLG:c,motionEaseInOutCirc:j,withDescriptionIconSize:x,colorText:u,colorTextHeading:v,withDescriptionPadding:_,defaultPadding:b}=e;return{[n]:Object.assign(Object.assign({},He(e)),{position:"relative",display:"flex",alignItems:"center",padding:b,wordWrap:"break-word",borderRadius:c,[`&${n}-rtl`]:{direction:"rtl"},[`${n}-content`]:{flex:1,minWidth:0},[`${n}-icon`]:{marginInlineEnd:a,lineHeight:0},"&-description":{display:"none",fontSize:m,lineHeight:h},"&-message":{color:v},[`&${n}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${s} ${j}, opacity ${s} ${j},
        padding-top ${s} ${j}, padding-bottom ${s} ${j},
        margin-bottom ${s} ${j}`},[`&${n}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${n}-with-description`]:{alignItems:"flex-start",padding:_,[`${n}-icon`]:{marginInlineEnd:r,fontSize:x,lineHeight:0},[`${n}-message`]:{display:"block",marginBottom:a,color:v,fontSize:S},[`${n}-description`]:{display:"block",color:u}},[`${n}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Gt=e=>{const{componentCls:n,colorSuccess:s,colorSuccessBorder:a,colorSuccessBg:r,colorWarning:m,colorWarningBorder:S,colorWarningBg:h,colorError:c,colorErrorBorder:j,colorErrorBg:x,colorInfo:u,colorInfoBorder:v,colorInfoBg:_}=e;return{[n]:{"&-success":Ce(r,a,s,e,n),"&-info":Ce(_,v,u,e,n),"&-warning":Ce(h,S,m,e,n),"&-error":Object.assign(Object.assign({},Ce(x,j,c,e,n)),{[`${n}-description > pre`]:{margin:0,padding:0}})}}},Jt=e=>{const{componentCls:n,iconCls:s,motionDurationMid:a,marginXS:r,fontSizeIcon:m,colorIcon:S,colorIconHover:h}=e;return{[n]:{"&-action":{marginInlineStart:r},[`${n}-close-icon`]:{marginInlineStart:r,padding:0,overflow:"hidden",fontSize:m,lineHeight:H(m),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${s}-close`]:{color:S,transition:`color ${a}`,"&:hover":{color:h}}},"&-close-text":{color:S,transition:`color ${a}`,"&:hover":{color:h}}}}},Yt=e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}),Ut=Me("Alert",e=>[Kt(e),Gt(e),Jt(e)],Yt);var Ye=function(e,n){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]]);return s};const Qt={success:vt,info:jt,error:wt,warning:$e},Zt=e=>{const{icon:n,prefixCls:s,type:a}=e,r=Qt[a]||null;return n?bt(n,o.createElement("span",{className:`${s}-icon`},n),()=>({className:pe(`${s}-icon`,{[n.props.className]:n.props.className})})):o.createElement(r,{className:`${s}-icon`})},Vt=e=>{const{isClosable:n,prefixCls:s,closeIcon:a,handleClose:r,ariaProps:m}=e,S=a===!0||a===void 0?o.createElement(yt,null):a;return n?o.createElement("button",Object.assign({type:"button",onClick:r,className:`${s}-close-icon`,tabIndex:0},m),S):null},it=o.forwardRef((e,n)=>{const{description:s,prefixCls:a,message:r,banner:m,className:S,rootClassName:h,style:c,onMouseEnter:j,onMouseLeave:x,onClick:u,afterClose:v,showIcon:_,closable:b,closeText:w,closeIcon:N,action:D,id:E}=e,q=Ye(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[L,I]=o.useState(!1),R=o.useRef(null);o.useImperativeHandle(n,()=>({nativeElement:R.current}));const{getPrefixCls:P,direction:J,alert:B}=o.useContext(Ne),T=P("alert",a),[Y,z,A]=Ut(T),p=F=>{var W;I(!0),(W=e.onClose)===null||W===void 0||W.call(e,F)},$=o.useMemo(()=>e.type!==void 0?e.type:m?"warning":"info",[e.type,m]),K=o.useMemo(()=>typeof b=="object"&&b.closeIcon||w?!0:typeof b=="boolean"?b:N!==!1&&N!==null&&N!==void 0?!0:!!(B!=null&&B.closable),[w,N,b,B==null?void 0:B.closable]),Q=m&&_===void 0?!0:_,Z=pe(T,`${T}-${$}`,{[`${T}-with-description`]:!!s,[`${T}-no-icon`]:!Q,[`${T}-banner`]:!!m,[`${T}-rtl`]:J==="rtl"},B==null?void 0:B.className,S,h,A,z),G=pt(q,{aria:!0,data:!0}),V=o.useMemo(()=>{var F,W;return typeof b=="object"&&b.closeIcon?b.closeIcon:w||(N!==void 0?N:typeof(B==null?void 0:B.closable)=="object"&&(!((F=B==null?void 0:B.closable)===null||F===void 0)&&F.closeIcon)?(W=B==null?void 0:B.closable)===null||W===void 0?void 0:W.closeIcon:B==null?void 0:B.closeIcon)},[N,b,w,B==null?void 0:B.closeIcon]),se=o.useMemo(()=>{const F=b??(B==null?void 0:B.closable);return typeof F=="object"?Ye(F,["closeIcon"]):{}},[b,B==null?void 0:B.closable]);return Y(o.createElement(xt,{visible:!L,motionName:`${T}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:F=>({maxHeight:F.offsetHeight}),onLeaveEnd:v},(F,W)=>{let{className:re,style:ue}=F;return o.createElement("div",Object.assign({id:E,ref:Ze(R,W),"data-show":!L,className:pe(Z,re),style:Object.assign(Object.assign(Object.assign({},B==null?void 0:B.style),c),ue),onMouseEnter:j,onMouseLeave:x,onClick:u,role:"alert"},G),Q?o.createElement(Zt,{description:s,icon:e.icon,prefixCls:T,type:$}):null,o.createElement("div",{className:`${T}-content`},r?o.createElement("div",{className:`${T}-message`},r):null,s?o.createElement("div",{className:`${T}-description`},s):null),D?o.createElement("div",{className:`${T}-action`},D):null,o.createElement(Vt,{isClosable:K,prefixCls:T,closeIcon:V,handleClose:p,ariaProps:se}))}))});function es(e,n,s){return n=qe(n),Ct(e,St()?Reflect.construct(n,s||[],qe(e).constructor):n.apply(e,s))}let ts=function(e){function n(){var s;return $t(this,n),s=es(this,n,arguments),s.state={error:void 0,info:{componentStack:""}},s}return _t(n,e),Nt(n,[{key:"componentDidCatch",value:function(a,r){this.setState({error:a,info:r})}},{key:"render",value:function(){const{message:a,description:r,id:m,children:S}=this.props,{error:h,info:c}=this.state,j=(c==null?void 0:c.componentStack)||null,x=typeof a>"u"?(h||"").toString():a,u=typeof r>"u"?j:r;return h?o.createElement(it,{id:m,type:"error",message:x,description:o.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},u)}):S}}])}(o.Component);const we=it;we.ErrorBoundary=ts;const Ue=o.forwardRef((e,n)=>{const{open:s,draggingDelete:a}=e,r=o.useRef(null),m=s&&!a,S=o.useRef(null);function h(){je.cancel(S.current),S.current=null}function c(){S.current=je(()=>{var j;(j=r.current)===null||j===void 0||j.forceAlign(),S.current=null})}return o.useEffect(()=>(m?c():h(),h),[m,e.title]),o.createElement(Ve,Object.assign({ref:Ze(r,n)},e,{open:m}))}),ss=e=>{const{componentCls:n,antCls:s,controlSize:a,dotSize:r,marginFull:m,marginPart:S,colorFillContentHover:h,handleColorDisabled:c,calc:j,handleSize:x,handleSizeHover:u,handleActiveColor:v,handleActiveOutlineColor:_,handleLineWidth:b,handleLineWidthHover:w,motionDurationMid:N}=e;return{[n]:Object.assign(Object.assign({},He(e)),{position:"relative",height:a,margin:`${H(S)} ${H(m)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${H(m)} ${H(S)}`},[`${n}-rail`]:{position:"absolute",backgroundColor:e.railBg,borderRadius:e.borderRadiusXS,transition:`background-color ${N}`},[`${n}-track,${n}-tracks`]:{position:"absolute",transition:`background-color ${N}`},[`${n}-track`]:{backgroundColor:e.trackBg,borderRadius:e.borderRadiusXS},[`${n}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${n}-rail`]:{backgroundColor:e.railHoverBg},[`${n}-track`]:{backgroundColor:e.trackHoverBg},[`${n}-dot`]:{borderColor:h},[`${n}-handle::after`]:{boxShadow:`0 0 0 ${H(b)} ${e.colorPrimaryBorderHover}`},[`${n}-dot-active`]:{borderColor:e.dotActiveBorderColor}},[`${n}-handle`]:{position:"absolute",width:x,height:x,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:j(b).mul(-1).equal(),insetBlockStart:j(b).mul(-1).equal(),width:j(x).add(j(b).mul(2)).equal(),height:j(x).add(j(b).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:x,height:x,backgroundColor:e.colorBgElevated,boxShadow:`0 0 0 ${H(b)} ${e.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${N},
            inset-block-start ${N},
            width ${N},
            height ${N},
            box-shadow ${N},
            outline ${N}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:j(u).sub(x).div(2).add(w).mul(-1).equal(),insetBlockStart:j(u).sub(x).div(2).add(w).mul(-1).equal(),width:j(u).add(j(w).mul(2)).equal(),height:j(u).add(j(w).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${H(w)} ${v}`,outline:`6px solid ${_}`,width:u,height:u,insetInlineStart:e.calc(x).sub(u).div(2).equal(),insetBlockStart:e.calc(x).sub(u).div(2).equal()}}},[`&-lock ${n}-handle`]:{"&::before, &::after":{transition:"none"}},[`${n}-mark`]:{position:"absolute",fontSize:e.fontSize},[`${n}-mark-text`]:{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}},[`${n}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${n}-dot`]:{position:"absolute",width:r,height:r,backgroundColor:e.colorBgElevated,border:`${H(b)} solid ${e.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:e.dotActiveBorderColor}},[`&${n}-disabled`]:{cursor:"not-allowed",[`${n}-rail`]:{backgroundColor:`${e.railBg} !important`},[`${n}-track`]:{backgroundColor:`${e.trackBgDisabled} !important`},[`
          ${n}-dot
        `]:{backgroundColor:e.colorBgElevated,borderColor:e.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${n}-handle::after`]:{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:x,height:x,boxShadow:`0 0 0 ${H(b)} ${c}`,insetInlineStart:0,insetBlockStart:0},[`
          ${n}-mark-text,
          ${n}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${s}-tooltip-inner`]:{minWidth:"unset"}})}},ct=(e,n)=>{const{componentCls:s,railSize:a,handleSize:r,dotSize:m,marginFull:S,calc:h}=e,c=n?"paddingBlock":"paddingInline",j=n?"width":"height",x=n?"height":"width",u=n?"insetBlockStart":"insetInlineStart",v=n?"top":"insetInlineStart",_=h(a).mul(3).sub(r).div(2).equal(),b=h(r).sub(a).div(2).equal(),w=n?{borderWidth:`${H(b)} 0`,transform:`translateY(${H(h(b).mul(-1).equal())})`}:{borderWidth:`0 ${H(b)}`,transform:`translateX(${H(e.calc(b).mul(-1).equal())})`};return{[c]:a,[x]:h(a).mul(3).equal(),[`${s}-rail`]:{[j]:"100%",[x]:a},[`${s}-track,${s}-tracks`]:{[x]:a},[`${s}-track-draggable`]:Object.assign({},w),[`${s}-handle`]:{[u]:_},[`${s}-mark`]:{insetInlineStart:0,top:0,[v]:h(a).mul(3).add(n?0:S).equal(),[j]:"100%"},[`${s}-step`]:{insetInlineStart:0,top:0,[v]:a,[j]:"100%",[x]:a},[`${s}-dot`]:{position:"absolute",[u]:h(a).sub(m).div(2).equal()}}},ns=e=>{const{componentCls:n,marginPartWithMark:s}=e;return{[`${n}-horizontal`]:Object.assign(Object.assign({},ct(e,!0)),{[`&${n}-with-marks`]:{marginBottom:s}})}},as=e=>{const{componentCls:n}=e;return{[`${n}-vertical`]:Object.assign(Object.assign({},ct(e,!1)),{height:"100%"})}},ls=e=>{const s=e.controlHeightLG/4,a=e.controlHeightSM/2,r=e.lineWidth+1,m=e.lineWidth+1*1.5,S=e.colorPrimary,h=new Xe(S).setAlpha(.2).toRgbString();return{controlSize:s,railSize:4,handleSize:s,handleSizeHover:a,dotSize:8,handleLineWidth:r,handleLineWidthHover:m,railBg:e.colorFillTertiary,railHoverBg:e.colorFillSecondary,trackBg:e.colorPrimaryBorder,trackHoverBg:e.colorPrimaryBorderHover,handleColor:e.colorPrimaryBorder,handleActiveColor:S,handleActiveOutlineColor:h,handleColorDisabled:new Xe(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexShortString(),dotBorderColor:e.colorBorderSecondary,dotActiveBorderColor:e.colorPrimaryBorder,trackBgDisabled:e.colorBgContainerDisabled}},rs=Me("Slider",e=>{const n=et(e,{marginPart:e.calc(e.controlHeight).sub(e.controlSize).div(2).equal(),marginFull:e.calc(e.controlSize).div(2).equal(),marginPartWithMark:e.calc(e.controlHeightLG).sub(e.controlSize).equal()});return[ss(n),ns(n),as(n)]},ls),os=o.createContext({});function Ee(){const[e,n]=o.useState(!1),s=o.useRef(),a=()=>{je.cancel(s.current)},r=m=>{a(),m?n(m):s.current=je(()=>{n(m)})};return o.useEffect(()=>a,[]),[e,r]}var is=function(e,n){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]]);return s};function cs(e,n){return e||e===null?e:n||n===null?n:s=>typeof s=="number"?s.toString():""}const ye=fe.forwardRef((e,n)=>{const{prefixCls:s,range:a,className:r,rootClassName:m,style:S,disabled:h,tooltipPrefixCls:c,tipFormatter:j,tooltipVisible:x,getTooltipPopupContainer:u,tooltipPlacement:v,tooltip:_={},onChangeComplete:b}=e,w=is(e,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete"]),{vertical:N}=e,{direction:D,slider:E,getPrefixCls:q,getPopupContainer:L}=fe.useContext(Ne),I=fe.useContext(Ot),R=h??I,{handleRender:P,direction:J}=fe.useContext(os),T=(J||D)==="rtl",[Y,z]=Ee(),[A,p]=Ee(),$=Object.assign({},_),{open:K,placement:Q,getPopupContainer:Z,prefixCls:G,formatter:V}=$,se=K??x,F=(Y||A)&&se!==!1,W=cs(V,j),[re,ue]=Ee(),be=d=>{b==null||b(d),ue(!1)},ee=(d,f)=>d||(f?T?"left":"right":"top"),g=q("slider",s),[y,X,ne]=rs(g),te=pe(r,E==null?void 0:E.className,m,{[`${g}-rtl`]:T,[`${g}-lock`]:re},X,ne);T&&!w.vertical&&(w.reverse=!w.reverse),fe.useEffect(()=>{const d=()=>{je(()=>{p(!1)},1)};return document.addEventListener("mouseup",d),()=>{document.removeEventListener("mouseup",d)}},[]);const ce=a&&!se,me=P||((d,f)=>{const{index:C}=f,M=d.props;function O(ae,he,gt){var We,ke,Le,De;gt&&((ke=(We=w)[ae])===null||ke===void 0||ke.call(We,he)),(De=(Le=M)[ae])===null||De===void 0||De.call(Le,he)}const k=Object.assign(Object.assign({},M),{onMouseEnter:ae=>{z(!0),O("onMouseEnter",ae)},onMouseLeave:ae=>{z(!1),O("onMouseLeave",ae)},onMouseDown:ae=>{p(!0),ue(!0),O("onMouseDown",ae)},onFocus:ae=>{var he;p(!0),(he=w.onFocus)===null||he===void 0||he.call(w,ae),O("onFocus",ae,!0)},onBlur:ae=>{var he;p(!1),(he=w.onBlur)===null||he===void 0||he.call(w,ae),O("onBlur",ae,!0)}}),U=fe.cloneElement(d,k),oe=(!!se||F)&&W!==null;return ce?U:fe.createElement(Ue,Object.assign({},$,{prefixCls:q("tooltip",G??c),title:W?W(f.value):"",open:oe,placement:ee(Q??v,N),key:C,overlayClassName:`${g}-tooltip`,getPopupContainer:Z||u||L}),U)}),l=ce?(d,f)=>{const C=fe.cloneElement(d,{style:Object.assign(Object.assign({},d.props.style),{visibility:"hidden"})});return fe.createElement(Ue,Object.assign({},$,{prefixCls:q("tooltip",G??c),title:W?W(f.value):"",open:W!==null&&F,placement:ee(Q??v,N),key:"tooltip",overlayClassName:`${g}-tooltip`,getPopupContainer:Z||u||L,draggingDelete:f.draggingDelete}),C)}:void 0,i=Object.assign(Object.assign({},E==null?void 0:E.style),S);return y(fe.createElement(Lt,Object.assign({},w,{step:w.step,range:a,className:te,style:i,disabled:R,ref:n,prefixCls:g,handleRender:me,activeHandleRender:l,onChangeComplete:be})))}),ds=e=>{const{componentCls:n,calc:s}=e;return{[n]:Object.assign(Object.assign({},He(e)),{margin:0,padding:0,listStyle:"none",[`${n}-item`]:{position:"relative",margin:0,paddingBottom:e.itemPaddingBottom,fontSize:e.fontSize,listStyle:"none","&-tail":{position:"absolute",insetBlockStart:e.itemHeadSize,insetInlineStart:s(s(e.itemHeadSize).sub(e.tailWidth)).div(2).equal(),height:`calc(100% - ${H(e.itemHeadSize)})`,borderInlineStart:`${H(e.tailWidth)} ${e.lineType} ${e.tailColor}`},"&-pending":{[`${n}-item-head`]:{fontSize:e.fontSizeSM,backgroundColor:"transparent"},[`${n}-item-tail`]:{display:"none"}},"&-head":{position:"absolute",width:e.itemHeadSize,height:e.itemHeadSize,backgroundColor:e.dotBg,border:`${H(e.dotBorderWidth)} ${e.lineType} transparent`,borderRadius:"50%","&-blue":{color:e.colorPrimary,borderColor:e.colorPrimary},"&-red":{color:e.colorError,borderColor:e.colorError},"&-green":{color:e.colorSuccess,borderColor:e.colorSuccess},"&-gray":{color:e.colorTextDisabled,borderColor:e.colorTextDisabled}},"&-head-custom":{position:"absolute",insetBlockStart:s(e.itemHeadSize).div(2).equal(),insetInlineStart:s(e.itemHeadSize).div(2).equal(),width:"auto",height:"auto",marginBlockStart:0,paddingBlock:e.customHeadPaddingVertical,lineHeight:1,textAlign:"center",border:0,borderRadius:0,transform:"translate(-50%, -50%)"},"&-content":{position:"relative",insetBlockStart:s(s(e.fontSize).mul(e.lineHeight).sub(e.fontSize)).mul(-1).add(e.lineWidth).equal(),marginInlineStart:s(e.margin).add(e.itemHeadSize).equal(),marginInlineEnd:0,marginBlockStart:0,marginBlockEnd:0,wordBreak:"break-word"},"&-last":{[`> ${n}-item-tail`]:{display:"none"},[`> ${n}-item-content`]:{minHeight:s(e.controlHeightLG).mul(1.2).equal()}}},[`&${n}-alternate,
        &${n}-right,
        &${n}-label`]:{[`${n}-item`]:{"&-tail, &-head, &-head-custom":{insetInlineStart:"50%"},"&-head":{marginInlineStart:s(e.marginXXS).mul(-1).equal(),"&-custom":{marginInlineStart:s(e.tailWidth).div(2).equal()}},"&-left":{[`${n}-item-content`]:{insetInlineStart:`calc(50% - ${H(e.marginXXS)})`,width:`calc(50% - ${H(e.marginSM)})`,textAlign:"start"}},"&-right":{[`${n}-item-content`]:{width:`calc(50% - ${H(e.marginSM)})`,margin:0,textAlign:"end"}}}},[`&${n}-right`]:{[`${n}-item-right`]:{[`${n}-item-tail,
            ${n}-item-head,
            ${n}-item-head-custom`]:{insetInlineStart:`calc(100% - ${H(s(s(e.itemHeadSize).add(e.tailWidth)).div(2).equal())})`},[`${n}-item-content`]:{width:`calc(100% - ${H(s(e.itemHeadSize).add(e.marginXS).equal())})`}}},[`&${n}-pending
        ${n}-item-last
        ${n}-item-tail`]:{display:"block",height:`calc(100% - ${H(e.margin)})`,borderInlineStart:`${H(e.tailWidth)} dotted ${e.tailColor}`},[`&${n}-reverse
        ${n}-item-last
        ${n}-item-tail`]:{display:"none"},[`&${n}-reverse ${n}-item-pending`]:{[`${n}-item-tail`]:{insetBlockStart:e.margin,display:"block",height:`calc(100% - ${H(e.margin)})`,borderInlineStart:`${H(e.tailWidth)} dotted ${e.tailColor}`},[`${n}-item-content`]:{minHeight:s(e.controlHeightLG).mul(1.2).equal()}},[`&${n}-label`]:{[`${n}-item-label`]:{position:"absolute",insetBlockStart:s(s(e.fontSize).mul(e.lineHeight).sub(e.fontSize)).mul(-1).add(e.tailWidth).equal(),width:`calc(50% - ${H(e.marginSM)})`,textAlign:"end"},[`${n}-item-right`]:{[`${n}-item-label`]:{insetInlineStart:`calc(50% + ${H(e.marginSM)})`,width:`calc(50% - ${H(e.marginSM)})`,textAlign:"start"}}},"&-rtl":{direction:"rtl",[`${n}-item-head-custom`]:{transform:"translate(50%, -50%)"}}})}},us=e=>({tailColor:e.colorSplit,tailWidth:e.lineWidthBold,dotBorderWidth:e.wireframe?e.lineWidthBold:e.lineWidth*3,dotBg:e.colorBgContainer,itemPaddingBottom:e.padding*1.25}),ms=Me("Timeline",e=>{const n=et(e,{itemHeadSize:10,customHeadPaddingVertical:e.paddingXXS,paddingInlineEnd:2});return[ds(n)]},us);var hs=function(e,n){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]]);return s};const dt=e=>{var{prefixCls:n,className:s,color:a="blue",dot:r,pending:m=!1,position:S,label:h,children:c}=e,j=hs(e,["prefixCls","className","color","dot","pending","position","label","children"]);const{getPrefixCls:x}=o.useContext(Ne),u=x("timeline",n),v=pe(`${u}-item`,{[`${u}-item-pending`]:m},s),_=/blue|red|green|gray/.test(a||"")?void 0:a,b=pe(`${u}-item-head`,{[`${u}-item-head-custom`]:!!r,[`${u}-item-head-${a}`]:!_});return o.createElement("li",Object.assign({},j,{className:v}),h&&o.createElement("div",{className:`${u}-item-label`},h),o.createElement("div",{className:`${u}-item-tail`}),o.createElement("div",{className:b,style:{borderColor:_,color:_}},r),o.createElement("div",{className:`${u}-item-content`},c))};var Qe=function(e,n){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]]);return s};const fs=e=>{var{prefixCls:n,className:s,pending:a=!1,children:r,items:m,rootClassName:S,reverse:h=!1,direction:c,hashId:j,pendingDot:x,mode:u=""}=e,v=Qe(e,["prefixCls","className","pending","children","items","rootClassName","reverse","direction","hashId","pendingDot","mode"]);const _=(I,R)=>u==="alternate"?I==="right"?`${n}-item-right`:I==="left"?`${n}-item-left`:R%2===0?`${n}-item-left`:`${n}-item-right`:u==="left"?`${n}-item-left`:u==="right"?`${n}-item-right`:I==="right"?`${n}-item-right`:"",b=Bt(m||[]),w=typeof a=="boolean"?null:a;a&&b.push({pending:!!a,dot:x||o.createElement(It,null),children:w}),h&&b.reverse();const N=b.length,D=`${n}-item-last`,E=b.filter(I=>!!I).map((I,R)=>{var P;const J=R===N-2?D:"",B=R===N-1?D:"",{className:T}=I,Y=Qe(I,["className"]);return o.createElement(dt,Object.assign({},Y,{className:pe([T,!h&&a?J:B,_((P=I==null?void 0:I.position)!==null&&P!==void 0?P:"",R)]),key:(I==null?void 0:I.key)||R}))}),q=b.some(I=>!!(I!=null&&I.label)),L=pe(n,{[`${n}-pending`]:!!a,[`${n}-reverse`]:!!h,[`${n}-${u}`]:!!u&&!q,[`${n}-label`]:q,[`${n}-rtl`]:c==="rtl"},s,S,j);return o.createElement("ul",Object.assign({},v,{className:L}),E)};function gs(e,n){return e&&Array.isArray(e)?e:Pt(n).map(s=>{var a,r;return Object.assign({children:(r=(a=s==null?void 0:s.props)===null||a===void 0?void 0:a.children)!==null&&r!==void 0?r:""},s.props)})}var ps=function(e,n){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(s[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]]);return s};const Fe=e=>{const{getPrefixCls:n,direction:s,timeline:a}=o.useContext(Ne),{prefixCls:r,children:m,items:S,className:h,style:c}=e,j=ps(e,["prefixCls","children","items","className","style"]),x=n("timeline",r),u=Tt(x),[v,_,b]=ms(x,u),w=gs(S,m);return v(o.createElement(fs,Object.assign({},j,{className:pe(a==null?void 0:a.className,h,b,u),style:Object.assign(Object.assign({},a==null?void 0:a.style),c),prefixCls:x,direction:s,items:w,hashId:_})))};Fe.Item=dt;function xs(e){return tt({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"},child:[]}]})(e)}const Pe="/assets/1-DbUCLJeK.png",bs={0:{fill:"black",label:"Invalid Area",stroke:"darkred",icon:"oth"},1:{fill:"black",label:"Custom Area",stroke:"black",icon:"oth"},2:{fill:"black",label:"Bed",stroke:"darkblue",icon:"bed"},3:{fill:"black",label:"Interference Area",stroke:"darkorange",icon:"oth"},4:{fill:"black",label:"Door",stroke:"darkgreen",icon:"door"},5:{fill:"black",label:"Monitoring Bed",stroke:"darkpurple",icon:"bed"}},ut=({objectData:e,scale:n,centerX:s,centerY:a,onUpdate:r,isSelected:m,onSelect:S})=>{const h=o.useRef(null),[c,j]=o.useState(null),[x,u]=o.useState(0),[v,_]=o.useState(0),[b,w]=o.useState(0),[N,D]=o.useState(0),E=o.useRef(),q=o.useRef(),{type:L}=e,I=bs[L]||{fill:"lightgray",label:"Unknown",stroke:"gray",icon:"oth"};o.useEffect(()=>{E.current&&(u(E.current.getWidth()),_(E.current.getHeight()));const A=new window.Image;A.src=I.icon==="bed"?Mt:I.icon==="door"?Ht:Rt,A.onload=()=>{j(A),w(40),D(40)}},[I.icon]);const R=(A=[0,0])=>{const[p=0,$=0]=A;return[s-p*n,a+$*n]},P=[...R(e.up_left.split(",").map(Number)),...R(e.low_left.split(",").map(Number)),...R(e.low_right.split(",").map(Number)),...R([e.low_right.split(",").map(Number)[0],e.up_right.split(",").map(Number)[1]])],J=A=>{const p=(A[0]+A[2]+A[4]+A[6])/4,$=(A[1]+A[3]+A[5]+A[7])/4;return{x:p,y:$}},{x:B,y:T}=J(P),Y=A=>{m||S(),h.current=e},z=A=>{if(!m||!h.current)return;const p=A.target,$=p.x(),K=p.y(),Q=Math.round(-$/n),Z=Math.round(K/n);if(Q===0&&Z===0)return;const G=se=>{const[F,W]=se.split(",").map(Number);return`${F+Q},${W+Z}`},V={...h.current,up_left:G(h.current.up_left),low_left:G(h.current.low_left),up_right:G(h.current.up_right),low_right:G(h.current.low_right)};r(V),p.x(0),p.y(0)};return t.jsx(ve,{children:t.jsxs(zt,{draggable:!0,onDragStart:Y,onDragMove:z,onClick:S,onTap:S,children:[t.jsx(de,{points:P,closed:!0,fill:m?"rgba(0,0,0,0.4)":I.fill,stroke:m?"black":"",strokeWidth:m?2:0}),c&&t.jsx(Be,{ref:q,image:c,x:B-b/2,y:T-N/2,width:b,height:N}),t.jsx(Ft,{x:B-x/2-5,y:T-(v+60)/2-5,width:x+10,height:v+10,fill:"rgba(0, 0, 0, 0.7)",cornerRadius:4}),t.jsx(Wt,{ref:E,text:I.label,fontSize:14,fontStyle:"bold",fill:"white",x:B-x/2,y:T-(v+60)/2})]})})};function Te(e){return xe({url:`/elderly/${e.elderly_id}/room-configuration/${e.room_id}`,method:"get",cancelToken:e.cancelToken})}function mt(e){return xe({url:`/devices/${e.elderly_id}/rooms/${e.room_id}/object-areas`,method:"post",data:e.obj,cancelToken:e.cancelToken})}function ht(e){return xe({url:`/devices/${e.elderly_id}/rooms/${e.room_id}/object-areas/${e.obj_id}`,method:"patch",data:e.obj,cancelToken:e.cancelToken})}function ft(e){return xe({url:`/devices/${e.elderly_id}/rooms/${e.room_id}/object-areas/${e.obj_id}`,method:"delete",cancelToken:e.cancelToken})}function ys(e){return xe({url:`/elderly/${e.elderly_id}/mount/${e.room_id}`,method:"patch",data:e.data,cancelToken:e.cancelToken})}function vs(e){return xe({url:`/devices/boundaries-area/${e.elderly_id}`,method:"patch",data:e.data,cancelToken:e.cancelToken})}function js(e){return xe({url:`/elderly/${e.elderly_id}/events`,method:"patch",data:e.data,cancelToken:e.cancelToken})}function ws(e){return xe({url:`/elderly/${e.elderly_id}/events/${e.room_id}/${e.event_id}`,method:"patch",data:e.data,cancelToken:e.cancelToken})}const{confirm:Cs}=Oe,Ss={0:{label:"Invalid Area",icon:"oth"},1:{label:"Custom Area",icon:"oth"},2:{label:"Bed",icon:"bed"},3:{label:"Interference Area",icon:"oth"},4:{label:"Door",icon:"door"},5:{label:"Monitoring Bed",icon:"bed"}},_s=({device_id:e,elderly_id:n})=>{var ne,te,ce,me;const[s,a]=o.useState(null),[r,m]=o.useState(null),[S,h]=o.useState(!1),[c,j]=o.useState(null),[x,u]=o.useState(!1),[v,_]=o.useState(null),[b,w]=o.useState(null),[N,D]=o.useState(!1),[E,q]=o.useState(null),[L,I]=o.useState({up_left:[0,0],low_left:[0,0],up_right:[0,0],low_right:[0,0]}),R=700,P=500,J=R/2,B=P/2,T=10,Y={x:35*T,y:25*T},z=o.useCallback(()=>{Te({room_id:e,elderly_id:n}).then(l=>{j(l.data)}).catch(l=>console.log(l))},[]);o.useEffect(()=>{z()},[z]);const A=(l=[0,0])=>{if(!Array.isArray(l)||l.length<2)throw new Error("Invalid input: coords must be an array with at least two elements.");const[i=0,d=0]=l;return[Y.x-i*T,Y.y+d*T]},[p,$]=o.useState(()=>{const l=localStorage.getItem("canvasObjects");return l?JSON.parse(l):(c==null?void 0:c.device_areas)||[]}),K=[...A(L.up_left),...A(L.low_left),...A(L.low_right),...A(L.up_right)],Q=l=>{const i=[],[d,f,C,M]=[Math.min(...l.filter((O,k)=>k%2===0)),Math.max(...l.filter((O,k)=>k%2===0)),Math.min(...l.filter((O,k)=>k%2!==0)),Math.max(...l.filter((O,k)=>k%2!==0))];for(let O=C+10;O<M;O+=50)i.push([d,O,f,O]);for(let O=d+10;O<f;O+=50)i.push([O,C,O,M]);return i};o.useEffect(()=>{if(c!=null&&c.device_boundaries&&typeof c.device_boundaries=="object"){const i=Object.fromEntries(Object.entries(c.device_boundaries).reduce((d,[f,C])=>(f==="_id"||d.push([f,C.split(",").map(Number)]),d),[]));I(i)}else console.error("device_boundaries is undefined or not an object"),I({});const l=new window.Image;l.src=Pe,l.onload=()=>{q(l)}},[c]),o.useEffect(()=>{c!=null&&c.device_areas&&$(c.device_areas)},[c]),o.useEffect(()=>{s!==null&&s>=p.length&&(a(null),m(null))},[p.length,s]),o.useEffect(()=>{localStorage.setItem("canvasObjects",JSON.stringify(p))},[p]);const Z=(l,i)=>{$(d=>{const f=d.map((C,M)=>M===l?{...C,...i}:C);return h(JSON.stringify(f[l])!==JSON.stringify(r)),f})},G=async l=>{s!==null&&s!==l&&S&&(await X({oktext:"Save Changes",canceltext:"Discard Chnages",titles:"Save Changes!",description:"Please save changes after making any new changes or discard changes to procced."})?await re():V()),a(l),m(p[l]),h(!1)},V=(l=!1)=>{s!==null&&($(i=>{const d=i[s];if((d==null?void 0:d._id)===v||l)return _(null),i.filter((M,O)=>O!==s);const C=[...i];return C[s]=r,C}),h(!1),a(null),m(null))},se=()=>{const l=new Set(p.map(i=>parseInt(i.coordKey,10)).filter(i=>!isNaN(i)&&i>=0&&i<=15));for(let i=0;i<=15;i++)if(!l.has(i))return i;return null},F=l=>{const i=se();if(i===null)return alert("Maximum 16 objects allowed (coordKey 0-15). Delete some objects first."),null;const d=10,f=d/2;return{_id:`temp-${Date.now()}`,type:l,width:d,length:d,up_left:`${-f},${f}`,up_right:`${f},${f}`,low_left:`${-f},${-f}`,low_right:`${f},${-f}`,coordKey:i.toString()}},W=async l=>{if(v){X({oktext:"Ok",titles:"Action Required!",description:"To proceed, please remove the existing object or save it first.",canceltext:" "});return}if(S)if(await X({oktext:"Save Changes",canceltext:"Discard Chnages",titles:"Save Changes!",description:"Please save changes after making any new changes or discard changes to procced."}))try{await re()}catch{return}else V();const i=F(l);_(i._id),$(d=>[...d,i]),a(p.length),m(i),h(!0)},re=async()=>{if(ee)try{u(!0),await ue(p[s]),m(p[s]),h(!1)}catch{alert("Save failed! Changes not preserved.")}},ue=async l=>{if(l._id.startsWith("temp-")){mt({elderly_id:n,room_id:c._id,obj:{coordKey:l.coordKey,type:l.type,uid:c==null?void 0:c.device_no,lowLeft:l.low_left,upLeft:l.up_left,upRight:l.up_right,lowRight:l.low_right,length:l.length,width:l.width}}).then(d=>{z(),j(f=>({...f,device_areas:f.device_areas.map(C=>C._id===l._id?l:C)})),_(null),h(!1),u(!1)}).catch(d=>{console.error("Error saving changes:",d),h(!1),u(!1),_(null),z()}).finally(()=>{u(!1)});return}ht({elderly_id:n,room_id:c._id,obj_id:l._id,obj:{coordKey:l.coordKey,type:l.type,uid:c==null?void 0:c.device_no,lowLeft:l.low_left,upLeft:l.up_left,upRight:l.up_right,lowRight:l.low_right,length:l.length,width:l.width}}).then(d=>{z(),j(f=>({...f,device_areas:f.device_areas.map(C=>C._id===l._id?l:C)})),h(!1),u(!1)}).catch(d=>{console.error("Error saving changes:",d),h(!1),u(!1),z()})},be=async l=>{if(console.log(l,v),l._id===v){$(i=>i.filter(d=>d._id!==v)),_(null),h(!1),a(null),D(!1);return}(s===null||await X({oktext:"Delete",canceltext:"Cancel"}))&&(D(!0),ft({elderly_id:n,room_id:c._id,obj_id:l._id}).then(i=>{z(),console.log("Object deleted successfully.",i.data),a(null),m(null),z(),D(!1)}).catch(i=>{console.error("Error deleting object:",i),D(!1)}))},ee=o.useMemo(()=>c!=null&&c.device_areas?JSON.stringify(p)!==JSON.stringify(c.device_areas):!1,[p,c==null?void 0:c.device_areas]),g=(l,i)=>{if(s===null)return;const d=parseInt(i)/10||0,f=p[s];let C={};if(l==="width"){const M=f.up_left.split(",").map(Number),O=f.up_right.split(",").map(Number),k=(O[0]+M[0])/2,U=k-d/2,oe=k+d/2;C={width:d,up_left:`${Math.round(U)},${M[1]}`,up_right:`${Math.round(oe)},${O[1]}`,low_left:`${Math.round(U)},${f.low_left.split(",")[1]}`,low_right:`${Math.round(oe)},${f.low_right.split(",")[1]}`}}else{const M=f.up_left.split(",").map(Number),O=f.low_left.split(",").map(Number),k=(M[1]+O[1])/2,U=k+d/2,oe=k-d/2;C={length:d,up_left:`${M[0]},${Math.round(U)}`,up_right:`${f.up_right.split(",")[0]},${Math.round(U)}`,low_left:`${O[0]},${Math.round(oe)}`,low_right:`${f.low_right.split(",")[0]},${Math.round(oe)}`}}Z(s,C)},y=l=>{if(s===null)return;const i=p[s],d=l==="left"?1:l==="right"?-1:0,f=l==="up"?-1:l==="down"?1:0,C=O=>{const[k,U]=O.split(",").map(Number);return`${k+d},${U+f}`},M={up_left:C(i.up_left),up_right:C(i.up_right),low_left:C(i.low_left),low_right:C(i.low_right)};Z(s,M)},X=({oktext:l="Confirm",canceltext:i="Cancel",titles:d="Delete Object!",description:f="Are you sure you want to delete this item?"})=>new Promise(C=>{Cs({title:d,icon:t.jsx($e,{}),content:f,className:"mini-modal",centered:!0,okText:l,cancelText:i,okButtonProps:{style:{backgroundColor:l=="Delete"?"#ff4d4f":"#1B2559",color:"white"}},cancelButtonProps:{style:{backgroundColor:i==="Discard Chnages"?"#ff4d4f":"#FAFAFA",border:"none",color:i==="Discard Chnages"?"#fff":"#1B2559"}},onOk(){C(!0)},onCancel(){C(!1)}})});return c!=null&&c.device_areas?t.jsxs("div",{className:"flex flex-col w-full h-full",children:[t.jsx("div",{className:"border-b border-b-slate-200 p-2 py-4 ",children:t.jsx(st,{theme:{token:{colorPrimary:"#1B2559"}},children:t.jsxs("div",{className:"w-full flex items-center justify-between",children:[t.jsx("div",{children:t.jsx(we,{message:"Click or drag to edit the area!",type:"info",showIcon:!0})}),t.jsxs("div",{className:"flex items-center justify-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Add Object:"}),t.jsxs(ie.Group,{onChange:l=>W(parseInt(l.target.value)),value:b,size:"large",disabled:x,children:[t.jsx(ie.Button,{value:2,children:"Bed"}),t.jsx(ie.Button,{value:4,children:"Door"}),t.jsx(ie.Button,{value:3,children:"Interference"})]})]}),t.jsx(le,{onClick:re,disabled:!ee,variant:"solid",color:"default",icon:t.jsx(Se,{}),loading:x,size:"large",children:ee?"Save Changes":"No Changes"})]})]})})}),t.jsxs("div",{className:"flex items-start w-full h-full gap-4",children:[t.jsx("div",{className:" w-[70%] h-full flex items-center justify-center border-r border-r-slate-200 py-4",children:t.jsxs(ze,{width:R,height:P,style:{background:"#F9F9F9"},children:[t.jsxs(ve,{children:[t.jsx(de,{points:[J,0,J,500],stroke:"black",strokeWidth:2,opacity:.1}),t.jsx(de,{points:[0,B,700,B],stroke:"black",strokeWidth:2,opacity:.1}),t.jsx(de,{points:K,closed:!0,stroke:"rgba(250, 181, 21, 1",strokeWidth:2,dash:[10,5],fill:"#FFFFFF"}),Q(K).map((l,i)=>t.jsx(de,{points:l,stroke:"rgba(250, 181, 21, 1",strokeWidth:1,dash:[2,3]},i))]}),p==null?void 0:p.map((l,i)=>t.jsx(ut,{objectData:l,scale:T,centerX:J,centerY:B,onUpdate:d=>Z(i,d),isSelected:s===i,onSelect:()=>G(i)},l._id||i)),t.jsx(ve,{children:E&&t.jsx(Be,{image:E,x:Y.x-50/2,y:Y.y-50/2,width:50,height:50})})]})}),t.jsx("div",{className:"w-[30%]  py-4 h-full",children:t.jsx(Fe,{items:[{children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Object Info"}),t.jsxs("p",{className:"text-base",children:["Label:"," ",t.jsx("span",{className:"font-medium ml-2",children:p[s]&&Ss[(ne=p[s])==null?void 0:ne.type].label})]}),t.jsxs("p",{className:"text-base",children:["Type:"," ",t.jsx("span",{className:"font-medium ml-2",children:(te=p[s])==null?void 0:te.type})]})]})},{children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Adjust Object Size"}),t.jsxs("div",{className:"flex items-center gap-3 flex-col",children:[t.jsx(ge,{type:"number",value:((ce=p[s])==null?void 0:ce.width)*10||0,onChange:l=>g("width",parseInt(l.target.value)),min:1,max:600,size:"large",addonBefore:"Width (CM)",disabled:!p[s]}),t.jsx(ge,{type:"number",value:((me=p[s])==null?void 0:me.length)*10||0,onChange:l=>g("length",parseInt(l.target.value)),min:1,max:400,size:"large",disabled:!p[s],addonBefore:"Length (CM)"})]})]})},{children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Adjust Position"}),t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(le,{icon:t.jsx(at,{}),onClick:()=>y("up"),disabled:!p[s],className:"flex items-center justify-center"}),t.jsxs("div",{className:"flex gap-10",children:[t.jsx(le,{icon:t.jsx(lt,{}),onClick:()=>y("left"),disabled:!p[s]}),t.jsx(le,{icon:t.jsx(rt,{}),onClick:()=>y("right"),disabled:!p[s]})]}),t.jsx(le,{icon:t.jsx(ot,{}),onClick:()=>y("down"),disabled:!p[s]}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Adjust by 100 centimeter per click"})]})]})},{color:"red",children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Delete Object"}),t.jsx(le,{onClick:()=>be(p[s]),disabled:!p[s],className:"w-full",size:"large",color:"danger",variant:"dashed",loading:N,children:"Delete"})]})}]})})]})]}):t.jsx(Re,{tip:"Loading..."})},{confirm:Ns}=Oe,$s={0:{label:"Invalid Area",icon:"oth"},1:{label:"Custom Area",icon:"oth"},2:{label:"Bed",icon:"bed"},3:{label:"Interference Area",icon:"oth"},4:{label:"Door",icon:"door"},5:{label:"Monitoring Bed",icon:"bed"}},Os=({device_id:e,elderly_id:n})=>{var ne,te,ce,me;const[s,a]=o.useState(null),[r,m]=o.useState(null),[S,h]=o.useState(!1),[c,j]=o.useState(null),[x,u]=o.useState(!1),[v,_]=o.useState(null),[b,w]=o.useState(null),[N,D]=o.useState(!1),[E,q]=o.useState(null),[L,I]=o.useState({up_left:[0,0],low_left:[0,0],up_right:[0,0],low_right:[0,0]}),R=700,P=500,J=R/2,B=0,T=10,Y={x:35*T,y:0},z=o.useCallback(()=>{Te({room_id:e,elderly_id:n}).then(l=>{j(l.data)}).catch(l=>console.log(l))},[]);o.useEffect(()=>{z()},[z]);const A=(l=[0,0])=>{if(!Array.isArray(l)||l.length<2)throw new Error("Invalid input: coords must be an array with at least two elements.");const[i=0,d=0]=l;return[Y.x-i*T,Y.y+d*T]},[p,$]=o.useState(()=>{const l=localStorage.getItem("canvasObjects");return l?JSON.parse(l):(c==null?void 0:c.device_areas)||[]}),K=[...A(L.up_left),...A(L.low_left),...A(L.low_right),...A(L.up_right)],Q=l=>{const i=[],[d,f,C,M]=[Math.min(...l.filter((O,k)=>k%2===0)),Math.max(...l.filter((O,k)=>k%2===0)),Math.min(...l.filter((O,k)=>k%2!==0)),Math.max(...l.filter((O,k)=>k%2!==0))];for(let O=C+10;O<M;O+=50)i.push([d,O,f,O]);for(let O=d+10;O<f;O+=50)i.push([O,C,O,M]);return i};o.useEffect(()=>{if(c!=null&&c.device_boundaries&&typeof c.device_boundaries=="object"){const i=Object.fromEntries(Object.entries(c.device_boundaries).reduce((d,[f,C])=>(f==="_id"||d.push([f,C.split(",").map(Number)]),d),[]));I(i)}else console.error("device_boundaries is undefined or not an object"),I({});const l=new window.Image;l.src=Pe,l.onload=()=>{q(l)}},[c]),o.useEffect(()=>{c!=null&&c.device_areas&&$(c.device_areas)},[c]),o.useEffect(()=>{s!==null&&s>=p.length&&(a(null),m(null))},[p.length,s]),o.useEffect(()=>{localStorage.setItem("canvasObjects",JSON.stringify(p))},[p]);const Z=(l,i)=>{$(d=>{const f=d.map((C,M)=>M===l?{...C,...i}:C);return h(JSON.stringify(f[l])!==JSON.stringify(r)),f})},G=async l=>{s!==null&&s!==l&&S&&(await X({oktext:"Save Changes",canceltext:"Discard Chnages",titles:"Save Changes!",description:"Please save changes after making any new changes or discard changes to procced."})?await re():V()),a(l),m(p[l]),h(!1)},V=(l=!1)=>{s!==null&&($(i=>{const d=i[s];if((d==null?void 0:d._id)===v||l)return _(null),i.filter((M,O)=>O!==s);const C=[...i];return C[s]=r,C}),h(!1),a(null),m(null))},se=()=>{const l=new Set(p.map(i=>parseInt(i.coordKey,10)).filter(i=>!isNaN(i)&&i>=0&&i<=15));for(let i=0;i<=15;i++)if(!l.has(i))return i;return null},F=l=>{const i=se();if(i===null)return alert("Maximum 16 objects allowed (coordKey 0-15). Delete some objects first."),null;const d=10,f=d/2;return{_id:`temp-${Date.now()}`,type:l,width:d,length:d,up_left:`${-f},${f}`,up_right:`${f},${f}`,low_left:`${-f},${-f}`,low_right:`${f},${-f}`,coordKey:i.toString()}},W=async l=>{if(v){X({oktext:"Ok",titles:"Action Required!",description:"To proceed, please remove the existing object or save it first.",canceltext:" "});return}if(S)if(await X({oktext:"Save Changes",canceltext:"Discard Chnages",titles:"Save Changes!",description:"Please save changes after making any new changes or discard changes to procced."}))try{await re()}catch{return}else V(!0);const i=F(l);_(i._id),$(d=>[...d,i]),a(p.length),m(i),h(!0)},re=async()=>{if(ee)try{u(!0),await ue(p[s]),m(p[s]),h(!1)}catch{alert("Save failed! Changes not preserved.")}},ue=async l=>{if(l._id.startsWith("temp-")){console.log("temp obj trying to add"),mt({elderly_id:n,room_id:c._id,obj:{coordKey:l.coordKey,type:l.type,uid:c==null?void 0:c.device_no,lowLeft:l.low_left,upLeft:l.up_left,upRight:l.up_right,lowRight:l.low_right,length:l.length,width:l.width}}).then(d=>{z(),j(f=>({...f,device_areas:f.device_areas.map(C=>C._id===l._id?l:C)})),_(null),h(!1),u(!1)}).catch(d=>{console.error("Error saving changes:",d),h(!1),u(!1),_(null),z()}).finally(()=>{u(!1)});return}ht({elderly_id:n,room_id:c._id,obj_id:l._id,obj:{coordKey:l.coordKey,type:l.type,uid:c==null?void 0:c.device_no,lowLeft:l.low_left,upLeft:l.up_left,upRight:l.up_right,lowRight:l.low_right,length:l.length,width:l.width}}).then(d=>{z(),j(f=>({...f,device_areas:f.device_areas.map(C=>C._id===l._id?l:C)})),h(!1),u(!1)}).catch(d=>{console.error("Error saving changes:",d),h(!1),u(!1),z()})},be=async l=>{if(l._id===v){$(i=>i.filter(d=>d._id!==v)),_(null),h(!1),a(null),D(!1);return}(s===null||await X({oktext:"Delete",canceltext:"Cancel"}))&&(D(!0),ft({elderly_id:n,room_id:c._id,obj_id:l._id}).then(i=>{z(),console.log("Object deleted successfully.",i.data),a(null),m(null),z(),D(!1)}).catch(i=>{console.error("Error deleting object:",i),D(!1)}))},ee=o.useMemo(()=>c!=null&&c.device_areas?JSON.stringify(p)!==JSON.stringify(c.device_areas):!1,[p,c==null?void 0:c.device_areas]),g=(l,i)=>{if(s===null)return;const d=parseInt(i)||0;if(d<1)return;const f=p[s];let C={};if(l==="width"){const M=f.up_left.split(",").map(Number),O=f.up_right.split(",").map(Number),k=(O[0]+M[0])/2,U=k-d/2,oe=k+d/2;C={width:d,up_left:`${Math.round(U)},${M[1]}`,up_right:`${Math.round(oe)},${O[1]}`,low_left:`${Math.round(U)},${f.low_left.split(",")[1]}`,low_right:`${Math.round(oe)},${f.low_right.split(",")[1]}`}}else{const M=f.up_left.split(",").map(Number),O=f.low_left.split(",").map(Number),k=(M[1]+O[1])/2,U=k+d/2,oe=k-d/2;C={length:d,up_left:`${M[0]},${Math.round(U)}`,up_right:`${f.up_right.split(",")[0]},${Math.round(U)}`,low_left:`${O[0]},${Math.round(oe)}`,low_right:`${f.low_right.split(",")[0]},${Math.round(oe)}`}}Z(s,C)},y=l=>{if(s===null)return;const i=p[s],d=l==="left"?1:l==="right"?-1:0,f=l==="up"?-1:l==="down"?1:0,C=O=>{const[k,U]=O.split(",").map(Number);return`${k+d},${U+f}`},M={up_left:C(i.up_left),up_right:C(i.up_right),low_left:C(i.low_left),low_right:C(i.low_right)};Z(s,M)},X=({oktext:l="Confirm",canceltext:i="Cancel",titles:d="Delete Object!",description:f="Are you sure you want to delete this item?"})=>new Promise(C=>{Ns({title:d,icon:t.jsx($e,{}),content:f,className:"mini-modal",centered:!0,okText:l,cancelText:i,okButtonProps:{style:{backgroundColor:l=="Delete"?"#ff4d4f":"#1B2559",color:"white"}},cancelButtonProps:{style:{backgroundColor:i==="Discard Chnages"?"#ff4d4f":"#FAFAFA",border:"none",color:i==="Discard Chnages"?"#fff":"#1B2559"}},onOk(){C(!0)},onCancel(){C(!1)}})});return c!=null&&c.device_areas?t.jsxs("div",{className:"flex flex-col w-full h-full",children:[t.jsx("div",{className:"border-b border-b-slate-200 p-2 py-4 ",children:t.jsx(st,{theme:{token:{colorPrimary:"#1B2559"}},children:t.jsxs("div",{className:"w-full flex items-center justify-between",children:[t.jsx("div",{children:t.jsx(we,{message:"Click or drag to draw the area, click to edit the area, double-click to delete the area",type:"info",showIcon:!0})}),t.jsxs("div",{className:"flex items-center justify-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"Add Object:"}),t.jsxs(ie.Group,{onChange:l=>W(parseInt(l.target.value)),value:b,size:"large",children:[t.jsx(ie.Button,{value:2,children:"Bed"}),t.jsx(ie.Button,{value:4,children:"Door"}),t.jsx(ie.Button,{value:3,children:"Interference"})]})]}),t.jsx(le,{onClick:re,disabled:!ee,variant:"solid",color:"default",icon:t.jsx(Se,{}),loading:x,size:"large",children:ee?"Save Changes":"No Changes"})]})]})})}),t.jsxs("div",{className:"flex items-start w-full h-full gap-4",children:[t.jsx("div",{className:" w-[70%] h-full flex items-center justify-center border-r border-r-slate-200 py-4",children:t.jsxs(ze,{width:R,height:P,style:{background:"#F9F9F9"},children:[t.jsxs(ve,{children:[t.jsx(de,{points:[J,0,J,500],stroke:"black",strokeWidth:2,opacity:.1}),t.jsx(de,{points:[0,B,700,B],stroke:"black",strokeWidth:2,opacity:.1}),t.jsx(de,{points:K,closed:!0,stroke:"rgba(250, 181, 21, 1",strokeWidth:2,dash:[10,5],fill:"#FFFFFF"}),Q(K).map((l,i)=>t.jsx(de,{points:l,stroke:"rgba(250, 181, 21, 1",strokeWidth:1,dash:[2,3]},i))]}),p==null?void 0:p.map((l,i)=>t.jsx(ut,{objectData:l,scale:T,centerX:J,centerY:B,onUpdate:d=>Z(i,d),isSelected:s===i,onSelect:()=>G(i)},l._id||i)),t.jsx(ve,{children:E&&t.jsx(Be,{image:E,x:Y.x-50/2,y:Y.y-50/2,width:50,height:50})})]})}),t.jsx("div",{className:"w-[30%]  py-4 h-full",children:t.jsx(Fe,{items:[{children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Object Info"}),t.jsxs("p",{className:"text-base",children:["Label:"," ",t.jsx("span",{className:"font-medium ml-2",children:p[s]&&$s[(ne=p[s])==null?void 0:ne.type].label})]}),t.jsxs("p",{className:"text-base",children:["Type:"," ",t.jsx("span",{className:"font-medium ml-2",children:(te=p[s])==null?void 0:te.type})]})]})},{children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Adjust Object Size"}),t.jsxs("div",{className:"flex items-center gap-3 flex-col",children:[t.jsx(ge,{type:"number",value:((ce=p[s])==null?void 0:ce.width)||0,onChange:l=>g("width",l.target.value),min:"1",max:60,size:"large",addonBefore:"Width (dm)",disabled:!p[s]}),t.jsx(ge,{type:"number",value:((me=p[s])==null?void 0:me.length)||0,onChange:l=>g("length",l.target.value),min:"1",max:40,size:"large",disabled:!p[s],addonBefore:"Length (dm)"})]})]})},{children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Adjust Position"}),t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(le,{icon:t.jsx(at,{}),onClick:()=>y("up"),disabled:!p[s],className:"flex items-center justify-center"}),t.jsxs("div",{className:"flex gap-10",children:[t.jsx(le,{icon:t.jsx(lt,{}),onClick:()=>y("left"),disabled:!p[s]}),t.jsx(le,{icon:t.jsx(rt,{}),onClick:()=>y("right"),disabled:!p[s]})]}),t.jsx(le,{icon:t.jsx(ot,{}),onClick:()=>y("down"),disabled:!p[s]}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Adjust by 1 decimeters per click"})]})]})},{color:"red",children:t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"font-medium text-lg mb-2",children:"Delete Object"}),t.jsx(le,{onClick:()=>be(p[s]),disabled:!p[s],className:"w-full",size:"large",color:"danger",variant:"dashed",loading:N,children:"Delete"})]})}]})})]})]}):t.jsx(Re,{tip:"Loading...",className:"w-full h-[400px] flex items-center justify-center"})};function Bs({elderly_id:e,device_id:n}){const[s,a]=o.useState(null),r=o.useCallback(()=>{Te({room_id:n,elderly_id:e}).then(m=>{a(m.data),console.log(m.data)}).catch(m=>console.log(m))},[]);return o.useEffect(()=>{r()},[r]),t.jsxs("div",{children:[s&&(s==null?void 0:s.mount_type)==2&&t.jsx(Os,{elderly_id:e,device_id:n}),s&&(s==null?void 0:s.mount_type)==1&&t.jsx(_s,{elderly_id:e,device_id:n})]})}function _e(e){return tt({tag:"svg",attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"circle",attr:{fill:"#FFF59D",cx:"24",cy:"22",r:"20"},child:[]},{tag:"path",attr:{fill:"#FBC02D",d:"M37,22c0-7.7-6.6-13.8-14.5-12.9c-6,0.7-10.8,5.5-11.4,11.5c-0.5,4.6,1.4,8.7,4.6,11.3 c1.4,1.2,2.3,2.9,2.3,4.8V37h12v-0.1c0-1.8,0.8-3.6,2.2-4.8C35.1,29.7,37,26.1,37,22z"},child:[]},{tag:"path",attr:{fill:"#FFF59D",d:"M30.6,20.2l-3-2c-0.3-0.2-0.8-0.2-1.1,0L24,19.8l-2.4-1.6c-0.3-0.2-0.8-0.2-1.1,0l-3,2 c-0.2,0.2-0.4,0.4-0.4,0.7s0,0.6,0.2,0.8l3.8,4.7V37h2V26c0-0.2-0.1-0.4-0.2-0.6l-3.3-4.1l1.5-1l2.4,1.6c0.3,0.2,0.8,0.2,1.1,0 l2.4-1.6l1.5,1l-3.3,4.1C25.1,25.6,25,25.8,25,26v11h2V26.4l3.8-4.7c0.2-0.2,0.3-0.5,0.2-0.8S30.8,20.3,30.6,20.2z"},child:[]},{tag:"circle",attr:{fill:"#5C6BC0",cx:"24",cy:"44",r:"3"},child:[]},{tag:"path",attr:{fill:"#9FA8DA",d:"M26,45h-4c-2.2,0-4-1.8-4-4v-5h12v5C30,43.2,28.2,45,26,45z"},child:[]},{tag:"g",attr:{fill:"#5C6BC0"},child:[{tag:"path",attr:{d:"M30,41l-11.6,1.6c0.3,0.7,0.9,1.4,1.6,1.8l9.4-1.3C29.8,42.5,30,41.8,30,41z"},child:[]},{tag:"polygon",attr:{points:"18,38.7 18,40.7 30,39 30,37"},child:[]}]}]})(e)}const Is="/assets/side-m-DV2wDhjh.png",Ps="/assets/top-m-C-v5QQhn.png",Ts="/assets/height-m-V8IlAT5_.png",ks="/assets/height-side-m-DB98vyQD.png",Ds="/assets/boundary-m-S7OQOcQo.png",Es="/assets/boundary-side-m-CxG_Y0IS.png",As=({device_boundaries:e={},mountType:n=1})=>{const m={x:150,y:n===1?100:0},[S,h]=o.useState(null),[c,j]=o.useState({up_left:[0,0],low_left:[0,0],up_right:[0,0],low_right:[0,0]}),x=(v=[0,0])=>{if(!Array.isArray(v)||v.length<2)throw new Error("Invalid input: coords must be an array with at least two elements.");const[_=0,b=0]=v;return[m.x-_*5,m.y+b*5]},u=[...x(c.up_left),...x(c.low_left),...x(c.low_right),...x(c.up_right)];return o.useEffect(()=>{if(e&&typeof e=="object"){const _=Object.fromEntries(Object.entries(e).reduce((b,[w,N])=>(w==="_id"||(typeof N=="string"?b.push([w,N.split(",").map(Number)]):console.warn(`Skipping key "${w}" because value is not a string:`,N)),b),[]));j(_)}else console.error("device_boundaries is undefined or not an object",e),j({});const v=new window.Image;v.src=Pe,v.onload=()=>{h(v)}},[e]),t.jsxs(ze,{width:300,height:200,style:{background:"#F9F9F9",width:"fit-content",scale:"1.2"},children:[t.jsxs(ve,{children:[Array.from({length:Math.floor(200/25)+1}).map((v,_)=>t.jsx(de,{points:[0,_*25,300,_*25],stroke:"rgba(0,0,0,0.1)",strokeWidth:1},`h-grid-${_}`)),Array.from({length:Math.floor(300/25)+1}).map((v,_)=>t.jsx(de,{points:[_*25,0,_*25,200],stroke:"rgba(0,0,0,0.1)",strokeWidth:1},`v-grid-${_}`)),t.jsx(de,{points:u,closed:!0,stroke:"#FAB515",strokeWidth:2,dash:[5,3],fill:"rgba(250, 181, 21, 0.2)"})]}),t.jsx(ve,{children:S&&t.jsx(Be,{image:S,x:m.x-30/2,y:m.y-30/2,width:30,height:30})})]})},{confirm:Ms}=Oe;function Hs({elderly_id:e,device_id:n}){const[s,a]=o.useState({}),r=o.useRef({installationHeight:(s==null?void 0:s.height)??null,mountType:(s==null?void 0:s.mountType)??null,boundary:{},parameters:null,status:null});o.useState(!1);const[m,S]=o.useState(null),[h,c]=o.useState(!1),[j,x]=o.useState(!1);o.useState(!1);const[u,v]=o.useState(!1),[_,b]=o.useState(!1),[w,N]=o.useState(!1),[D,E]=o.useState(1),[q,L]=o.useState(!1),[I,R]=o.useState({}),[P,J]=o.useState({}),[B,T]=o.useState({}),[Y,z]=o.useState(!1);o.useState(!1),o.useState(null);const[A,p]=o.useState(),[$,K]=o.useState({left:0,right:0,top:0,bottom:0}),[Q,Z]=o.useState(0),[G,V]=o.useState(null),[se,F]=o.useState(null);o.useEffect(()=>{console.log("Parameters changed:",I)},[I]),o.useEffect(()=>{p([{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(Ge,{}),"Installation"]}),key:0,children:t.jsx(Rs,{initialValues:r&&r.current,currentValues:J,onChange:g=>{J(y=>({...y,...g}))}},r.current.mountType)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(Ge,{}),"Fall"]}),key:1,children:t.jsx(zs,{initialValues:r&&r.current.parameters,currentValues:I,onChange:g=>{R(y=>({...y,...g})),V({...g,event:"2"})}},r.current.parameters)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(Xt,{}),"Sleep"]}),key:2,children:t.jsx(Fs,{initialValues:r&&r.current.parameters,currentValues:I,status:r&&r.current.status,onStatusChange:g=>{T(y=>({...y,[g.event]:g.status})),F(g)},onChange:g=>{R(y=>({...y,...g})),V({...g,event:"3"})}},r.current.parameters)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(qt,{}),"Off-Bed"]}),key:3,children:t.jsx(Ws,{initialValues:r&&r.current.parameters,currentValues:I,status:r&&r.current.status,onStatusChange:g=>{T(y=>({...y,[g.event]:g.status})),F(g)},onChange:g=>{R(y=>({...y,...g})),V({...g,event:"6"})}},r.current.parameters)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(kt,{}),"Stay"]}),key:4,children:t.jsx(Ls,{initialValues:r&&r.current.parameters,currentValues:I,status:r&&r.current.status,onStatusChange:g=>{T(y=>({...y,[g.event]:g.status})),F(g)},onChange:g=>{R(y=>({...y,...g})),V({...g,event:"9"})}},r.current.parameters)},{label:t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium",children:[" ",t.jsx(Dt,{}),"Activity"]}),key:5,children:t.jsx(qs,{status:r&&r.current.status,onStatusChange:g=>{T(y=>({...y,[g.event]:g.status})),F(g)}},r.current.parameters)}])},[s]);const W=async g=>{q?await re({oktext:"Save Changes",canceltext:"Discard Chnages",titles:"Save Changes!",description:"Please save changes after making any new changes or discard changes to procced."})?(ue(),E(g)):(E(g),L(null)):E(g)},re=({oktext:g="Confirm",canceltext:y="Cancel",titles:X="Delete Object!",description:ne="Are you sure you want to delete this item?"})=>new Promise(te=>{Ms({title:X,icon:t.jsx($e,{}),content:ne,className:"mini-modal",centered:!0,okText:g,cancelText:y,okButtonProps:{style:{backgroundColor:g=="Delete"?"#ff4d4f":"#1B2559",color:"white"}},cancelButtonProps:{style:{backgroundColor:y==="Discard Chnages"?"#ff4d4f":"#FAFAFA",border:"none",color:y==="Discard Chnages"?"#fff":"#1B2559"}},onOk(){te(!0)},onCancel(){te(!1)}})}),ue=()=>{b(!0),G&&js({elderly_id:e,data:{uid:s.device_no,...G}}).then(()=>{ee(),V(null)}).catch(g=>{console.error(g)}).finally(()=>{b(!1)}),se&&ws({elderly_id:e,room_id:s==null?void 0:s._id,event_id:se.event,data:{status:se.status}}).then(()=>{ee(),F(null)}).catch(g=>{console.error(g)}).finally(()=>{b(!1)}),P&&ys({room_id:n,elderly_id:e,data:{uid:s.device_no,height:(P==null?void 0:P.installation_height)*10,mount_type:P==null?void 0:P.mount_type,scene:"1"}}).then(()=>{c(!1),x(!1)}).catch(g=>{console.error(g)}).finally(()=>{ee(),b(!1)})};o.useEffect(()=>{const g=r.current.parameters&&JSON.stringify(I)!==JSON.stringify(r.current.parameters),y=r.current.status&&JSON.stringify(B)!==JSON.stringify(r.current.status);L(y||g);const X=r.current.installationHeight&&P.installation_height!==r.current.installationHeight,ne=r.current.mountType&&P.mount_type!==r.current.mountType;console.log(P,r.current),L(y||g||X||ne)},[I,B,P]),o.useEffect(()=>{const g=JSON.stringify(r.current.boundary)!==JSON.stringify($);N(g),console.log($)},[$]);const be=()=>{v(!0),vs({elderly_id:e,data:{uid:n,lowLeft:`-${$.right*10},-${$.top*10}`,lowRight:`${$.left*10},-${$.top*10}`,upRight:`${$.left*10},${$.bottom*10}`,upLeft:`-${$.right*10},${$.bottom*10}`}}).then(()=>{N(!1)}).catch(g=>{console.error(g)}).finally(()=>{ee(),v(!1)})},ee=o.useCallback(()=>{z(!0),Te({room_id:n,elderly_id:e}).then(g=>{var l,i,d,f,C;const y=g==null?void 0:g.data;a(y);const X=(y==null?void 0:y.device_boundaries)||{},ne={left:te(Number((l=X.low_right)==null?void 0:l.split(",")[0]),0),right:te(Number((i=X.low_left)==null?void 0:i.split(",")[0]),0),top:te(Number((d=X.low_left)==null?void 0:d.split(",")[1]),0),bottom:te(Number((f=X.up_left)==null?void 0:f.split(",")[1]),0),front:te(Number((C=X.up_left)==null?void 0:C.split(",")[1]),0)};function te(M,O){const k=Number(M);return isNaN(k)?O:Math.abs(k)/10}K(ne);const ce=y==null?void 0:y.mount_type,me=(y==null?void 0:y.height)/10;S(ce),Z(me),R(y==null?void 0:y.settings),J({mount_type:ce,installation_height:me}),T(y==null?void 0:y.eventStatus),r.current={installationHeight:me,mountType:ce,boundary:ne,parameters:y==null?void 0:y.settings,status:y==null?void 0:y.eventStatus}}).catch(g=>console.log(g)).finally(()=>{z(!1)})},[e]);return o.useEffect(()=>{ee()},[ee]),t.jsx(Re,{tip:"Loading...",spinning:Y,children:t.jsxs("div",{className:"flex w-full flex-col",children:[t.jsxs("div",{className:"flex border-b border-b-slate-200 flex-col py-4 gap-3",children:[t.jsxs("div",{className:"flex flex-col items-start gap-0",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Working mode"}),t.jsx("p",{className:"text-base text-text-secondary",children:"Please select the working mode for different functions"})]}),t.jsx(ie.Group,{value:(s==null?void 0:s.scene)??null,size:"large",className:"flex",children:t.jsx(ie,{value:"1",className:"custom-radio",children:"Full Function"})})]}),t.jsxs("div",{className:"flex border-b border-b-slate-200 flex-col py-4 gap-3 bg-slate-50 px-4",children:[t.jsx("div",{className:"w-full flex items-center justify-between",children:t.jsxs("div",{className:"flex flex-col items-start gap-0",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Function Parameter"}),t.jsx("p",{className:"text-base text-text-secondary",children:"Enable or disable alarm, setting alarm parameters."})]})}),t.jsx(Ae,{activeKey:D,onChange:W,type:"card",style:{marginBottom:32},tabBarGutter:10,items:A,className:"!mb-0"}),q&&t.jsx(le,{size:"large",onClick:ue,variant:"solid",color:"default",icon:t.jsx(Se,{}),className:"w-[300px] m-auto",loading:_,children:"Save Changes"})]}),t.jsx("div",{className:"flex border-b border-b-slate-200 items-start justify-between py-4 gap-3",children:t.jsxs("div",{className:"flex flex-col gap-8 w-full",children:[t.jsxs("div",{className:"w-full flex justify-between items-center gap-8",children:[t.jsxs("div",{className:"flex flex-col items-start gap-0",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Setting Boundaries"}),t.jsx("p",{className:"text-base text-text-secondary",children:"Walk around the wall to automatically identify boundary or manually input boundary"})]}),w&&t.jsx(le,{variant:"solid",color:"default",icon:t.jsx(Se,{}),loading:u,size:"large",onClick:()=>be(),children:"Save Changes"})]}),t.jsxs("div",{className:"w-full flex justify-between items-center",children:[t.jsxs("div",{className:"flex flex-col gap-3 items-start",children:[t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Left boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",3:"3",[$.left]:`${$.left}`},min:0,max:3,step:.1,value:$.left,onChange:g=>{K(y=>({...y,left:g}))},className:"min-w-[350px]",disabled:r.current.mountType!==(P==null?void 0:P.mount_type)})]}),t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Right boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",3:"3",[$.right]:`${$.right}`},min:0,max:3,step:.1,value:$.right,onChange:g=>{K(y=>({...y,right:g}))},disabled:r.current.mountType!==(P==null?void 0:P.mount_type),className:"min-w-[350px]"})]}),m===2&&t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Front boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",3:"3",4:"4",[$.bottom]:`${$.bottom}`},min:0,max:4,step:.1,value:$.bottom,onChange:g=>{K(y=>({...y,bottom:g}))},disabled:r.current.mountType!==(P==null?void 0:P.mount_type),className:"min-w-[400px]"})]}),m===1&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Up boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",[$.top]:`${$.top}`},min:0,max:2,step:.1,value:$.top,onChange:g=>{K(y=>({...y,top:g}))},disabled:r.current.mountType!==(P==null?void 0:P.mount_type),className:"min-w-[250px]"})]}),t.jsxs("div",{className:"flex flex-col items-start w-full",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Front boundary (meters)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",[$.bottom]:`${$.bottom}`},min:0,max:2,step:.1,value:$.bottom,onChange:g=>{K(y=>({...y,bottom:g}))},disabled:r.current.mountType!==(P==null?void 0:P.mount_type),className:"min-w-[250px]"})]})]})]}),t.jsxs("div",{style:{height:"300px",width:"400px"},className:"flex items-center justify-center relative",children:[t.jsx(Ve,{title:t.jsxs(t.Fragment,{children:[m===1&&t.jsx("img",{src:Ds,alt:"sidemount",style:{height:"250px",padding:"8px"}}),m===2&&t.jsx("img",{src:Es,alt:"sidemount",style:{height:"250px",padding:"8px"}})]}),overlayStyle:{maxWidth:"none"},overlayInnerStyle:{padding:0},className:"absolute  -top-4 left-[50%] -translate-x-[50%] cursor-pointer",children:t.jsx(xs,{size:18,className:"text-secondary"})}),t.jsx(As,{device_boundaries:{low_left:`-${$.right*10},-${$.top*10}`,low_right:`${$.left*10},-${$.top*10}`,up_right:`${$.left*10},${$.bottom*10}`,up_left:`-${$.right*10},${$.bottom*10}`},mountType:m})]})]})]})})]})})}const Rs=({initialValues:e,currentValues:n,onChange:s})=>{const[a,r]=o.useState(e&&(e==null?void 0:e.mountType)),[m,S]=o.useState(e&&(e==null?void 0:e.installationHeight)),[h,c]=o.useState(!1);console.log(e);const j=(x,u)=>{x==="mount"&&r(u),x==="height"&&S(u),s({installation_height:x==="height"?u:m,mount_type:x==="mount"?u:a}),console.log(m,a);const v=x==="mount"?u:a;if(x==="height"){const _=v===1?u>=2&&u<=3:u>=1.5&&u<=1.6;c(!_)}};return t.jsxs("div",{className:"p-2 bg-white flex gap-3",children:[t.jsxs("div",{className:"flex flex-col items-center py-4 gap-10 w-[40%]",children:[t.jsxs("div",{className:"flex flex-col gap-8 w-full items-center",children:[t.jsxs("div",{className:"flex flex-col items-start gap-0 w-full",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Installation Method"}),t.jsx("p",{className:"text-base text-text-secondary",children:"This radar supports side or top mounting, please choose according to the actual situation"})]}),t.jsxs(ie.Group,{value:a,size:"large",className:"flex",onChange:x=>j("mount",x.target.value),children:[t.jsx(ie,{value:1,className:"custom-radio",children:"Top Mounting"}),t.jsx(ie,{value:2,className:"custom-radio",children:"Side Mounting"})]})]}),a===1&&t.jsx("img",{className:"w-fit",src:Ps,alt:"topemount",style:{height:"200px"}}),a===2&&t.jsx("img",{className:"w-fit",src:Is,alt:"sidemount",style:{height:"200px"}})]}),t.jsxs("div",{className:"flex flex-col items-center w-[60%] py-4 gap-6",children:[t.jsxs("div",{className:"flex flex-col gap-8 w-full items-center",children:[t.jsx("div",{className:"flex  items-center gap-10 w-full",children:t.jsxs("div",{className:"flex flex-col items-start gap-0 w-full",children:[t.jsx("h1",{className:"text-xl font-semibold text-primary",children:"Installation Height"}),t.jsx("p",{className:"text-base text-text-secondary",children:"Please set the accurate installation height of the radar, with a deviation within ± 5cm"})]})}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Installation Height (m)"}),t.jsx(ye,{marks:{0:"0",1:"1",2:"2",3:"3",[m]:`${m}`},min:0,max:3.5,step:.1,value:m??0,onChange:x=>{j("height",x),a===1?x>3||x<2?c(!0):c(!1):a===2&&(x>1.6||x<1.5?c(!0):c(!1))},className:"min-w-[350px]"}),h&&t.jsx(we,{message:"The height is not within the recommended range. Please install and set it according to the diagram",type:"warning",showIcon:!0,style:{marginTop:16}})]})]}),a===1&&t.jsx("img",{className:"w-fit",src:Ts,alt:"sidemount",style:{height:"300px"}}),a===2&&t.jsx("img",{className:"w-fit",src:ks,alt:"sidemount",style:{height:"300px"}})]})]})},zs=({initialValues:e,currentValues:n,onChange:s})=>{const a=r=>{s({time:Number(r.target.value)})};return t.jsxs("div",{className:"p-2 bg-white",children:[t.jsxs("div",{id:"hint",className:"flex items-center gap-2 bg-Warning/10 w-fit p-1 rounded-sm px-2 my-2",children:[t.jsx(_e,{}),t.jsx("p",{className:"text-sm ",children:"The fall alarm has been activated, with a detection area of 4 * 6 meters"})]}),t.jsx("div",{id:"item",className:"py-2",children:t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Notification Time"}),t.jsx(ge,{type:"number",size:"large",defaultValue:e&&(e==null?void 0:e.time),onChange:a,min:1,max:150,className:"w-fit",suffix:"seconds"})]})})]})},Fs=({initialValues:e,currentValues:n,status:s,onChange:a,onStatusChange:r})=>{const[m,S]=o.useState(s[3]),[h,c]=o.useState(!1),[j,x]=o.useState([{name:"Normal Resp rate range",key:"resp_rate",min:e&&(e==null?void 0:e.lower_breath),max:e&&(e==null?void 0:e.upper_breath)},{name:"Normal heart rate range",key:"heart_rate",min:e&&(e==null?void 0:e.lower_heartbeat),max:e&&(e==null?void 0:e.upper_heartbeat)}]),[u,v]=o.useState([{name:"Detect Duration Threshold",key:"detect_threshold",min:0,max:15,warnPoint:5,value:e&&(e==null?void 0:e.sudden_duration)},{name:"Sensitivity",key:"sensitivity",min:1,max:99,value:e&&(e==null?void 0:e.sensitivity)}]),_=(w,N,D)=>{const E=[...j];E[w][N]=D,x(E);const q=E[w];console.log(`Changed ${q.name}:`,{parameter:q.key,min:q.min,max:q.max})};o.useEffect(()=>{const w={};j.forEach(N=>{N.key==="resp_rate"?(w.upper_breath=N.max,w.lower_breath=N.min):N.key==="heart_rate"&&(w.upper_heartbeat=N.max,w.lower_heartbeat=N.min)}),u.forEach(N=>{N.key==="detect_threshold"?w.sudden_duration=N.value:N.key==="sensitivity"&&(w.sensitivity=N.value)}),a(w)},[j,u,a]);const b=w=>{S(!m),r({event:3,status:!m})};return t.jsxs("div",{className:"p-2 bg-white",children:[t.jsx("div",{id:"item",className:"py-2",children:j.map((w,N)=>t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",style:{marginBottom:j.length-1===N?0:24},children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:w.name}),t.jsxs("div",{className:"flex items-center gap-2 w-fit",children:[t.jsx(ge,{type:"number",label:"Min",value:w.min,onChange:D=>_(N,"min",Number(D.target.value)),placeholder:"Minimum",size:"large",addonBefore:"Min",min:1}),"-",t.jsx(ge,{type:"number",label:"Max",value:w.max,onChange:D=>_(N,"max",Number(D.target.value)),placeholder:"Maximum",size:"large",addonBefore:"Max",min:2})]})]},w.key))}),t.jsxs("div",{id:"hint",className:"flex items-center gap-2 bg-Warning/10 w-fit p-1 rounded-sm px-2 my-2",children:[t.jsx(_e,{}),t.jsx("p",{className:"text-sm ",children:"Record events in sleep report when respiratory rate exceeding the normal range"})]}),t.jsxs("div",{id:"hint",className:"flex items-center gap-2 bg-Warning/10 w-fit p-1 rounded-sm px-2 my-2",children:[t.jsx(_e,{}),t.jsx("p",{className:"text-sm ",children:"Respiratory events are datas for sleep report,not alarms"})]}),t.jsx("hr",{className:"w-[50%] bg-slate-200 mx-auto my-8"}),t.jsx("div",{className:"w-full ",children:t.jsxs("div",{id:"item",className:"py-2",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Abnormal Resp & Heart Rate Alarm"}),t.jsx("span",{className:"text-text-secondary",children:"Alarm condition: no respiratory and heart rate detected when person alone in monitoring bed area."})]}),t.jsx(Ie,{value:m,onChange:b,className:"w-fit bg-slate-300"})]}),m&&t.jsxs("div",{className:"mt-4 flex gap-4 justify-between",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Detect Duration Threshold"}),t.jsx("span",{className:"text-text-secondary",children:"Weak warning time for vital signs, default to 10 minutes"})]}),t.jsx(ge,{type:"number",size:"large",value:u[0].value,min:u[0].min,max:u[0].max,className:"w-fit",suffix:"minute",onChange:w=>{const N=parseInt(w.target.value,10);isNaN(N)||(N<u[0].warnPoint?c(!0):c(!1),v(D=>D.map(E=>E.key==="detect_threshold"?{...E,value:N}:E)))}}),h&&t.jsx(we,{message:"Too short detection time may cause false alarm ",type:"warning",showIcon:!0,style:{marginTop:16}})]}),t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Sensitivity"}),t.jsx("span",{className:"text-text-secondary",children:"Higher value will increase both sensitivity and false alarms"})]}),t.jsx("div",{className:"px-4",children:t.jsx(ye,{marks:{0:"Low",[u[1].value]:`${u[1].value}`,100:"High"},value:u[1].value,min:u[1].min,max:u[1].max,onChange:w=>{v(N=>N.map(D=>D.key==="sensitivity"?{...D,value:w}:D))}})})]})]})]})})]})},Ws=({initialValues:e,currentValues:n,onChange:s,status:a,onStatusChange:r})=>{const[m,S]=o.useState(a[6]),[h,c]=o.useState([{name:"Off-Bed Duration Threshold",key:"offBed_threshold",value:e&&e.leave_detection_time},{name:"Time Range",key:"time_range",from:e.leave_detection_range&&e.leave_detection_range.split("-")[0]||"24:00",to:e.leave_detection_range&&e.leave_detection_range.split("-")[1]||"01:00"}]),j=(u,v,_)=>{const b=[...h];b[u][v]=_,c(b);const w=b[u];console.log(`Changed ${w.name}:`,{parameter:w.key,from:w.from,to:w.to})};o.useEffect(()=>{const u={};h.forEach(v=>{v.key==="offBed_threshold"?u.leave_detection_time=v.value:v.key==="time_range"&&(u.leave_detection_range=`${v.from}-${v.to}`)}),s(u)},[h,s]);const x=u=>{S(!m),r({event:6,status:!m})};return t.jsx("div",{className:"p-2 bg-white",children:t.jsx("div",{className:"w-full ",children:t.jsxs("div",{id:"item",className:"py-2",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Off-bed alarm"}),t.jsx("span",{className:"text-text-secondary",children:"Alarm condition: user leaves the bed during the monitoring time range and not return after duration threshold"})]}),t.jsx(Ie,{value:m,onChange:x,className:"w-fit bg-slate-300"})]}),m&&t.jsxs("div",{className:"mt-4 flex gap-4 justify-between",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full",children:[t.jsx("div",{className:"flex flex-col ",children:t.jsx("h2",{className:"text-lg font-semibold text-primary",children:h[0].name})}),t.jsx(ge,{type:"number",size:"large",value:h[0].value,min:h[0].min,max:h[0].max,className:"w-fit",suffix:"minute",onChange:u=>{const v=parseInt(u.target.value,10);c(_=>_.map(b=>b.key==="offBed_threshold"?{...b,value:v}:b))}})]}),t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full mt-2",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Time Range"}),t.jsxs("div",{className:"flex items-center gap-2 w-fit",children:[t.jsx(Je,{use12Hours:!1,format:"HH:mm",size:"large",onChange:(u,v)=>{j(1,"from",v)},value:Ke(h[1].from,"HH:mm")}),"-",t.jsx(Je,{use12Hours:!1,format:"HH:mm",size:"large",value:Ke(h[1].to,"HH:mm"),onChange:(u,v)=>{j(1,"to",v)}})]})]})]})]})})})},Ls=({initialValues:e,currentValues:n,onChange:s,status:a,onStatusChange:r})=>{const[m,S]=o.useState(a[9]),[h,c]=o.useState([{name:"Stay duration threshold",key:"stay_threshold",value:e&&e.entry_detection_time}]);o.useEffect(()=>{const x={};h.forEach(u=>{u.key==="stay_threshold"&&(x.entry_detection_time=u.value)}),s(x)},[h,s]);const j=x=>{S(!m),r({event:9,status:!m})};return t.jsx("div",{className:"p-2 bg-white",children:t.jsxs("div",{className:"w-full ",children:[t.jsxs("div",{id:"hint",className:"flex items-center gap-2 bg-Warning/10 w-fit p-1 rounded-sm px-2 my-2",children:[t.jsx(_e,{}),t.jsx("p",{className:"text-sm ",children:"Constraint: Only applicable to single person bathroom scenes."})]}),t.jsxs("div",{id:"item",className:"py-2",children:[t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Stay alarm"}),t.jsx("span",{className:"text-text-secondary",children:"Alarm condition: user enters bathroom for more than the time threshold."})]}),t.jsx(Ie,{value:m,onChange:j,className:"w-fit bg-slate-300"})]}),m&&t.jsx("div",{className:"mt-4 flex gap-4 justify-between",children:t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 w-full",children:[t.jsx("div",{className:"flex flex-col ",children:t.jsx("h2",{className:"text-lg font-semibold text-primary",children:h[0].name})}),t.jsx(ge,{type:"number",size:"large",value:h[0].value,className:"w-fit",suffix:"minute",onChange:x=>{const u=parseInt(x.target.value,10);c(v=>v.map(_=>_.key==="stay_threshold"?{..._,value:u}:_))}})]})})]})]})})},qs=({status:e,onStatusChange:n})=>{const[s,a]=o.useState(e[4]),r=m=>{a(!s),n({event:4,status:!s})};return t.jsx("div",{className:"p-2 bg-white",children:t.jsx("div",{className:"w-full ",children:t.jsx("div",{id:"item",className:"py-2",children:t.jsxs("div",{id:"feild",className:"flex flex-col gap-1 ",children:[t.jsxs("div",{className:"flex flex-col ",children:[t.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Inactivity alarm"}),t.jsx("span",{className:"text-text-secondary",children:"Alarm condition: no in-room or out-room event for more than 24 hours"})]}),t.jsx(Ie,{onChange:r,value:s,className:"w-fit bg-slate-300"})]})})})})};function Xs({isvisible:e,setVisible:n,device_id:s,elderly_id:a}){const r=()=>{n(!1)},m=[{key:"1",tab:"Device Configuration",content:t.jsx(Hs,{device_id:s,elderly_id:a}),icon:t.jsx(Et,{})},{key:"2",tab:"Edit Room",content:t.jsx(Bs,{device_id:s,elderly_id:a}),icon:t.jsx(At,{})}];return t.jsx(Oe,{open:e,onCancel:r,footer:null,centered:!0,width:"80vw",className:"device-configuration-modal my-6",children:t.jsx("div",{className:"min-h-[90vh] h-full p-4",children:t.jsx(Ae,{renderTabBar:(S,h)=>t.jsx("div",{className:"h-full",children:t.jsx(h,{...S})}),children:m.map(S=>t.jsx(Ae.TabPane,{tab:t.jsxs("span",{className:"flex items-center gap-2 !border-none",children:[S.icon,S.tab]}),children:S.content},S.key))})})})}function on(){var n;const{elderlyDetails:e}=o.useContext(nt);return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col gap-4 mt-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("h1",{className:"text-[24px] font-bold text-[#1B2559]",children:"Devices"})}),t.jsx("div",{id:"devices",className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6",children:(n=e==null?void 0:e.rooms)==null?void 0:n.filter(s=>s==null?void 0:s.device_no).map(s=>t.jsx(Ks,{device:s},s.id))})]})})}const Ks=({device:e})=>{const[n,s]=o.useState(!1),{elderlyDetails:a}=o.useContext(nt);return t.jsxs("div",{className:"flex flex-col gap-8 bg-white rounded-xl p-4 group hover:bg-slate-50 cursor-pointer",children:[t.jsx("div",{className:"flex items-center justify-between gap-4 w-full ",onClick:()=>s(!0),children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{id:"deviceImg",children:t.jsx("img",{src:Pe,alt:"device",width:84,height:84})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("h1",{className:"text-[22px] font-semibold text-[#1B2559]",children:e==null?void 0:e.name}),t.jsxs("div",{id:"status",className:"flex items-center gap-2",children:[t.jsx("div",{id:"dot",className:` ${e!=null&&e.is_device_bind?"bg-[#00c42e]":"bg-[#c42626]"} rounded-full animate-pulse w-[8px] h-[8px]`}),t.jsx("p",{className:"text-[16px] font-semibold text-primary capitalize",children:e!=null&&e.is_device_bind?"Online":"Offline"})]})]})]})}),t.jsx(Xs,{isvisible:n,setVisible:s,elderly_id:a._id,device_id:e==null?void 0:e.device_no})]})};export{on as default};
//# sourceMappingURL=DevicesTab-Cz6nddLG.js.map
