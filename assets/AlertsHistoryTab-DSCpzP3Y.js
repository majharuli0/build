import{r as l,S as B,u as R,j as t,ch as z,b6 as P,bV as A,gf as $,bW as C,ci as O,am as j,cj as V,gg as W,gh as Y,bK as K,ak as Q,g as U,B as G,C as y,b5 as J,f as X,a0 as q,ap as Z,bj as w,ar as ee}from"./index-CUtwfRLE.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},i=new s.Error().stack;i&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[i]="97631aa7-25a4-4968-a4cc-a2eb1c8abff1",s._sentryDebugIdIdentifier="sentry-dbid-97631aa7-25a4-4968-a4cc-a2eb1c8abff1")}catch{}function te(s){const{rolesFormatter:i}=l.useContext(B),x=R(),o=e=>{window.scrollTo(0,0),x(`/supporter/elderlies/elderly-profile/${e.elderly_id}?tab=overview`)},c={activeAlertsTableData:["alertName","alertType","elderlyName","roomName","incidentTime","alertLife","address","viewElderly"],recentlyClosedAlertsTableData:["alertName","incidentTime","alertLifetime","alertStatus","closedAt","closedBy","largeText","action2"],eventsTableData:["eventName","elderlyName","eventTime","eventTimeline","hospital","expandColumn","largeText","disabilityType","action"]},n={alertName:{title:"Notifications Name",render:e=>t.jsx(z,{data:e})},alertType:{title:"Notifications Type",render:e=>t.jsx("span",{children:P(e)})},elderlyName:{title:"User Name",dataIndex:"elderly_name",render:e=>t.jsx("span",{children:e})},roomName:{title:"Room Name",dataIndex:"room_name",render:e=>t.jsx("span",{children:e})},incidentTime:{title:"Observation Time",dataIndex:"created_at",render:e=>t.jsx("span",{className:"text-nowrap",children:A(e)})},alertLifetime:{title:"Notification Duration",render:e=>e!=null&&e.closed_at?t.jsx("span",{className:"text-nowrap",children:$(e==null?void 0:e.created_at,e==null?void 0:e.closed_at)}):t.jsx(C,{date:e==null?void 0:e.created_at})},alertLife:{title:"Notification Duration",dataIndex:"created_at",render:e=>t.jsx("span",{className:"text-nowrap",children:t.jsx(C,{date:e})})},alertStatus:{title:"Notification Status",render:e=>e!=null&&e.closed_at?t.jsx("span",{className:"text-nowrap",children:(e==null?void 0:e.status)==0?"True Notification":"False Notification"}):t.jsx(t.Fragment,{children:"--"})},address:{title:"Address",width:"230px",render:e=>t.jsx("span",{className:"!w-[230px] text-nowrap",children:e.address})},closedAt:{title:"Closed At",render:e=>e!=null&&e.closed_at?t.jsx("span",{className:"text-nowrap",children:A(e==null?void 0:e.closed_at)}):t.jsx(t.Fragment,{children:"--"})},closedBy:{title:"Closed By",render:e=>e!=null&&e.closed_at?t.jsxs("span",{className:"text-nowrap",children:[e.closed_by," (",i[e.closed_by_role]," )"]}):t.jsx(t.Fragment,{children:"--"})},eventName:{title:"Event Name",dataIndex:"eventName",render:e=>t.jsx("span",{children:e})},eventTime:{title:"Event Time",dataIndex:"time",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},eventTimeline:{title:"Event Timeline",dataIndex:"alertLifetime",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},disabilityType:{title:"Disability Type",dataIndex:"disabilityType",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},hospital:{title:"Hospital",dataIndex:"hospital",render:e=>t.jsx("span",{className:"text-nowrap",children:e.name.length>20?`${e.name.substring(0,20)}...`:e.name})},largeText:{title:()=>{switch(s){case"events":return"Additional Info";case"recentlyClosedAlert":return"Comments";default:return""}},render:e=>e!=null&&e.closed_at?t.jsx(O,{data:e==null?void 0:e.comment,title:"Comment"}):"--"},expandColumn:j.EXPAND_COLUMN,viewElderly:{render:e=>t.jsxs("span",{onClick:()=>o(e),className:"flex items-center transition-all duration-300 justify-center gap-2 text-sm font-medium text-text-primary hover:text-primary cursor-pointer p-2 rounded-md  text-center hover:bg-slate-100",children:["View ",t.jsx(V,{})]})},action:{title:"Action",render:e=>t.jsx(W,{row:e})},action2:{align:"right",render:e=>t.jsx(Y,{row:e,onlyFall:!0})}},[m,p]=l.useState(void 0);return l.useEffect(()=>{{const e=c.recentlyClosedAlertsTableData.map(d=>n[d]);p(e)}},[]),m}function se(){l.useState("");const[s,i]=l.useState([]),[x,o]=l.useState(!1),c=te("recentlyClosedAlert"),{elderlyDetails:n}=l.useContext(K),[m,p]=l.useState([]),[e,d]=l.useState(1),[f,N]=l.useState(10),[T,S]=l.useState(0),[b,_]=l.useState(null),[I,g]=l.useState(!1),[h,D]=l.useState(null),u=l.useCallback(()=>{g(!0),Q({to_date:"2024-11-30",from_date:U().format("YYYY-MM-DD"),is_resolved:h,elderly_id:n==null?void 0:n._id,page:e,limit:f,...b}).then(a=>{S(a.total),g(!1),p(a.data)}).catch(a=>{console.log(a),g(!1)})},[e,f,b,h,n==null?void 0:n._id]);l.useEffect(()=>{u()},[u]);function E(a){_(w(a)),d(1)}const L=a=>{d(a.current),N(a.pageSize)},H=a=>ee(a).label,v=a=>{const r=H(a);return(r==="Critical"||r==="Warning")&&a.is_resolved===!1};m.filter(v).length;const k=()=>{o(!0)},F={selectedRowKeys:s,onChange:a=>i(a),getCheckboxProps:a=>({disabled:!v(a)})},M=a=>{D(a),d(1)};return t.jsxs("div",{id:"Elderlies",className:"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6 mt-6",children:[t.jsxs("div",{id:"Elderlies_Header",className:"w-full flex justify-between",children:[t.jsx("h1",{className:"text-[24px] font-bold",children:"Notifications History"}),t.jsxs("div",{className:"flex gap-4 h-fit items-center",children:[s.length>0&&t.jsxs(G,{type:"primary",onClick:k,style:{backgroundColor:"#252F67",borderColor:"#252F67"},children:["Action (",s.length,")"]}),t.jsx(y,{theme:{},children:t.jsx(J,{size:"large",options:ae,onChange:a=>E(a)})}),t.jsx(y,{theme:{token:{colorPrimary:"#8086AC"}},children:t.jsx(X,{size:"large",style:{width:"120px",height:"40px",borderRadius:"10px !important"},onChange:(a,r)=>{M(a)},placeholder:"Filter by Alert Status",value:h,options:[{label:"All Alerts",value:null},{label:"Resolved",value:!0},{label:"Non-Resolved",value:!1}]})})]})]}),t.jsx(q.Provider,{value:{getLatestAlarmList:{getAlartsHistory:u}},children:t.jsx(y,{theme:{Table:{rowSelectedHoverBg:"#fff",rowSelectedBg:"#ba80f0"}},children:t.jsx(j,{rowSelection:F,columns:Array.isArray(c)?c:[],dataSource:m,rowKey:"_id",loading:I,pagination:{current:e,pageSize:f,total:T,showSizeChanger:!0,showQuickJumper:!0,showTotal:(a,r)=>`${r[0]}-${r[1]} of ${a} items`,pageSizeOptions:["10","20","50","100"]},onChange:L,locale:{emptyText:"No recent alerts"},className:"rounded-lg w-full",scroll:{x:700}})})}),t.jsx(Z,{openAlertCloseModal:x,setOpenAlertCloseModal:o,selectedAlert:s,getAlertListDatas:()=>{u(),i([])}})]})}const ae=[{label:"All Activity",value:"All Activity"},{label:"Critical",value:"Critical"},{label:"Warning",value:"Warning"},{label:"Informational",value:"Info"}];export{ae as alertHistorySegmentOptions,se as default};
//# sourceMappingURL=AlertsHistoryTab-DSCpzP3Y.js.map
