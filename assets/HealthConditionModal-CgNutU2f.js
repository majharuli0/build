import{bj as $,fQ as de,bl as ue,fR as y,fS as me,fT as fe,fU as xe,aH as U,bQ as W,fV as he,fW as ge,fX as X,fY as be,aP as Ce,r as d,J as pe,_ as g,j as o,X as E,eE as A,O as je,C as L,T as w,d as Se,af as Q,az as ve,e7 as Te}from"./index-BPWuOi3u.js";import{u as ye,e as ke,f as ze}from"./elderly-D9OqscP1.js";import{C as Be}from"./UseCustomContext-CeH7oMUk.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new s.Error().stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="7290f210-a927-4a87-9ea2-396556280328",s._sentryDebugIdIdentifier="sentry-dbid-7290f210-a927-4a87-9ea2-396556280328")}catch{}const Ee=s=>{const e=s!=null&&s.algorithm?$(s.algorithm):$(y),r=Object.assign(Object.assign({},de),s==null?void 0:s.token);return ue(r,{override:s==null?void 0:s.token},e,me)};function Ae(s){const{sizeUnit:e,sizeStep:r}=s,a=r-2;return{sizeXXL:e*(a+10),sizeXL:e*(a+6),sizeLG:e*(a+2),sizeMD:e*(a+2),sizeMS:e*(a+1),size:e*a,sizeSM:e*a,sizeXS:e*(a-1),sizeXXS:e*(a-1)}}const we=(s,e)=>{const r=e??y(s),a=r.fontSizeSM,m=r.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),Ae(e??s)),fe(a)),{controlHeight:m}),xe(Object.assign(Object.assign({},r),{controlHeight:m})))},u=(s,e)=>new U(s).setAlpha(e).toRgbString(),b=(s,e)=>new U(s).lighten(e).toHexString(),Ie=s=>{const e=W(s,{theme:"dark"});return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[6],6:e[5],7:e[4],8:e[6],9:e[5],10:e[4]}},Oe=(s,e)=>{const r=s||"#000",a=e||"#fff";return{colorBgBase:r,colorTextBase:a,colorText:u(a,.85),colorTextSecondary:u(a,.65),colorTextTertiary:u(a,.45),colorTextQuaternary:u(a,.25),colorFill:u(a,.18),colorFillSecondary:u(a,.12),colorFillTertiary:u(a,.08),colorFillQuaternary:u(a,.04),colorBgSolid:u(a,.95),colorBgSolidHover:u(a,1),colorBgSolidActive:u(a,.9),colorBgElevated:b(r,12),colorBgContainer:b(r,8),colorBgLayout:b(r,0),colorBgSpotlight:b(r,26),colorBgBlur:u(a,.04),colorBorder:b(r,26),colorBorderSecondary:b(r,19)}},Me=(s,e)=>{const r=Object.keys(he).map(m=>{const h=W(s[m],{theme:"dark"});return new Array(10).fill(1).reduce((C,l,x)=>(C[`${m}-${x+1}`]=h[x],C[`${m}${x+1}`]=h[x],C),{})}).reduce((m,h)=>(m=Object.assign(Object.assign({},m),h),m),{}),a=e??y(s);return Object.assign(Object.assign(Object.assign({},a),r),ge(s,{generateColorPalettes:Ie,generateNeutralColorPalettes:Oe}))};function Ne(){const[s,e,r]=Ce();return{theme:s,token:e,hashId:r}}const _e={defaultSeed:X.token,useToken:Ne,defaultAlgorithm:y,darkAlgorithm:Me,compactAlgorithm:we,getDesignToken:Ee,defaultConfig:X,_internalContext:be};function Le({setModalOpen:s,modalOpen:e,mode:r="create",diseases:a,custom_condition:m=[],elderly_id:h}){const{token:C}=_e.useToken(),{elderlyDetails:l,getElderlyDetails:x}=d.useContext(Be),[G,I]=d.useState((l==null?void 0:l.diseases)||[]);d.useRef((l==null?void 0:l.diseases)||[]);const[p,v]=d.useState(null),[k,J]=d.useState(!1),[O,Pe]=d.useState(!1),[Y,q]=d.useState("");d.useState("");const[T,M]=d.useState(""),[z,N]=d.useState(""),[_,P]=d.useState(""),R=d.useRef(null),V=d.useRef(null),Z=d.useRef(null);d.useEffect(()=>{e||v([]),I(l==null?void 0:l.diseases),v(H(l==null?void 0:l.comments))},[e]),d.useEffect(()=>{v(H(l==null?void 0:l.comments))},[l]);const{register:Re,handleSubmit:K,reset:ee,formState:{errors:De}}=pe(),te=t=>{},D=d.useCallback(t=>{ye({id:l==null?void 0:l._id,data:{diseases:t}}).then(()=>{g.custom(n=>o.jsx(E,{t:n,text:"Diseases have been updated!"})),x()}).catch(n=>{g.custom(i=>o.jsx(A,{t:i,title:"Error",text:n.message}))})},[l]),se=()=>r==="create"?"Create Health Condition":"Update Wellness Concerns";d.useEffect(()=>{var t,n;k&&((t=R.current)==null||t.focus()),O&&((n=V.current)==null||n.focus())},[k,O]);const oe=(t,n,i)=>{n(t.filter(c=>c!==i)),D(t.filter(c=>c!==i))},ne=(t,n,i)=>{n(t.filter(c=>c._id!==i._id)),ke({id:h,data:t,commentId:i._id}).then(c=>{g.custom(f=>o.jsx(E,{t:f,text:"Comment has been deleted!"})),x()}).catch(c=>{g.custom(f=>o.jsx(A,{t:f,title:"Error",text:c.message}))})},ae=(t,n)=>{n(t.target.value)};function re(){T&&z?(P(""),ze({id:h,data:{category:T,comment:z}}).then(t=>{g.custom(n=>o.jsx(E,{t:n,text:"Comment has been added!"})),x()}).catch(t=>{g.custom(n=>o.jsx(A,{t:n,title:"Error",text:t.message}))}),M(""),N("")):P("Please select category and write comment.")}const F=(t,n,i,c,f)=>{i&&t.indexOf(i)===-1&&n([...t,i]),D([...t,i]),c(!1),f("")},H=t=>{const n={};return t==null||t.forEach(i=>{const{category:c}=i;n[c]||(n[c]=[]),n[c].push(i)}),n},ie=(t,n,i,c,f,j,B,ce="")=>o.jsx("div",{className:"w-fit flex flex-wrap gap-1 h-auto",children:o.jsxs(L,{theme:{token:{colorPrimary:"#8086AC",fontSize:"15px"}},children:[t==null?void 0:t.map((S,Fe)=>o.jsx(w,{closable:!0,color:"#7E60BF",onClose:()=>oe(t,n,S),children:S},S)),i?o.jsx(Q,{ref:f,type:"text",size:"small",style:{width:120,marginTop:8,paddingLeft:"10px"},value:j,onChange:S=>ae(S,B),onBlur:()=>F(t,n,j,c,B),onPressEnter:()=>F(t,n,j,c,B)}):ce!=="customText"&&o.jsxs(w,{onClick:()=>c(!0),style:{background:C.colorBgContainer,borderStyle:"dashed",marginTop:8},children:[o.jsx(Te,{})," Create New"]})]})}),le={Allergy:"Environmental Sensitivities",Disability:"Movement Adaptations"};return o.jsx(je,{handleSubmit:K(te),modalOPen:e,setModalOpen:s,title:se(),buttonText:r==="create"?"Create":"Update",isBottomButtomShow:!1,onclose:()=>{ee()},children:o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4 flex flex-col gap-2",children:[o.jsxs("p",{className:"text-base font-semibold text-[#7E60BF] leading-none flex items-center gap-2",children:[o.jsx("div",{id:"dot",className:"w-2 h-2 bg-[#7E60BF] rounded-full"})," ","Sensitivity Indicators"]}),ie(G||[],I,k,J,R,Y,q,"diseaseText")]}),p&&Object.keys(p).map((t,n)=>o.jsxs("div",{className:"mb-4",children:[o.jsxs("p",{className:`text-base font-semibold ${t==="Allergies"?"text-[#4ca6cf]":t==="Disabilities"?"text-[#f37f13]":"text-[#0a0a2b]"}  leading-none flex items-center gap-2 mb-2`,children:[o.jsx("div",{id:"dot",className:`w-2 h-2 ${t==="Allergy"?"bg-[#4ca6cf]":t==="Disability"?"bg-[#f37f13]":"bg-[#0a0a2b]"}  rounded-full`})," ",le[t]??t]}),Array.isArray(p[t])?p[t].map((i,c)=>o.jsx(L,{theme:{token:{colorPrimary:"#8086AC",fontSize:"15px"}},children:o.jsx(w,{closable:!0,color:i.category==="Allergy"?"#4ca6cf":i.category==="Disability"?"#f37f13":"#0a0a2b",onClose:()=>ne(p[t],f=>{v(j=>({...j,[t]:f}))},i),children:i.comment})},c)):o.jsx("p",{children:"No items available for this category"})]},n)),o.jsxs("div",{className:"mb-4 flex flex-col gap-1",children:[o.jsx("h3",{children:"Add New Comments"}),o.jsx(Se,{placeholder:"Select a category",style:{width:"100%"},size:"large",onChange:M,value:T||null,options:[{value:"Allergy",label:"Environmental Sensitivities"},{value:"Disability",label:"Movement Adaptations"},{value:"Custom Text",label:"Custom Text"}]}),o.jsxs("div",{className:"flex mb-2",children:[o.jsx(Q,{ref:Z,value:z,onChange:t=>N(t.target.value),placeholder:"Enter comment",style:{flex:1,paddingLeft:"10px"}}),o.jsx(ve,{onClick:re,type:"primary",style:{marginLeft:8,backgroundColor:"#252f67",width:"100px"},children:"Add"})]}),_&&o.jsx("p",{className:"text-red-500",children:_})]})]})})}export{Le as H};
//# sourceMappingURL=HealthConditionModal-CgNutU2f.js.map
