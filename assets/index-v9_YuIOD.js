import{W as T,z as k,u as m,s as _,r as l,X as E,Y as p,Z as v,_ as x,j as f,$ as R,a0 as U,q as r,a1 as I}from"./index-Wh59kkdA.js";try{let o=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new o.Error().stack;a&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[a]="868d4165-90d3-4085-9ca7-68e672d09b7c",o._sentryDebugIdIdentifier="sentry-dbid-868d4165-90d3-4085-9ca7-68e672d09b7c")}catch{}function j(){const o=T();k();const a=m(),{setStoreRole:g,setUser:b}=_(),[h,y]=l.useState(!0),n=o.id.split("-"),i=()=>{const e=r.get("user"),s=I();r.get("rootToken")||(r.set("rootToken",s),r.set("rootRole",e==null?void 0:e.role))},d=e=>v(e),w=e=>{const s={super_admin:"/support-agent/dashboard/",supports_agent:"/supporter/support-agent/dashboard",nurse:"/supporter/nurse/dashboard",end_user:"/supporter/end-user/dashboard",elderly:`/supporter/elderlies/elderly-profile/${n[1]}?tab=overview`};a(s[e]||"/support-nurnt/dashboard")},u=e=>{r.set("user",e),r.set("mainRole",e.role),r.set("role",e.role),g({role:e.role}),b({role:e.role}),setTimeout(()=>{y(!1),w(e.sub_role||e.role)},800)},c=l.useCallback(async()=>{var e;try{const s=await E({id:n[0]});if(!((e=s==null?void 0:s.data)!=null&&e.role))throw new Error("Invalid role");if(n.length>=2){const t=await p({id:n[0],params:{role:s.data.role==="nursing_home"?"nurse":"supports_agent"}});i(),d(t.data.access_token),u({...t.data,sub_role:"elderly"})}else{const t=await p({id:n[0]});i(),d(t.data.access_token),u(s.data)}}catch(s){console.error("Error fetching user profile:",s),x.custom(t=>f.jsx(R,{t,title:"Error",text:s.response.data.message})),a(-1)}},[o.id]);if(l.useEffect(()=>{c()},[c]),h)return f.jsx(U,{loaderTitle:"Loading User Profile"})}export{j as default};
//# sourceMappingURL=index-v9_YuIOD.js.map
