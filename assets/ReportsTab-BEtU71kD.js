import{r as s,d as g,j as e,B as O,eN as F,eO as x}from"./index-Ld8eeOSM.js";import{h as d,E as N}from"./html2canvas.esm-Bj6TyOj0.js";import"./FileSaver.min-DWvDXJTG.js";import H from"./DurationStatistic-DI73R955.js";import L from"./DurationDistribution-C7U9Sj0I.js";import I from"./EfficiencyStatistic-B-2969pq.js";import U from"./DeepSleepPercentageDistribution-DPKBz33m.js";import V from"./DeepSleepPercentageStatistic-CMmWFxWa.js";import G from"./EfficiencyDistribution-CHSZJwpr.js";import $ from"./ApneaIndexStatistic-D4RzjUcF.js";import z from"./NumberOfBedExitStatistic-B0q80Wtg.js";import Y from"./DistributionOfBedExitTimes-DoA4egJE.js";import M from"./TimeToFallAsleepStatistic-BBwNVWBB.js";import K from"./DistributionOfTimeToFallAsleep-Bxkr4Rz3.js";import _ from"./DistributionOfDailyRoutine-Dr1t7LN0.js";import q from"./RespiratoryRate-Cth6H6W4.js";import J from"./HeartRate-xMImsERD.js";import Q from"./HeartRateAnnomalyStatistic-D5tulNOp.js";import X from"./HeartRateDistribution-DQwC-eHO.js";import Z from"./BreathRateDistribution-BDsPgUGR.js";import{C as b}from"./UseCustomContext-D-S0pfCg.js";import{C as S}from"./index-CfZil9Z9.js";import{C as y}from"./Collapse-BCYRt4_j.js";import{D as ee}from"./index-BDIzWp5q.js";import"./ElderlyProfile-CrtK9Wa0.js";import"./elderly-CGUyYnq-.js";import"./HomeOutlined-BtE3H2gK.js";import"./PullRequestOutlined-DPtI30Oy.js";import"./index-OX5GbqSp.js";import"./PlusOutlined-CnUix4IP.js";import"./mockData-Bpurtgqo.js";import"./barChart-D-UsRNi-.js";import"./index-Cl4RW0lt.js";import"./helper-DCfXeMRp.js";import"./Template-BakD2IIL.js";import"./WeeklyMonthlyPicker-B1PYq-jt.js";import"./SwapRightOutlined-B1VRqOqg.js";import"./weekOfYear-W6JkaXIJ.js";import"./utiles-ybXcNPuc.js";import"./index-Chfts7-v.js";import"./index-B715Wl6A.js";import"./index-DEgoK5YS.js";import"./index-yFl0h3r9.js";import"./index-nQU6YEzj.js";import"./scatterChart-BKlrCKCH.js";import"./RateChart-TnnU4EER.js";import"./mockData-DnyFJQLN.js";import"./Cascader-BP7SLYND.js";import"./index-aRHl6h0N.js";import"./weekday-DoT8FXJ1.js";const{RangePicker:te}=ee,{Panel:ie}=y,{SHOW_CHILD:ae}=S;function it(){const[re,D]=s.useState([]),[f,v]=s.useState(g().subtract(1,"day")),[h,j]=s.useState(g().subtract(31,"day")),[p,R]=s.useState([]),r=s.useRef(null),B=s.useContext(b),[C,l]=s.useState(!1),w=t=>{D(t),j(t[0]),v(t[1]),console.log(f,h)},k=async()=>{if(r.current){l(!0);try{const t=await d(r.current),i=document.createElement("a");i.href=t.toDataURL("image/png"),i.download="reports.png",i.click()}catch(t){console.error("Error exporting as image:",t)}finally{l(!1)}}},A=async()=>{if(r.current){l(!0);try{const t=await d(r.current,{scale:2,useCORS:!0}),i=t.toDataURL("image/png"),a=`
          <svg xmlns="http://www.w3.org/2000/svg" width="${t.width}" height="${t.height}">
            <image href="${i}" width="${t.width}" height="${t.height}" />
          </svg>
        `,c=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(c),o=document.createElement("a");o.href=n,o.download="reports.svg",o.click(),URL.revokeObjectURL(n)}catch(t){console.error("Error exporting as SVG:",t)}finally{l(!1)}}},E=async()=>{if(r.current){l(!0);try{const t=await d(r.current,{scale:2,useCORS:!0}),i=t.toDataURL("image/png"),a=new N("p","mm","a4"),c=a.internal.pageSize.getWidth(),n=a.internal.pageSize.getHeight(),o=c,u=t.height*o/t.width;let m=0;for(;m<u;)a.addImage(i,"PNG",0,m?-m:0,o,u),m+=n,m<u&&a.addPage();a.save("reports.pdf")}catch(t){console.error("Error exporting as PDF:",t)}finally{l(!1)}}},P=[{value:"sleep",label:"Sleep",children:[{label:"Sleep Duration Statistic",value:"sleepDurationStatistic"},{label:"Sleep Duration Distribution",value:"sleepDurationDistribution"},{label:"Efficiency Statistic",value:"efficiencyStatistic"},{label:"Deep Sleep Percentage Distribution",value:"deepSleepPercentageDistribution"},{label:"Deep Sleep Percentage Statistic",value:"deepSleepPercentageStatistic"},{label:"Efficiency Distribution",value:"efficiencyDistribution"},{label:"Apnea Index Statistic",value:"apneaIndexStatistic"},{label:"Apnea Index Distribution",value:"apneaIndexDistribution"},{label:"Distribution of bed exit times",value:"distributionOfBedExitTimes"},{label:"Number of Bed Exit Statistic",value:"numberOfBedExitStatistic"},{label:"Distribution of time to fall asleep",value:"distributionOfTimeToFallAsleep"},{label:"Time to Fall Asleep Statistic",value:"timeToFallAsleepStatistic"},{label:"Distribution of daily routine",value:"distributionOfDailyRoutine"}]},{value:"health",label:"Health",children:[{label:"Breath Rate",value:"respiratoryRate"},{label:"Heart Rate",value:"heartRate"},{label:"Heart Rate Anomaly Statistic",value:"heartRateAnnomalyStatistic"},{label:"Heart Rate Distribution",value:"heartRateDistribution"},{label:"Breath Rate Distribution",value:"breathRateDistribution"}]}],W=t=>{const i=t.map(a=>a[a.length-1]);console.log("Flattened selected values:",i),R(i)},T=t=>{if(p.length===0)return!0;const i=p.includes(t);return console.log(`Checking if ${t} is selected:`,i),i};return e.jsx(e.Fragment,{children:e.jsxs("div",{id:"reports",className:"flex flex-col gap-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:"Reports"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs(O,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:[e.jsx(te,{showTime:!1,style:{width:"200px",borderRadius:"10px"},size:"large",placeholder:["Pick Data Range (Start)","End"],format:"YYYY-MM-DD",onChange:(t,i)=>{w(i)}}),e.jsx(S,{style:{width:"300px"},options:P,placeholder:"Select Specific Analysis",multiple:!0,maxTagCount:"responsive",size:"large",showCheckedStrategy:ae,onChange:W,defaultValue:p})]}),e.jsxs(F.Button,{size:"large",style:{backgroundColor:"#fff",width:"fit-content",borderRadius:"10px"},loading:C,menu:{items:[{label:"Export as SVG",key:"1"},{label:"Export as PDF",key:"2"}],onClick:t=>{t.key==="1"?A():t.key==="2"&&E()},icon:e.jsx(x,{})},onClick:k,children:[e.jsx(x,{}),"Export Reports"]})]})]}),e.jsx(b.Provider,{value:{...B,chartFromDate:h,chartToDate:f},children:e.jsx("div",{id:"reports",ref:r,children:e.jsx(y,{defaultActiveKey:["0"],expandIconPosition:"right",children:oe.map((t,i)=>e.jsx(ie,{style:{backgroundColor:"transparent"},header:e.jsxs("div",{className:"flex items-center justify-between",style:{border:"none",padding:0},children:[e.jsx("span",{children:t.groupName||"Unnamed Group"}),e.jsx("div",{className:"flex-grow mx-2",style:{borderBottom:"none"}})]}),children:e.jsx("div",{className:"gap-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2",children:t.components.map(({id:a,component:c,fullWidth:n},o)=>T(a)&&e.jsx("div",{className:n?"col-span-2":"",children:c},o))})},i))})})})]})})}const oe=[{groupName:"Sleep",components:[{id:"sleepDurationStatistic",component:e.jsx(H,{isSummaryBtn:!1}),fullWidth:!1},{id:"sleepDurationDistribution",component:e.jsx(L,{isSummaryBtn:!1}),fullWidth:!1},{id:"efficiencyStatistic",component:e.jsx(I,{isSummaryBtn:!1}),fullWidth:!1},{id:"deepSleepPercentageDistribution",component:e.jsx(U,{isSummaryBtn:!1}),fullWidth:!1},{id:"deepSleepPercentageStatistic",component:e.jsx(V,{isSummaryBtn:!1}),fullWidth:!1},{id:"efficiencyDistribution",component:e.jsx(G,{isSummaryBtn:!1}),fullWidth:!1},{id:"apneaIndexStatistic",component:e.jsx($,{isSummaryBtn:!1}),fullWidth:!1},{id:"numberOfBedExitStatistic",component:e.jsx(z,{isSummaryBtn:!1}),fullWidth:!1},{id:"distributionOfBedExitTimes",component:e.jsx(Y,{isSummaryBtn:!1}),fullWidth:!0},{id:"timeToFallAsleepStatistic",component:e.jsx(M,{isSummaryBtn:!1}),fullWidth:!1},{id:"distributionOfTimeToFallAsleep",component:e.jsx(K,{isSummaryBtn:!1}),fullWidth:!1},{id:"distributionOfDailyRoutine",component:e.jsx(_,{isSummaryBtn:!1}),fullWidth:!0}]},{groupName:"Health",components:[{id:"respiratoryRate",component:e.jsx(q,{isSummaryBtn:!1}),fullWidth:!0},{id:"heartRate",component:e.jsx(J,{isSummaryBtn:!1}),fullWidth:!0},{id:"heartRateAnnomalyStatistic",component:e.jsx(Q,{isSummaryBtn:!1}),fullWidth:!1},{id:"heartRateDistribution",component:e.jsx(X,{isSummaryBtn:!1}),fullWidth:!1},{id:"breathRateDistribution",component:e.jsx(Z,{isSummaryBtn:!1}),fullWidth:!1}]}];export{it as default};
