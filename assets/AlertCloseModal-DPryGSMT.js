import{aw as j,j as a,M as b,b8 as l,a5 as u,_ as x,E as v,aA as g}from"./index-UQ13cnrG.js";import{b as C,c as y}from"./CreateAndEditModal-CeLYwWc0.js";import{b as d,t as w,a as N}from"./helper-DA8PoIl3.js";import{m as T}from"./elderlySupport-o7Ke1zCi.js";const S="/assets/AlertBGABS-DeBC3eCX.svg";function k({openAlertCloseModal:c,setOpenAlertCloseModal:t,selectedAlert:s=[],getAlertListDatas:p}){const{handleSubmit:f,control:n,reset:r,formState:{errors:e}}=j({defaultValues:{status:"",comment:""}});async function h(o){console.log(o),await T({id:s==null?void 0:s._id,data:{status:o.status.value,comment:o.comment}}).then(m=>{x.custom(i=>a.jsx(v,{t:i,text:"Alert has been marked as resolved!"})),p()}).catch(m=>{x.custom(i=>a.jsx(g,{t:i,title:"Error",text:m.message}))}),r(),t(!1)}return a.jsx(b,{open:c,onCancel:()=>{t(!1),r()},footer:null,children:a.jsxs("div",{id:"alertCloseModalHeader",children:[a.jsx("div",{id:"alertCardOverview",children:a.jsxs("div",{id:"alertItem",className:`rounded-2xl ${d(s==null?void 0:s.event)==="Critical"?"bg-red-500":d(s==null?void 0:s.event)==="Warning"?"bg-yellow-500":"bg-blue-500"} p-4 w-full !flex justify-between items-center`,children:[a.jsx("div",{id:"leftSide",className:"z-50",children:a.jsx("div",{id:"alertItemHeader",children:a.jsxs("div",{id:"alertItemTitleAndDescription",className:"flex flex-col gap-4",children:[a.jsxs("div",{id:"time",className:"flex gap-2",children:[a.jsx("span",{className:"bg-white font-semibold p-1 px-2 rounded-full text-text-primary flex items-center gap-2",children:w(s==null?void 0:s.created_at)}),a.jsx("span",{className:"bg-white font-semibold p-1 px-2 rounded-full text-text-primary",children:N(s==null?void 0:s.created_at)})]}),a.jsx("div",{id:"alertItemTitleAndDescription",children:a.jsx("h1",{className:"text-xl font-bold text-white m-0",children:s==null?void 0:s.event_name})})]})})}),a.jsx("img",{src:S,alt:"",className:"absolute top-0 right-0 w-[280px]"})]})}),a.jsx("div",{id:"alertsConfirmationAndComment",className:"mt-4 px-4",children:a.jsxs("form",{onSubmit:f(h),children:[a.jsx(l,{name:"status",control:n,rules:{required:"Please select alert status"},render:({field:o})=>a.jsx(C,{label:"Alert Status",error:e.status,placeholder:"Select Alert Status",options:[{value:!0,label:"True Alert"},{value:!1,label:"False Alert"}],value:o.value,...o})}),a.jsx(l,{name:"comment",control:n,rules:{},render:({field:o})=>a.jsx(y,{label:"Comment",placeholder:"Enter your comment",error:e.comment,...o})},"comment"),a.jsxs("div",{id:"alertCloseModalFooter",className:"py-4 flex  gap-4",children:[a.jsx(u,{type:"secondary",style:{width:"100%",background:"#F5F5F5",color:"#1B2559"},onClick:()=>{t(!1),r()},children:"Close"}),a.jsx(u,{type:"primary",htmlType:"submit",className:"w-full",children:"Mark as Done"})]})]})})]})})}export{S as A,k as a};
