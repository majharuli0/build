import{r as s,bk as N,bj as w,gB as C,j as e,t as _,gD as D,h1 as I}from"./index-DZqkZGR9.js";import T from"./LiveRateChart-BkbN-oSU.js";try{let a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new a.Error().stack;t&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[t]="f030c8f8-f3e2-4909-910a-f514846c68ca",a._sentryDebugIdIdentifier="sentry-dbid-f030c8f8-f3e2-4909-910a-f514846c68ca")}catch{}function k(){var h,v,g;const{elderlyDetails:a,sleepData:t}=s.useContext(N),{deviceData:o}=s.useContext(w),i=a==null?void 0:a.deviceId,[y,u]=s.useState({time:[],heartRate:[],breathRate:[]}),[d,l]=s.useState(null),f=s.useRef(null),m=s.useRef(Date.now()),b=s.useCallback(r=>{if(f.current===r)return;f.current=r,m.current=Date.now();const n=C(r);l(n);const j=new Date().toLocaleTimeString();u(p=>{let x=[...p.time],c=[...p.heartRate];if(c.length===0){const R=Math.max(0,n.heartRateValue+(Math.random()<.5,0));x.push(j),c.push(R)}return x.push(j),c.push(n.heartRateValue),{time:x.slice(-30),heartRate:c.slice(-30)}})},[]);return s.useEffect(()=>{const r=setInterval(()=>{Date.now()-m.current>5e3&&(u({time:[],heartRate:[]}),l(null),f.current=null)},500);return()=>clearInterval(r)},[]),s.useEffect(()=>{if(!(i!=null&&i.length)){l(null);return}for(const r of[i]){if(!o[r])continue;const{heartBreath:n}=o[r];if(n){b(n);return}}l(null)},[o]),e.jsxs("div",{className:"w-full bg-white rounded-2xl p-6 flex flex-col gap-6 h-auto",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary flex items-center gap-2",children:["Current Heart Activity"," ",e.jsx(_,{title:"This feature functions only if the user is in the monitoring bed.",className:"cursor-pointer",children:e.jsx(D,{size:"18px"})})]}),e.jsx("div",{id:"LiveRate",className:"flex flex-col gap-1 pl-3 mb-2",children:e.jsxs("div",{className:"text-4xl font-bold flex items-center gap-2",style:{color:"#D76C82"},children:[(d==null?void 0:d.heartRateValue)??"--"," ",e.jsx("span",{className:"text-secondary/40",children:"BPM"}),e.jsx(I,{color:"#D76C82",size:24})]})}),e.jsx(T,{data:y,color:"#D76C82",type:"heartRate"}),e.jsx("div",{id:"footer",children:e.jsxs("div",{className:"flex justify-evenly items-center",children:[e.jsxs("div",{id:"avgRate",className:"flex flex-col items-center justify-center gap-0",children:[e.jsx("div",{className:"text-3xl text-primary font-bold",children:((h=t==null?void 0:t.heart_rate_vo)==null?void 0:h.avg)??"--"}),e.jsx("div",{className:"text-sm text-gray-500 font-semibold",children:"Average"})]}),e.jsxs("div",{id:"minRate",className:"flex flex-col items-center justify-center gap-0",children:[e.jsxs("div",{className:"text-3xl text-primary font-bold",children:[" ",((v=t==null?void 0:t.heart_rate_vo)==null?void 0:v.min)??"--"]}),e.jsx("div",{className:"text-sm text-gray-500 font-semibold",children:"Minimum"})]}),e.jsxs("div",{id:"maxRate",className:"flex flex-col items-center justify-center gap-0",children:[e.jsxs("div",{className:"text-3xl text-primary font-bold",children:[" ",((g=t==null?void 0:t.heart_rate_vo)==null?void 0:g.max)??"--"]}),e.jsx("div",{className:"text-sm text-gray-500 font-semibold",children:"Maximum"})]})]})})]})}export{k as default};
//# sourceMappingURL=LiveHeartRate-daMfmA5i.js.map
