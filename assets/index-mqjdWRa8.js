import{U as k,T as m,r,a as U,u as b,aG as x,aH as w,l as o,j as E,aI as L,Q as P,aJ as R}from"./index-DwMZRLJz.js";function j(){const t=k(),l=m(),{role:n}=l.state||{},[i,u]=r.useState(!0);console.log(t.id,n);const{setStoreRole:c,setUser:p}=U(),s=b(),g=()=>{let e=o.get("user");const h=P();o.get("rootToken")||(o.set("rootToken",h),o.set("rootRole",e.role))},d=e=>{R(e)},a=r.useCallback(()=>{x(t.id).then(e=>{e.data&&T(e.data)}).catch(e=>{console.log(e)}),w(t.id).then(e=>{console.log(e),g(),d(e.data.access_token)}).catch(e=>{console.log(e)})},[n,t.id]),f=e=>{e=="super_admin"?s("/support-agent/dashboard/"):e=="supports_agent"?s("/supporter/support-agent/dashboard"):e=="nurse"?s("/supporter/nurse/dashboard"):e=="end_user"?s("/supporter/end-user/dashboard"):s("/support-nurnt/dashboard")};function T(e){o.set("user",e),o.set("mainRole",e.role),o.set("role",e.role),c({role:e.role}),p({role:e.role}),setTimeout(()=>{u(!1),f(e==null?void 0:e.role)},1500)}if(r.useEffect(()=>{a()},[a]),i)return E.jsx(L,{loaderTitle:"Loading User Profile"})}export{j as default};
