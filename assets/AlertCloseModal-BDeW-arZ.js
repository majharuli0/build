import{az as g,j as a,M as C,bb as c,a8 as f,_ as h,H as w,aD as y}from"./index-BKgsd5ix.js";import{b as N,c as S}from"./CreateAndEditModal-Bto4Mpi0.js";import{g as l,t as T,f as D}from"./helper-Q2f27-hf.js";import{m as B}from"./elderlySupport-B4jBvukT.js";const F="/assets/AlertBGABS-DeBC3eCX.svg";function M({openAlertCloseModal:p,setOpenAlertCloseModal:t,selectedAlert:e=[],getAlertListDatas:b}){var m,d,u;const{handleSubmit:j,control:i,reset:r,formState:{errors:n}}=g({defaultValues:{status:"",comment:""}});async function v(s){await B({id:e==null?void 0:e._id,data:{status:s.status.value,comment:s.comment}}).then(x=>{h.custom(o=>a.jsx(w,{t:o,text:"Alert has been marked as resolved!"})),b()}).catch(x=>{h.custom(o=>a.jsx(y,{t:o,title:"Error",text:x.message}))}),r(),t(!1)}return a.jsx(C,{open:p,onCancel:()=>{t(!1),r()},footer:null,children:a.jsxs("div",{id:"alertCloseModalHeader",children:[a.jsx("div",{id:"alertCardOverview",children:a.jsxs("div",{id:"alertItem",className:`rounded-2xl overflow-hidden w-full ${((m=l(e))==null?void 0:m.label)==="Critical"?"bg-red-500":((d=l(e))==null?void 0:d.label)==="Warning"?"bg-yellow-500":"bg-blue-500"} p-4 w-full !flex justify-between items-center`,children:[a.jsx("div",{id:"leftSide",className:"z-50",children:a.jsx("div",{id:"alertItemHeader",children:a.jsxs("div",{id:"alertItemTitleAndDescription",className:"flex flex-col gap-4",children:[a.jsxs("div",{id:"time",className:"flex gap-2",children:[a.jsx("span",{className:"bg-white font-semibold p-1 px-2 rounded-full text-text-primary flex items-center gap-2",children:T(e==null?void 0:e.created_at)}),a.jsx("span",{className:"bg-white font-semibold p-1 px-2 rounded-full text-text-primary",children:D(e==null?void 0:e.created_at)})]}),a.jsx("div",{id:"alertItemTitleAndDescription",children:a.jsx("h1",{className:"text-xl font-bold text-white m-0",children:(u=l(e))==null?void 0:u.title})})]})})}),a.jsx("img",{src:F,alt:"",className:"absolute top-0 right-0 w-[280px]"})]})}),a.jsx("div",{id:"alertsConfirmationAndComment",className:"mt-4 px-4",children:a.jsxs("form",{onSubmit:j(v),children:[a.jsx(c,{name:"status",control:i,rules:{required:"Please select alert status"},render:({field:s})=>a.jsx(N,{label:"Alert Status",error:n.status,placeholder:"Select Alert Status",options:[{value:!0,label:"True Alert"},{value:!1,label:"False Alert"}],value:s.value,...s})}),a.jsx(c,{name:"comment",control:i,rules:{},render:({field:s})=>a.jsx(S,{label:"Comment",placeholder:"Enter your comment",error:n.comment,...s})},"comment"),a.jsxs("div",{id:"alertCloseModalFooter",className:"py-4 flex  gap-4",children:[a.jsx(f,{type:"button",style:{width:"100%",background:"#F5F5F5",color:"#1B2559"},onClick:()=>{t(!1),r()},children:"Close"}),a.jsx(f,{type:"primary",htmlType:"submit",className:"w-full",children:"Mark as Done"})]})]})})]})})}export{M as A,F as a};
