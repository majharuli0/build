import{r as m,a1 as g,j as t,fx as h}from"./index-B9uzjFUT.js";import j from"./TimelineGraph-m3ChR93T.js";import{T as A}from"./Template-DYb-mRS6.js";import{g as c}from"./index-BCJ9kT-v.js";import{C as _}from"./UseCustomContext-CIVOuH2a.js";import{l as x}from"./helper-Q2f27-hf.js";import"./index-BIXB-bsF.js";import"./WeeklyMonthlyPicker-BBNkKcdc.js";function B(){const{sleepData:e,elderlyDetails:a}=m.useContext(_),[o,f]=m.useState([]),{sleepEventsType:y,sleepEventsColor:N}=m.useContext(g),S={title:"Sleep Timeline Summary",pickerTypes:["day","range"],chartType:"multibar",dataType:"duration",color:"#FF725E",icon:t.jsx(c,{}),apisProps:{endpoint:h,query:{uids:a==null?void 0:a.deviceId}}};return m.useEffect(()=>{var T;if(!e)return;const i=(T=e==null?void 0:e.statistical_data)==null?void 0:T.reduce((s,n)=>{const d=new Date(n.start_time),l=(new Date(n.end_time)-d)/(1e3*60),r=y[n.status];return s[r]||(s[r]={duration:0,color:N[r]}),s[r].duration+=l,s},{}),p=Object.entries(i||{}).map(([s,{duration:n,color:d}])=>{const u=Math.floor(n/60),l=Math.floor(n%60);return{name:s,duration:`${u}hr ${l}m`,color:d}});f([...p])},[e]),t.jsx(t.Fragment,{children:t.jsxs(A,{title:"Sleep Timeline",color:"#FF725E",icon:t.jsx(c,{}),isDataAnalysis:!1,headerClassName:"!text-2xl",summaryProps:S,children:[t.jsx(j,{statisticalData:e==null?void 0:e.statistical_data,enterBedTime:x(e==null?void 0:e.get_bed_idx),getupAfterTime:x(e==null?void 0:e.leave_bed_idx),noDataText:"No Data Detected for Today"}),t.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-center",children:[o.map((i,p)=>t.jsx(v,{time:i.duration,ItemName:i.name,color:i.color},p)),e&&(e==null?void 0:e.leave_bed_count)&&t.jsx(v,{time:(e==null?void 0:e.leave_bed_count)+"x",ItemName:"Leave bed after sleep",color:"#FF725E"})]})]})})}const v=({time:e,ItemName:a,color:o})=>t.jsxs("div",{className:"flex p-[4px] pr-4 items-center gap-2 rounded-xl  ",style:{backgroundColor:o},children:[t.jsx("span",{className:"text-[17px] p-2 py-1 font-bold bg-white rounded-[9px] text-primary",children:e}),t.jsx("span",{className:"text-[15px] font-medium text-white leading-[1.2]",children:a})]}),P=[{startTime:"2024-11-03 03:06:55",endTime:"2024-11-03 03:30:25",status:"3"},{startTime:"2024-11-03 03:30:25",endTime:"2024-11-03 03:35:22",status:"2"},{startTime:"2024-11-03 03:35:22",endTime:"2024-11-03 04:09:06",status:"1"},{startTime:"2024-11-03 04:09:06",endTime:"2024-11-03 04:39:51",status:"0"},{startTime:"2024-11-03 04:39:51",endTime:"2024-11-03 05:02:40",status:"1"},{startTime:"2024-11-03 05:02:40",endTime:"2024-11-03 05:12:35",status:"0"},{startTime:"2024-11-03 05:12:35",endTime:"2024-11-03 05:44:20",status:"1"},{startTime:"2024-11-03 05:44:20",endTime:"2024-11-03 05:54:15",status:"0"},{startTime:"2024-11-03 05:54:15",endTime:"2024-11-03 06:19:03",status:"1"},{startTime:"2024-11-03 06:19:03",endTime:"2024-11-03 06:29:58",status:"0"},{startTime:"2024-11-03 06:29:58",endTime:"2024-11-03 07:59:15",status:"1"}],$=[{ts:"2024-11-03 03:35:22",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 03:39:21",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 03:43:18",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 03:45:17",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 03:47:16",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 05:50:17",eventName:"High Breathing",eventType:11},{ts:"2024-11-03 06:58:44",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 07:02:42",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 07:04:41",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 07:49:19",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 07:58:15",eventName:"Sleep Apnea",eventType:13}];export{$ as alarmEvents,B as default,P as statisticalData};
