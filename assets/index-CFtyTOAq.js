import{r as a,l as L,f as ee,u as U,j as n,A as te,C as q,d as ne,g as B,h as O,i as se,k as ae,m as re,n as oe,o as le,p as ie,q as ce,s as de,t as ue}from"./index-DaElXOnM.js";import{D as xe}from"./index-CRmJMHMl.js";import{A as me}from"./AdminSupportAgentTableAction-iEYNPD2L.js";import{S as _e}from"./index-hkf_HuP0.js";import"./index-LTHIbnts.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},r=new s.Error().stack;r&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[r]="75eb989a-c5fd-4f1e-a434-f135c970baac",s._sentryDebugIdIdentifier="sentry-dbid-75eb989a-c5fd-4f1e-a434-f135c970baac")}catch{}function fe({row:s}){const[r,b]=a.useState(s==null?void 0:s.status),[y,i]=a.useState(!1),h=d=>{i(!0),B(s==null?void 0:s._id,{status:d}).then(u=>{var c;console.log(u),u&&b((c=u==null?void 0:u.user)==null?void 0:c.status)}).finally(()=>{i(!1)})};return a.useEffect(()=>{b(s==null?void 0:s.status)},[s]),n.jsx(q,{theme:{token:{colorText:"#707EAE",colorPrimary:"#06A44F",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:n.jsx(_e,{loading:y,onChange:h,handleBg:"#00000",className:"bg-slate-200",value:r})})}function pe({row:s}){const[r,b]=a.useState(s==null?void 0:s.status),[y,i]=a.useState(!1),h=d=>{i(!0),B(s==null?void 0:s._id,{status:d}).then(u=>{var c;console.log(u),u&&b((c=u==null?void 0:u.user)==null?void 0:c.status)}).finally(()=>{i(!1)})};return a.useEffect(()=>{b(s==null?void 0:s.status)},[s]),n.jsxs("div",{className:"flex items-center space-x-2 mr-0 ",children:[n.jsx("span",{className:`w-3 h-3 rounded-full relative -right-2 ${r==!0?"bg-[#1EB564]":"bg-red-500"}`}),n.jsx(q,{theme:{token:{colorText:"#707EAE",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:n.jsx(ne,{value:r,variant:"borderless",onChange:h,loading:y,optionSelectedColor:"#8086AC",className:"w-fit !text-red-100",options:[{value:!1,label:n.jsx("span",{children:"Disable"})},{value:!0,label:n.jsx("span",{children:"Active"})}]})})]})}const he=s=>{const[r,b]=a.useState(L.get("mainRole")),[y,i]=a.useState(void 0),{setUserDetil:h}=ee(),d=U(),u=(e,x)=>{h(e),d(`/super-admin/user/${s=="Elderly"?e.end_user_id+"-"+e._id:e._id}`,{state:{role:e.role}})},c={super_admin:{distributor:["name","address","contact_person","contact_number","office_count","seles_agent_count","nursing_home_count","monitoring_company_count","end_user_count","device_count","avg_sales","action"],office:["name","distributor_name","address","contact_person","contact_number","seles_agent_count","nursing_home_count","monitoring_company_count","end_user_count","device_count","action"],sales_agent:["name","office_name","address","contact_number","agent_id","nursing_home_count","monitoring_company_count","end_user_count","device_count","avg_sales","action"],nursing_home:["name","distributor_name","address","contact_person","contact_number","elderly_count","device_count","alert_count","assigned_nurse_count","action"],monitoring_station:["name","distributor_name","address","contact_person","contact_number","elderly_count","device_count","action"],support_agent:["name","distributor_name","address","contact_number","monitoring_company_count","alert_count","action"],installer:["name","distributor_name","office_name","address","contact_number","elderly_count","device_count","action"],super_admin:["name","contact_number","action"],end_user:["name","distributor_name","office_name","sales_agent_name","address","contact_number","subscription_status","elderly_count","device_count","alert_count","action"],elderly:["name","age","email","contact_number","address","alert_count","device_count","ownership_str"],nurse:["name","contact_number","action"]}},D={distributor_id:"distributor",office_id:"office",sales_agent_id:"sales_agent",nursing_home_id:"nursing_home",monitoring_station_id:"monitoring_station",support_agent_id:"support_agent"};function f(e,x){d(`/super-admin/user/${x}`,{state:{role:D[e]}})}const _={name:{title:e=>{switch(e){case"office":return"Office";case"nurse":return"Nurse Name";case"distributor":return"Distributor Name";case"sales_agent":return"Sales Agent Name";case"nursing_home":return"Nursing Home";case"end_user":return"End User";case"monitoring_station":return"Monitoring Station";case"support_agent":return"Support Agent";case"installer":return"Installer";case"elderly":return"Elderly Name";default:return"Name"}},onCell:(e,x)=>({onClick:g=>{u(e)}}),render:e=>{const x=s==="Elderly"?"elderly":null;return n.jsx("button",{children:n.jsx(te,{data:e,role:x})})}},address:{title:e=>{switch(e){case"elderly":return"Caregiver Address";default:return"Address"}},render:e=>n.jsx("button",{style:{width:"200px",textAlign:"left"},children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:s==="Elderly"?e.end_user_address:e.address})})},email:{title:e=>{switch(e){case"elderly":return"Caregiver Email";default:return"Email Address"}},render:e=>n.jsx("button",{style:{width:"150px",textAlign:"left"},children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:s==="Elderly"?e.end_user_email:e.email})})},contact_number:{title:e=>{switch(e){case"elderly":return"Caregiver Number";default:return"Contact Number"}},render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:s==="Elderly"?e.end_user_contact_number:e.contact_number})})},contact_person:{title:"Contact Person",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.contact_person})})},date:{title:"Date of Sales",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.date})})},age:{title:"Age",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.age})})},ownership_str:{title:"Ownership Structure",render:e=>{if(!e.hierarchy)return;const x={distributor_id:"Distributor",office_id:"Office",sales_agent_id:"Sales Agent",nursing_home_id:"Nursing Home",monitoring_station_id:"Monitoring Station",support_agent_id:"Support Agent",end_user_id:"End User",caregiver_id:"Caregiver"},g=[{id:"distributor_id",title:x.distributor_id,value:e.hierarchy.distributor_id||"N/A"},{id:"office_id",title:x.office_id,value:e.hierarchy.office_id||"N/A"},{id:"sales_agent_id",title:x.sales_agent_id,value:e.hierarchy.sales_agent_id||"N/A"},{id:"monitoring_station_id",title:x.monitoring_station_id,value:e.hierarchy.monitoring_station_id||"N/A"},{id:"nursing_home_id",title:x.nursing_home_id,value:e.hierarchy.nursing_home_id||"N/A"}].filter(p=>p.value!=="N/A");return n.jsx("div",{className:"ownership-str",children:g.map((p,A)=>n.jsxs("button",{onClick:()=>f(p.id,p.value),className:"ownership-button",children:[n.jsxs("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary hover:text-text-primary",children:[p.title," "]}),A<g.length-1&&" / "]},p.id))})}},external_id:{title:"External ID",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.external_id})})},products:{title:"Products",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.products})})},products_price:{title:"Products Price",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.products_price})})},addons:{title:"Addons",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.addons})})},addons_price:{title:"Addons Price",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.addon_price})})},total_price:{title:"Total Price",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.total})})},avg_sales:{title:"Average Sales",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.aleravg_salest_count})})},alert_count:{title:"Alert Count",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:s=="Elderly"?e.unresolved_alarm_count:null})})},device_count:{title:"Device Count",render:e=>{var x;return n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:s=="Elderly"?(x=e==null?void 0:e.rooms)==null?void 0:x.filter(g=>g.device_no).length:null})})}},sales_agent_count:{title:"Sales Agents",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.sales_agent})})},end_user_count:{title:"End Users",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.end_user})})},nursing_home_count:{title:"Nursing Homes",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.nursing_home})})},monitoring_company_count:{title:"Monitoring Stations",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.monitoring_station})})},office_count:{title:"Offices",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.office})})},elderly_count:{title:"Elderly",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.elderly})})},assigned_nurse_count:{title:"Assigned Nurse",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.nurse})})},office_name:{title:"Office Name",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.office_name})})},distributor_name:{title:"Distributor Name",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.distributor_name})})},sales_agent_name:{title:"Sales Agent Name",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.sales_agent_name})})},installer:{title:"Installer Name",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.installer_name})})},agent_id:{title:"Agent ID",render:e=>n.jsx("button",{children:n.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:e.agent_id})})},status:{title:"Status",render:e=>(e==null?void 0:e.role)=="sales_agent"?n.jsx(fe,{row:e}):n.jsx(pe,{row:e})},action:{title:"",key:"id",width:100,render:e=>n.jsx(me,{data:e})}};return a.useEffect(()=>{var e,x,g,p,A,C,E,v,w,I,T;if(s=="Super Admins"){const l=(((e=c[r])==null?void 0:e.super_admin)||[]).map(o=>{const t=_[o];return{...t,title:t&&typeof t.title=="function"?t.title("super_admin"):t==null?void 0:t.title}});i(l)}else if(s=="Support Agents"){const l=(((x=c[r])==null?void 0:x.support_agent)||[]).map(o=>{const t=_[o];return{...t,title:t&&typeof t.title=="function"?t.title("support_agent"):t==null?void 0:t.title}});i(l)}else if(s=="Distributors"){const l=(((g=c[r])==null?void 0:g.distributor)||[]).map(o=>{const t=_[o];return{...t,title:t&&typeof t.title=="function"?t.title("distributor"):t==null?void 0:t.title}});i(l)}else if(s=="Offices"){const l=(((p=c[r])==null?void 0:p.office)||[]).map(o=>{const t=_[o];return{...t,title:t&&typeof t.title=="function"?t.title("office"):t==null?void 0:t.title}});i(l)}else if(s=="Nursing Homes"){const l=(((A=c[r])==null?void 0:A.nursing_home)||[]).map(o=>{const t=_[o];return{...t,title:t&&typeof t.title=="function"?t.title("nursing_home"):t==null?void 0:t.title}});i(l)}else if(s=="Sales Agents"){const l=(((C=c[r])==null?void 0:C.sales_agent)||[]).map(o=>{const t=_[o];return{...t,title:t&&typeof t.title=="function"?t.title("sales_agent"):t==null?void 0:t.title}});i(l)}else if(s=="End Users"){const l=(((E=c[r])==null?void 0:E.end_user)||[]).map(o=>{const t=_[o];return{...t,title:t&&typeof t.title=="function"?t.title("end_user"):t==null?void 0:t.title}});i(l)}else if(s=="Installers"){const l=(((v=c[r])==null?void 0:v.installer)||[]).map(o=>{const t=_[o];return{...t,title:t&&typeof t.title=="function"?t.title("installer"):t==null?void 0:t.title}});i(l)}else if(s=="Monitoring Stations"){const l=(((w=c[r])==null?void 0:w.monitoring_station)||[]).map(o=>{const t=_[o];return{...t,title:t&&typeof t.title=="function"?t.title("monitoring_station"):t==null?void 0:t.title}});i(l)}else if(s=="Nurses"){console.log(s);const l=(((I=c[r])==null?void 0:I.nurse)||[]).map(o=>{const t=_[o];return{...t,title:t&&typeof t.title=="function"?t.title("nurse"):t==null?void 0:t.title}});i(l)}else if(s=="Elderly"){const l=(((T=c[r])==null?void 0:T.elderly)||[]).map(o=>{const t=_[o];return{...t,title:t&&typeof t.title=="function"?t.title("elderly"):t==null?void 0:t.title}});i(l)}},[s]),y},ge=s=>{const r=a.useRef(null),[b,y]=a.useState(null),[i,h]=a.useState(!1),[d,u]=a.useState(null),c=a.useCallback(async(D={})=>{h(!0),u(null),r.current&&r.current.cancel("Previous request canceled!"),r.current=O.CancelToken.source();try{const f=await s({...D,cancelToken:r.current.token});y(f)}catch(f){O.isCancel(f)?console.log("Request canceled:",f.message):(console.error("Fetch error:",f),u(f))}finally{h(!1)}},[s]);return a.useEffect(()=>()=>{r.current&&r.current.cancel("Component unmounted, request canceled!")},[]),{response:b,loading:i,error:d,makeRequest:c}},Ce=()=>{const{response:s,loading:r,error:b,makeRequest:y}=ge(ue),i=se(),h=U(),[d,u]=a.useState("");a.useState(!1);const[c,D]=a.useState({}),[f,_]=a.useState(""),[e,x]=a.useState("Monitoring Stations");a.useState(L.get("mainRole"));const[g,p]=a.useState([]),[A,C]=a.useState(!1),[E]=a.useState([{bo:!0,warring:!1,text:"Monitoring Stations"},{bo:!0,warring:!1,text:"Distributors"},{bo:!0,warring:!1,text:"Offices"},{bo:!0,warring:!1,text:"Sales Agents"},{bo:!0,warring:!1,text:"Nursing Homes"},{bo:!0,warring:!1,text:"Nurses"},{bo:!0,warring:!1,text:"Control Centers"},{bo:!0,warring:!1,text:"Support Agents"},{bo:!0,warring:!1,text:"Installers"},{bo:!0,warring:!1,text:"End Users"},{bo:!0,warring:!1,text:"Elderly"}]);a.useState(L.get("user"));const[v,w]=a.useState(""),[I,T]=a.useState(!1),[m,l]=a.useState("Time"),[o,t]=a.useState({}),[S,R]=a.useState({}),[be,$]=a.useState([]),[V,F]=a.useState(0),[Q,G]=a.useState([]),Z={Distributors:"Distributor","Nursing Homes":"Nursing Home","Sales Agents":"Sales Agent","Support Agents":"Support Agent","Super Admins":"Super Admin",Elderly:"Elderly",Installers:"Installer","Monitoring Stations":"Monitoring Station","Control Centers":"Control Center",Offices:"Office","End Users":"End User",Nurses:"Nurse"},z={Distributors:"distributor","Nursing Homes":"nursing_home","Sales Agents":"sales_agent","Support Agents":"supports_agent","Monitoring Stations":"monitoring_agency","Control Centers":"monitoring_station",Installers:"installer","End Users":"end_user",Offices:"office","Super Admins":"super_admin",Elderly:"elderly",Nurses:"nurse"},J=["Time","Name"],H=he(d);a.useEffect(()=>{H&&G(H)},[H,d]),a.useEffect(()=>{const M=new URLSearchParams(i.search).get("tab");E.map(Y=>Y.text).includes(M)?u(M):u("Monitoring Stations")},[]);const K=()=>{T(!0)},W=j=>{t({page:1}),u(j.name)},k=a.useCallback(async()=>{$([]);let j={...o,...S};const M=Z[d];if(x(M),j.role=z[d],_(j.role),j.role==="elderly")C(!0),delete j.role,ae(j).then(N=>{p(N.data),F(N==null?void 0:N.total)}).catch(N=>{console.log(N)}).finally(()=>{C(!1)});else try{await y({...j})}catch(N){console.log(N)}h(`/super-admin/users?tab=${d}`)},[S,d,o]);a.useEffect(()=>{k()},[k]);const P=a.useRef(!1);a.useEffect(()=>{P.current?m&&S.orderType!==m&&(delete S.sort_by_created_at,delete S.sort_by_name,R({...S,...m==="Name"?{sort_by_name:-1}:{sort_by_created_at:-1}}),t({...o,page:1})):P.current=!0},[m]);const X=()=>{R({...S,search:v.trim()}),t({...o,page:1})};return n.jsxs("div",{className:"",children:[n.jsx("div",{className:"pt-[20px] pb-[10px] flex",children:n.jsx(xe,{menus:E,activeTab:d,setActiveTab:!1,handleChange:W})}),n.jsxs("div",{className:" bg-white rounded-2xl overflow-hidden",children:[n.jsxs("div",{className:" px-[22px] py-6 flex items-start flex-col lg:flex-row justify-between gap-2",children:[n.jsx("div",{className:" flex items-center justify-between w-full",children:n.jsx("h2",{className:" text-2xl font-bold text-text-primary",children:d})}),n.jsxs("div",{className:" flex items-center justify-end gap-5 w-full",children:[n.jsx(re,{search:v,setSearch:w,handBlurchange:X,placeholder:`Search ${e}`}),n.jsx(oe,{query:S,setQuery:R,selected:m,setSelected:l,data:J}),n.jsxs(le,{onClick:()=>K(),className:" hidden lg:flex min-w-[80px]",style:{display:e=="Elderly"?"none":"flex"},children:[n.jsx("div",{className:"mr-1",dangerouslySetInnerHTML:{__html:`<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 19 19" fill="none">
                <path d="M10.0941 5.54102C10.0941 5.2131 9.82824 4.94727 9.50033 4.94727C9.17241 4.94727 8.90658 5.2131 8.90658 5.54102V8.9056H5.54199C5.21407 8.9056 4.94824 9.17143 4.94824 9.49935C4.94824 9.82727 5.21407 10.0931 5.54199 10.0931H8.90658V13.4577C8.90658 13.7856 9.17241 14.0514 9.50033 14.0514C9.82824 14.0514 10.0941 13.7856 10.0941 13.4577V10.0931H13.4587C13.7866 10.0931 14.0524 9.82727 14.0524 9.49935C14.0524 9.17143 13.7866 8.9056 13.4587 8.9056H10.0941V5.54102Z" fill="white"/>
                </svg>`}}),"Add New ",e]})]})]}),n.jsx("div",{className:" grid grid-cols-1",children:n.jsx(ie.Provider,{value:{getlist:k,query:S,total:d=="Elderly"?V:(s==null?void 0:s.total)||[],page:o,SetPage:t,role:f},children:n.jsx(ce,{loading:d=="Elderly"?A:r,tableData:d=="Elderly"?g:s==null?void 0:s.data,getlist:k,columns:Q})})})]}),n.jsx("div",{className:"mt-[38px] ",children:n.jsx("div",{className:"font-semibold"})}),n.jsx(de,{changeParams:c,item:{},getlist:k,role:f,modalOPen:I,setModalOpen:T})]})};export{Ce as default};
//# sourceMappingURL=index-CFtyTOAq.js.map
