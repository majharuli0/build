import{r as m,$ as N,j as t}from"./index-DKEPlPMw.js";import S from"./TimelineGraph-C0N4Xud3.js";import{T as g}from"./Template-Cw_oAlpT.js";import{g as c}from"./index-CZoxq-lL.js";import{h as j}from"./ElderlyProfile-BC3PuKrd.js";import{C as A}from"./UseCustomContext-DF6VB58j.js";import{k as x}from"./helper-DzRZPsxz.js";import"./index-C88mHCLz.js";import"./WeeklyMonthlyPicker-DIsZmpnl.js";import"./SwapRightOutlined-BDoH_om6.js";import"./weekOfYear-BCMUTNDi.js";import"./index-B9-ofjPq.js";import"./weekday-FwHoDaUK.js";import"./elderly-fnALsJad.js";import"./HomeOutlined-CNgJfFmX.js";import"./PullRequestOutlined-zSVGBxYf.js";function G(){const{sleepData:e,elderlyDetails:a}=m.useContext(A),[o,v]=m.useState([]),{sleepEventsType:f,sleepEventsColor:y}=m.useContext(N),h={title:"Sleep Timeline Summary",pickerTypes:["day","range"],chartType:"multibar",dataType:"duration",color:"#FF725E",icon:t.jsx(c,{}),apisProps:{endpoint:j,query:{uids:a==null?void 0:a.deviceId}}};return m.useEffect(()=>{var d;if(!e)return;const i=(d=e==null?void 0:e.statistical_data)==null?void 0:d.reduce((s,n)=>{const l=new Date(n.start_time),T=(new Date(n.end_time)-l)/(1e3*60),r=f[n.status];return s[r]||(s[r]={duration:0,color:y[r]}),s[r].duration+=T,s},{}),p=Object.entries(i||{}).map(([s,{duration:n,color:l}])=>{const u=Math.floor(n/60),T=Math.floor(n%60);return{name:s,duration:`${u}hr ${T}m`,color:l}});v([...p])},[e]),t.jsx(t.Fragment,{children:t.jsxs(g,{title:"Sleep Timeline",color:"#FF725E",icon:t.jsx(c,{}),isDataAnalysis:!1,headerClassName:"!text-2xl",summaryProps:h,children:[t.jsx(S,{statisticalData:e==null?void 0:e.statistical_data,enterBedTime:x(e==null?void 0:e.get_bed_idx),getupAfterTime:x(e==null?void 0:e.leave_bed_idx)}),t.jsx("div",{className:"flex flex-wrap gap-4 items-center justify-center",children:o.map((i,p)=>t.jsx(C,{time:i.duration,ItemName:i.name,color:i.color},p))})]})})}const C=({time:e,ItemName:a,color:o})=>t.jsxs("div",{className:"flex p-[4px] pr-4 items-center gap-2 rounded-xl  ",style:{backgroundColor:o},children:[t.jsx("span",{className:"text-[17px] p-2 py-1 font-bold bg-white rounded-[9px] text-primary",children:e}),t.jsx("span",{className:"text-[15px] font-medium text-white leading-[1.2]",children:a})]}),J=[{startTime:"2024-11-03 03:06:55",endTime:"2024-11-03 03:30:25",status:"3"},{startTime:"2024-11-03 03:30:25",endTime:"2024-11-03 03:35:22",status:"2"},{startTime:"2024-11-03 03:35:22",endTime:"2024-11-03 04:09:06",status:"1"},{startTime:"2024-11-03 04:09:06",endTime:"2024-11-03 04:39:51",status:"0"},{startTime:"2024-11-03 04:39:51",endTime:"2024-11-03 05:02:40",status:"1"},{startTime:"2024-11-03 05:02:40",endTime:"2024-11-03 05:12:35",status:"0"},{startTime:"2024-11-03 05:12:35",endTime:"2024-11-03 05:44:20",status:"1"},{startTime:"2024-11-03 05:44:20",endTime:"2024-11-03 05:54:15",status:"0"},{startTime:"2024-11-03 05:54:15",endTime:"2024-11-03 06:19:03",status:"1"},{startTime:"2024-11-03 06:19:03",endTime:"2024-11-03 06:29:58",status:"0"},{startTime:"2024-11-03 06:29:58",endTime:"2024-11-03 07:59:15",status:"1"}],K=[{ts:"2024-11-03 03:35:22",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 03:39:21",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 03:43:18",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 03:45:17",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 03:47:16",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 05:50:17",eventName:"High Breathing",eventType:11},{ts:"2024-11-03 06:58:44",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 07:02:42",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 07:04:41",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 07:49:19",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 07:58:15",eventName:"Sleep Apnea",eventType:13}];export{K as alarmEvents,G as default,J as statisticalData};
