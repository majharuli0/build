import{r as i,b_ as u,j as s,jq as g,jr as b,js as y,jt as x,T as _,J as N,B as m,ju as D,c8 as w,l as C,bQ as I}from"./index-D5qquTDf.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="31e139df-b320-4396-8c00-ff365c31c0e1",e._sentryDebugIdIdentifier="sentry-dbid-31e139df-b320-4396-8c00-ff365c31c0e1")}catch{}function B(){var t;const{elderlyDetails:e}=i.useContext(u);return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-4 mt-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-[24px] font-bold text-[#1B2559]",children:"Devices"})}),s.jsx("div",{id:"devices",className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6",children:(t=e==null?void 0:e.rooms)==null?void 0:t.filter(l=>l==null?void 0:l.device_no).map(l=>s.jsx(O,{device:l},l.id))})]})})}const O=({device:e={}})=>{const[t,l]=i.useState(!1),[j,f]=i.useState(!1),{elderlyDetails:h}=i.useContext(u),[T,d]=i.useState(!1),[o,p]=i.useState(),r=e==null?void 0:e.device_no,c=i.useCallback(async()=>{if(r){d(!0);try{const a=await g(r);p(a==null?void 0:a.data)}catch(a){console.error("Error fetching device info",a)}finally{d(!1)}}},[r]);i.useEffect(()=>{c();const a=setInterval(()=>{c()},5e3);return()=>clearInterval(a)},[c]);const n=(o==null?void 0:o.signal_intensity)&&b("wifi",o==null?void 0:o.signal_intensity);return s.jsxs("div",{className:"flex flex-col gap-8 bg-white rounded-xl p-4 group  cursor-pointer device_modal",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4 w-full ",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{id:"deviceImg",children:s.jsx("img",{src:y,alt:"device",width:84,height:84})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("h1",{className:"text-[22px] font-semibold text-[#1B2559] flex items-center gap-2",children:[e==null?void 0:e.name," ",s.jsx("div",{className:"size-1.5 bg-slate-400 rounded-full"}),s.jsx("span",{className:"text-base opacity-85 cursor-pointer",children:e==null?void 0:e.device_no})]}),s.jsxs("div",{id:"status",className:"flex items-center gap-2",children:[e!=null&&e.is_device_bind?s.jsx(x,{color:n==null?void 0:n.color}):s.jsx(x,{color:"red"}),s.jsx("p",{className:"text-[16px] font-semibold text-primary capitalize",children:e!=null&&e.is_device_bind?"Online":"Offline"}),n&&s.jsx(_,{color:n==null?void 0:n.color,children:n.label})]})]})]}),s.jsx(N,{title:"Settings",children:s.jsx(m,{shape:"circle",onClick:()=>{e!=null&&e.is_device_bind?l(!0):f(!0)},children:s.jsx(D,{})})})]}),s.jsx(w,{isvisible:t,setVisible:l,elderly_id:h._id,device_id:e==null?void 0:e.device_no,room_id:e==null?void 0:e._id}),s.jsx(k,{isvisible:j,setVisible:f})]})},k=({isvisible:e=!1,setVisible:t})=>{function l(){t(!1)}return s.jsx(s.Fragment,{children:s.jsx(C,{centered:!0,open:e,onCancel:l,onOk:l,className:"device-offline-modal ",title:s.jsxs("div",{className:"flex items-center gap-2 p-6",children:[s.jsx(I,{className:"text-yellow-500"}),s.jsx("span",{children:"Offline Device"})]}),footer:s.jsx("div",{className:"p-6",children:s.jsx(m,{onClick:()=>t(!1),children:"Ok"})}),okText:"OK",cancelButtonProps:{style:{display:"none"}},children:s.jsx("div",{className:"px-4",children:s.jsx("p",{children:"This device is currently offline. You cannot make any changes now."})})})})};export{B as default};
//# sourceMappingURL=DevicesTab-Dm-GH5j2.js.map
