import"./index-CvPtt2zy.js";const m=t=>{if(!t||t==="--")return"--";try{const e=t.match(/\d{1,2}:\d{2}(:\d{2})?/);if(!e)return"--";const[r,o]=e[0].split(":"),s=parseInt(r),n=s>=12?"PM":"AM";return`${(s%12||12).toString().padStart(2,"0")}:${o} ${n}`}catch{return"--"}},D=t=>{if(!t)return"--";const e=Math.floor(t/60),r=Math.floor(t%60);return`${e}h ${r}m`},$=t=>t.map(e=>{const r=e.date.split("T")[0],o=r.slice(2),s=n=>n.includes("之后")?`${n.slice(0,5)}:00`:n;return[{time:`${r}T${s(e.get_bed_idx)}`,date:o,type:"Go to bed"},{time:`${r}T${s(e.sleep_st_idx)}`,date:o,type:"Fall asleep"},{time:`${r}T${s(e.sleep_ed_idx)}`,date:o,type:"Wake up"},{time:`${r}T${s(e.leave_bed_idx)}`,date:o,type:"Get up"}]}),b=t=>t!=null&&t.includes(":")?t.slice(0,5):t,g=t=>{const e=new Date,r=new Date(t).toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"}),o=new Date(t).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return e.toDateString()===new Date(t).toDateString()?o:`${r} ${o}`},T=t=>{const e=new Date().getTime(),r=new Date(t).getTime(),o=Math.abs(r-e),s=Math.floor(o/(1e3*60*60*24)),n=Math.floor(o%(1e3*60*60*24)/(1e3*60*60)),c=Math.floor(o%(1e3*60*60)/(1e3*60));let a="";s>0&&(a+=`${s}d `),(n>0||s>0)&&(a+=`${n}h `),a+=`${c}m`;const i=r<e?"":"from now";return`${a.trim()} ${i}`},I=t=>(console.log(t),t!=null&&t.includes(["2","9"])?"Critical":t!=null&&t.includes(["3"])?"Warning":"Info"),u=t=>{try{const e=atob(t),r=Array.from(e).map(o=>o.charCodeAt(0).toString(16).padStart(2,"0")).join("");return console.log(t,r),r}catch(e){return console.error("Invalid Base64 string:",e),null}},x=t=>{const e=u(t);if(!e||e.length!==32)return console.error("Invalid heartbreath data."),null;const r=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16);return{breathingValue:r,heartRateValue:o}},y=t=>{const e=u(t);if(!e||e.length%32!==0)return console.error("Invalid position data."),null;const r=[];for(let o=0;o<e.length;o+=32){const s=e.substr(o,32),n=parseInt(s.substr(0,2),16),c=parseInt(s.substr(2,2),16)-127,a=parseInt(s.substr(4,2),16)-127,i=parseInt(s.substr(6,2),16),l=parseInt(s.substr(24,2),16),d=parseInt(s.substr(26,2),16),p=parseInt(s.substr(28,2),16),h=parseInt(s.substr(30,2),16);r.push({targetId:n,coordinates:{x:c,y:a,z:i},timeLeft:l,posture:d,event:p,areaId:h})}return r};export{T as a,m as b,y as c,x as d,$ as e,D as f,I as g,b as h,g as t};
