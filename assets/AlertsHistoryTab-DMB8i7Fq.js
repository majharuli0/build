import{r as n,S as M,u as b,j as t,am as C,an as j,e as S,C as A,d as _,o as D,B as I}from"./index-BPWuOi3u.js";import{g as L}from"./elderlySupport-zGEI1usd.js";import{A as E}from"./AlertName-SDuwYrAj.js";import{A as N,a as H}from"./ActionManu-3PQveK4V.js";import{L as k}from"./LargeTextViewerModal-BpWPFV-d.js";import{e as B,t as T,c as R,b as F}from"./helper-BHyL54Ko.js";import{C as W}from"./UseCustomContext-CeH7oMUk.js";import{S as Y}from"./index-Bin5rV-u.js";import"./index-Pj6Je_fh.js";import"./index-DuWhny-i.js";import"./index-mkoll5Vi.js";try{let l=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new l.Error().stack;a&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[a]="8e524733-ae24-483c-9e96-7ec9868516a9",l._sentryDebugIdIdentifier="sentry-dbid-8e524733-ae24-483c-9e96-7ec9868516a9")}catch{}const u=l=>{const a=["Critical","Info","Warning"],r=["Living Room","Kitchen","Bedroom","Bathroom","Study","Dining Room","Hallway","Garage","Basement","Attic"],o=["John Doe","Jane Doe","Alice Smith","Bob Johnson","Emma Brown","Michael Wilson","Sarah Davis","David Miller","Lisa Garcia","James Rodriguez"],i=["Fall Detected","Fire Detected","Inactivity Alert","Medication Reminder","Unusual Behavior","High Temperature","Low Temperature","Water Leak","Door Left Open","Window Broken"],d=["Medication Taken","Medication Not Taken","Medication Reminder"],c=["Wheelchair","Crutches","Cane","None"],m=["Yes","No"],e=["Yes","No"],h=["Yes","No"],f=["1","4","2","No"],p=["True","False"];return Array.from({length:l},(x,g)=>({_id:g+1,alertType:a[Math.floor(Math.random()*a.length)],elderlyName:o[Math.floor(Math.random()*o.length)],alertName:i[Math.floor(Math.random()*i.length)],roomId:String(g+1),roomName:r[Math.floor(Math.random()*r.length)],alertLifetime:`${Math.floor(Math.random()*10)}m ${Math.floor(Math.random()*60)}s`,time:new Date().toLocaleString(),alertDescription:`${i[Math.floor(Math.random()*i.length)]} in the ${r[Math.floor(Math.random()*r.length)]}`,status:"Active",isAlert:p[Math.floor(Math.random()*p.length)],address:"123 Main St, Anytown, USA",coordinates:{latitude:37.7749+(Math.random()-.5)*.01,longitude:-122.4194+(Math.random()-.5)*.01},closedAt:new Date().toLocaleString(),closedBy:o[Math.floor(Math.random()*o.length)],eventName:d[Math.floor(Math.random()*d.length)],disabilityType:c[Math.floor(Math.random()*c.length)],additionalInfo:"This is additional info for event",hospital:{name:"Hospital For Special Surgery",phone:"1234567890",latitude:-33.8743612,longitude:151.2261153},allergies:m[Math.floor(Math.random()*m.length)],diseases:e[Math.floor(Math.random()*e.length)],medications:h[Math.floor(Math.random()*h.length)],activeAlert:f[Math.floor(Math.random()*f.length)],alertComments:"This is alert comments",alertLifespan:[{dateTime:"24-01-2024 10:00 AM",description:"At 10:00 AM, the alert was created"},{dateTime:"24-01-2024 10:30 AM",description:"Agent (petar) clicked on the incident in 10:30 (30mins later)"},{dateTime:"24-01-2024 10:32 AM",description:"Agent (petar) clicked on “Call Elderly” in 10:32 (2mins later)"},{dateTime:"24-01-2024 10:34 AM",description:"Agent (petar) clicked on “Call 911” in 10:34 (2mins later)"},{dateTime:"24-01-2024 10:36 AM",description:"Agent (petar) clicked on “Close Alert” in 10:36 (2mins later)"}]}))};u(14);u(20);u(20);u(20);u(20);function $(l){const{rolesFormatter:a}=n.useContext(M),r=b(),o=e=>{window.scrollTo(0,0),r(`/supporter/elderlies/elderly-profile/${e.elderly_id}?tab=overview`)},i={activeAlertsTableData:["alertName","alertType","elderlyName","roomName","incidentTime","alertLife","address","viewElderly"],recentlyClosedAlertsTableData:["alertName","alertType","elderlyName","roomName","incidentTime","alertLifetime","alertStatus","closedAt","closedBy","largeText","address"],eventsTableData:["eventName","elderlyName","eventTime","eventTimeline","hospital","expandColumn","largeText","disabilityType","action"]},d={alertName:{title:"Notifications Name",render:e=>t.jsx(E,{data:e})},alertType:{title:"Notifications Type",dataIndex:"event",render:e=>t.jsx("span",{children:B(e)})},elderlyName:{title:"User Name",dataIndex:"elderly_name",render:e=>t.jsx("span",{children:e})},roomName:{title:"Room Name",dataIndex:"room_name",render:e=>t.jsx("span",{children:e})},incidentTime:{title:"Observation Time",dataIndex:"created_at",render:e=>t.jsx("span",{className:"text-nowrap",children:T(e)})},alertLifetime:{title:"Notification Duration",render:e=>e!=null&&e.closed_at?t.jsx("span",{className:"text-nowrap",children:R(e==null?void 0:e.created_at,e==null?void 0:e.closed_at)}):t.jsx(N,{date:e==null?void 0:e.created_at})},alertLife:{title:"Notification Duration",dataIndex:"created_at",render:e=>t.jsx("span",{className:"text-nowrap",children:t.jsx(N,{date:e})})},alertStatus:{title:"Notification Status",render:e=>e!=null&&e.closed_at?t.jsx("span",{className:"text-nowrap",children:(e==null?void 0:e.status)==0?"True Notification":"False Notification"}):t.jsx(t.Fragment,{children:"--"})},address:{title:"Address",width:"230px",render:e=>t.jsx("span",{className:"!w-[230px] text-nowrap",children:e.address})},closedAt:{title:"Closed At",render:e=>e!=null&&e.closed_at?t.jsx("span",{className:"text-nowrap",children:T(e==null?void 0:e.closed_at)}):t.jsx(t.Fragment,{children:"--"})},closedBy:{title:"Closed By",render:e=>e!=null&&e.closed_at?t.jsxs("span",{className:"text-nowrap",children:[e.closed_by," (",a[e.closed_by_role]," )"]}):t.jsx(t.Fragment,{children:"--"})},eventName:{title:"Event Name",dataIndex:"eventName",render:e=>t.jsx("span",{children:e})},eventTime:{title:"Event Time",dataIndex:"time",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},eventTimeline:{title:"Event Timeline",dataIndex:"alertLifetime",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},disabilityType:{title:"Disability Type",dataIndex:"disabilityType",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},hospital:{title:"Hospital",dataIndex:"hospital",render:e=>t.jsx("span",{className:"text-nowrap",children:e.name.length>20?`${e.name.substring(0,20)}...`:e.name})},largeText:{title:()=>{switch(l){case"events":return"Additional Info";case"recentlyClosedAlert":return"Comments";default:return""}},render:e=>e!=null&&e.closed_at?t.jsx(k,{data:e==null?void 0:e.comment,title:"Comment"}):"--"},expandColumn:C.EXPAND_COLUMN,viewElderly:{render:e=>t.jsxs("span",{onClick:()=>o(e),className:"flex items-center transition-all duration-300 justify-center gap-2 text-sm font-medium text-text-primary hover:text-primary cursor-pointer p-2 rounded-md  text-center hover:bg-slate-100",children:["View ",t.jsx(j,{})]})},action:{title:"Action",render:e=>t.jsx(H,{row:e})}},[c,m]=n.useState(void 0);return n.useEffect(()=>{{const e=i.recentlyClosedAlertsTableData.map(h=>d[h]);m(e)}},[]),c}function ee(){n.useState("");const l=$("recentlyClosedAlert"),{elderlyDetails:a}=n.useContext(W),[r,o]=n.useState([]),[i,d]=n.useState(1),[c,m]=n.useState(0),[e,h]=n.useState(null),[f,p]=n.useState(!1),[x,g]=n.useState(null),y=n.useCallback(()=>{p(!0),L({to_date:"2024-11-30",from_date:S().format("YYYY-MM-DD"),is_resolved:x,elderly_id:a==null?void 0:a._id,...i,...e}).then(s=>{m(s.total),p(!1),o(s.data)}).catch(s=>{console.log(s),p(!1)})},[i,e,x,a==null?void 0:a._id]);n.useEffect(()=>{y()},[y]);function v(s){h(F(s))}return t.jsxs("div",{id:"Elderlies",className:"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6 mt-6",children:[t.jsxs("div",{id:"Elderlies_Header",className:"w-full flex justify-between",children:[t.jsx("h1",{className:"text-[24px] font-bold",children:"Notifications History"}),t.jsxs("div",{className:"flex gap-4 h-fit",children:[t.jsx(A,{theme:{},children:t.jsx(Y,{size:"large",options:P,onChange:s=>v(s)})}),t.jsx(A,{theme:{token:{colorPrimary:"#8086AC"}},children:t.jsx(_,{size:"large",style:{width:"120px",height:"40px",borderRadius:"10px !important"},onChange:(s,U)=>{g(s)},placeholder:"Filter by Alert Status",value:x,options:[{label:"All Alerts",value:null},{label:"Resolved",value:!0},{label:"Non-Resolved",value:!1}]})})]})]}),t.jsx(D.Provider,{value:{total:c,page:1,SetPage:d,limit:6},children:t.jsx(I,{loading:f,tableData:r,columns:l})})]})}const P=[{label:"All Activity",value:"All Activity"},{label:"Critical",value:"Critical"},{label:"Warning",value:"Warning"},{label:"Informational",value:"Info"}];export{P as alertHistorySegmentOptions,ee as default};
//# sourceMappingURL=AlertsHistoryTab-DMB8i7Fq.js.map
