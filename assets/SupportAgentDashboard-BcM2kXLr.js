import{u as I,r as l,j as e,Z as _,e as p,C as A,af as Q,o as S,B as k}from"./index-BZN7kAPq.js";import{L as q}from"./leaflet-src-B65M6JoQ.js";/* empty css                */import{g as V,a as J}from"./elderlySupport-4oZUV8OQ.js";import{S as K}from"./slick-theme-BXLd9nOi.js";import{M as U,T as X,a as M,P as L,C as ee}from"./CreateAndEditModal-Jcha7gB2.js";import{R as te}from"./index-DtCMrNkM.js";import"./index-B6O-KUCL.js";import"./line-CmhnOPtI.js";import{u as y,A as se,a as le}from"./alertsOverview-Cn23m0hg.js";import"./WeeklyMonthlyPicker-B0lVycXb.js";import"./helper-BMkLFytm.js";import{g as ae}from"./elderly-Bwjw61NS.js";import{S as ie}from"./index-Uvg5eF-I.js";import{R as oe}from"./AimOutlined-DXV9Ou1v.js";import{R as ne}from"./HomeOutlined-BMCEzJ49.js";import"./index-D_p-aJvd.js";import"./index-D53eGMIp.js";import"./InfoCircleOutlined-CZPCrJMj.js";import"./RoomMap4-BoV7jKvS.js";import"./oth-Do35Ocml.js";import"./UseCustomContext-BxgcQ3-8.js";import"./ActionManu-BD3cZAei.js";import"./index-C8H1TNjZ.js";import"./index-dtA3bLT6.js";import"./AlertName-D1AlLE0N.js";import"./LargeTextViewerModal-Db6GsP0G.js";import"./AlertCloseModal-BLR7rWDs.js";import"./index-BcBXFEmy.js";try{let a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new a.Error().stack;n&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[n]="0ecaa6b1-fd35-4d37-8384-db04a64f3349",a._sentryDebugIdIdentifier="sentry-dbid-0ecaa6b1-fd35-4d37-8384-db04a64f3349")}catch{}const T="data:image/svg+xml,%3csvg%20width='22'%20height='22'%20viewBox='0%200%2022%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20opacity='0.8'%20clip-path='url(%23clip0_2_16)'%3e%3cpath%20d='M13.75%2020.1667C13.5069%2020.1667%2013.2737%2020.0701%2013.1018%2019.8982C12.9299%2019.7263%2012.8333%2019.4931%2012.8333%2019.25V15.5833C12.8333%2015.4325%2012.8705%2015.2839%2012.9417%2015.1509C13.0128%2015.0178%2013.1157%2014.9044%2013.2413%2014.8207L15.9913%2012.9873C16.1419%2012.8868%2016.3189%2012.8332%2016.5%2012.8332C16.6811%2012.8332%2016.8581%2012.8868%2017.0088%2012.9873L19.7588%2014.8207C19.8843%2014.9044%2019.9872%2015.0178%2020.0583%2015.1509C20.1295%2015.2839%2020.1667%2015.4325%2020.1667%2015.5833V19.25C20.1667%2019.4931%2020.0701%2019.7263%2019.8982%2019.8982C19.7263%2020.0701%2019.4931%2020.1667%2019.25%2020.1667H13.75Z'%20stroke='%23140050'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M16.5%209.16667C16.5%207.22175%2015.7274%205.35648%2014.3521%203.98122C12.9769%202.60595%2011.1116%201.83333%209.16667%201.83333C7.22175%201.83333%205.35648%202.60595%203.98122%203.98122C2.60595%205.35648%201.83333%207.22175%201.83333%209.16667C1.83333%2013.7436%206.91075%2018.5102%208.61575%2019.9824C8.77467%2020.1016%208.96801%2020.1659%209.16667%2020.1657'%20stroke='%23140050'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M16.5%2020.1667V17.4167'%20stroke='%23140050'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M9.16667%2011.9167C10.6855%2011.9167%2011.9167%2010.6855%2011.9167%209.16667C11.9167%207.64788%2010.6855%206.41667%209.16667%206.41667C7.64788%206.41667%206.41667%207.64788%206.41667%209.16667C6.41667%2010.6855%207.64788%2011.9167%209.16667%2011.9167Z'%20stroke='%23140050'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_2_16'%3e%3crect%20width='22'%20height='22'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",E=a=>{const n={critical:"bg-red-500",warning:"bg-yellow-500",problem:"bg-blue-500"},d={critical:"animate-ping-critical",warning:"animate-ping-warning",problem:"animate-ping-problem"};return q.divIcon({className:"",html:`
      <div class="relative flex justify-center items-center">
        <div class="${d[a]} absolute h-8 w-8 rounded-full ${n[a]} opacity-75"></div>
        <div class="scale-150 h-3 w-4 ${n[a]} rounded-full"></div>
      </div>
    `})};function re(){const a=I(),n=s=>{a(`/supporter/elderlies/elderly-profile/${s}?tab=overview`)},d={dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:1e3,pauseOnHover:!0},[c,f]=l.useState([]);function u(){V({to_date:"2024-11-30",from_date:p().format("YYYY-MM-DD"),is_resolved:!1}).then(s=>{s.data.length>0&&(f(s.data),console.log(s.data))}).catch(s=>{console.log(s)})}l.useEffect(()=>{u()},[]);const h=c.reduce((s,i)=>(s[i.elderly_id]||(s[i.elderly_id]=[]),s[i.elderly_id].push(i),s),{});return e.jsx("div",{className:"w-full h-[495px]",children:e.jsxs(U,{center:[51.505,-.09],zoom:2,zoomControl:!1,style:{height:"100%",width:"100%"},className:"!w-full rounded-[8px] overflow-hidden !outline-none",children:[e.jsx(X,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>'}),c==null?void 0:c.map((s,i)=>e.jsx(M,{position:[s.latitude||0,s.longitude||0],icon:E(["2","9"].includes(s.event)?"critical":["3"].includes(s.event)?"warning":"problem"),children:e.jsx(L,{className:"w-[350px] !drop-shadow-2xl shadow-none",children:e.jsxs("div",{className:"flex w-full flex-col gap-6 font-baloo pt-2",children:[e.jsxs("div",{className:"flex font-baloo cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col w-full",onClick:()=>n(s.elderly_id),children:[e.jsx("h1",{className:"font-bold text-xl text-text-primary",children:s.elderly_name}),e.jsxs("span",{className:"font-normal text-base text-text-primary",children:["Age: ",e.jsx("b",{children:s.age||"-"})]})]}),e.jsx("div",{className:`p-4 py-3 leading-none font-semibold text-base h-fit ${["2","9"].includes(s.event)?"bg-red-100 text-red-500":["3"].includes(s.event)?"bg-yellow-100 text-yellow-600":"bg-blue-100 text-blue-500"}  w-fit text-nowrap rounded-full flex items-center justify-center capitalize`,children:["2","9"].includes(s.event)?"Critical Alert":["3"].includes(s.event)?"Warning Alert":"Problem Alert"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center cursor-pointer",children:[e.jsx("h1",{className:"font-bold text-2xl text-text-primary !m-0",children:s.room_name||"-"}),e.jsx("p",{className:"font-normal text-lg text-text-primary !m-0",children:"Location of Incident"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("img",{width:22,height:22,src:T,alt:""}),e.jsx("p",{className:"!m-0 !mt-[2px] font-medium text-base text-text-primary/80",children:s.address||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`https://www.google.com/maps?q=${location.latitude},${location.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"text-base font-medium !text-blue-500",children:"View on Google Maps"}),e.jsx(_,{size:18,className:"text-blue-500"})]})]})]})})},i)),Object.entries(h).map(([s,i])=>e.jsxs(M,{position:[i[0].latitude||0,i[0].longitude||0],icon:E(["2","9"].includes(i[0].event)?"critical":["3"].includes(i[0].event)?"warning":"problem"),children:[e.jsx("style",{children:`
          .slick-dots {
            margin-bottom: 20px;
          }
        `}),e.jsx(L,{className:"w-[350px] !drop-shadow-2xl shadow-none !pb-6",children:e.jsx(K,{...d,children:i.map((o,g)=>e.jsxs("div",{className:"!flex w-full flex-col !gap-6 font-baloo pt-2 pb-4",children:[e.jsxs("div",{className:"flex font-baloo cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col w-full",onClick:()=>n(o.elderly_id),children:[e.jsx("h1",{className:"font-bold text-xl text-text-primary",children:o.elderly_name}),e.jsxs("span",{className:"font-normal text-base text-text-primary",children:["Age: ",e.jsx("b",{children:o.age||"-"})]})]}),e.jsx("div",{className:`p-4 py-3 leading-none font-semibold text-base h-fit ${["2","9"].includes(o.event)?"bg-red-100 text-red-500":["3"].includes(o.event)?"bg-yellow-100 text-yellow-600":"bg-blue-100 text-blue-500"}  w-fit text-nowrap rounded-full flex items-center justify-center capitalize`,children:["2","9"].includes(o.event)?"Critical Alert":["3"].includes(o.event)?"Warning Alert":"Problem Alert"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center cursor-pointer",children:[e.jsx("h1",{className:"font-bold text-2xl text-text-primary !m-0",children:o.room_name||"-"}),e.jsx("p",{className:"font-normal text-lg text-text-primary !m-0",children:"Location of Incident"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("img",{width:22,height:22,src:T,alt:""}),e.jsx("p",{className:"!m-0 !mt-[2px] font-medium text-base text-text-primary/80",children:o.address||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`https://www.google.com/maps?q=${location.latitude},${location.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"text-base font-medium !text-blue-500",children:"View on Google Maps"}),e.jsx(_,{size:18,className:"text-blue-500"})]})]})]},g))})})]},s))]})})}function Ye(){const[a,n]=l.useState("Map View"),[d,c]=l.useState(!1);l.useState([]),y("activeAlert");const f=y("recentlyClosedAlert"),[u,h]=l.useState([]),[s,i]=l.useState(1),[o,g]=l.useState(0),[D,H]=l.useState([]),[P,R]=l.useState([]),[Y,$]=l.useState(0),z=y("events"),[O,j]=l.useState(!0);l.useState(null);const[b,N]=l.useState(),[r,F]=l.useState(""),[B,W]=l.useState(!1),Z=I(),v=l.useCallback(()=>{j(!0),V({to_date:p().subtract(2,"days").format("YYYY-MM-DD"),from_date:p().format("YYYY-MM-DD"),is_resolved:!0,page:s}).then(t=>{g(t.total),j(!1),h(t.data)}).catch(t=>{j(!1),console.log(t)})},[s]);l.useEffect(()=>{v()},[v]);const w=l.useCallback(()=>{J({to_date:"2024-11-30",from_date:p().format("YYYY-MM-DD"),page:P}).then(t=>{$(t.total),t.data.length>0&&H(t.data)}).catch(t=>{console.log(t)})},[s]);l.useEffect(()=>{w()},[w]);const C=l.useCallback(()=>{if(r.trim()===""){N([]);return}ae({search:r}).then(t=>{N(t==null?void 0:t.data)}).catch(t=>{console.log(t)})},[r]);l.useEffect(()=>{C()},[C]);const m=(t,x)=>{if(!x)return t;const G=new RegExp(`(${x})`,"gi");return t.replace(G,'<mark style="background-color: #80CAA7; color: white;">$1</mark>')};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-4 flex-col pt-8 pb-8",children:[e.jsx("div",{className:"flex item-center justify-between w-full",children:e.jsx(A,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:e.jsxs("div",{className:"w-[350px] relative",children:[e.jsx(Q,{className:"rounded-[10px]  min-w-[350px] w-full ",size:"large",placeholder:"Search Anything",style:{height:"44px"},onChange:t=>F(t.target.value),onFocus:()=>W(!0)}),B&&r.trim()!==""&&e.jsx("div",{id:"searchResult",className:"mt-3 max-h-[600px] overflow-auto rounded-lg shadow-lg bg-white border border-gray-300 absolute top-10 left-0 z-[1000] w-full",children:e.jsx("ul",{children:b==null?void 0:b.map(t=>e.jsxs("li",{className:"p-4 hover:bg-gray-100 border-b border-gray-200 cursor-pointer",onClick:()=>{Z(`/supporter/elderlies/elderly-profile/${t==null?void 0:t._id}`)},children:[e.jsx("div",{className:"font-semibold text-lg text-gray-800",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:m(t.name,r)}})}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Age:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:m(t.age.toString(),r)}})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Address:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:m(t.address||"N/A",r)}})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Sensitivity Factors:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:m(t.diseases.join(", "),r)}})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Comments:"})," ",e.jsx("span",{dangerouslySetInnerHTML:{__html:m(t.comments.map(x=>x.comment).join(", "),r)}})]})]},t._id))})})]})})}),e.jsx("div",{className:"w-full",children:e.jsx(se,{refreshAlertList:v,isElderlyVisible:!0})}),e.jsxs("div",{className:"w-full flex gap-4 md:flex-row flex-col",children:[e.jsx("div",{className:"w-full  p-0 ",children:e.jsxs("div",{className:"bg-white  rounded-2xl  p-6 h-[600px]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-5",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Alerts View"}),e.jsx(ie,{size:"large",options:ce,onChange:t=>n(t)})]}),a==="Map View"&&e.jsx(re,{}),a==="Room View"&&e.jsx(te,{})]})}),e.jsx("div",{className:"bg-white w-full md:w-[48%] rounded-2xl p-6 h-[600px] overflow-hidden",children:e.jsx(le,{})})]}),e.jsxs("div",{id:"Recently_Closed_Alerts",className:"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6",children:[e.jsxs("div",{id:"Recently_Closed_Alerts_Header",className:"w-full flex justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:"Past Notifications"}),e.jsx("div",{children:e.jsx(A,{theme:{components:{Segmented:{itemSelectedBg:"#252F67",itemSelectedColor:"#fff",fontFamily:"Baloo2"}}}})})]}),e.jsx("div",{id:"Recently_Closed_Alerts_Table",className:"w-full",children:e.jsx(S.Provider,{value:{total:o,page:1,SetPage:i,limit:6},children:e.jsx(k,{loading:O,pageSize:6,tableData:u,columns:f})})})]}),e.jsxs("div",{id:"Events",className:"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6",children:[e.jsx("div",{id:"Events_Header",className:"w-full flex justify-between",children:e.jsx("h1",{className:"text-[24px] font-bold",children:"Events"})}),e.jsx("div",{id:"Events_Table",className:"w-full",children:e.jsx(S.Provider,{value:{total:Y,page:1,SetPage:()=>R,getList:{getAllEventList:w}},children:e.jsx(k,{pageSize:6,tableData:D,columns:z})})})]})]}),e.jsx(ee,{modalOpen:d,setModalOpen:c,type:"event"})]})}const ce=[{label:" Map View",value:"Map View",icon:e.jsx(oe,{})},{label:"Room View",value:"Room View",icon:e.jsx(ne,{})}],$e=[{label:"All Alerts",value:"All Alerts"},{label:"Critical",value:"Critical"},{label:"Warning",value:"Warning"},{label:"Informational",value:"Informational"}];export{$e as activeAlertSegmentOptions,ce as alertViewSegmentOptions,Ye as default};
//# sourceMappingURL=SupportAgentDashboard-BcM2kXLr.js.map
