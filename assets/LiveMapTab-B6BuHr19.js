import{r as x,j as e,eX as b,al as v}from"./index-DJPLPkhr.js";import{u as g,D as j,a as w}from"./RoomMap4-D69UJ-Tz.js";import{C as N}from"./UseCustomContext-C_RoMH9_.js";import{F as r}from"./index-B2rCdPm3.js";import"./to-BjYE5QnX.js";try{let d=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},o=new d.Error().stack;o&&(d._sentryDebugIds=d._sentryDebugIds||{},d._sentryDebugIds[o]="d95e2c71-986b-4b78-9060-c9a8472b4546",d._sentryDebugIdIdentifier="sentry-dbid-d95e2c71-986b-4b78-9060-c9a8472b4546")}catch{}function k(){var f;const d=x.useContext(N),{elderlyDetails:o}=d||{},u=o==null?void 0:o.deviceId,[m,h]=x.useState({});function p(s){return v(s)}return g({onMessage:s=>{var l;const i=(l=JSON.parse(s==null?void 0:s.message))==null?void 0:l.payload;if(i!=null&&i.deviceCode&&(i!=null&&i.position)){const n=p(i.position);h(c=>({...c,[i.deviceCode]:n}))}},dependencies:[u]}),e.jsx("div",{className:"flex flex-col gap-4 mt-6 overflow-hidden",children:(o==null?void 0:o.rooms)&&((f=o==null?void 0:o.rooms)==null?void 0:f.filter(s=>s.device_no).map((s,i)=>{var c;const n=(((c=s.device_no)==null?void 0:c.split(",").map(t=>t.trim()))||[]).flatMap(t=>m[t]||[]);return e.jsxs("div",{className:"flex flex-col gap-4 bg-white rounded-2xl p-4 h-[700px]",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s==null?void 0:s.name}),e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit z-50",children:[n.length>0&&e.jsx(b,{color:"white",overlayInnerStyle:{color:"black",padding:"10px"},title:n.map((t,a)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{style:{backgroundColor:t==null?void 0:t.color},className:"p-2 rounded-full",children:e.jsx(r,{size:14,color:"white"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm m-0",children:t==null?void 0:t.posture})})]},a)),children:e.jsx("div",{className:"flex -space-x-4 cursor-pointer",children:n.map((t,a)=>e.jsx("div",{style:{backgroundColor:t==null?void 0:t.color},className:"p-1 rounded-full border-2 border-white",children:e.jsx(r,{size:16,color:"white"})},a))})}),n.length===0&&e.jsx("div",{className:"bg-primary p-1 rounded-full border-2 border-white",children:e.jsx(r,{size:16,color:"white"})}),e.jsx("span",{className:"font-bold text-lg",children:n.length})]}),e.jsx("div",{id:"roomMap",className:"w-full h-full scale-[1.2] mt-14",children:(s==null?void 0:s.mount_type)===2?e.jsx(j,{roomInfo:s,position:n}):e.jsx(w,{roomInfo:s,position:n})})]})]},i)}))})}export{k as default};
//# sourceMappingURL=LiveMapTab-B6BuHr19.js.map
