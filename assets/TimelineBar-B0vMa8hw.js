import{r as c,j as s,bv as D}from"./index-BJgslc81.js";import{E as v}from"./index-BEN15-Ke.js";const C=({alarmEvents:d=[],enterBedTime:g,getupAfterTime:u})=>{const l={13:"#E416EB",11:"#9A7E6F"},n={13:"Sleep Apnea",11:"High Breathing"},[r,T]=c.useState([]),[a,f]=c.useState({});c.useEffect(()=>{const e=d.map(t=>({name:n[t.event_type],startTime:new Date(t.ts),endTime:new Date(t.ts),color:l[t.event_type]}));if(JSON.stringify(e)!==JSON.stringify(r)){T(e);const t=e.reduce((i,o)=>(i[o.name]=!0,i),{});f(t)}},[d,r]);const b=e=>{f(t=>({...t,[e]:!t[e]}))},y=Math.min(...r.map(e=>e.startTime.getTime())),E=Math.max(...r.map(e=>e.endTime.getTime())),S=r.map(e=>{const t=e.startTime.getTime()===e.endTime.getTime();return{name:e.name,value:[e.startTime.getTime(),e.endTime.getTime(),t?15:10],itemStyle:{color:e.color}}}).filter(e=>a[e.name]);if(r.length===0)return s.jsx(D,{description:"No data available to show"});const w={tooltip:{trigger:"item",formatter:e=>{const t=r[e.dataIndex],i=t.startTime.getTime()===t.endTime.getTime(),o=new Date(t.startTime).toLocaleString();if(i)return`${t.name}<br/>Date & Time: ${o}`;{const m=new Date(t.endTime).toLocaleString(),j=t.endTime-t.startTime,h=Math.floor(j/(1e3*60)),x=Math.floor(h/60),p=h%60,$=x>0?`${x} hour(s) ${p} minute(s)`:`${p} minute(s)`;return`<b>${t.name}</b> <br/>Start: ${o}<br/>End: ${m}<br/>Duration: ${$}`}}},grid:{left:"5%",right:"5%",bottom:"15%",containLabel:!1},xAxis:{type:"time",boundaryGap:!1,min:y,max:E,splitNumber:5,axisLabel:{formatter:e=>{const t=new Date(e),i=t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return t.getTime()===new Date(g).getTime()?`Enter Bed ${i}`:t.getTime()===new Date(u).getTime()?`Getup After ${i}`:i},interval:0,margin:5}},yAxis:{show:!1},series:[{name:"Events",type:"custom",renderItem:(e,t)=>{const i=t.coord([t.value(0),0]),o=t.coord([t.value(1),0]),m=t.size([0,t.value(2)])[1];return{type:"rect",shape:{x:i[0],y:e.coordSys.height-m+60,width:Math.max(o[0]-i[0],5),height:m},style:{fill:t.style().fill,stroke:"#fff",lineWidth:1}}},encode:{x:[0,1]},data:S}],graphic:[{type:"text",left:"5%",bottom:"1%",style:{text:`Enter Bed ${g}`,fontSize:12}},{type:"text",right:"5%",bottom:"1%",style:{text:`Getup After ${u}`,fontSize:12}}]};return s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 w-full",children:[s.jsx("div",{id:"customLegend",className:"w-full",children:s.jsx("div",{className:"flex flex-wrap gap-4 items-center justify-center",children:Object.keys(l).map(e=>s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>b(n[e]),children:[s.jsx("div",{id:"legendColorShape",className:"size-3 rounded-[4px] border-2",style:{backgroundColor:a[n[e]]?l[e]:"grey",borderColor:a[n[e]]?"transparent":"#ccc",color:a[n[e]]?"grey":"inherit"}}),s.jsx("div",{children:n[e]})]},e))})}),s.jsx(v,{option:w,style:{height:200,width:"100%"}})]})};export{C as default};
