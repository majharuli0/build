import{t as k,i as m,r as i,f as w,u as U,v as d,w as f,l as o,j as x,L as D,x as E,y as I}from"./index-DioY2D19.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new s.Error().stack;n&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[n]="67c12af0-0cdf-4f5c-bc8d-7c2557ae38c0",s._sentryDebugIdIdentifier="sentry-dbid-67c12af0-0cdf-4f5c-bc8d-7c2557ae38c0")}catch{}function P(){const s=k(),n=m(),{role:g}=n.state||{},[p,b]=i.useState(!0),{setStoreRole:h,setUser:y}=w(),r=U();let t=s.id.split("-");const a=()=>{let e=o.get("user");const _=E();o.get("rootToken")||(o.set("rootToken",_),o.set("rootRole",e.role))},c=e=>{I(e)},u=i.useCallback(()=>{if(console.log(t),t.length>=2){d({id:t[0],params:{role:"nurse"}}).then(e=>{l({...e.data,sub_role:"elderly"}),a(),c(e.data.access_token)}).catch(e=>{console.log(e)}),f({id:t[0]}).then(e=>{e.data.role!=="nursing_home"&&l({...e.data,sub_role:"elderly"})}).catch(e=>{console.log(e)});return}f({id:s.id}).then(e=>{l(e.data)}).catch(e=>{console.log(e)}),d({id:s.id}).then(e=>{a(),c(e.data.access_token)}).catch(e=>{console.log(e)})},[g,s.id]),T=e=>{e=="super_admin"?r("/support-agent/dashboard/"):e=="supports_agent"?r("/supporter/support-agent/dashboard"):e=="nurse"?r("/supporter/nurse/dashboard"):e=="end_user"?r("/supporter/end-user/dashboard"):e=="elderly"?r(`/supporter/elderlies/elderly-profile/${t[1]}?tab=overview`):r("/support-nurnt/dashboard")};function l(e){o.set("user",e),o.set("mainRole",e.role),o.set("role",e.role),h({role:e.role}),y({role:e.role}),setTimeout(()=>{b(!1),T((e==null?void 0:e.sub_role)||(e==null?void 0:e.role))},1500)}if(i.useEffect(()=>{u()},[u]),p)return x.jsx(D,{loaderTitle:"Loading User Profile"})}export{P as default};
//# sourceMappingURL=index-FFofs6F-.js.map
