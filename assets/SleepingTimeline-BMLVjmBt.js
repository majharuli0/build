import{r as m,$ as S,j as t}from"./index-Cx2ZnkBC.js";import h from"./TimelineGraph-BnAbpL0V.js";import{T as g}from"./Template-C8s_iPLz.js";import{f as c}from"./index-BvEkR90o.js";import{p as j}from"./ElderlyProfile-DI3tWnm9.js";import{C as A}from"./UseCustomContext-B_8njEg6.js";import{j as x}from"./helper-DZks3_Jq.js";import"./index-BgeVerw7.js";import"./WeeklyMonthlyPicker-BwcItM7T.js";import"./SwapRightOutlined-BrWUqLcp.js";import"./weekOfYear-BB4hO8z1.js";import"./index-DeYq_rVT.js";import"./weekday-C9b2Qfvl.js";import"./elderly-jxoq6zaW.js";import"./HomeOutlined-wi50rR7p.js";import"./PullRequestOutlined-CLSP_2Ou.js";import"./index-CPW0hMDt.js";import"./PlusOutlined-m9X7tEhB.js";function K(){const{sleepData:e,elderlyDetails:a}=m.useContext(A),[o,v]=m.useState([]),{sleepEventsType:f,sleepEventsColor:y}=m.useContext(S),N={title:"Sleep Timeline Summary",pickerTypes:["day","range"],chartType:"multibar",dataType:"duration",color:"#FF725E",icon:t.jsx(c,{}),apisProps:{endpoint:j,query:{uids:a==null?void 0:a.deviceId}}};return m.useEffect(()=>{var d;if(!e)return;const i=(d=e==null?void 0:e.statistical_data)==null?void 0:d.reduce((s,n)=>{const l=new Date(n.start_time),T=(new Date(n.end_time)-l)/(1e3*60),r=f[n.status];return s[r]||(s[r]={duration:0,color:y[r]}),s[r].duration+=T,s},{}),p=Object.entries(i||{}).map(([s,{duration:n,color:l}])=>{const u=Math.floor(n/60),T=Math.floor(n%60);return{name:s,duration:`${u}hr ${T}m`,color:l}});v([...p])},[e]),t.jsx(t.Fragment,{children:t.jsxs(g,{title:"Sleep Timeline",color:"#FF725E",icon:t.jsx(c,{}),isDataAnalysis:!1,headerClassName:"!text-2xl",summaryProps:N,children:[t.jsx(h,{statisticalData:e==null?void 0:e.statistical_data,enterBedTime:x(e==null?void 0:e.get_bed_idx),getupAfterTime:x(e==null?void 0:e.leave_bed_idx)}),t.jsx("div",{className:"flex flex-wrap gap-4 items-center justify-center",children:o.map((i,p)=>t.jsx(C,{time:i.duration,ItemName:i.name,color:i.color},p))})]})})}const C=({time:e,ItemName:a,color:o})=>t.jsxs("div",{className:"flex p-[4px] pr-4 items-center gap-2 rounded-xl  ",style:{backgroundColor:o},children:[t.jsx("span",{className:"text-[17px] p-2 py-1 font-bold bg-white rounded-[9px] text-primary",children:e}),t.jsx("span",{className:"text-[15px] font-medium text-white leading-[1.2]",children:a})]}),L=[{startTime:"2024-11-03 03:06:55",endTime:"2024-11-03 03:30:25",status:"3"},{startTime:"2024-11-03 03:30:25",endTime:"2024-11-03 03:35:22",status:"2"},{startTime:"2024-11-03 03:35:22",endTime:"2024-11-03 04:09:06",status:"1"},{startTime:"2024-11-03 04:09:06",endTime:"2024-11-03 04:39:51",status:"0"},{startTime:"2024-11-03 04:39:51",endTime:"2024-11-03 05:02:40",status:"1"},{startTime:"2024-11-03 05:02:40",endTime:"2024-11-03 05:12:35",status:"0"},{startTime:"2024-11-03 05:12:35",endTime:"2024-11-03 05:44:20",status:"1"},{startTime:"2024-11-03 05:44:20",endTime:"2024-11-03 05:54:15",status:"0"},{startTime:"2024-11-03 05:54:15",endTime:"2024-11-03 06:19:03",status:"1"},{startTime:"2024-11-03 06:19:03",endTime:"2024-11-03 06:29:58",status:"0"},{startTime:"2024-11-03 06:29:58",endTime:"2024-11-03 07:59:15",status:"1"}],Q=[{ts:"2024-11-03 03:35:22",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 03:39:21",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 03:43:18",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 03:45:17",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 03:47:16",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 05:50:17",eventName:"High Breathing",eventType:11},{ts:"2024-11-03 06:58:44",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 07:02:42",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 07:04:41",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 07:49:19",eventName:"Sleep Apnea",eventType:13},{ts:"2024-11-03 07:58:15",eventName:"Sleep Apnea",eventType:13}];export{Q as alarmEvents,K as default,L as statisticalData};
