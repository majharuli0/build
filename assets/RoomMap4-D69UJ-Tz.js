import{r as a,j as r}from"./index-DJPLPkhr.js";import{o as i0,a as Z,I as K,R as c0,T as l0,s as n0,d as r0,b as C0,c as g0,t as o0,l as h0,e as d0,f as A0,g as u0,S as P,L as F,C as G}from"./to-BjYE5QnX.js";import{C as T}from"./UseCustomContext-C_RoMH9_.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},C=new t.Error().stack;C&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[C]="7a842055-a934-4dba-b0f4-9e0c38bfc6ab",t._sentryDebugIdIdentifier="sentry-dbid-7a842055-a934-4dba-b0f4-9e0c38bfc6ab")}catch{}const D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUHSURBVHgB7dvhbdtWGIbRqyL/7U4QdYK4E1SZIN0gyQbdIPIETSdoukE6QeQNkg3UDZwJ1I+wAhiJ/Yq2KZuUzgEuriARsELeJxQpuzUAAAAAACZs1piszWYz3z68nM1ml43BCWQCtiGc1Xi+nbvRPXd6bbMPNc4rlHVjMAIZkZ4hJOsavzqbDEcgT2CAEJJlBXLeGIRA9mjPIdymux75uTEIgQzgiUK4VQXiuA7kWaO3sYXA/gnkBkLgm6MORAjschSBCIH7OqhAKoRuwXeL/0W7CuBbDELgXiYZyJGEsK7x+dr8pcZvNd43Hs2oAzniENY3fRte++Os8ahGFUgtgEVNr9qRhzAW147HvI3zWKxrrGpc7Ot30EYTSB2MZU3v2vSt28RCuMmEjsebGut6vy/3EckoAploHN2C/3xtTDKEm0zweMxrfKr3Pfgvao7lDPK6jdf1ENbb+cuB/8bsmI/Hbebt6n3/1Qb05IFsv6OYt6d3jCH8YETH4z4Gv4kxhjPIvD0uIdDbIX+TLoR76C506yzS7aNDuoN4b4cQiBCG1/3B1Z+NSQUihEdS+/R9nUVO6uGyHbkpBXJWB+6/xqPo/my3IlnVw9/bOD5uPcn78Pcg3Koiuajpoo3A9u7aoj2ynxpwK4FAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEDxrDGaz2SxqelXjtMZljYvZbPaxMVkCGUjFsazp3XdP/1HPf6hI3jYmyUesAVQEb9qPcXzzpl5/15gkgQxjVwDdmeS0MTkCeaBa+POa5js2O+2xDSMkkMdz0pgcgTxQXYCv29Udq12+NCZHIMM43/H6skLqExEjI5AB1OJ/X9Pylpe727y7AmKkfA8ykC6CumD/px6+blcX5N0Z42M9f9GYLIEMaHs94mxxQHzEgkAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFA8OwuG282m9Oa5jVO23Be9NzurH7+L+249d1Xx+q01sgivH5ZYz2bzS5bT7M+G9UPndf0d41FY/RqAfQ6rlNSa/BTG279rWq8rd203rXhzo9Y2ziGfHPw1BY1Pm3XdtTnGqQ7c8wbHJZ5u1rbUQxke82xaHCYFts1fqtdZ5AhL8bhIXpfWN/RSXpxVyD7elPsz6Ees3Xbj6/pxRjI9nbYqjElH9th+rcNb7Xrlm+fi/S3bX/1Mqx1jfN2gGohr2patuGs29XajnYGsr1X/LI5k4zdqsbLPvf2p6r+bV38y/bw/7BXree+utMXStsr/pPG2Hy9y7fDh6DW4vN2P0e3rwAAAAAAjtj/LOk4KUbNh4YAAAAASUVORK5CYII=",V=({object:t=[],convertCoords:C,roomType:y})=>{const{object_type:b,type:m,up_left:E,low_left:o,up_right:h,low_right:x}=t,w=[...C(E),...C(o),...C(x),...C([x[0],h[1]])],_={Bedroom:[{type:2,label:"Single Bed",width:18,length:8,fill:"black",stroke:"gray",icon:n0,object_type:6},{type:2,label:"Double Bed",width:18,fill:"black",stroke:"gray",length:13,icon:r0,object_type:7},{type:4,label:"Door",width:10,fill:"black",stroke:"gray",length:3,icon:D,object_type:4},{type:1,label:"Others",width:10,length:10,icon:C0,fill:"black",stroke:"gray",object_type:12}],Livingroom:[{type:5,label:"Sofa",width:10,fill:"black",stroke:"gray",length:10,icon:g0,object_type:8},{type:6,label:"Table",width:10,fill:"black",stroke:"gray",length:10,icon:o0,object_type:9},{type:4,label:"Door",width:10,length:3,fill:"black",stroke:"gray",icon:D,object_type:4},{type:1,label:"Others",width:10,fill:"black",stroke:"gray",length:10,icon:h0,object_type:13}],Bathroom:[{type:7,label:"Tub",width:15,length:7.5,fill:"black",stroke:"gray",icon:d0,object_type:10},{type:8,label:"Toilet",width:6,length:6,fill:"black",stroke:"gray",icon:A0,object_type:11},{type:4,label:"Door",width:10,length:3,fill:"black",stroke:"gray",icon:D,object_type:4},{type:1,label:"Others",width:10,length:10,fill:"black",stroke:"gray",icon:u0,object_type:14}]},[p,H]=a.useState({type:1,width:10,length:10,icon:null,fill:"black",stroke:"gray",label:"Others",object_type:14}),L=a.useRef(),M=a.useRef(),[O,X]=a.useState(0),[W,U]=a.useState(0),[B,Q]=a.useState(0),[S,I]=a.useState(0),[k,v]=a.useState(null);a.useEffect(()=>{L.current&&(X(L.current.getWidth()),U(L.current.getHeight())),console.log(p);const u=new window.Image;u.src=p.icon?p.icon:i0,u.onload=()=>{v(u),Q(40),I(40)}},[p.icon]);const d=u=>{let Y=Math.min(...u.filter((g,l)=>l%2===0)),R=Math.max(...u.filter((g,l)=>l%2===0)),e=Math.min(...u.filter((g,l)=>l%2!==0)),s=Math.max(...u.filter((g,l)=>l%2!==0));return[(Y+R)/2,(e+s)/2]},[f,j]=d(w);return a.useEffect(()=>{y&&_[y].filter(u=>{(u==null?void 0:u.object_type)==(t==null?void 0:t.object_type)&&H(u)})},[t]),r.jsxs(r.Fragment,{children:[r.jsx(Z,{points:w,closed:!0,fill:p.fill,strokeWidth:2}),k&&r.jsx(K,{ref:M,image:k,x:f-40/2,y:j-40/2,width:40,height:40}),r.jsx(c0,{x:f-O/2-5,y:j-(W+60)/2-5,width:O+10,height:W+10,fill:"rgba(0, 0, 0, 0.7)",cornerRadius:4}),r.jsx(l0,{ref:L,text:p.label,fontSize:14,fontStyle:"bold",fill:"white",x:f-O/2,y:j-(W+60)/2})]})},q="/assets/full-Bjw9MgTV.png",J="data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M10.6131%206.64705L9.14261%206.18552C9.14261%206.18552%208.32888%204.39366%208.30033%204.33936C8.10046%204%207.72928%203.76923%207.301%203.76923C7.12969%203.76923%206.95837%203.80995%206.81561%203.87782L4.81696%204.62443C4.6742%204.67873%204.55999%204.78733%204.50289%204.92307L3.78908%206.55203C3.67487%206.82352%203.80336%207.14932%204.10316%207.25791C4.17454%207.28506%204.24592%207.29864%204.3173%207.29864C4.54571%207.29864%204.75986%207.17647%204.84551%206.95927L5.43083%205.54751L6.03043%205.33031L5.04538%209.90497L3.13238%2012.1176C2.93252%2012.3484%202.96107%2012.6878%203.20376%2012.8778C3.3037%2012.9593%203.43218%2013%203.56066%2013C3.73198%2013%203.88901%2012.9321%204.00322%2012.7964L6.00188%2010.4887C6.05898%2010.4208%206.10181%2010.3394%206.11608%2010.2579L6.45871%208.68325L8.00053%209.74208V12.457C8.00053%2012.7557%208.2575%2013%208.57157%2013C8.88564%2013%209.14261%2012.7557%209.14261%2012.457V9.47058C9.14261%209.29411%209.05696%209.13122%208.9142%209.03619L7.52942%208.07239L7.91487%206.23981L8.18612%206.8371C8.2575%206.97285%208.37171%207.08144%208.52874%207.13574L10.2419%207.67873C10.299%207.6923%2010.3561%207.70588%2010.4275%207.70588C10.6702%207.70588%2010.8843%207.55656%2010.97%207.33936C11.0699%207.05429%2010.9128%206.74208%2010.6131%206.64705Z'%20fill='white'/%3e%3cpath%20d='M8%203C8.55228%203%209%202.55228%209%202C9%201.44772%208.55228%201%208%201C7.44772%201%207%201.44772%207%202C7%202.55228%207.44772%203%208%203Z'%20fill='white'/%3e%3c/svg%3e",$="data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.75121%204.82874C6.37769%204.5155%206.62123%203.78407%206.30719%203.15839C5.99395%202.53192%205.26253%202.28837%204.63685%202.60241C4.01037%202.91565%203.76683%203.64708%204.08087%204.27276C4.39411%204.89924%205.12553%205.14278%205.75121%204.82874Z'%20fill='white'/%3e%3cpath%20d='M6.9314%204.82558C7.32605%204.59212%207.71871%204.35556%208.10936%204.11437C8.27202%203.54695%208.43001%202.97722%208.58267%202.40594C8.66534%202.09749%208.95466%201.92897%209.22131%202.02869C9.48797%202.12841%209.63796%202.4616%209.54863%202.77004C9.36397%203.40858%209.18598%204.04944%209.01332%204.69261C8.99066%204.77687%208.95266%204.85109%208.90399%204.91216C8.86266%204.96936%208.81066%205.01729%208.74933%205.05362C8.38801%205.26544%208.02869%205.48112%207.67071%205.69912C7.93136%206.30287%208.19202%206.90739%208.45268%207.51114C8.70267%207.3488%208.95132%207.18414%209.19931%207.01871C9.22065%207.00402%209.24265%206.99011%209.26398%206.97542C9.30198%206.94991%209.34131%206.93136%209.38131%206.91899C9.5193%206.87879%209.67063%206.90662%209.79462%207.00944C9.82062%207.03108%209.84662%207.05273%209.87195%207.07437C10.5046%207.60004%2011.1419%208.11953%2011.7839%208.63129C12.0145%208.81605%2012.0685%209.18556%2011.9072%209.45149C11.7459%209.71742%2011.4286%209.78236%2011.1999%209.59451C9.97728%208.59186%209.87662%208.50606%209.47597%208.18524C9.08732%208.43416%208.84266%208.59032%208.664%208.7055C8.658%208.73488%208.65134%208.76425%208.644%208.79286C8.95732%208.84774%209.27064%208.90031%209.58463%208.95133C9.67596%208.96602%209.75796%209.00854%209.82462%209.07115C9.83529%209.08043%209.84529%209.09048%209.85529%209.10053C10.4566%209.73056%2011.0632%2010.3544%2011.6752%2010.9705C11.8865%2011.1839%2011.9045%2011.5588%2011.7185%2011.8016C11.5326%2012.0443%2011.2106%2012.0683%2011.0012%2011.8518C9.75729%2010.5662%209.78396%2010.5894%209.28798%2010.0885C7.94403%209.84111%207.95603%209.84343%207.38339%209.75066C7.36539%209.74757%207.34605%209.74448%207.32672%209.74139C7.32672%209.74139%207.32672%209.74139%207.32605%209.74139C7.24872%209.7267%207.17339%209.70351%207.10006%209.67104C6.83207%209.55431%206.60008%209.32471%206.46209%209.00467C6.16343%208.31202%205.86478%207.62014%205.56546%206.92749C5.16681%207.12539%204.76949%207.32793%204.3735%207.53356C4.30484%207.56912%204.23284%207.58536%204.16218%207.58304C4.10152%207.58458%204.04018%207.57376%203.97952%207.54748C3.43354%207.31479%202.88623%207.08906%202.33625%206.87106C2.07293%206.7667%201.9356%206.42578%202.0296%206.11966C2.12359%205.81353%202.41491%205.64964%202.67824%205.76174C3.16489%205.96891%203.65353%206.17068%204.14351%206.36703C4.56283%206.16063%204.98081%205.94959%205.39746%205.73468L6.9314%204.82558Z'%20fill='white'/%3e%3c/svg%3e",e0="data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M3.05232%2013H3.80862C3.8631%2012.711%203.91028%2012.4213%203.95299%2012.1312H6.72261V13H7.46714V10.6004H7.62511V9.91773H4.16409C4.24166%208.13183%204.0981%206.33998%203.73126%204.5768C3.48753%204.61943%203.2438%204.66201%203%204.7047C3.57003%207.4444%203.58628%2010.2558%203.05232%2013ZM4.12288%2010.6004H6.72261V11.7588H4.00443C4.05438%2011.3733%204.09377%2010.9871%204.12288%2010.6004Z'%20fill='white'/%3e%3cpath%20d='M6.18755%209.64269C6.23033%209.64877%206.27371%209.65287%206.31832%209.65287H9.12625L8.61192%2012.0665C8.52217%2012.487%208.8214%2012.8944%209.27996%2012.9766C9.33478%2012.9864%209.3894%2012.9912%209.44328%2012.9912C9.8397%2012.9912%2010.1937%2012.7343%2010.2727%2012.3641L10.9841%209.026C11.0328%208.7975%2010.9684%208.56378%2010.8068%208.38399C10.7596%208.33137%2010.7051%208.28619%2010.6462%208.2474C10.5241%208.41347%2010.3176%208.52276%2010.0861%208.52276C10.0702%208.52276%2010.0542%208.52226%2010.0384%208.52115C9.33641%208.47659%208.70661%208.33546%208.15925%208.10144H7.21682C7.21729%207.92363%207.22772%207.74397%207.24437%207.56462C6.94703%207.33196%206.69132%207.06082%206.48218%206.75275C6.00677%206.04968%205.91011%205.39879%205.89055%205.15161L5.88994%205.14422C5.88087%204.97381%205.94294%204.81506%206.0645%204.69218C6.18606%204.56949%206.35243%204.49737%206.53301%204.48943C6.54411%204.48887%206.55487%204.48862%206.56563%204.48862C6.92517%204.48862%207.22196%204.74648%207.24152%205.07583L7.24295%205.09098L7.2445%205.10686C7.24775%205.1328%207.25418%205.1778%207.26596%205.23495C7.28748%205.34294%207.33087%205.51168%207.4152%205.70555C7.44911%205.78276%207.48769%205.85636%207.52844%205.92829C7.55923%205.78927%207.58901%205.65572%207.61568%205.53073C7.80987%204.91305%207.55578%204.17379%206.9781%204.04179C6.40028%203.90967%205.56269%204.19744%205.22184%205.10612C4.76132%206.35811%204.66229%207.17302%204.83732%208.55162C5.02366%209.43045%205.62374%209.6157%206.18755%209.64269Z'%20fill='white'/%3e%3cpath%20d='M7.13289%205.25802C7.12044%205.19696%207.1136%205.14905%207.10995%205.11901C7.10826%205.10387%207.10717%205.09319%207.10656%205.08742C7.10643%205.0845%207.10629%205.08289%207.10629%205.08264C7.09018%204.81014%206.83718%204.6005%206.53958%204.61347C6.24082%204.62669%206.01042%204.85948%206.02491%205.13328H6.02477C6.02951%205.1815%206.06599%205.90183%206.59704%206.6872C6.8627%207.07836%207.25845%207.48274%207.82659%207.79857C8.39411%208.11501%209.12781%208.33892%2010.0474%208.39738C10.0603%208.39819%2010.0732%208.39862%2010.0859%208.39862C10.3677%208.39862%2010.6054%208.19848%2010.6254%207.93696C10.6462%207.66328%2010.4214%207.42596%2010.1231%207.40685C9.35062%207.3567%208.79832%207.17716%208.38856%206.94971C7.77718%206.60857%207.46265%206.14517%207.28978%205.75159C7.2045%205.55585%207.15753%205.38034%207.13289%205.25802Z'%20fill='white'/%3e%3cpath%20d='M9.57296%202.69278C9.68177%201.92533%209.0947%201.23531%208.2617%201.15159C7.4287%201.06786%206.66521%201.62214%206.5564%202.3896C6.44759%203.15706%207.03465%203.84708%207.86765%203.9308C8.70065%204.01452%209.46414%203.46024%209.57296%202.69278Z'%20fill='white'/%3e%3c/svg%3e",t0="data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.06681%208.59334C5.07414%208.59334%205.08151%208.59315%205.08888%208.59281C5.29474%208.58301%205.45175%208.44101%205.43971%208.2754C5.42138%208.02574%205.41312%207.79834%205.41321%207.59144C5.41167%206.68248%205.57633%206.17179%205.73815%205.90528V11.5359C5.73815%2011.7923%205.9965%2012%206.315%2012C6.63359%2012%206.89195%2011.7923%206.89195%2011.5359V8.14743H7.10822V11.5359C7.10822%2011.7923%207.36657%2012%207.68507%2012C8.00366%2012%208.26202%2011.7923%208.26202%2011.5359V5.90697C8.28969%205.95261%208.31754%206.00498%208.34507%206.06605C8.47656%206.35929%208.58728%206.8404%208.58686%207.59151C8.58686%207.79842%208.57856%208.02585%208.56045%208.27551C8.54841%208.44105%208.70552%208.58313%208.91138%208.59277C8.91875%208.59311%208.92608%208.5933%208.9334%208.5933C9.12961%208.5933%209.29422%208.47014%209.30575%208.31046C9.32455%208.05025%209.33332%207.81129%209.33332%207.59151C9.3315%206.4585%209.10651%205.83148%208.79982%205.45442C8.64654%205.2673%208.46727%205.14722%208.30154%205.08078C8.14201%205.01607%208.0018%205.00146%207.91772%205.00064C7.91226%205.00045%207.90689%205%207.90134%205H6.09873C6.09281%205%206.08702%205.00049%206.08119%205.00071C5.99697%205.00158%205.85732%205.01629%205.6984%205.08078C5.44741%205.18089%205.17683%205.39992%204.98754%205.78798C4.7959%206.17757%204.66731%206.74085%204.66666%207.59144C4.66666%207.81122%204.67543%208.05029%204.69442%208.31053C4.70604%208.47014%204.87061%208.5933%205.06681%208.59334Z'%20fill='white'/%3e%3cpath%20d='M7%204C7.55228%204%208%203.55228%208%203C8%202.44772%207.55228%202%207%202C6.44772%202%206%202.44772%206%203C6%203.55228%206.44772%204%207%204Z'%20fill='white'/%3e%3c/svg%3e",s0="data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8.67182%206.04248C8.80495%205.94123%208.96554%205.88766%209.13631%205.88761L10.7828%205.89549L11.2627%205.75666C11.5994%205.65924%2011.7917%205.31278%2011.6923%204.98291C11.5928%204.65299%2011.2392%204.46453%2010.9026%204.56195L8.37697%205.2928C8.24608%205.33067%208.1311%205.40885%208.04902%205.51573L6.70773%207.26281C6.77857%207.30197%206.85002%207.3392%206.92203%207.37343L8.67182%206.04248Z'%20fill='white'/%3e%3cpath%20d='M3.76498%207.45203C4.48791%208.24173%205.03274%208.62711%206.08097%209.05948C6.37098%209.1544%206.6014%209.15535%206.78828%209.09914C6.891%209.0834%206.99123%209.04279%207.07911%208.97591L9.34963%207.24907L12.3612%207.26347H12.3644C12.714%207.26347%2012.9983%206.98657%2013%206.64364C13.0017%206.29967%2012.7185%206.01943%2012.3674%206.01774L9.1364%206.00229C8.9929%206.00234%208.8559%206.04768%208.74357%206.13309L6.93697%207.50714C6.51337%207.31579%206.10675%207.03112%205.74026%206.74166L4.45338%207.16063C4.39983%207.17807%204.34425%207.18689%204.28816%207.18689C4.06222%207.18689%203.86247%207.04567%203.79117%206.83539C3.74703%206.70528%203.75725%206.56616%203.81996%206.44358C3.88261%206.32105%203.99031%206.22971%204.12304%206.18651L4.80884%205.96322C4.76022%205.92794%204.70927%205.89605%204.65669%205.86795L6.23093%203.62457C6.35827%203.44314%206.31138%203.19494%206.12623%203.07022C5.94097%202.94545%205.68778%202.99139%205.56049%203.17282L3.5515%206.03562C3.53615%206.05745%203.52348%206.08032%203.51316%206.10374C3.32989%206.452%203.33497%206.9767%203.76498%207.45203Z'%20fill='white'/%3e%3cpath%20d='M4.15985%206.29523C3.94662%206.36465%203.83119%206.59028%203.90208%206.79921C3.95878%206.96644%204.11759%207.07223%204.2881%207.07223C4.33061%207.07223%204.37389%207.06565%204.4164%207.0518L6.21038%206.46769C6.30044%206.4384%206.37718%206.37915%206.42737%206.30022L7.52071%204.5811C7.63955%204.39424%207.58127%204.14838%207.39062%204.03193C7.19988%203.91548%206.94897%203.97258%206.83018%204.15944L5.8145%205.75648L4.15985%206.29523Z'%20fill='white'/%3e%3cpath%20d='M2.71628%206.27376C3.32545%206.10781%203.68199%205.4894%203.51263%204.89249C3.34328%204.29558%202.71216%203.94621%202.103%204.11216C1.49383%204.2781%201.13729%204.89652%201.30664%205.49343C1.476%206.09034%202.10711%206.43971%202.71628%206.27376Z'%20fill='white'/%3e%3cpath%20d='M8.6739%209.08037C8.67141%209.04798%208.64792%209.02088%208.61568%209.01325L7.92708%208.85061C7.88614%208.84084%207.84495%208.86561%207.83504%208.90572C7.82512%208.94583%207.85034%208.98625%207.89128%208.99591L8.34906%209.10404L7.83834%209.30695C7.81363%209.31676%207.79598%209.33849%207.79171%209.36425C7.78749%209.39006%207.79725%209.41612%207.81754%209.43307L8.13512%209.69841L7.63976%209.70489C7.61393%209.70524%207.58998%209.71839%207.5762%209.73982C7.56242%209.76124%207.56069%209.78805%207.57152%209.81107L7.84806%2010.3962L7.29168%2010.0948C7.26991%2010.0829%207.24352%2010.0823%207.22104%2010.0931C7.19867%2010.1039%207.18306%2010.1248%207.17934%2010.149L7.09274%2010.7106L6.76194%2010.1787C6.74847%2010.157%206.72462%2010.1435%206.69868%2010.1429C6.67188%2010.1419%206.64824%2010.1546%206.63369%2010.1756L6.32837%2010.6161L6.28474%209.92673C6.28327%209.90376%206.27111%209.88268%206.25174%209.86967C6.23236%209.85667%206.20795%209.85318%206.18553%209.86011L5.8023%209.9795L5.98771%209.63826C6.00749%209.60184%205.99341%209.55654%205.95623%209.53716C5.91901%209.51778%205.87284%209.53158%205.85305%209.568L5.57967%2010.0712C5.56507%2010.098%205.56853%2010.1308%205.58842%2010.1541C5.6083%2010.1775%205.64044%2010.1866%205.67014%2010.1776L6.13859%2010.0317L6.19%2010.8437C6.19204%2010.8757%206.21451%2010.9028%206.24599%2010.9112C6.27747%2010.9197%206.31093%2010.9076%206.32924%2010.8811L6.69339%2010.3558L7.07174%2010.9641C7.08572%2010.9867%207.11064%2011%207.13683%2011C7.14181%2011%207.1469%2010.9995%207.15188%2010.9986C7.18336%2010.9923%207.20746%2010.9675%207.2123%2010.9364L7.3139%2010.2777L7.97849%2010.6377C8.00733%2010.6534%208.04323%2010.6491%208.06738%2010.627C8.09154%2010.605%208.09851%2010.5703%208.08462%2010.5409L7.75952%209.85303L8.34006%209.84541C8.37184%209.84501%208.40001%209.82532%208.41079%209.79602C8.42157%209.76673%208.41273%209.73399%208.38852%209.71376L8.01226%209.39938L8.62661%209.15532C8.65717%209.14296%208.67635%209.11276%208.6739%209.08037Z'%20fill='white'/%3e%3c/svg%3e",a0="data:image/svg+xml,%3csvg%20width='14'%20height='14'%20viewBox='0%200%2014%2014'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M2.03481%208.06962C2.60632%208.06962%203.06962%207.60632%203.06962%207.03481C3.06962%206.4633%202.60632%206%202.03481%206C1.4633%206%201%206.4633%201%207.03481C1%207.60632%201.4633%208.06962%202.03481%208.06962Z'%20fill='white'/%3e%3cpath%20d='M3.31788%207.42302C3.35283%207.82605%203.60749%208.06014%204.33958%208.06014H5.74164L4.22437%207.69272C4.10139%207.66296%203.99736%207.58703%203.93145%207.47904C3.86555%207.37101%203.84568%207.24384%203.87544%207.12086C3.92708%206.9075%204.11634%206.75854%204.33567%206.75854C4.37311%206.75854%204.41073%206.76304%204.44739%206.77192L6.30108%207.22084H8.61312C8.87435%207.22084%209.08683%207.43332%209.08683%207.69456C9.08683%207.71714%209.08472%207.73917%209.08164%207.76092L12.3716%208.06847C12.3898%208.07017%2012.4078%208.07104%2012.4257%208.07104C12.7191%208.07104%2012.9696%207.84757%2012.9975%207.54959C13.027%207.23349%2012.7947%206.95322%2012.4786%206.92374L5.9365%206.3121C5.40015%206.23704%204.91967%206.26086%204.28426%206.36834C3.58284%206.49132%203.28283%207.01991%203.31788%207.42302Z'%20fill='white'/%3e%3cpath%20d='M8.98098%207.69453C8.98098%207.49134%208.81623%207.32659%208.61304%207.32659H6.2884L4.42243%206.87473C4.22521%206.82694%204.02607%206.94822%203.97824%207.14576C3.93041%207.34324%204.05178%207.54211%204.24927%207.58994L6.15792%208.05216C6.18625%208.05901%206.21532%208.06251%206.24452%208.06251H8.61309C8.81623%208.06246%208.98098%207.89772%208.98098%207.69453Z'%20fill='white'/%3e%3c/svg%3e";function x0({url:t="wss://live.elderlycareplatform.com/ws/",onOpen:C,onMessage:y,onError:b,onClose:m,dependencies:E=[]}){const o=a.useRef(null);return a.useEffect(()=>{const h=new WebSocket(t);return o.current=h,h.onopen=()=>{console.log("Connected to WebSocket server"),C==null||C(h)},h.onmessage=x=>{try{const w=JSON.parse(x.data);y==null||y(w,h)}catch(w){console.error("Error parsing WebSocket message:",w)}},h.onerror=x=>{console.error("WebSocket error:",x),b==null||b(x,h)},h.onclose=()=>{console.log("Disconnected from WebSocket server"),m==null||m(h)},()=>h.close()},E),o.current}const z=Object.assign({});for(const t in z)Object.hasOwnProperty.call(z,t)&&(t.split("/").pop().replace(".svg",""),z[t].default);const p0=({roomInfo:t=[],position:C=[]})=>{const y=a.useContext(T),{elderlyDetails:b}=y||{};t!=null&&t.device_no||(b==null||b.deviceId);const[m,E]=a.useState(null),o=a.useRef(),[h,x]=a.useState(1),w=600,_=500,[p,H]=a.useState(600),[L,M]=a.useState(500),[O,X]=a.useState(0),[W,U]=a.useState(0),[B,Q]=a.useState({up_left:[0,0],low_left:[0,0],up_right:[0,0],low_right:[0,0]}),[S,I]=a.useState([]),k={0:null,1:J,2:$,3:e0,4:t0,5:s0,6:a0},v=10,d={x:30*v,y:25*v},f=(e=[0,0])=>{if(!Array.isArray(e)||e.length<2)throw new Error("Invalid input: coords must be an array with at least two elements.");const[s=0,g=0]=e;return[d.x-s*v,d.y+g*v]},j=[...f(B.up_left),...f(B.low_left),...f(B.low_right),...f(B.up_right)];a.useEffect(()=>{var g;if(t!=null&&t.device_boundaries&&typeof t.device_boundaries=="object"){const l=Object.fromEntries(Object.entries(t.device_boundaries).reduce((n,[c,i])=>(c==="_id"||n.push([c,i.split(",").map(Number)]),n),[]));Q(l)}else console.error("device_boundaries is undefined or not an object"),Q({});const e=(g=t==null?void 0:t.device_areas)==null?void 0:g.map(({_id:l,coordKey:n,...c})=>({...c,up_left:c.up_left.split(",").map(Number),low_left:c.low_left.split(",").map(Number),up_right:c.up_right.split(",").map(Number),low_right:c.low_right.split(",").map(Number)}));console.log(t),I(e);const s=new window.Image;s.src=q,s.onload=()=>{E(s)}},[t]);const[u,Y]=a.useState({});a.useEffect(()=>{(()=>{const s={};C==null||C.forEach(g=>{const l=k[g.postureIndex];if(l){const n=new window.Image;n.src=l,n.onload=()=>{s[l]=n,Y(c=>({...c,...s}))}}})})()},[C]);const R=e=>{const s=[],[g,l,n,c]=[Math.min(...e.filter((i,A)=>A%2===0)),Math.max(...e.filter((i,A)=>A%2===0)),Math.min(...e.filter((i,A)=>A%2!==0)),Math.max(...e.filter((i,A)=>A%2!==0))];for(let i=n+10;i<c;i+=10)s.push([g,i,l,i]);for(let i=g+10;i<l;i+=10)s.push([i,n,i,c]);return s};return a.useEffect(()=>{const e=()=>{if(o.current){const g=o.current.clientWidth/w,l=o.current.clientHeight/_,n=Math.min(g,l);x(n);const c=o.current.clientWidth,i=o.current.clientHeight;H(c),M(i);const A=(c-w*n)/2,N=(i-_*n)/2;X(A),U(N)}};e();const s=new ResizeObserver(e);return o.current&&s.observe(o.current),()=>{s&&s.disconnect()}},[w,_]),r.jsx("div",{ref:o,style:{width:"100%",height:"100%",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",margin:"0 auto",maxHeight:"500px",maxWidth:"600px"},children:r.jsx(P,{width:p||600,height:L||500,scaleX:h,scaleY:h,children:r.jsxs(F,{x:(p-600*h)/2,y:(L-500*h)/2,children:[r.jsx(Z,{points:j,closed:!0,stroke:"rgba(250, 181, 21, 1",strokeWidth:2,dash:[10,5],fill:"rgba(250, 181, 21, 0.2)",opacity:.4}),R(j).map((e,s)=>r.jsx(Z,{points:e,stroke:"rgba(250, 181, 21, 1",strokeWidth:.5,dash:[2,3]},s)),S&&(S==null?void 0:S.map((e,s)=>r.jsx(V,{object:e,roomType:t==null?void 0:t.name,convertCoords:f},s))),m&&r.jsx(K,{image:m,x:d.x-50/2,y:d.y-50/2,width:50,height:50}),C==null?void 0:C.map((e,s)=>r.jsxs(r.Fragment,{children:[r.jsx(G,{x:d.x-e.coordinates.x*10,y:d.y+e.coordinates.y*10,radius:18,fill:e.color},`circle-${s}`),e.postureIndex&&r.jsx(K,{image:u[k[e.postureIndex]],x:d.x-e.coordinates.x*10-15,y:d.y+e.coordinates.y*10-15,width:30,height:30})]}))]})})})},y0=({roomInfo:t=[],position:C=[]})=>{const y=a.useContext(T),{elderlyDetails:b}=y||{};t!=null&&t.room_no||(b==null||b.deviceId);const[m,E]=a.useState(null),o=a.useRef(),[h,x]=a.useState(1),w=600,_=500,[p,H]=a.useState(600),[L,M]=a.useState(500),[O,X]=a.useState(0),[W,U]=a.useState(0),[B,Q]=a.useState({up_left:[0,0],low_left:[0,0],up_right:[0,0],low_right:[0,0],mount_type:"wall"}),S={0:null,1:J,2:$,3:e0,4:t0,5:s0,6:a0},[I,k]=a.useState([]),v=10,d={x:30*v,y:0},f=(e=[0,0])=>{if(!Array.isArray(e)||e.length<2)throw new Error("Invalid input: coords must be an array with at least two elements.");const[s=0,g=0]=e;return[d.x-s*v,d.y+g*v]},j=[...f(B.up_left),...f(B.low_left),...f(B.low_right),...f(B.up_right)],[u,Y]=a.useState({});a.useEffect(()=>{(()=>{const s={};C==null||C.forEach(g=>{const l=S[g.postureIndex];if(l){const n=new window.Image;n.src=l,n.onload=()=>{s[l]=n,Y(c=>({...c,...s}))}}})})()},[C]),a.useEffect(()=>{var g;if(t!=null&&t.device_boundaries&&typeof t.device_boundaries=="object"){const l=Object.fromEntries(Object.entries(t.device_boundaries).reduce((n,[c,i])=>(c==="_id"||n.push([c,i.split(",").map(Number)]),n),[]));Q(l)}else console.error("device_boundaries is undefined or not an object"),Q({});const e=(g=t==null?void 0:t.device_areas)==null?void 0:g.map(({_id:l,coordKey:n,...c})=>({...c,up_left:c.up_left.split(",").map(Number),low_left:c.low_left.split(",").map(Number),up_right:c.up_right.split(",").map(Number),low_right:c.low_right.split(",").map(Number)}));k(e);const s=new window.Image;s.src=q,s.onload=()=>{E(s)}},[t]);const R=e=>{const s=[],[g,l,n,c]=[Math.min(...e.filter((i,A)=>A%2===0)),Math.max(...e.filter((i,A)=>A%2===0)),Math.min(...e.filter((i,A)=>A%2!==0)),Math.max(...e.filter((i,A)=>A%2!==0))];for(let i=n+10;i<c;i+=10)s.push([g,i,l,i]);for(let i=g+10;i<l;i+=10)s.push([i,n,i,c]);return s};return a.useEffect(()=>{const e=()=>{if(o.current){const g=o.current.clientWidth/w,l=o.current.clientHeight/_,n=Math.min(g,l);x(n);const c=o.current.clientWidth,i=o.current.clientHeight;H(c),M(i);const A=(c-w*n)/2,N=(i-_*n)/2;X(A),U(N)}};e();const s=new ResizeObserver(e);return o.current&&s.observe(o.current),()=>{s&&s.disconnect()}},[w,_]),r.jsx("div",{ref:o,style:{width:"100%",height:"100%",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",margin:"0 auto",maxHeight:"500px",maxWidth:"600px"},children:r.jsx(P,{width:p||600,height:L||500,scaleX:h,scaleY:h,children:r.jsxs(F,{children:[r.jsx(Z,{points:j,closed:!0,stroke:"rgba(250, 181, 21, 1",strokeWidth:2,dash:[10,5],fill:"rgba(250, 181, 21, 0.2)",opacity:.4}),R(j).map((e,s)=>r.jsx(Z,{points:e,stroke:"rgba(250, 181, 21, 1",strokeWidth:.5,dash:[2,3]},s)),I&&I.map((e,s)=>r.jsx(V,{roomType:t==null?void 0:t.name,object:e,convertCoords:f},s)),m&&r.jsx(K,{image:m,x:d.x-50/2,y:d.y-50/2,width:50,height:50}),C==null?void 0:C.map((e,s)=>r.jsxs(r.Fragment,{children:[r.jsx(G,{x:d.x-e.coordinates.x*10,y:d.y+e.coordinates.y*10,radius:18,fill:e.color},`circle-${s}`),e.postureIndex&&r.jsx(K,{image:u[S[e.postureIndex]],x:d.x-e.coordinates.x*10-15,y:d.y+e.coordinates.y*10-15,width:30,height:30})]}))]})})})};export{y0 as D,p0 as a,x0 as u};
//# sourceMappingURL=RoomMap4-D69UJ-Tz.js.map
