import{r as s,j as e,a6 as j,aB as v,aC as E,_ as x,E as C,aA as k}from"./index-C2rC2gQB.js";import{f}from"./helper-DwJfSDN4.js";import{H as M}from"./index-D1NB5jsY.js";import{S,b as D}from"./SuccessModal-fxHWWX1v.js";import{b}from"./index-CKZQk7k_.js";import"./UseCustomContext-DCXS3wNJ.js";import{u as A}from"./elderlySupport-DodSkdTI.js";const I=({date:t})=>{const[l,o]=s.useState(()=>f(t));return s.useEffect(()=>{console.log("Effect is running with date:",t);const n=()=>{const r=f(t);console.log("New duration:",r),o(r)};n();const a=setInterval(n,6e4);return()=>clearInterval(a)},[t]),e.jsx(e.Fragment,{children:l})};function R({row:t}){const[l,o]=s.useState(!1),[n,a]=s.useState(!1),[r,d]=s.useState(!1),i=s.useContext(j),g=c=>{o(c)},m=c=>{A({id:c.id,data:{event_status:c.event_status}}).then(p=>{x.custom(u=>e.jsx(C,{t:u,text:"Event Added Successfully!"})),i==null||i.getlist()}).catch(p=>{x.custom(u=>e.jsx(k,{t:u,title:"Error",text:p.message}))})},h=e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center gap-1 flex-col m-2",children:[e.jsxs("span",{onClick:()=>d(!0),className:"flex items-center gap-2 justify-start p-2 px-4 w-full mt-2 rounded-md hover:bg-[#008000]/10 cursor-pointer",children:[e.jsx(D,{color:"green"})," Mark As Done"]}),e.jsxs("span",{onClick:()=>a(!0),className:"flex items-center gap-2 justify-start p-2 px-4 mb-2 w-full rounded-md hover:bg-red-500/10 cursor-pointer",children:[e.jsx(b,{color:"red"}),"Close Event"]})]})});return e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{onClick:()=>o(!0),className:"cursor-pointer p-2 hover:bg-[#E8E9EE] rounded-full",children:e.jsx(M,{className:"cursor-pointer"})}),e.jsx(v,{open:l,onOpenChange:g,content:h,placement:"leftTop",trigger:"click"}),e.jsx(E,{onDelete:()=>m({id:t==null?void 0:t._id,event_status:"closed"}),modalOPen:n,setModalOpen:a,title:"Are you sure to close this event?",title2:"This process cannot be undo.",okText:"Close Event"}),e.jsx(S,{modalOPen:r,setModalOpen:d,onOk:()=>m({id:t==null?void 0:t._id,event_status:"open"}),title:"Are you sure to mark this event as done?",title2:"This process cannot be undo."})]})}export{I as A,R as a};
