import{r,b2 as b,bn as u,j as t,T as m,h9 as f,a$ as j,b0 as v}from"./index-BV0OwC2Y.js";try{let i=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new i.Error().stack;n&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[n]="fac2d186-3703-491e-a738-075e080a379c",i._sentryDebugIdIdentifier="sentry-dbid-fac2d186-3703-491e-a738-075e080a379c")}catch{}function g({data:i={}}){var a,x;const{deviceData:n}=r.useContext(b),l=r.useContext(u),{elderlyDetails:o}=l||{},d=(i==null?void 0:i.device_no)||(o==null?void 0:o.deviceId),s=r.useMemo(()=>{var e;return((e=n[d])==null?void 0:e.position)||[]},[(a=n[d])==null?void 0:a.position]);return r.useMemo(()=>{const e=n[d],c=e==null?void 0:e.hbstaticsTimestamp,h=Date.now();return!(e!=null&&e.hbstatics)||!c||(h-c)/1e3>90?null:e.hbstatics},[(x=n[d])==null?void 0:x.hbstaticsTimestamp]),t.jsx("div",{className:"flex gap-2 h-fit",children:t.jsxs("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit z-50",children:[(s==null?void 0:s.length)>0?t.jsx(m,{color:"white",overlayInnerStyle:{color:"black",padding:"10px"},title:s==null?void 0:s.map((e,c)=>t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("div",{style:{backgroundColor:e==null?void 0:e.color},className:"p-2 rounded-full",children:t.jsx(f,{size:14,color:"white"})}),t.jsx("div",{children:t.jsx("p",{className:"text-sm m-0",children:e==null?void 0:e.posture})})]},c)),children:t.jsx("div",{className:"flex -space-x-4 cursor-pointer",children:s==null?void 0:s.map((e,c)=>t.jsx("div",{style:{backgroundColor:e==null?void 0:e.color},className:"p-1 rounded-full border-2 border-white",children:t.jsx(f,{size:16,color:"white"})},c))})}):t.jsx("div",{className:"bg-primary p-1 rounded-full border-2 border-white",children:t.jsx(f,{size:16,color:"white"})}),t.jsx("span",{className:"font-bold text-lg",children:s?s==null?void 0:s.length:0})]})})}function C(){var d;const i=r.useContext(u),{elderlyDetails:n}=i||{},[l,o]=r.useState({});return t.jsx("div",{className:"flex flex-col gap-4 mt-6 overflow-hidden",children:(n==null?void 0:n.rooms)&&((d=n==null?void 0:n.rooms)==null?void 0:d.filter(s=>s.device_no).map((s,a)=>{var e;return(((e=s.device_no)==null?void 0:e.split(",").map(c=>c.trim()))||[]).flatMap(c=>l[c]||[]),t.jsxs("div",{className:"flex flex-col gap-4 bg-white rounded-2xl p-4 h-[700px]",children:[t.jsx("h1",{className:"text-2xl font-bold",children:s==null?void 0:s.name}),t.jsxs("div",{className:"flex h-full",children:[t.jsx(g,{data:s}),t.jsxs("div",{id:"roomMap",className:"w-fit h-full scale-[1.2] mt-14 mx-auto",children:[(s==null?void 0:s.mount_type)===2&&t.jsx(j,{roomInfo:s}),(s==null?void 0:s.mount_type)===1&&t.jsx(v,{roomInfo:s})]})]})]},a)}))})}export{C as default};
//# sourceMappingURL=LiveMapTab-CnnfbQag.js.map
