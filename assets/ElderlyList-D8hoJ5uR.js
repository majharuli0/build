import{u as b,r as n,$ as j,j as t,bq as E,B as y,d7 as N,d8 as v,a1 as C,bj as S,X as A,W as _,Y as w,aH as k}from"./index-2UQ-37Xq.js";import{E as I}from"./Elderly-Dazlx9_P.js";try{let l=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},i=new l.Error().stack;i&&(l._sentryDebugIds=l._sentryDebugIds||{},l._sentryDebugIds[i]="bf290fc6-6118-433b-a1ec-c792109df72f",l._sentryDebugIdIdentifier="sentry-dbid-bf290fc6-6118-433b-a1ec-c792109df72f")}catch{}function T({row:l={}}){const i=b(),a=n.useContext(j),[u,o]=n.useState(!1),m=d=>{window.scrollTo(0,0),i(`/supporter/elderlies/elderly-profile/${d==null?void 0:d._id}`)};function f(){o(!0)}return t.jsxs(t.Fragment,{children:[t.jsxs(E,{children:[t.jsx(y,{type:"primary",icon:t.jsx(N,{}),onClick:()=>f(),children:"Edit"}),t.jsx(y,{icon:t.jsx(v,{}),onClick:()=>m(l),children:"View"})]}),t.jsx(C,{item:{...l,role:"elderly"},getlist:a==null?void 0:a.getlist,role:"elderly",modalOPen:u,setModalOpen:o,isEditMode:u})]})}function O(l){var p;const i=b(),a=(p=JSON.parse(localStorage.getItem("user")))==null?void 0:p.role,u=e=>{window.scrollTo(0,0),i(`/supporter/elderlies/elderly-profile/${e==null?void 0:e._id}`)},o={support_agent:["elderlyName","activeAlert","allergies","diseases","viewProfile"],nurse:["elderlyName","activeAlert","allergies","diseases","medications","viewProfile"],end_user:["elderlyName","activeAlert","allergies","diseases","medications","viewProfile"]},m={elderlyName:{title:()=>{switch(a){case"nurse":return"Resident Name";default:return"User Name"}},render:e=>t.jsx(I,{onClick:()=>u(e),data:e})},roomName:{title:"Room Name",dataIndex:"roomName",render:e=>t.jsx("span",{children:e})},activeAlert:{title:"Active Fall Alerts",dataIndex:"unresolved_alarm_count",render:e=>t.jsx("span",{children:e})},address:{title:"Address",width:"230px",render:e=>t.jsx("span",{className:"!w-[230px] text-nowrap",children:e.address})},allergies:{title:"Comments",render:e=>{var s;return t.jsx("span",{children:((s=e==null?void 0:e.comments)==null?void 0:s.map(c=>c.comment).join(", "))||"N/A"})}},diseases:{title:"Conditions",render:e=>{var s;return t.jsx("span",{children:((s=e==null?void 0:e.diseases)==null?void 0:s.map(c=>c).join(", "))||"N/A"})}},medications:{title:"Daily Routine",render:e=>{var s;return t.jsx("span",{children:(s=e.medications)==null?void 0:s.map(c=>c.name).join(", ")})}},viewOnMap:{title:"View On Map",render:e=>t.jsx("span",{className:"flex items-center transition-all duration-300 justify-start gap-2 text-sm font-medium text-text-primary hover:text-primary cursor-pointer p-2 rounded-md w-fit text-center hover:bg-slate-100",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("a",{href:`https://www.google.com/maps?q=${e.latitude},${e.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"text-base font-medium !text-blue-500",children:"View on Map"}),t.jsx(S,{size:18,className:"text-blue-500"})]})})},viewProfile:{title:"Actions",render:e=>t.jsx(T,{row:e})}},[f,d]=n.useState([]);return n.useEffect(()=>{console.log("Current role:"),console.log("Available roles:",Object.keys(o));{const e=o.support_agent.map(s=>m[s]);d(e)}},[]),f}function M(){var h;const[l,i]=n.useState(""),[a,u]=n.useState([]),[o,m]=n.useState(!1),[f,d]=n.useState({}),p=O(),e=JSON.parse(localStorage.getItem("user")),s=n.useMemo(()=>A(r=>{d(g=>({...g,name:r.trim()}))},500),[]);n.useEffect(()=>()=>s.cancel(),[s]);const c=r=>{i(r),r===""?(s.cancel(),d(g=>({...g,name:""}))):s(r)},x=n.useCallback(()=>{m(!0),_(f).then(r=>u(r)).catch(r=>console.log(r)).finally(()=>m(!1))},[f]);return n.useEffect(()=>{x()},[x]),t.jsxs("div",{id:"Elderlies",className:"w-full flex flex-col gap-4 justify-center items-center bg-white rounded-2xl p-6 mt-8",children:[t.jsxs("div",{id:"Elderlies_Header",className:"w-full flex justify-between",children:[t.jsx("h1",{className:"text-[24px] font-bold",children:(e==null?void 0:e.role)=="nurse"?"Residents":"Users"}),t.jsx("div",{className:"flex gap-4",children:t.jsx(w,{search:l,setSearch:c,placeholder:"Search Users"})})]}),t.jsx(j.Provider,{value:{total:(h=a==null?void 0:a.data)==null?void 0:h.length,page:1,SetPage:()=>{},getlist:x},children:t.jsx(k,{loading:o,columns:p,tableData:a==null?void 0:a.data})})]})}export{M as default};
//# sourceMappingURL=ElderlyList-D8hoJ5uR.js.map
