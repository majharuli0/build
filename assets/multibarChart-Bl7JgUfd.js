import{a4 as E,a5 as v,r as x,S as $,e as l,j as D,aj as B}from"./index-CbzTNhCW.js";import{E as C}from"./index-bGXAfzmQ.js";try{let r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new r.Error().stack;n&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[n]="c2ba7521-2fad-44f7-9012-eb5c0f7a740f",r._sentryDebugIdIdentifier="sentry-dbid-c2ba7521-2fad-44f7-9012-eb5c0f7a740f")}catch{}var O={exports:{}};(function(r,n){(function(i,o){r.exports=o()})(E,function(){return function(i,o){o.prototype.isSameOrAfter=function(a,f){return this.isSame(a,f)||this.isAfter(a,f)}}})})(O);var I=O.exports;const _=v(I);var j={exports:{}};(function(r,n){(function(i,o){r.exports=o()})(E,function(){return function(i,o){o.prototype.isSameOrBefore=function(a,f){return this.isSame(a,f)||this.isBefore(a,f)}}})})(j);var k=j.exports;const N=v(k);l.extend(_);l.extend(N);function F({data:r,fromDate:n,toDate:i,valueType:o="duration"}){const[a,f]=x.useState([]),{sleepEventsType:b,sleepEventsColor:g}=x.useContext($);x.useEffect(()=>{f(Array.isArray(r)?r:[])},[r]);const S=(d,p)=>{if(p==="duration"){const y=Math.floor(d/60),h=d%60;return`${y}hr ${h}m`}return d.toString()},w=x.useMemo(()=>{const p=((e,t)=>{const s=[];let u=l(e);const c=l(t);for(;u.isSameOrBefore(c);)s.push(u.format("YYYY-MM-DD")),u=u.add(1,"day");return s})(n,i),y=(Array.isArray(a)?a:[]).reduce((e,t)=>{if(!(t!=null&&t.date)||!(t!=null&&t.data))return e;const s=l(t.date).format("YYYY-MM-DD");return e[s]=t.data,e},{}),h=[...new Set((Array.isArray(a)?a:[]).flatMap(e=>{var t;return((t=e==null?void 0:e.data)==null?void 0:t.map(s=>s.status))||[]}))],m=Object.entries(b).filter(([e])=>h.includes(e)),M=m.map(([e,t])=>{const s=p.map(u=>{const c=y[u],A=c==null?void 0:c.find(Y=>Y.status===e);return A?Number(A.value):0});return{name:t,type:"bar",stack:"total",data:s,itemStyle:{color:g[t]}}});return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{let t=`${e[0].axisValue}<br/>`;return e.forEach(s=>{s.value>0&&(t+=`${s.marker} ${s.seriesName}: ${S(s.value,o)}<br/>`)}),t}},legend:{data:m.map(([e,t])=>t)},xAxis:{type:"category",data:p},yAxis:{type:"value",axisLabel:{formatter:e=>S(e,o)}},series:M}},[a,n,i,b,g,o]);return(r==null?void 0:r.length)===0||!i||!n?D.jsx(B,{description:"No data available to show"}):D.jsx(C,{option:w,style:{height:"350px"}})}export{F as default};
//# sourceMappingURL=multibarChart-Bl7JgUfd.js.map
