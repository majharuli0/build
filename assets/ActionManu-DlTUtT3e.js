import{r as s,j as e,a9 as j,aE as v,aF as E,_ as x,H as k,aD as C}from"./index-B9uzjFUT.js";import{f}from"./helper-Q2f27-hf.js";import{H as S}from"./index-wJMI2hn7.js";import{S as D,b as M}from"./SuccessModal-iddNgZPK.js";import{b}from"./index-BCJ9kT-v.js";import"./UseCustomContext-CIVOuH2a.js";import{u as y}from"./elderlySupport-Deo2ewVI.js";const H=({date:t})=>{const[l,o]=s.useState(()=>f(t));return s.useEffect(()=>{console.log("Effect is running with date:",t);const n=()=>{const r=f(t);console.log("New duration:",r),o(r)};n();const a=setInterval(n,6e4);return()=>clearInterval(a)},[t]),e.jsx(e.Fragment,{children:l})};function I({row:t}){const[l,o]=s.useState(!1),[n,a]=s.useState(!1),[r,d]=s.useState(!1),i=s.useContext(j),g=c=>{o(c)},m=c=>{y({id:c.id,data:{event_status:c.event_status}}).then(p=>{x.custom(u=>e.jsx(k,{t:u,text:"Event Status Updated Successfully!"})),i==null||i.getList()}).catch(p=>{x.custom(u=>e.jsx(C,{t:u,title:"Error",text:p.message}))})},h=e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center gap-1 flex-col m-2",children:[e.jsxs("span",{onClick:()=>d(!0),className:"flex items-center gap-2 justify-start p-2 px-4 w-full mt-2 rounded-md hover:bg-[#008000]/10 cursor-pointer",children:[e.jsx(M,{color:"green"})," Mark As Done"]}),e.jsxs("span",{onClick:()=>a(!0),className:"flex items-center gap-2 justify-start p-2 px-4 mb-2 w-full rounded-md hover:bg-red-500/10 cursor-pointer",children:[e.jsx(b,{color:"red"}),"Close Event"]})]})});return e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{onClick:()=>o(!0),className:"cursor-pointer p-2 hover:bg-[#E8E9EE] rounded-full",children:e.jsx(S,{className:"cursor-pointer"})}),e.jsx(v,{open:l,onOpenChange:g,content:h,placement:"leftTop",trigger:"click"}),e.jsx(E,{onDelete:()=>m({id:t==null?void 0:t._id,event_status:"closed"}),modalOPen:n,setModalOpen:a,title:"Are you sure you want to mark this event as close?",title2:"This process cannot be undone.",okText:"Close Event"}),e.jsx(D,{modalOPen:r,setModalOpen:d,onOk:()=>m({id:t==null?void 0:t._id,event_status:"open"}),title:"Are you sure you want to mark this event as completed?",title2:"This process cannot be undone."})]})}export{H as A,I as a};
