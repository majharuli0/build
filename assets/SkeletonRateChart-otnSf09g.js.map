{"version":3,"file":"SkeletonRateChart-otnSf09g.js","sources":["../../src/Components/GraphAndChart/RateChart.jsx","../../src/Components/Skeleton/SkeletonRateChart.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\nimport ReactEcharts from \"echarts-for-react\";\nimport { Empty } from \"antd\";\nfunction dayOfWeekFromDayNumber(dayNumber) {\n  const daysOfWeek = [\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\",\n    \"Sunday\",\n  ];\n  return daysOfWeek[dayNumber];\n}\n\nconst RateChart = ({ dateType, cheartInfo = {}, color, fromDate, toDate }) => {\n  const [isMounted, setIsMounted] = useState(false);\n\n  useEffect(() => {\n    // Set the mounted state to true once the component is mounted\n    setIsMounted(true);\n  }, []);\n  const option = useMemo(() => {\n    try {\n      const { xdata, maxArray, minArray, allAvgNumber } = cheartInfo;\n\n      // Generate all dates in the range\n      const dates = [];\n      const start = new Date(fromDate);\n      const end = new Date(toDate);\n\n      // Create a map of existing data\n      const dataMap = new Map();\n      xdata.forEach((date, index) => {\n        const dateStr = new Date(date).toISOString().split(\"T\")[0];\n        dataMap.set(dateStr, {\n          min: minArray[index],\n          max: maxArray[index],\n        });\n      });\n\n      // Generate all dates and their data\n      const allData = [];\n      for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {\n        const dateStr = d.toISOString().split(\"T\")[0];\n        const existingData = dataMap.get(dateStr);\n\n        if (dateType === \"Month\") {\n          const month = d.getMonth() + 1;\n          const day = d.getDate();\n          dates.push(\n            `${month < 10 ? \"0\" + month : month}-${day < 10 ? \"0\" + day : day}`\n          );\n        } else {\n          dates.push(\n            dayOfWeekFromDayNumber(d.getDay() === 0 ? 6 : d.getDay() - 1)\n          );\n        }\n\n        allData.push({\n          min: existingData ? existingData.min : null,\n          max: existingData ? existingData.max : null,\n        });\n      }\n\n      // Find min/max values and their positions from valid data only\n      const validData = allData.filter((d) => d.min !== null && d.max !== null);\n      const minValue = Math.min(...validData.map((d) => d.min));\n      const maxValue = Math.max(...validData.map((d) => d.max));\n\n      // Find the positions of min and max values\n      const minPosition = allData.findIndex((item) => item.min === minValue);\n      const maxPosition = allData.findIndex((item) => item.max === maxValue);\n\n      return {\n        backgroundColor: \"#fff\",\n        grid: {\n          left: \"2%\",\n          right: \"7%\",\n          bottom: \"4%\",\n          top: \"20%\",\n          containLabel: true,\n        },\n        tooltip: {\n          trigger: \"axis\",\n          formatter: function (params) {\n            const date = params[0].axisValue;\n            const minVal = params[0].value[1];\n            const maxVal = params[0].value[2];\n            return `<span style=\"font-weight: bold;\">Date: ${date}</span><br/><span >Max: ${\n              maxVal || \"-\"\n            }</span><br/><span >Min: ${\n              minVal || (minVal >= 0 && minVal !== null) ? minVal : \"-\"\n            }</span>`;\n          },\n        },\n        xAxis: {\n          type: \"category\",\n          splitLine: { show: false },\n          axisTick: { show: false },\n          axisLine: {\n            lineStyle: {\n              color: \"#ccc\",\n            },\n          },\n          axisLabel: {\n            color: \"#666\",\n          },\n          data: dates,\n        },\n        yAxis: {\n          type: \"value\",\n          name: \"BPM\",\n          nameLocation: \"end\",\n          axisLine: { show: false },\n          axisLabel: {\n            color: \"#666\",\n          },\n          splitLine: {\n            lineStyle: {\n              color: \"#eee\",\n            },\n          },\n        },\n        series: [\n          {\n            name: \"Range\",\n            type: \"custom\",\n            renderItem: (params, api) => {\n              const start = api.coord([api.value(0), api.value(1)]);\n              const end = api.coord([api.value(0), api.value(2)]);\n              const height = end[1] - start[1];\n\n              return {\n                type: \"rect\",\n                shape: {\n                  x: start[0] - 10,\n                  y: start[1],\n                  width: 20,\n                  height: height,\n                  r: 10,\n                },\n                style: {\n                  fill: color, // Adjust the color as needed\n                  //   stroke: \"#2980b9\",\n                  lineWidth: 1,\n                },\n              };\n            },\n            encode: {\n              x: 0,\n              y: [1, 2], // Encode for the range (min, max)\n            },\n            data: allData.map((item, i) => [i, item.min, item.max]),\n          },\n          {\n            name: \"Average\",\n            type: \"line\",\n            symbol: \"none\",\n            lineStyle: {\n              type: \"dashed\",\n              width: 1,\n            },\n            markLine: {\n              silent: true,\n              symbol: \"none\",\n              data: [\n                {\n                  yAxis: allAvgNumber,\n                  label: {\n                    show: true,\n                    formatter: `Avg: ${allAvgNumber}`,\n                    position: \"end\",\n                    color: color,\n                  },\n                  lineStyle: {\n                    color: color,\n                    width: 1,\n                  },\n                },\n              ],\n            },\n          },\n          {\n            name: \"Minimum\",\n            type: \"pictorialBar\",\n            symbolSize: [15, 15],\n            symbolOffset: [0, -19],\n            symbolPosition: \"end\",\n            z: 12,\n            label: {\n              normal: {\n                show: true,\n                offset: [1, 60],\n                position: \"top\",\n                fontSize: 13,\n                fontWeight: 400,\n                color: color,\n                lineHeight: 15,\n                formatter: function (params) {\n                  return `Min\\n${minValue}`;\n                },\n              },\n            },\n            itemStyle: {\n              borderColor: color,\n              borderWidth: 2,\n              borderType: \"solid\",\n            },\n            color: \"#fff\",\n            data: new Array(allData.length).fill(null).map((_, index) => ({\n              value: index === minPosition ? minValue : \"-\",\n              symbolSize: [15, 15],\n              symbol: index === minPosition ? \"circle\" : \"none\",\n            })),\n          },\n          {\n            name: \"Maximum\",\n            type: \"pictorialBar\",\n            symbolSize: [15, 15],\n            symbolOffset: [0, 2],\n            symbolPosition: \"end\",\n            z: 12,\n            label: {\n              normal: {\n                show: true,\n                offset: [1, 2],\n                position: \"top\",\n                fontSize: 13,\n                fontWeight: 400,\n                color: color,\n                lineHeight: 15,\n                formatter: function (params) {\n                  return `Max\\n${maxValue}`;\n                },\n              },\n            },\n            itemStyle: {\n              borderColor: color,\n              borderWidth: 2,\n              borderType: \"solid\",\n            },\n            color: \"#fff\",\n            data: new Array(allData.length).fill(null).map((_, index) => ({\n              value: index === maxPosition ? maxValue : \"-\",\n              symbolSize: [15, 15],\n              symbol: index === maxPosition ? \"circle\" : \"none\",\n            })),\n          },\n        ],\n        legend: {\n          data: [\"Average\", \"Minimum\", \"Maximum\"],\n          textStyle: {\n            color: \"#666\",\n          },\n        },\n      };\n    } catch (error) {\n      return {\n        backgroundColor: \"#fff\",\n        title: {\n          text: \"No data available\",\n          show: true,\n          left: \"center\",\n          top: \"center\",\n          textStyle: {\n            color: \"#000\",\n            fontSize: \"20px\",\n            fontWeight: 400,\n          },\n        },\n      };\n    }\n  }, [cheartInfo, dateType, isMounted, fromDate, toDate, color]);\n  if (!cheartInfo?.xdata?.length) {\n    return <Empty description=\"No data available to show\" />;\n  }\n  return (\n    <ReactEcharts\n      option={option}\n      notMerge={true}\n      style={{\n        height: \"300px\",\n        width: \"100%\",\n        transition: \"all 0.3s ease\",\n      }}\n    />\n  );\n};\n\nexport default RateChart;\n","import React from \"react\";\nimport { Skeleton } from \"antd\";\nimport PropTypes from \"prop-types\";\n\nconst SkeletonRateChart = ({\n  height = 300,\n  chartHeight = 250,\n  barCount = 7,\n  barWidth = 40,\n  gridLines = 5,\n}) => {\n  return (\n    <div\n      className=\"w-full flex flex-col p-4 skeleton-wrapper\"\n      style={{ height }}\n    >\n      <div\n        className=\"relative w-full border border-gray-200 rounded-md\"\n        style={{ height: chartHeight }}\n      >\n        <div className=\"w-full h-full flex flex-col justify-between\">\n          {[...Array(gridLines)].map((_, i) => (\n            <div key={i} className=\"w-full h-px bg-gray-100\" />\n          ))}\n        </div>\n        <div className=\"absolute bottom-0 left-0 right-0 top-0 flex justify-between p-4\">\n          {[...Array(barCount)].map((_, index) => (\n            <div\n              key={index}\n              className=\"flex flex-col items-center justify-end skeleton-bar-group\"\n              style={{ width: `${100 / barCount}%` }}\n            >\n              <div\n                className=\"relative w-full flex flex-col items-center\"\n                style={{ width: barWidth }}\n              >\n                <Skeleton.Node\n                  active\n                  style={{\n                    width: 10,\n                    height: 100,\n                    position: \"absolute\",\n                    bottom: `${Math.random() * 50 + 10}%`,\n                    backgroundColor: \"#f0f0f0\",\n                  }}\n                />\n                <Skeleton.Node\n                  active\n                  style={{\n                    width: 6,\n                    height: `${Math.random() * 40 + 30}%`,\n                    borderRadius: \"2px\",\n                    position: \"absolute\",\n                    bottom: \"10%\",\n                    backgroundColor: \"#f0f0f0\",\n                  }}\n                />\n                <Skeleton.Node\n                  active\n                  style={{\n                    width: 10,\n                    height: 10,\n                    borderRadius: \"50%\",\n                    position: \"absolute\",\n                    bottom: `${Math.random() * 40 + 50}%`,\n                    backgroundColor: \"#f0f0f0\",\n                  }}\n                />\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nSkeletonRateChart.propTypes = {\n  height: PropTypes.number,\n  chartHeight: PropTypes.number,\n  barCount: PropTypes.number,\n  barWidth: PropTypes.number,\n  gridLines: PropTypes.number,\n};\n\nexport default SkeletonRateChart;\n"],"names":["dayOfWeekFromDayNumber","dayNumber","RateChart","dateType","cheartInfo","color","fromDate","toDate","isMounted","setIsMounted","useState","useEffect","option","useMemo","xdata","maxArray","minArray","allAvgNumber","dates","start","end","dataMap","date","index","dateStr","allData","d","existingData","month","day","validData","minValue","maxValue","minPosition","item","maxPosition","params","minVal","maxVal","api","height","i","_","_a","jsx","ReactEcharts","Empty","SkeletonRateChart","chartHeight","barCount","barWidth","gridLines","jsxs","Skeleton","PropTypes"],"mappings":"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"}