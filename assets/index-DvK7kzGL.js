import{f as K,aR as Me,aS as He,K as Re,aT as at,aU as De,e as rt,m as lt,aV as it,i as ct,aW as fe,r as n,p as Q,aX as dt,n as je,aY as ut,aZ as Be,a_ as mt,a$ as pt,b0 as gt,b1 as ft,b2 as Ue,b3 as Pe,aF as Te,aq as xt,b4 as ht,b5 as bt,b6 as yt,P as Le,aw as St,b7 as $t,ax as ye,j as o,ay as vt,b8 as Se,az as $e,aC as Nt,_ as ve,E as Ne,b9 as _t,l as we,a as ze,u as Xe,a1 as wt,ba as jt,B as qe,a0 as Ct,a2 as We,$ as Et,bb as It,a9 as At,a3 as Ot,a4 as Rt,a5 as Dt,a6 as Ut,a7 as Pt,a8 as Tt}from"./index-Br_GEqdo.js";import{D as Lt}from"./index-Ci5AC_3z.js";import{u as Ft,a as Mt,d as Ht,A as Bt}from"./AdminUser-NXuz5pNs.js";import{R as zt,a as Xt,b as qt,c as Wt,d as Vt,U as Fe}from"./Upload-B65M9sic.js";import{P as Gt}from"./progress-iweIro_m.js";import{A as Kt}from"./AdminSupportAgentTableAction-QbnUrGM3.js";import{S as Jt}from"./index-DBaaZVrF.js";import"./index-BPBrsSPY.js";import"./index-DPNdkmhK.js";import"./index-c5PQ4RWh.js";const Yt=e=>{const{componentCls:s,iconCls:a}=e;return{[`${s}-wrapper`]:{[`${s}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:e.colorFillAlter,border:`${K(e.lineWidth)} dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[s]:{padding:e.padding},[`${s}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none",borderRadius:e.borderRadiusLG,"&:focus-visible":{outline:`${K(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`}},[`${s}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`
          &:not(${s}-disabled):hover,
          &-hover:not(${s}-disabled)
        `]:{borderColor:e.colorPrimaryHover},[`p${s}-drag-icon`]:{marginBottom:e.margin,[a]:{color:e.colorPrimary,fontSize:e.uploadThumbnailSize}},[`p${s}-text`]:{margin:`0 0 ${K(e.marginXXS)}`,color:e.colorTextHeading,fontSize:e.fontSizeLG},[`p${s}-hint`]:{color:e.colorTextDescription,fontSize:e.fontSize},[`&${s}-disabled`]:{[`p${s}-drag-icon ${a},
            p${s}-text,
            p${s}-hint
          `]:{color:e.colorTextDisabled}}}}}},Zt=e=>{const{componentCls:s,antCls:a,iconCls:d,fontSize:r,lineHeight:c,calc:i}=e,t=`${s}-list-item`,m=`${t}-actions`,x=`${t}-action`,h=e.fontHeightSM;return{[`${s}-wrapper`]:{[`${s}-list`]:Object.assign(Object.assign({},Me()),{lineHeight:e.lineHeight,[t]:{position:"relative",height:i(e.lineHeight).mul(r).equal(),marginTop:e.marginXS,fontSize:r,display:"flex",alignItems:"center",transition:`background-color ${e.motionDurationSlow}`,"&:hover":{backgroundColor:e.controlItemBgHover},[`${t}-name`]:Object.assign(Object.assign({},He),{padding:`0 ${K(e.paddingXS)}`,lineHeight:c,flex:"auto",transition:`all ${e.motionDurationSlow}`}),[m]:{whiteSpace:"nowrap",[x]:{opacity:0},[d]:{color:e.actionsColor,transition:`all ${e.motionDurationSlow}`},[`
              ${x}:focus-visible,
              &.picture ${x}
            `]:{opacity:1},[`${x}${a}-btn`]:{height:h,border:0,lineHeight:1}},[`${s}-icon ${d}`]:{color:e.colorTextDescription,fontSize:r},[`${t}-progress`]:{position:"absolute",bottom:e.calc(e.uploadProgressOffset).mul(-1).equal(),width:"100%",paddingInlineStart:i(r).add(e.paddingXS).equal(),fontSize:r,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${t}:hover ${x}`]:{opacity:1},[`${t}-error`]:{color:e.colorError,[`${t}-name, ${s}-icon ${d}`]:{color:e.colorError},[m]:{[`${d}, ${d}:hover`]:{color:e.colorError},[x]:{opacity:1}}},[`${s}-list-item-container`]:{transition:`opacity ${e.motionDurationSlow}, height ${e.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}})}}},Qt=e=>{const{componentCls:s}=e,a=new Re("uploadAnimateInlineIn",{from:{width:0,height:0,padding:0,opacity:0,margin:e.calc(e.marginXS).div(-2).equal()}}),d=new Re("uploadAnimateInlineOut",{to:{width:0,height:0,padding:0,opacity:0,margin:e.calc(e.marginXS).div(-2).equal()}}),r=`${s}-animate-inline`;return[{[`${s}-wrapper`]:{[`${r}-appear, ${r}-enter, ${r}-leave`]:{animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseInOutCirc,animationFillMode:"forwards"},[`${r}-appear, ${r}-enter`]:{animationName:a},[`${r}-leave`]:{animationName:d}}},{[`${s}-wrapper`]:at(e)},a,d]},kt=e=>{const{componentCls:s,iconCls:a,uploadThumbnailSize:d,uploadProgressOffset:r,calc:c}=e,i=`${s}-list`,t=`${i}-item`;return{[`${s}-wrapper`]:{[`
        ${i}${i}-picture,
        ${i}${i}-picture-card,
        ${i}${i}-picture-circle
      `]:{[t]:{position:"relative",height:c(d).add(c(e.lineWidth).mul(2)).add(c(e.paddingXS).mul(2)).equal(),padding:e.paddingXS,border:`${K(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusLG,"&:hover":{background:"transparent"},[`${t}-thumbnail`]:Object.assign(Object.assign({},He),{width:d,height:d,lineHeight:K(c(d).add(e.paddingSM).equal()),textAlign:"center",flex:"none",[a]:{fontSize:e.fontSizeHeading2,color:e.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),[`${t}-progress`]:{bottom:r,width:`calc(100% - ${K(c(e.paddingSM).mul(2).equal())})`,marginTop:0,paddingInlineStart:c(d).add(e.paddingXS).equal()}},[`${t}-error`]:{borderColor:e.colorError,[`${t}-thumbnail ${a}`]:{[`svg path[fill='${De[0]}']`]:{fill:e.colorErrorBg},[`svg path[fill='${De.primary}']`]:{fill:e.colorError}}},[`${t}-uploading`]:{borderStyle:"dashed",[`${t}-name`]:{marginBottom:r}}},[`${i}${i}-picture-circle ${t}`]:{[`&, &::before, ${t}-thumbnail`]:{borderRadius:"50%"}}}}},en=e=>{const{componentCls:s,iconCls:a,fontSizeLG:d,colorTextLightSolid:r,calc:c}=e,i=`${s}-list`,t=`${i}-item`,m=e.uploadPicCardSize;return{[`
      ${s}-wrapper${s}-picture-card-wrapper,
      ${s}-wrapper${s}-picture-circle-wrapper
    `]:Object.assign(Object.assign({},Me()),{display:"block",[`${s}${s}-select`]:{width:m,height:m,textAlign:"center",verticalAlign:"top",backgroundColor:e.colorFillAlter,border:`${K(e.lineWidth)} dashed ${e.colorBorder}`,borderRadius:e.borderRadiusLG,cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,[`> ${s}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${s}-disabled):hover`]:{borderColor:e.colorPrimary}},[`${i}${i}-picture-card, ${i}${i}-picture-circle`]:{display:"flex",flexWrap:"wrap","@supports not (gap: 1px)":{"& > *":{marginBlockEnd:e.marginXS,marginInlineEnd:e.marginXS}},"@supports (gap: 1px)":{gap:e.marginXS},[`${i}-item-container`]:{display:"inline-block",width:m,height:m,verticalAlign:"top"},"&::after":{display:"none"},"&::before":{display:"none"},[t]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${K(c(e.paddingXS).mul(2).equal())})`,height:`calc(100% - ${K(c(e.paddingXS).mul(2).equal())})`,backgroundColor:e.colorBgMask,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'" "'}},[`${t}:hover`]:{[`&::before, ${t}-actions`]:{opacity:1}},[`${t}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${e.motionDurationSlow}`,[`
            ${a}-eye,
            ${a}-download,
            ${a}-delete
          `]:{zIndex:10,width:d,margin:`0 ${K(e.marginXXS)}`,fontSize:d,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,color:r,"&:hover":{color:r},svg:{verticalAlign:"baseline"}}},[`${t}-thumbnail, ${t}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${t}-name`]:{display:"none",textAlign:"center"},[`${t}-file + ${t}-name`]:{position:"absolute",bottom:e.margin,display:"block",width:`calc(100% - ${K(c(e.paddingXS).mul(2).equal())})`},[`${t}-uploading`]:{[`&${t}`]:{backgroundColor:e.colorFillAlter},[`&::before, ${a}-eye, ${a}-download, ${a}-delete`]:{display:"none"}},[`${t}-progress`]:{bottom:e.marginXL,width:`calc(100% - ${K(c(e.paddingXS).mul(2).equal())})`,paddingInlineStart:0}}}),[`${s}-wrapper${s}-picture-circle-wrapper`]:{[`${s}${s}-select`]:{borderRadius:"50%"}}}},tn=e=>{const{componentCls:s}=e;return{[`${s}-rtl`]:{direction:"rtl"}}},nn=e=>{const{componentCls:s,colorTextDisabled:a}=e;return{[`${s}-wrapper`]:Object.assign(Object.assign({},ct(e)),{[s]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${s}-select`]:{display:"inline-block"},[`${s}-disabled`]:{color:a,cursor:"not-allowed"}})}},sn=e=>({actionsColor:e.colorTextDescription}),on=rt("Upload",e=>{const{fontSizeHeading3:s,fontHeight:a,lineWidth:d,controlHeightLG:r,calc:c}=e,i=lt(e,{uploadThumbnailSize:c(s).mul(2).equal(),uploadProgressOffset:c(c(a).div(2)).add(d).equal(),uploadPicCardSize:c(r).mul(2.55).equal()});return[nn(i),Yt(i),kt(i),en(i),Zt(i),Qt(i),tn(i),it(i)]},sn);function pe(e){return Object.assign(Object.assign({},e),{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})}function ge(e,s){const a=fe(s),d=a.findIndex(r=>{let{uid:c}=r;return c===e.uid});return d===-1?a.push(e):a[d]=e,a}function _e(e,s){const a=e.uid!==void 0?"uid":"name";return s.filter(d=>d[a]===e[a])[0]}function an(e,s){const a=e.uid!==void 0?"uid":"name",d=s.filter(r=>r[a]!==e[a]);return d.length===s.length?null:d}const rn=function(){const s=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").split("/"),d=s[s.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(d)||[""])[0]},Ve=e=>e.indexOf("image/")===0,ln=e=>{if(e.type&&!e.thumbUrl)return Ve(e.type);const s=e.thumbUrl||e.url||"",a=rn(s);return/^data:image\//.test(s)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(a)?!0:!(/^data:/.test(s)||a)},ie=200;function cn(e){return new Promise(s=>{if(!e.type||!Ve(e.type)){s("");return}const a=document.createElement("canvas");a.width=ie,a.height=ie,a.style.cssText=`position: fixed; left: 0; top: 0; width: ${ie}px; height: ${ie}px; z-index: 9999; display: none;`,document.body.appendChild(a);const d=a.getContext("2d"),r=new Image;if(r.onload=()=>{const{width:c,height:i}=r;let t=ie,m=ie,x=0,h=0;c>i?(m=i*(ie/c),h=-(m-t)/2):(t=c*(ie/i),x=-(t-m)/2),d.drawImage(r,x,h,t,m);const D=a.toDataURL();document.body.removeChild(a),window.URL.revokeObjectURL(r.src),s(D)},r.crossOrigin="anonymous",e.type.startsWith("image/svg+xml")){const c=new FileReader;c.onload=()=>{c.result&&typeof c.result=="string"&&(r.src=c.result)},c.readAsDataURL(e)}else if(e.type.startsWith("image/gif")){const c=new FileReader;c.onload=()=>{c.result&&s(c.result)},c.readAsDataURL(e)}else r.src=window.URL.createObjectURL(e)})}const dn=n.forwardRef((e,s)=>{let{prefixCls:a,className:d,style:r,locale:c,listType:i,file:t,items:m,progress:x,iconRender:h,actionIconRender:D,itemRender:M,isImgUrl:F,showPreviewIcon:U,showRemoveIcon:q,showDownloadIcon:O,previewIcon:b,removeIcon:y,downloadIcon:l,extra:H,onPreview:W,onDownload:ne,onClose:J}=e;var k,V;const{status:Y}=t,[P,se]=n.useState(Y);n.useEffect(()=>{Y!=="removed"&&se(Y)},[Y]);const[ee,ae]=n.useState(!1);n.useEffect(()=>{const I=setTimeout(()=>{ae(!0)},300);return()=>{clearTimeout(I)}},[]);const oe=h(t);let T=n.createElement("div",{className:`${a}-icon`},oe);if(i==="picture"||i==="picture-card"||i==="picture-circle")if(P==="uploading"||!t.thumbUrl&&!t.url){const I=Q(`${a}-list-item-thumbnail`,{[`${a}-list-item-file`]:P!=="uploading"});T=n.createElement("div",{className:I},oe)}else{const I=F!=null&&F(t)?n.createElement("img",{src:t.thumbUrl||t.url,alt:t.name,className:`${a}-list-item-image`,crossOrigin:t.crossOrigin}):oe,A=Q(`${a}-list-item-thumbnail`,{[`${a}-list-item-file`]:F&&!F(t)});T=n.createElement("a",{className:A,onClick:le=>W(t,le),href:t.url||t.thumbUrl,target:"_blank",rel:"noopener noreferrer"},I)}const g=Q(`${a}-list-item`,`${a}-list-item-${P}`),B=typeof t.linkProps=="string"?JSON.parse(t.linkProps):t.linkProps,N=(typeof q=="function"?q(t):q)?D((typeof y=="function"?y(t):y)||n.createElement(zt,null),()=>J(t),a,c.removeFile,!0):null,S=(typeof O=="function"?O(t):O)&&P==="done"?D((typeof l=="function"?l(t):l)||n.createElement(Xt,null),()=>ne(t),a,c.downloadFile):null,$=i!=="picture-card"&&i!=="picture-circle"&&n.createElement("span",{key:"download-delete",className:Q(`${a}-list-item-actions`,{picture:i==="picture"})},S,N),E=typeof H=="function"?H(t):H,u=E&&n.createElement("span",{className:`${a}-list-item-extra`},E),_=Q(`${a}-list-item-name`),L=t.url?n.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:_,title:t.name},B,{href:t.url,onClick:I=>W(t,I)}),t.name,u):n.createElement("span",{key:"view",className:_,onClick:I=>W(t,I),title:t.name},t.name,u),w=(typeof U=="function"?U(t):U)&&(t.url||t.thumbUrl)?n.createElement("a",{href:t.url||t.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:I=>W(t,I),title:c.previewFile},typeof b=="function"?b(t):b||n.createElement(dt,null)):null,G=(i==="picture-card"||i==="picture-circle")&&P!=="uploading"&&n.createElement("span",{className:`${a}-list-item-actions`},w,P==="done"&&S,N),{getPrefixCls:Z}=n.useContext(je),j=Z(),z=n.createElement("div",{className:g},T,L,$,G,ee&&n.createElement(Be,{motionName:`${j}-fade`,visible:P==="uploading",motionDeadline:2e3},I=>{let{className:A}=I;const le="percent"in t?n.createElement(Gt,Object.assign({},x,{type:"line",percent:t.percent,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"]})):null;return n.createElement("div",{className:Q(`${a}-list-item-progress`,A)},le)})),te=t.response&&typeof t.response=="string"?t.response:((k=t.error)===null||k===void 0?void 0:k.statusText)||((V=t.error)===null||V===void 0?void 0:V.message)||c.uploadError,re=P==="error"?n.createElement(ut,{title:te,getPopupContainer:I=>I.parentNode},z):z;return n.createElement("div",{className:Q(`${a}-list-item-container`,d),style:r,ref:s},M?M(re,t,m,{download:ne.bind(null,t),preview:W.bind(null,t),remove:J.bind(null,t)}):re)}),un=(e,s)=>{const{listType:a="text",previewFile:d=cn,onPreview:r,onDownload:c,onRemove:i,locale:t,iconRender:m,isImageUrl:x=ln,prefixCls:h,items:D=[],showPreviewIcon:M=!0,showRemoveIcon:F=!0,showDownloadIcon:U=!1,removeIcon:q,previewIcon:O,downloadIcon:b,extra:y,progress:l={size:[-1,2],showInfo:!1},appendAction:H,appendActionVisible:W=!0,itemRender:ne,disabled:J}=e,k=mt(),[V,Y]=n.useState(!1),P=["picture-card","picture-circle"].includes(a);n.useEffect(()=>{a.startsWith("picture")&&(D||[]).forEach(u=>{!(u.originFileObj instanceof File||u.originFileObj instanceof Blob)||u.thumbUrl!==void 0||(u.thumbUrl="",d==null||d(u.originFileObj).then(_=>{u.thumbUrl=_||"",k()}))})},[a,D,d]),n.useEffect(()=>{Y(!0)},[]);const se=(u,_)=>{if(r)return _.preventDefault(),r(u)},ee=u=>{typeof c=="function"?c(u):u.url&&window.open(u.url)},ae=u=>{i==null||i(u)},oe=u=>{if(m)return m(u,a);const _=u.status==="uploading";if(a.startsWith("picture")){const L=a==="picture"?n.createElement(Pe,null):t.uploading,w=x!=null&&x(u)?n.createElement(qt,null):n.createElement(Wt,null);return _?L:w}return _?n.createElement(Pe,null):n.createElement(Vt,null)},T=(u,_,L,w,G)=>{const Z={type:"text",size:"small",title:w,onClick:j=>{var z,te;_(),n.isValidElement(u)&&((te=(z=u.props).onClick)===null||te===void 0||te.call(z,j))},className:`${L}-list-item-action`};return G&&(Z.disabled=J),n.isValidElement(u)?n.createElement(Te,Object.assign({},Z,{icon:Ue(u,Object.assign(Object.assign({},u.props),{onClick:()=>{}}))})):n.createElement(Te,Object.assign({},Z),n.createElement("span",null,u))};n.useImperativeHandle(s,()=>({handlePreview:se,handleDownload:ee}));const{getPrefixCls:g}=n.useContext(je),B=g("upload",h),N=g(),S=Q(`${B}-list`,`${B}-list-${a}`),$=n.useMemo(()=>pt(gt(N),["onAppearEnd","onEnterEnd","onLeaveEnd"]),[N]),E=Object.assign(Object.assign({},P?{}:$),{motionDeadline:2e3,motionName:`${B}-${P?"animate-inline":"animate"}`,keys:fe(D.map(u=>({key:u.uid,file:u}))),motionAppear:V});return n.createElement("div",{className:S},n.createElement(ft,Object.assign({},E,{component:!1}),u=>{let{key:_,file:L,className:w,style:G}=u;return n.createElement(dn,{key:_,locale:t,prefixCls:B,className:w,style:G,file:L,items:D,progress:l,listType:a,isImgUrl:x,showPreviewIcon:M,showRemoveIcon:F,showDownloadIcon:U,removeIcon:q,previewIcon:O,downloadIcon:b,extra:y,iconRender:oe,actionIconRender:T,itemRender:ne,onPreview:se,onDownload:ee,onClose:ae})}),H&&n.createElement(Be,Object.assign({},E,{visible:W,forceRender:!0}),u=>{let{className:_,style:L}=u;return Ue(H,w=>({className:Q(w.className,_),style:Object.assign(Object.assign(Object.assign({},L),{pointerEvents:_?"none":void 0}),w.style)}))}))},mn=n.forwardRef(un);var pn=function(e,s,a,d){function r(c){return c instanceof a?c:new a(function(i){i(c)})}return new(a||(a=Promise))(function(c,i){function t(h){try{x(d.next(h))}catch(D){i(D)}}function m(h){try{x(d.throw(h))}catch(D){i(D)}}function x(h){h.done?c(h.value):r(h.value).then(t,m)}x((d=d.apply(e,[])).next())})};const me=`__LIST_IGNORE_${Date.now()}__`,gn=(e,s)=>{const{fileList:a,defaultFileList:d,onRemove:r,showUploadList:c=!0,listType:i="text",onPreview:t,onDownload:m,onChange:x,onDrop:h,previewFile:D,disabled:M,locale:F,iconRender:U,isImageUrl:q,progress:O,prefixCls:b,className:y,type:l="select",children:H,style:W,itemRender:ne,maxCount:J,data:k={},multiple:V=!1,hasControlInside:Y=!0,action:P="",accept:se="",supportServerRender:ee=!0,rootClassName:ae}=e,oe=n.useContext(xt),T=M??oe,[g,B]=ht(d||[],{value:a,postState:p=>p??[]}),[N,S]=n.useState("drop"),$=n.useRef(null),E=n.useRef(null);n.useMemo(()=>{const p=Date.now();(a||[]).forEach((v,R)=>{!v.uid&&!Object.isFrozen(v)&&(v.uid=`__AUTO__${p}_${R}__`)})},[a]);const u=(p,v,R)=>{let f=fe(v),C=!1;J===1?f=f.slice(-1):J&&(C=f.length>J,f=f.slice(0,J)),Le.flushSync(()=>{B(f)});const X={file:p,fileList:f};R&&(X.event=R),(!C||p.status==="removed"||f.some(ce=>ce.uid===p.uid))&&Le.flushSync(()=>{x==null||x(X)})},_=(p,v)=>pn(void 0,void 0,void 0,function*(){const{beforeUpload:R,transformFile:f}=e;let C=p;if(R){const X=yield R(p,v);if(X===!1)return!1;if(delete p[me],X===me)return Object.defineProperty(p,me,{value:!0,configurable:!0}),!1;typeof X=="object"&&X&&(C=X)}return f&&(C=yield f(C)),C}),L=p=>{const v=p.filter(C=>!C.file[me]);if(!v.length)return;const R=v.map(C=>pe(C.file));let f=fe(g);R.forEach(C=>{f=ge(C,f)}),R.forEach((C,X)=>{let ce=C;if(v[X].parsedFile)C.status="uploading";else{const{originFileObj:ue}=C;let de;try{de=new File([ue],ue.name,{type:ue.type})}catch{de=new Blob([ue],{type:ue.type}),de.name=ue.name,de.lastModifiedDate=new Date,de.lastModified=new Date().getTime()}de.uid=C.uid,ce=de}u(ce,f)})},w=(p,v,R)=>{try{typeof p=="string"&&(p=JSON.parse(p))}catch{}if(!_e(v,g))return;const f=pe(v);f.status="done",f.percent=100,f.response=p,f.xhr=R;const C=ge(f,g);u(f,C)},G=(p,v)=>{if(!_e(v,g))return;const R=pe(v);R.status="uploading",R.percent=p.percent;const f=ge(R,g);u(R,f,p)},Z=(p,v,R)=>{if(!_e(R,g))return;const f=pe(R);f.error=p,f.response=v,f.status="error";const C=ge(f,g);u(f,C)},j=p=>{let v;Promise.resolve(typeof r=="function"?r(p):r).then(R=>{var f;if(R===!1)return;const C=an(p,g);C&&(v=Object.assign(Object.assign({},p),{status:"removed"}),g==null||g.forEach(X=>{const ce=v.uid!==void 0?"uid":"name";X[ce]===v[ce]&&!Object.isFrozen(X)&&(X.status="removed")}),(f=$.current)===null||f===void 0||f.abort(v),u(v,C))})},z=p=>{S(p.type),p.type==="drop"&&(h==null||h(p))};n.useImperativeHandle(s,()=>({onBatchStart:L,onSuccess:w,onProgress:G,onError:Z,fileList:g,upload:$.current,nativeElement:E.current}));const{getPrefixCls:te,direction:re,upload:I}=n.useContext(je),A=te("upload",b),le=Object.assign(Object.assign({onBatchStart:L,onError:Z,onProgress:G,onSuccess:w},e),{data:k,multiple:V,action:P,accept:se,supportServerRender:ee,prefixCls:A,disabled:T,beforeUpload:_,onChange:void 0,hasControlInside:Y});delete le.className,delete le.style,(!H||T)&&delete le.id;const Ee=`${A}-wrapper`,[xe,Ie,Ke]=on(A,Ee),[Je]=bt("Upload",yt.Upload),{showRemoveIcon:Ae,showPreviewIcon:Ye,showDownloadIcon:Ze,removeIcon:Qe,previewIcon:ke,downloadIcon:et,extra:tt}=typeof c=="boolean"?{}:c,nt=typeof Ae>"u"?!T:Ae,he=(p,v)=>c?n.createElement(mn,{prefixCls:A,listType:i,items:g,previewFile:D,onPreview:t,onDownload:m,onRemove:j,showRemoveIcon:nt,showPreviewIcon:Ye,showDownloadIcon:Ze,removeIcon:Qe,previewIcon:ke,downloadIcon:et,iconRender:U,extra:tt,locale:Object.assign(Object.assign({},Je),F),isImageUrl:q,progress:O,appendAction:p,appendActionVisible:v,itemRender:ne,disabled:T}):p,be=Q(Ee,y,ae,Ie,Ke,I==null?void 0:I.className,{[`${A}-rtl`]:re==="rtl",[`${A}-picture-card-wrapper`]:i==="picture-card",[`${A}-picture-circle-wrapper`]:i==="picture-circle"}),st=Object.assign(Object.assign({},I==null?void 0:I.style),W);if(l==="drag"){const p=Q(Ie,A,`${A}-drag`,{[`${A}-drag-uploading`]:g.some(v=>v.status==="uploading"),[`${A}-drag-hover`]:N==="dragover",[`${A}-disabled`]:T,[`${A}-rtl`]:re==="rtl"});return xe(n.createElement("span",{className:be,ref:E},n.createElement("div",{className:p,style:st,onDrop:z,onDragOver:z,onDragLeave:z},n.createElement(Fe,Object.assign({},le,{ref:$,className:`${A}-btn`}),n.createElement("div",{className:`${A}-drag-container`},H))),he()))}const ot=Q(A,`${A}-select`,{[`${A}-disabled`]:T}),Oe=n.createElement("div",{className:ot,style:H?void 0:{display:"none"}},n.createElement(Fe,Object.assign({},le,{ref:$})));return xe(i==="picture-card"||i==="picture-circle"?n.createElement("span",{className:be,ref:E},he(Oe,!!H)):n.createElement("span",{className:be,ref:E},Oe,he()))},Ge=n.forwardRef(gn);var fn=function(e,s){var a={};for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&s.indexOf(d)<0&&(a[d]=e[d]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,d=Object.getOwnPropertySymbols(e);r<d.length;r++)s.indexOf(d[r])<0&&Object.prototype.propertyIsEnumerable.call(e,d[r])&&(a[d[r]]=e[d[r]]);return a};const xn=n.forwardRef((e,s)=>{var{style:a,height:d,hasControlInside:r=!1}=e,c=fn(e,["style","height","hasControlInside"]);return n.createElement(Ge,Object.assign({ref:s,hasControlInside:r},c,{type:"drag",style:Object.assign(Object.assign({},a),{height:d})}))}),Ce=Ge;Ce.Dragger=xn;Ce.LIST_IGNORE=me;const hn=({modalOPen:e,setModalOpen:s,role:a="",getlist:d,item:r={},distributorId:c="",changeParams:i={}})=>{const{register:t,handleSubmit:m,formState:{errors:x},reset:h,setValue:D,getValues:M,watch:F,control:U}=St({defaultValues:{testArray:[]}}),{fields:q,append:O,remove:b}=$t({control:U,name:"testArray"});F("Nursing Home");const[y,l]=n.useState("Create Elderly"),[H,W]=n.useState("Create Elderly"),[ne,J]=n.useState("create");n.useState([]),n.useState([]);const[k,V]=n.useState(!1),[Y,P]=n.useState("");n.useEffect(()=>{if(e)if(ye(r))h({testArray:[]}),l("Create Elderly"),W("Create Elderly"),setTimeout(()=>{O({roomNumber:void 0,firstName:void 0,lastName:void 0})},100);else{h({testArray:[]}),P(r.role),l("Edit Elderly"),W("Save");const{roomNumber:N,firstName:S,lastName:$}=r;console.log("oitem",r.roomNumber,r.firstName,r.lastName),setTimeout(()=>{O({roomNumber:N,firstName:S,lastName:$})},500)}},[e]);const se=N=>{if(ye(r))Mt([...N.guests]).then(S=>{(S==null?void 0:S.code)=="00000"&&(ve.custom($=>o.jsx(Ne,{t:$,text:`${r.role} has been created Successfully!`})),s(!1),d(),h())});else{let S=N.guests[0];Ft({...S,id:r.id}).then($=>{($==null?void 0:$.code)=="00000"&&(ve.custom(E=>o.jsx(Ne,{t:E,text:"Modified successfully"})),s(!1),d(),h())})}},ee=()=>{V(!0)};function ae(N){const S={A:"roomNumber",B:"firstName",C:"lastName"};return Object.keys(N).reduce(($,E)=>{var w;const u=E.charAt(0),_=E.slice(1),L=S[u]||u;return $[`row${_}`]=$[`row${_}`]||{},$[`row${_}`][L]=(w=N[E])==null?void 0:w.v,$},{})}const T={showUploadList:!1,beforeUpload:!1,onChange:N=>{N.file;let S=!0,$=N.file;if($.status!=="error")return;const E=new FileReader;E.readAsBinaryString($.originFileObj),E.onload=function(u){try{S=!1;const _=u.target.result;let w=_t.read(_,{type:"binary"}).Sheets.Sheet1;delete w["!margins"],delete w["!ref"];let G=Object.values(ae(w));G.shift(),G.forEach((Z,j)=>{O(Z)});return}catch{return}}}},g=()=>ye(r)?o.jsx(Ce,{className:"w-full",...T,children:o.jsx("button",{type:"button",style:{width:"518px"},className:"mt-[10px] font-[500] text-[14px] h-[40px] w-full hover:border-primary hover:text-primary duration-300 px-5 rounded-[10px] bg-transparent text-[#666D90] border border-gray-300",children:"Import from File"})}):o.jsx("div",{onClick:()=>ee(),className:"hover:brightness-110 duration-300  cursor-pointer mt-[7px] w-full text-center pt-[12px] pb-[12px]  pt-[7px] text-onBackWarring rounded-[10px] border border-onBackWarring pt-[7px] ",children:"Delete Distributor"}),B=async()=>{V(!1),Ht({id:r.id}),await d(),setTimeout(()=>{s(!1),ve.custom(N=>o.jsx(Ne,{t:N,text:`${r.role} has been successfully deleted`}))},900)};return o.jsxs(vt,{modalOPen:e,setModalOpen:s,handleSubmit:m(se),handalDelete:ee,width:590,title:y,cstatus:ne,id:r==null?void 0:r.id,Foot:o.jsx(g,{}),buttonText:H,children:[q.map((N,S)=>o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Se,{name:`guests[${S}].roomNumber`,control:U,defaultValue:N.roomNumber,render:({field:$})=>o.jsx($e,{label:"Room Number",type:"text",register:t(`guests[${S}].roomNumber`,{required:{value:!0,message:"Please enter Room Number"}}),error:x.roomNumber,placeholder:"Enter Room Number"})}),o.jsx(Se,{name:`guests[${S}].firstName`,control:U,defaultValue:N.firstName,render:({field:$})=>o.jsx($e,{label:"firstName",type:"text",register:t(`guests[${S}].firstName`,{required:{value:!0,message:"Please enter first name"}}),error:x.firstName,placeholder:"Enter firstName"})}),o.jsx(Se,{name:`guests[${S}].lastName`,control:U,defaultValue:N.lastName,render:({field:$})=>o.jsx($e,{label:"lastName",type:"text",register:t(`guests[${S}].lastName`,{required:{value:!0,message:"Please enter lastName"}}),error:x.lastName,placeholder:"Enter lastName"})})]},S)),o.jsx(Nt,{onDelete:()=>B(),modalOPen:k,setModalOpen:V,title:`Are you sure to delete this ${Y} account? This`,title2:" process CANâ€™T be undo."})]})};function bn({row:e}){const[s,a]=n.useState(e==null?void 0:e.status),[d,r]=n.useState(!1),c=i=>{r(!0),We(e==null?void 0:e._id,{status:i}).then(t=>{var m;console.log(t),t&&a((m=t==null?void 0:t.user)==null?void 0:m.status)}).finally(()=>{r(!1)})};return n.useEffect(()=>{a(e==null?void 0:e.status)},[e]),o.jsx(qe,{theme:{token:{colorText:"#707EAE",colorPrimary:"#06A44F",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:o.jsx(Jt,{loading:d,onChange:c,handleBg:"#00000",className:"bg-slate-200",value:s})})}function yn({row:e}){const[s,a]=n.useState(e==null?void 0:e.status),[d,r]=n.useState(!1),c=i=>{r(!0),We(e==null?void 0:e._id,{status:i}).then(t=>{var m;console.log(t),t&&a((m=t==null?void 0:t.user)==null?void 0:m.status)}).finally(()=>{r(!1)})};return n.useEffect(()=>{a(e==null?void 0:e.status)},[e]),o.jsxs("div",{className:"flex items-center space-x-2 mr-0 ",children:[o.jsx("span",{className:`w-3 h-3 rounded-full relative -right-2 ${s==!0?"bg-[#1EB564]":"bg-red-500"}`}),o.jsx(qe,{theme:{token:{colorText:"#707EAE",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:o.jsx(Ct,{value:s,variant:"borderless",onChange:c,loading:d,optionSelectedColor:"#8086AC",className:"w-fit !text-red-100",options:[{value:!1,label:o.jsx("span",{children:"Disable"})},{value:!0,label:o.jsx("span",{children:"Active"})}]})})]})}const Sn=e=>{const[s,a]=n.useState(we.get("mainRole")),[d,r]=n.useState(void 0);ze(),Xe();const c={distributor:{office:["name","address","contact_person","contact_number","seles_agent_count","end_user_count","nursing_home_count","monitoring_company_count","action"],sales_agent:["name","address","contact_number","agent_id","nursing_home_count","monitoring_company_count","end_user_count","device_count","action"]},sales_agent:{nursing_home:["name","address","contact_person","contact_number","assigned_nurse_count","action"],end_user:["name","address","contact_number"],monitoring_station:["name","address","contact_person","contact_number","action"],installer:["name","address","contact_number","action"],support_agent:["name","address","contact_number","action"]},nursing_home:{nurse:["name","contact_number","action"],end_user:["name","address","date","contact_number","external_id","products","products_price","addons","addons_price","total_price"]},monitoring_station:{support_agent:["name","address","contact_number","action"],installer:["name","address","contact_number","action"],end_user:["name","address","contact_number"]},nurse:{elderly:["name","age","alert_count","device_count"]},installer:{end_user:["name","address","contact_number","action"]},office:{sales_agent:["name","address","contact_number","agent_id","nursing_home_count","monitoring_company_count","end_user_count","device_count"],installer:["name","address","contact_number","action"]}},i={name:{title:t=>{switch(t){case"office":return"Office";case"nurse":return"Nurse Name";case"distributor":return"Distributor Name";case"sales_agent":return"Sales Agent Name";case"nursing_home":return"Nursing Home";case"end_user":return"Customer";case"monitoring_station":return"Monitoring Station";case"support_agent":return"Support Agent";case"installer":return"Installer";default:return"Name"}},key:"id",render:t=>(t==null?void 0:t.role)=="elderly"?o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.name})}):o.jsx("button",{children:o.jsx(wt,{data:t})})},address:{title:t=>{switch(t){case"sales_agent":return"Address";default:return"Address"}},render:t=>o.jsx("button",{style:{width:"200px",textAlign:"left"},children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.address})})},email:{title:"Email Address",render:t=>o.jsx("button",{style:{width:"150px",textAlign:"left"},children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.email})})},contact_number:{title:"Contact Number",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.contact_number})})},contact_person:{title:"Contact Person",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.contact_person})})},date:{title:"Date of Sales",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.date})})},age:{title:"Age",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.age})})},external_id:{title:"External ID",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.date})})},products:{title:"Products",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.products})})},products_price:{title:"Products Price",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.products_price})})},addons:{title:"Addons",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.addons})})},addons_price:{title:"Addons Price",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.addon_price})})},total_price:{title:"Total Price",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.total})})},alert_count:{title:"Alert Count",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.alert_count})})},device_count:{title:"Device Count",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.device_count})})},sales_agent_count:{title:"Sales Agents",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.sales_agent})})},end_user_count:{title:"End Users",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.end_user})})},nursing_home_count:{title:"Nursing Homes",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.nursing_home})})},monitoring_company_count:{title:"Monitoring Station",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.monitoring_station})})},assigned_nurse_count:{title:"Assigned Nurse",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.nurse})})},office_name:{title:"Office",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.office_name})})},installer:{title:"Installer Name",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.installer_name})})},agent_id:{title:"Agent ID",render:t=>o.jsx("button",{children:o.jsx("span",{className:" text-[14px] xl:text-base  font-normal text-text-secondary",children:t.agent_id})})},status:{title:"Status",render:t=>(t==null?void 0:t.role)=="sales_agent"?o.jsx(bn,{row:t}):o.jsx(yn,{row:t})},report:{title:"Report",render:t=>o.jsx("div",{className:"flex justify-center",children:o.jsx(jt,{report:t})})},status2:{title:"Installation Status",render:t=>{let m;switch(t.status){case"not started":m="bg-gray-500";break;case"problem":m="bg-red-500";break;case"pending":m="bg-yellow-500";break;case"complete":m="bg-[#1EB564]";break}return o.jsx("button",{children:o.jsx("span",{className:`text-[14px] xl:text-base capitalize font-semibold font-normal text-white p-2 px-3 ${m} rounded-lg`,children:t.status})})}},action:{title:"",key:"id",width:100,render:t=>o.jsx(Kt,{data:t})}};return n.useEffect(()=>{var t,m,x,h,D,M,F,U,q;if(e=="Offices"){const b=(((t=c[s])==null?void 0:t.office)||[]).map(y=>{const l=i[y];return{...l,title:l&&typeof l.title=="function"?l.title("office"):l==null?void 0:l.title}});r(b)}else if(e=="Support Agents"){const b=(((m=c[s])==null?void 0:m.support_agent)||[]).map(y=>{const l=i[y];return{...l,title:l&&typeof l.title=="function"?l.title("support_agent"):l==null?void 0:l.title}});r(b)}else if(e=="Nursing Homes"){const b=(((x=c[s])==null?void 0:x.nursing_home)||[]).map(y=>{const l=i[y];return{...l,title:l&&typeof l.title=="function"?l.title("nursing_home"):l==null?void 0:l.title}});r(b)}else if(e=="Sales Agents"){const b=(((h=c[s])==null?void 0:h.sales_agent)||[]).map(y=>{const l=i[y];return{...l,title:l&&typeof l.title=="function"?l.title("sales_agent"):l==null?void 0:l.title}});r(b)}else if(e=="End Users"){const b=(((D=c[s])==null?void 0:D.end_user)||[]).map(y=>{const l=i[y];return{...l,title:l&&typeof l.title=="function"?l.title("end_user"):l==null?void 0:l.title}});r(b)}else if(e=="Installers"){const b=(((M=c[s])==null?void 0:M.installer)||[]).map(y=>{const l=i[y];return{...l,title:l&&typeof l.title=="function"?l.title("installer"):l==null?void 0:l.title}});r(b)}else if(e=="Monitoring Stations"){const b=(((F=c[s])==null?void 0:F.monitoring_station)||[]).map(y=>{const l=i[y];return{...l,title:l&&typeof l.title=="function"?l.title("monitoring_station"):l==null?void 0:l.title}});r(b)}else if(e=="Nurse"){console.log(e);const b=(((U=c[s])==null?void 0:U.nurse)||[]).map(y=>{const l=i[y];return{...l,title:l&&typeof l.title=="function"?l.title("nurse"):l==null?void 0:l.title}});r(b)}else if(e=="Elderly"){const b=(((q=c[s])==null?void 0:q.elderly)||[]).map(y=>{const l=i[y];return{...l,title:l&&typeof l.title=="function"?l.title("nurse"):l==null?void 0:l.title}});r(b)}},[e]),d};let $n={NursingHomes:{placeholder:"Search Nursing Home",btnName:"Add New Nursing Home",menuName:"Nursing Homes",role:"nursing_home"},SalesAgents:{placeholder:"Search Sales Agents",btnName:"Add New Sales Agent",menuName:"Sales Agents",role:"sales_agent"},Offices:{placeholder:"Search Office",btnName:"Add New Office",menuName:"Offices",role:"office"},SupportAgents:{placeholder:"Search Support Agents",btnName:"Add New Support Agents",menuName:"Support Agents",role:"supports_agent"},EndUsers:{placeholder:"Search End User",btnName:"Add New End User",menuName:"End Users",role:"end_user"},MonitoringStations:{placeholder:"Search Monitoring Station",btnName:"Add New Monitoring Company",menuName:"Monitoring Stations",role:"monitoring_station"},Installers:{placeholder:"Search Installers",btnName:"Add New Installer",menuName:"Installers",role:"installer"},Nurse:{placeholder:"Search Nurse",btnName:"Add New Nurse",menuName:"Nurse",role:"nurse"},Elderly:{placeholder:"Search Elderly",btnName:"",menuName:"Elderlies",role:"elderly"}};function Dn(){ze(),Xe(),n.useRef(!1);const[e,s]=n.useState({}),[a,d]=n.useState("Dashboard");n.useContext(Et);const[r,c]=n.useState(we.get("mainRole"));n.useState(!1);const[i,t]=n.useState(""),[m,x]=n.useState(""),[h,D]=n.useState("Add New Support Agent"),[M,F]=n.useState(""),[U,q]=n.useState("Time"),[O,b]=n.useState(!1),[y,l]=n.useState(!1),[H,W]=n.useState([]),[ne,J]=n.useState({}),[k,V]=n.useState([]),[Y,P]=n.useState(0),[se,ee]=n.useState("Search Nursing Home"),ae=["Time","Name"],[oe,T]=n.useState(!1),[g,B]=n.useState({}),[N,S]=n.useState([]),$=()=>{b(!0)},E=Sn(i);n.useEffect(()=>{E&&V(E)},[E,i]);const[u,_]=n.useState(we.get("user")),L=n.useCallback(()=>{d("Users"),V(E);let j=r||u.role;const z={nursing_home:{menus:[{text:"Nurse"},{text:"End Users"}],activeTab:"Nurse"},distributor:{menus:[{text:"Offices"},{text:"Sales Agents"}],activeTab:"Offices"},office:{menus:[{text:"Sales Agents"},{text:"Installers"}],activeTab:"Sales Agents"},sales_agent:{menus:[{text:"End Users"},{text:"Nursing Homes"},{text:"Monitoring Stations"},{text:"Installers"},{text:"Support Agents"}],activeTab:"End Users"},monitoring_station:{menus:[{text:"End Users"},{text:"Installers"},{text:"Support Agents"}],activeTab:"End Users"},nurse:{menus:[{text:"Elderly"}],activeTab:"Elderly"},installer:{menus:[{text:"End Users"}],activeTab:"End Users"}};if(z[j]){const{menus:te,activeTab:re}=z[j];W(te),t(re)}},[r]),w=n.useCallback(()=>{!g||!g.role||i==""||(T(!0),console.log(i),["monitoring_station","installer","nursing_home"].includes(r)&&i==="End Users"?(delete g.role,It(g).then(j=>{console.log(j),S(j.data),P(j.total)}).catch(j=>{console.error("Error fetching users:",j)}).finally(()=>{T(!1)})):At(g).then(j=>{console.log(j),S(j.data),P(j.total)}).catch(j=>{j.code==="ECONNABORTED"?console.error("Request timed out"):console.error("Error fetching users:",j)}).finally(()=>{T(!1)}))},[g,e]),G=n.useCallback(()=>{const j=i.replace(/\s/g,""),z=$n[j];if(z){const{placeholder:te,btnName:re,menuName:I,role:A}=z;ee(te),D(re),x(I),B({...g,role:A}),s({...e,page:1}),J({nursingHomeId:u.id})}else console.warn(`Role "${j}" not found in roleConfig.`)},[i]);n.useEffect(()=>{L()},[L]),n.useEffect(()=>{G()},[G]),n.useEffect(()=>{w()},[w]),n.useEffect(()=>{U&&g.orderType!==U&&(delete g.sort_by_created_at,delete g.sort_by_name,B({...g,...U==="Name"?{sort_by_name:-1}:{sort_by_created_at:-1}}),s({...e,page:1}))},[U]);const Z=()=>{console.log("handleblure ======================>"),B({...g,search:M.trim()}),s({...e,page:1})};return o.jsxs("div",{className:"",children:[o.jsx("div",{className:"py-[20px] flex",children:o.jsx(Lt,{menus:H,activeTab:i,setActiveTab:t})}),o.jsx("div",{className:"",children:["Support Agents","Nursing Homes","Sales Agents","Offices","End Users","Monitoring Stations","Installers","Nurse"].includes(i)&&o.jsxs("div",{children:[o.jsxs("div",{className:" bg-white rounded-2xl overflow-hidden",children:[o.jsxs("div",{className:" px-[22px] py-6 flex items-start flex-col lg:flex-row justify-between gap-2",children:[o.jsx("div",{className:" flex items-center justify-between w-full",children:o.jsx("h2",{className:" text-2xl font-bold text-text-primary",children:m})}),o.jsxs("div",{className:" flex items-center justify-end gap-5 w-full",children:[o.jsx(Ot,{search:M,setSearch:F,handBlurchange:Z,placeholder:se}),o.jsx(Rt,{query:g,setQuery:B,selected:U,setSelected:q,data:ae}),["Elderly","End Users","Sales Agents"].includes(i)&&["installer","monitoring_station","office","sales_agent","nursing_home"].includes(r)?null:o.jsxs(Dt,{onClick:()=>$(),className:" hidden lg:flex min-w-[80px]",children:[o.jsx(Bt,{})," ",h]})]})]}),o.jsx("div",{className:" grid grid-cols-1",children:o.jsx(Ut.Provider,{value:{role:g.role,getlist:w,query:g,total:Y,page:e,setPage:s},children:o.jsx(Pt,{loading:oe,tableData:N,columns:k,getlist:w})})})]}),o.jsx(Tt,{item:{},changeParams:ne,getlist:w,role:g.role,modalOPen:O,setModalOpen:b,parentID:u._id})]})}),o.jsx(hn,{modalOPen:y,setModalOpen:l})]})}export{Dn as default};
