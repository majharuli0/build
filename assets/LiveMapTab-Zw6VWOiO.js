import{r as l,b2 as y,bn as w,j as e,T as C,h9 as h,fM as I,ha as p,a$ as S,b0 as _}from"./index-C69I91yV.js";try{let i=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new i.Error().stack;n&&(i._sentryDebugIds=i._sentryDebugIds||{},i._sentryDebugIds[n]="db788563-428b-4789-9f37-d659397b67b8",i._sentryDebugIdIdentifier="sentry-dbid-db788563-428b-4789-9f37-d659397b67b8")}catch{}function M({data:i={}}){var u,a,d,b,m,j,v,g;const{deviceData:n}=l.useContext(y),f=l.useContext(w),{elderlyDetails:o}=f||{},c=(i==null?void 0:i.device_no)||(o==null?void 0:o.deviceId),s=l.useMemo(()=>{var t;return((t=n[c])==null?void 0:t.position)||[]},[(u=n[c])==null?void 0:u.position]),x=l.useMemo(()=>{const t=n[c],r=t==null?void 0:t.hbstaticsTimestamp,N=Date.now();return!(t!=null&&t.hbstatics)||!r||(N-r)/1e3>90?null:t.hbstatics},[(a=n[c])==null?void 0:a.hbstaticsTimestamp]);return e.jsxs("div",{className:"flex gap-2 h-fit",children:[e.jsxs("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit z-50",children:[(s==null?void 0:s.length)>0?e.jsx(C,{color:"white",overlayInnerStyle:{color:"black",padding:"10px"},title:s==null?void 0:s.map((t,r)=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{style:{backgroundColor:t==null?void 0:t.color},className:"p-2 rounded-full",children:e.jsx(h,{size:14,color:"white"})}),e.jsx("div",{children:e.jsx("p",{className:"text-sm m-0",children:t==null?void 0:t.posture})})]},r)),children:e.jsx("div",{className:"flex -space-x-4 cursor-pointer",children:s==null?void 0:s.map((t,r)=>e.jsx("div",{style:{backgroundColor:t==null?void 0:t.color},className:"p-1 rounded-full border-2 border-white",children:e.jsx(h,{size:16,color:"white"})},r))})}):e.jsx("div",{className:"bg-primary p-1 rounded-full border-2 border-white",children:e.jsx(h,{size:16,color:"white"})}),e.jsx("span",{className:"font-bold text-lg",children:s?s==null?void 0:s.length:0})]}),e.jsxs("div",{className:"top-2 left-2 border-2 p-0 rounded-full flex items-center gap-1 pr-2 h-fit w-fit px-2 py-1",children:[e.jsx("div",{className:"pr-1",children:e.jsx(I,{size:20,color:`${(m=(b=(d=p(x))==null?void 0:d.statusEvents)==null?void 0:b.sleepState)==null?void 0:m.color}`})}),e.jsx("span",{className:"font-semibold text-wrap",children:((g=(v=(j=p(x))==null?void 0:j.statusEvents)==null?void 0:v.sleepState)==null?void 0:g.label)||"--"})]})]})}function z(){var c;const i=l.useContext(w),{elderlyDetails:n}=i||{},[f,o]=l.useState({});return e.jsx("div",{className:"flex flex-col gap-4 mt-6 overflow-hidden",children:(n==null?void 0:n.rooms)&&((c=n==null?void 0:n.rooms)==null?void 0:c.filter(s=>s.device_no).map((s,x)=>{var a;return(((a=s.device_no)==null?void 0:a.split(",").map(d=>d.trim()))||[]).flatMap(d=>f[d]||[]),e.jsxs("div",{className:"flex flex-col gap-4 bg-white rounded-2xl p-4 h-[700px]",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s==null?void 0:s.name}),e.jsxs("div",{className:"flex h-full",children:[e.jsx(M,{data:s}),e.jsxs("div",{id:"roomMap",className:"w-fit h-full scale-[1.2] mt-14 mx-auto",children:[(s==null?void 0:s.mount_type)===2&&e.jsx(S,{roomInfo:s}),(s==null?void 0:s.mount_type)===1&&e.jsx(_,{roomInfo:s})]})]})]},x)}))})}export{z as default};
//# sourceMappingURL=LiveMapTab-Zw6VWOiO.js.map
