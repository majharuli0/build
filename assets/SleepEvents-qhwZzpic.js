import{r,a1 as v,fC as E,j as t}from"./index-CLCamRgM.js";import y from"./TimelineBar-CtTPq1r-.js";import{g as C}from"./index-CM82yxRh.js";import{T}from"./Template-DhK4-TRF.js";import{l as p}from"./helper-BS9GGV6j.js";import{C as _}from"./UseCustomContext-BnsNXXfn.js";import"./index-uZMKWz3e.js";import"./WeeklyMonthlyPicker-DCGhgjJi.js";function A(){const{sleepEventsType:o,sleepEventsColor:a}=r.useContext(v),{sleepData:e,elderlyDetails:i}=r.useContext(_),[c,x]=r.useState([]),d={title:"Sleep Events Summary",pickerTypes:["day","range"],chartType:"multibar_sleep_events",dataType:"time",color:"#FF725E",apisProps:{endpoint:E,query:{uids:i==null?void 0:i.deviceId}}};return r.useEffect(()=>{if(e!=null&&e.alarm_events){const n=e==null?void 0:e.alarm_events.reduce((s,u)=>{const m=o[u.event_type],l=s.find(f=>f.event_name===m);return l?l.count+=1:s.push({event_name:m,count:1,color:a[m]}),s},[]);x(n)}},[e]),t.jsx(t.Fragment,{children:t.jsxs(T,{title:"Sleep Events",color:"#FF725E",icon:t.jsx(C,{}),isDataAnalysis:!1,headerClassName:"!text-2xl",summaryProps:d,children:[t.jsx(y,{alarmEvents:e==null?void 0:e.alarm_events,enterBedTime:p(e==null?void 0:e.get_bed_idx),getupAfterTime:p(e==null?void 0:e.leave_bed_idx),noDataText:"No Data Detected for Today"}),t.jsx("div",{className:"flex flex-wrap gap-4 items-center justify-center ",children:c.map((n,s)=>t.jsx(g,{count:n.count,eventName:n.event_name,color:n.color},s))})]})})}const g=({count:o,eventName:a,color:e})=>t.jsxs("div",{className:"flex p-[4px] pr-4 items-center gap-2 rounded-xl",style:{backgroundColor:e},children:[t.jsx("span",{className:"text-[17px] p-2 py-1 font-bold bg-white rounded-[9px] text-primary",children:o}),t.jsx("span",{className:"text-[15px] font-medium text-white leading-[1.2]",children:a})]});export{A as default};
