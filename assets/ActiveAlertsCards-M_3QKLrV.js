import{j as t,bv as T,d as h,r as c,$ as v,u as w,F as M,bw as N}from"./index-d_7D8AC7.js";import{E as b}from"./index-BJ-cyjPg.js";import"./line-CyN94lkR.js";import{c as j}from"./SwapRightOutlined-Bx2j7N39.js";import{w as D}from"./weekOfYear-eIduJwO4.js";import{D as C}from"./index-BZEQOSrH.js";import{A as k}from"./AlertName-B_b83fwB.js";import{A as S}from"./ActionManu-Cccrl5z-.js";import{L}from"./LargeTextViewerModal-C6tevzxN.js";import{g as p,t as f,a as y}from"./helper-C8eLjNk9.js";import{S as I}from"./slick-theme-DCcpTCPx.js";import{A as _,a as F}from"./AlertCloseModal-ike6YZ6j.js";import{g as W}from"./elderlySupport-x8x9hiUL.js";const u=o=>{const n=["Critical","Info","Warning"],s=["Living Room","Kitchen","Bedroom","Bathroom"],r=["John Doe","Jane Doe","Alice Smith","Bob Johnson","Emma Brown","Michael Wilson","Sarah Davis","David Miller","Lisa Garcia","James Rodriguez"],d=["Fall Detected","Fire Detected","Inactivity Alert","Medication Reminder","Unusual Behavior","High Temperature","Low Temperature","Water Leak","Door Left Open","Window Broken"],l=["Medication Taken","Medication Not Taken","Medication Reminder"],m=["Wheelchair","Crutches","Cane","None"],i=["Yes","No"],e=["Yes","No"],a=["Yes","No"],x=["1","4","2","No"],g=["True","False"];return Array.from({length:o},(Y,A)=>({_id:A+1,alertType:n[Math.floor(Math.random()*n.length)],elderlyName:r[Math.floor(Math.random()*r.length)],alertName:d[Math.floor(Math.random()*d.length)],roomId:String(A+1),roomName:s[Math.floor(Math.random()*s.length)],alertLifetime:`${Math.floor(Math.random()*10)}m ${Math.floor(Math.random()*60)}s`,time:new Date().toLocaleString(),alertDescription:`${d[Math.floor(Math.random()*d.length)]} in the ${s[Math.floor(Math.random()*s.length)]}`,status:"Active",isAlert:g[Math.floor(Math.random()*g.length)],address:"123 Main St, Anytown, USA",coordinates:{latitude:37.7749+(Math.random()-.5)*.01,longitude:-122.4194+(Math.random()-.5)*.01},closedAt:new Date().toLocaleString(),closedBy:r[Math.floor(Math.random()*r.length)],eventName:l[Math.floor(Math.random()*l.length)],disabilityType:m[Math.floor(Math.random()*m.length)],additionalInfo:"This is additional info for event",hospital:{name:"Hospital For Special Surgery",phone:"1234567890",latitude:-33.8743612,longitude:151.2261153},allergies:i[Math.floor(Math.random()*i.length)],diseases:e[Math.floor(Math.random()*e.length)],medications:a[Math.floor(Math.random()*a.length)],activeAlert:x[Math.floor(Math.random()*x.length)],alertComments:"This is alert comments",alertLifespan:[{dateTime:"24-01-2024 10:00 AM",description:"At 10:00 AM, the alert was created"},{dateTime:"24-01-2024 10:30 AM",description:"Agent (petar) clicked on the incident in 10:30 (30mins later)"},{dateTime:"24-01-2024 10:32 AM",description:"Agent (petar) clicked on “Call Elderly” in 10:32 (2mins later)"},{dateTime:"24-01-2024 10:34 AM",description:"Agent (petar) clicked on “Call 911” in 10:34 (2mins later)"},{dateTime:"24-01-2024 10:36 AM",description:"Agent (petar) clicked on “Close Alert” in 10:36 (2mins later)"}]}))},X=u(14),Q=u(20),Z=u(20),ee=u(20);u(20);function te({data:o=[]}){const n=[],s={title:{},tooltip:{trigger:"axis"},grid:{left:"0%",right:"0%",bottom:"10%",containLabel:!0},legend:{show:!1},xAxis:{type:"category",data:n.map(r=>r.day)},yAxis:{type:"value"},series:[{name:"Warning",type:"line",data:n.map(r=>r.warning),itemStyle:{color:"#FFA500"},smooth:!0},{name:"Critical",type:"line",data:n.map(r=>r.critical),itemStyle:{color:"#FF0000"},smooth:!0},{name:"Problem",type:"line",data:n.map(r=>r.problem),itemStyle:{color:"#800080"},smooth:!0}]};return o.length>0||!o.length?t.jsx("div",{className:"h-full flex items-center w-full justify-center",children:t.jsx(T,{description:"No data available to show"})}):t.jsx(b,{option:s,style:{width:"100% !important",height:"100%"}})}h.extend(j);h.extend(D);const ae=({placeholder:o,style:n,handleChange:s,value:r})=>{const[d,l]=c.useState("This Week"),m=e=>{const a=h(e).startOf("week").format("YYYY-MM-DD"),x=h(e).endOf("week").format("YYYY-MM-DD");return{week:h(e).week(),start:a,end:x}},i=e=>`Week ${m(e).week}`;return c.useEffect(()=>{if(r){const e=h().week(),a=h(r.start).week();a===e-1?l("Last Week"):l(`Week ${a}`)}else l("This Week")},[r]),t.jsx(C,{style:n,placeholder:d,size:"large",format:i,picker:"week",onChange:e=>{if(e){const a=m(e);s(a)}else s(""),l("This Week")}})};function re(o){const{rolesFormatter:n}=c.useContext(v),s=w(),r=e=>{window.scrollTo(0,0),s(`/supporter/elderlies/elderly-profile/${e.elderly_id}?tab=overview`)},d={activeAlertsTableData:["alertName","alertType","elderlyName","roomName","incidentTime","alertLifetime","address","viewElderly"],recentlyClosedAlertsTableData:["alertName","alertType","elderlyName","roomName","incidentTime","alertLifetime","alertStatus","closedAt","closedBy","address","viewElderly"],eventsTableData:["eventName","elderlyName","eventTime","place","largeText","status","action"]},l={alertName:{title:"Alert Name",render:e=>t.jsx(k,{data:e})},alertType:{title:"Alert Type",dataIndex:"event",render:e=>t.jsx("span",{children:p(e)})},elderlyName:{title:"Elderly Name",dataIndex:"elderly_name",render:e=>t.jsx("span",{children:e})},roomName:{title:"Room Name",dataIndex:"room_name",render:e=>t.jsx("span",{children:e})},incidentTime:{title:"Incident Time",dataIndex:"created_at",render:e=>t.jsx("span",{className:"text-nowrap",children:f(e)})},alertLifetime:{title:"Alert Life",dataIndex:"closed_at",render:e=>t.jsx("span",{className:"text-nowrap",children:y(e)})},alertStatus:{title:"Alert Status",dataIndex:"status",render:e=>t.jsx("span",{className:"text-nowrap",children:e==0?"True Alert":"False Alert"})},address:{title:"Address",width:"230px",render:e=>t.jsx("span",{className:"!w-[230px] text-nowrap",children:e.address})},closedAt:{title:"Closed At",dataIndex:"closed_at",render:e=>t.jsx("span",{className:"text-nowrap",children:f(e)})},closedBy:{title:"Closed By",render:e=>t.jsxs("span",{className:"text-nowrap",children:[e.closed_by," (",n[e.closed_by_role]," )"]})},eventName:{title:"Event Name",dataIndex:"event_name",render:e=>t.jsx("span",{children:e})},eventTime:{title:"Event Time",dataIndex:"date_time",render:e=>t.jsx("span",{className:"text-nowrap",children:f(e)})},eventTimeline:{title:"Event Timeline",dataIndex:"alertLifetime",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},disabilityType:{title:"Disability Type",dataIndex:"disabilityType",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},place:{title:"Place",dataIndex:"place",render:e=>t.jsx("span",{className:"text-nowrap",children:e})},status:{title:"Place",dataIndex:"event_status",render:e=>t.jsx("span",{className:"text-nowrap capitalize",children:e!=="open"?e:"Done"})},largeText:{title:()=>{switch(o){case"events":return"Note";default:return""}},render:e=>t.jsx(L,{data:e.note,title:"Additional Info"})},expandColumn:M.EXPAND_COLUMN,viewElderly:{render:e=>t.jsxs("span",{onClick:()=>r(e),className:"flex items-center transition-all duration-300 justify-center gap-2 text-sm font-medium text-text-primary hover:text-primary cursor-pointer p-2 rounded-md  text-center hover:bg-slate-100",children:["View ",t.jsx(N,{})]})},action:{title:"Action",render:e=>t.jsx(S,{row:e})}},[m,i]=c.useState(void 0);return c.useEffect(()=>{if(o=="activeAlert"){const e=d.activeAlertsTableData.map(a=>l[a]);i(e)}else if(o=="recentlyClosedAlert"){const e=d.recentlyClosedAlertsTableData.map(a=>l[a]);i(e)}else if(o=="events"){const e=d.eventsTableData.map(a=>l[a]);i(e)}else i([])},[]),m}function le({refreshAlertList:o}){const[n,s]=c.useState(!1),[r,d]=c.useState(null),[l,m]=c.useState([]),i=c.useCallback(()=>{W({to_date:"2024-11-30",from_date:h().format("YYYY-MM-DD"),is_resolved:!1}).then(a=>{console.log(a.data),a.data.length>0&&m(a.data)}).catch(a=>{console.log(a)})},[]);c.useEffect(()=>{i()},[i]);const e={dots:l.length>=2,infinite:l.length>2,speed:500,slidesToShow:l.length===1?1:2,slidesToScroll:1,draggable:!0,arrows:!1,appendDots:a=>t.jsx("div",{style:{backgroundColor:"transparent",borderRadius:"10px",padding:"2px"},children:t.jsxs("ul",{id:"dots",style:{margin:"0px"},children:[" ",a," "]})}),responsive:[{breakpoint:1200,settings:{slidesToShow:(l.length===1,1),slidesToScroll:1}},{breakpoint:800,settings:{slidesToShow:1,slidesToScroll:1}}]};return t.jsxs(t.Fragment,{children:[E.length>0&&t.jsx("div",{id:"ActiveAlertsCards",className:"w-full mb-2 transition-all duration-300",children:t.jsx(I,{...e,className:"w-full transition-all duration-300",children:l.map((a,x)=>t.jsx("div",{className:"px-2 overflow-hidden transition-all duration-300 relative w-full",children:t.jsxs("div",{id:"alertItem",className:`rounded-2xl overflow-hidden w-full ${p(a.event)==="Critical"?"bg-red-500":p(a.event)==="Warning"?"bg-yellow-500":"bg-blue-500"} p-4 w-full !flex justify-between items-center`,children:[t.jsx("div",{id:"leftSide",className:"z-50",children:t.jsx("div",{id:"alertItemHeader",children:t.jsxs("div",{id:"alertItemTitleAndDescription",className:"flex flex-col gap-6",children:[t.jsxs("div",{id:"time",className:"flex gap-2",children:[t.jsxs("span",{className:"bg-white font-semibold p-1 px-2 rounded-full text-text-primary flex items-center gap-2",children:[t.jsx("div",{id:"dot",className:`w-2 h-2 ${p(a.event)==="Critical"?"bg-red-500":p(a.event)==="Warning"?"bg-yellow-500":"bg-blue-500"} rounded-full animate-ping`})," ",f(a.created_at)]}),t.jsx("span",{className:"bg-white font-semibold p-1 px-2 rounded-full text-text-primary",children:y(a.created_at)})]}),t.jsxs("div",{id:"alertItemTitleAndDescription",children:[t.jsx("h1",{className:"text-xl font-bold text-white m-0",children:a.event_name}),t.jsx("p",{className:"text-white text-base m-0 leading-none",children:p(a.event)==="Critical"?"Immediate action required. Safety at risk.":p(a.event)==="Warning"?"Attention needed. Potential issue detected.":"For your information. No immediate action needed."})]})]})})}),t.jsx("div",{id:"rightSide",className:"z-50",children:t.jsx("span",{onClick:()=>{d(a),s(!0)},className:"text-sm p-2 px-3 bg-white rounded-xl text-text-primary cursor-pointer hover:bg-white/90 transition-all duration-300",children:"Mark as Complete"})}),t.jsx("img",{src:_,alt:"",className:"absolute top-0 right-0 x-0"})]})},x))})}),t.jsx(F,{openAlertCloseModal:n,setOpenAlertCloseModal:s,selectedAlert:r,getAlertListDatas:()=>{i(),o()}})]})}const E=[{title:"Fall Detected",description:"Fall Detected in the Basement",time:"10:00 AM",duration:"2min 45s ago",alertType:"Critical"},{title:"Fire Detected",description:"Fire Detected in the Kitchen",time:"10:00 AM",duration:"2min 45s ago",alertType:"Critical"}];export{le as A,te as M,ae as W,Q as a,X as b,ee as e,Z as r,re as u};
