import{r as d,S as j,j as t,gi as S}from"./index-B3-g7mOM.js";import v from"./TimelineGraph-Ch_Zu5hm.js";import{T as I}from"./Template-WMrkSfFR.js";import{i as T}from"./index--B9iBwFt.js";import{C as w}from"./UseCustomContext-CAXRHvLj.js";import{j as a}from"./helper-CfgxuBHb.js";import{S as C}from"./SkeletonSleepingTimeline-B9YYGicm.js";import"./index-DaYuKuSf.js";import"./WeeklyMonthlyPicker-b_sN7gnU.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},i=new e.Error().stack;i&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[i]="f30ad597-470d-4df3-9436-358a89ddc718",e._sentryDebugIdIdentifier="sentry-dbid-f30ad597-470d-4df3-9436-358a89ddc718")}catch{}const x=({time:e,ItemName:i,color:m})=>t.jsxs("div",{className:"flex p-[4px] pr-4 items-center gap-2 rounded-xl",style:{backgroundColor:m},children:[t.jsx("span",{className:"text-[17px] p-2 py-1 font-bold bg-white rounded-[9px] text-primary",children:e}),t.jsx("span",{className:"text-[15px] font-medium text-white leading-[1.2]",children:i})]});function q(){const{sleepData:e,elderlyDetails:i,sleepDataLoading:m}=d.useContext(w),{sleepEventsType:f,sleepEventsColor:p}=d.useContext(j),[_,b]=d.useState([]),h={title:"Sleep Timeline Summary",pickerTypes:["day","range"],chartType:"multibar",dataType:"duration",color:"#FF725E",icon:t.jsx(T,{}),apisProps:{endpoint:S,query:{uids:i==null?void 0:i.deviceId}}};return d.useEffect(()=>{var g;if(!e)return;const r=(g=e==null?void 0:e.statistical_data)==null?void 0:g.reduce((n,s)=>{const c=new Date(s.start_time),u=(new Date(s.end_time)-c)/(1e3*60),o=f[s.status];return n[o]||(n[o]={duration:0,color:p[o]}),n[o].duration+=u,n},{}),l=Object.entries(r||{}).map(([n,{duration:s,color:c}])=>{const y=Math.floor(s/60),u=Math.floor(s%60);return{name:n,duration:`${y}hr ${u}m`,color:c}});b([...l])},[e,f,p]),t.jsx(I,{title:"Sleep Timeline",color:"#FF725E",icon:t.jsx(T,{}),isDataAnalysis:!1,headerClassName:"!text-2xl",summaryProps:h,children:m?t.jsx(C,{}):t.jsxs(t.Fragment,{children:[t.jsx(v,{statisticalData:e==null?void 0:e.statistical_data,enterBedTime:a(e==null?void 0:e.get_bed_idx),getupAfterTime:a(e==null?void 0:e.leave_bed_idx),noDataText:"No Data Detected for Today"}),t.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-center",children:[e&&(e==null?void 0:e.leave_bed_idx)&&t.jsx(x,{time:a(e==null?void 0:e.leave_bed_idx),ItemName:"Fall Asleep",color:"#AAA492"}),_.map((r,l)=>t.jsx(x,{time:r.duration,ItemName:r.name,color:r.color},l)),e&&(e==null?void 0:e.sleep_ed_idx)&&t.jsx(x,{time:a(e==null?void 0:e.sleep_ed_idx),ItemName:"Wake Up",color:"#AAA492"})]})]})})}export{q as default};
//# sourceMappingURL=SleepingTimeline-DpIJJbkb.js.map
