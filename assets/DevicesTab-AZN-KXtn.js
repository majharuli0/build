import{r as a,b_ as m,j as s,jp as g,jq as b,jr as y,js as x,T as _,J as N,B as u,jt as D,c8 as w,l as C,bQ as I}from"./index-BA7Bv3zX.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="12761584-cca4-4222-857b-085e2281dd05",e._sentryDebugIdIdentifier="sentry-dbid-12761584-cca4-4222-857b-085e2281dd05")}catch{}function B(){var t;const{elderlyDetails:e}=a.useContext(m);return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col gap-4 mt-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h1",{className:"text-[24px] font-bold text-[#1B2559]",children:"Devices"})}),s.jsx("div",{id:"devices",className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6",children:(t=e==null?void 0:e.rooms)==null?void 0:t.filter(l=>l==null?void 0:l.device_no).map(l=>s.jsx(O,{device:l},l.id))})]})})}const O=({device:e={}})=>{const[t,l]=a.useState(!1),[j,d]=a.useState(!1),{elderlyDetails:p}=a.useContext(m),[T,f]=a.useState(!1),[o,h]=a.useState(),r=e==null?void 0:e.device_no,c=a.useCallback(async()=>{if(r){f(!0);try{const i=await g(r);h(i==null?void 0:i.data)}catch(i){console.error("Error fetching device info",i)}finally{f(!1)}}},[r]);a.useEffect(()=>{c();const i=setInterval(()=>{c()},5e3);return()=>clearInterval(i)},[c]);const n=(o==null?void 0:o.signal_intensity)&&b("wifi",o==null?void 0:o.signal_intensity);return s.jsxs("div",{className:"flex flex-col gap-8 bg-white rounded-xl p-4 group  cursor-pointer device_modal",children:[s.jsxs("div",{className:"flex items-center justify-between gap-4 w-full ",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{id:"deviceImg",children:s.jsx("img",{src:y,alt:"device",width:84,height:84})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("h1",{className:"text-[22px] font-semibold text-[#1B2559] flex items-center gap-2",children:[e==null?void 0:e.name," ",s.jsx("div",{className:"size-1.5 bg-slate-400 rounded-full"}),s.jsx("span",{className:"text-base opacity-85 cursor-pointer",children:e==null?void 0:e.device_no})]}),s.jsxs("div",{id:"status",className:"flex items-center gap-2",children:[e!=null&&e.is_device_bind?s.jsx(x,{color:n==null?void 0:n.color}):s.jsx(x,{color:"red"}),s.jsx("p",{className:"text-[16px] font-semibold text-primary capitalize",children:e!=null&&e.is_device_bind?"Online":"Offline"}),n&&s.jsx(_,{color:n==null?void 0:n.color,children:n.label})]})]})]}),s.jsx(N,{title:"Settings",children:s.jsx(u,{shape:"circle",onClick:()=>{e!=null&&e.is_device_bind?l(!0):d(!0)},children:s.jsx(D,{})})})]}),s.jsx(w,{isvisible:t,setVisible:l,elderly_id:p._id,device_id:e==null?void 0:e.device_no,room_id:e==null?void 0:e._id}),s.jsx(k,{isvisible:j,setVisible:d})]})},k=({isvisible:e=!1,setVisible:t})=>{function l(){t(!1)}return s.jsx(s.Fragment,{children:s.jsx(C,{centered:!0,open:e,onCancel:l,onOk:l,className:"device-offline-modal ",title:s.jsxs("div",{className:"flex items-center gap-2 p-6",children:[s.jsx(I,{className:"text-yellow-500"}),s.jsx("span",{children:"Offline Device"})]}),footer:s.jsx("div",{className:"p-6",children:s.jsx(u,{onClick:()=>t(!1),children:"Ok"})}),okText:"OK",cancelButtonProps:{style:{display:"none"}},children:s.jsx("div",{className:"px-4",children:s.jsx("p",{children:"This device is currently offline. You cannot make any changes now."})})})})};export{B as default};
//# sourceMappingURL=DevicesTab-AZN-KXtn.js.map
