import{a3 as w,V as T,u as k,H as _,r as d,a4 as E,a5 as p,a6 as v,z as x,j as f,a7 as R,a8 as U,G as r,a9 as I}from"./index-DJjw0XFZ.js";try{let o=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new o.Error().stack;a&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[a]="47fbdd79-01b5-4759-9f70-a5d8d2d86999",o._sentryDebugIdIdentifier="sentry-dbid-47fbdd79-01b5-4759-9f70-a5d8d2d86999")}catch{}function j(){const o=w();T();const a=k(),{setStoreRole:g,setUser:b}=_(),[h,y]=d.useState(!0),n=o.id.split("-"),l=()=>{const e=r.get("user"),s=I();r.get("rootToken")||(r.set("rootToken",s),r.set("rootRole",e==null?void 0:e.role))},i=e=>v(e),m=e=>{const s={super_admin:"/support-agent/dashboard/",supports_agent:"/supporter/support-agent/dashboard",nurse:"/supporter/nurse/dashboard",end_user:"/supporter/end-user/dashboard",monitoring_agency:"/ms/dashboard",elderly:`/supporter/elderlies/elderly-profile/${n[1]}?tab=overview`};a(s[e]||"/support-nurnt/dashboard")},u=e=>{r.set("user",e),r.set("mainRole",e.role),r.set("role",e.role),g({role:e.role}),b({role:e.role}),setTimeout(()=>{y(!1),m(e.sub_role||e.role)},800)},c=d.useCallback(async()=>{var e;try{const s=await E({id:n[0]});if(!((e=s==null?void 0:s.data)!=null&&e.role))throw new Error("Invalid role");if(n.length>=2){const t=await p({id:n[0],params:{role:s.data.role==="nursing_home"?"nurse":"supports_agent"}});l(),i(t.data.access_token),u({...t.data,sub_role:"elderly"})}else{const t=await p({id:n[0]});l(),i(t.data.access_token),u(s.data)}}catch(s){console.error("Error fetching user profile:",s),x.custom(t=>f.jsx(R,{t,title:"Error",text:s.response.data.message})),a(-1)}},[o.id]);if(d.useEffect(()=>{c()},[c]),h)return f.jsx(U,{loaderTitle:"Loading User Profile"})}export{j as default};
//# sourceMappingURL=index-CdVWFydR.js.map
