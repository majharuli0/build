import{ds as le,i0 as de,i1 as ue,du as me,i2 as fe,i3 as N,i4 as xe,i5 as he,cR as Q,dH as W,i6 as ge,i7 as be,i8 as D,i9 as pe,bp as Ce,r as d,bw as Se,ar as je,ia as ve,z as b,j as o,az as w,a5 as E,au as Te,C as X,T as I,g as ye,b1 as U,B as Be,ib as ze,ic as ke,fY as we}from"./index-CQ9tqHR6.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new s.Error().stack;e&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[e]="d3f6c9ff-304c-47de-8ac7-fee98c46c192",s._sentryDebugIdIdentifier="sentry-dbid-d3f6c9ff-304c-47de-8ac7-fee98c46c192")}catch{}const Ee=s=>{const e=s!=null&&s.algorithm?le(s.algorithm):de,r=Object.assign(Object.assign({},ue),s==null?void 0:s.token);return me(r,{override:s==null?void 0:s.token},e,fe)};function Ie(s){const{sizeUnit:e,sizeStep:r}=s,a=r-2;return{sizeXXL:e*(a+10),sizeXL:e*(a+6),sizeLG:e*(a+2),sizeMD:e*(a+2),sizeMS:e*(a+1),size:e*a,sizeSM:e*a,sizeXS:e*(a-1),sizeXXS:e*(a-1)}}const Ne=(s,e)=>{const r=e??N(s),a=r.fontSizeSM,x=r.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},r),Ie(e??s)),xe(a)),{controlHeight:x}),he(Object.assign(Object.assign({},r),{controlHeight:x})))},u=(s,e)=>new Q(s).setA(e).toRgbString(),p=(s,e)=>new Q(s).lighten(e).toHexString(),Oe=s=>{const e=W(s,{theme:"dark"});return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[6],6:e[5],7:e[4],8:e[6],9:e[5],10:e[4]}},Ae=(s,e)=>{const r=s||"#000",a=e||"#fff";return{colorBgBase:r,colorTextBase:a,colorText:u(a,.85),colorTextSecondary:u(a,.65),colorTextTertiary:u(a,.45),colorTextQuaternary:u(a,.25),colorFill:u(a,.18),colorFillSecondary:u(a,.12),colorFillTertiary:u(a,.08),colorFillQuaternary:u(a,.04),colorBgSolid:u(a,.95),colorBgSolidHover:u(a,1),colorBgSolidActive:u(a,.9),colorBgElevated:p(r,12),colorBgContainer:p(r,8),colorBgLayout:p(r,0),colorBgSpotlight:p(r,26),colorBgBlur:u(a,.04),colorBorder:p(r,26),colorBorderSecondary:p(r,19)}},Me=(s,e)=>{const r=Object.keys(ge).map(m=>{const h=W(s[m],{theme:"dark"});return Array.from({length:10},()=>1).reduce((i,v,g)=>(i[`${m}-${g+1}`]=h[g],i[`${m}${g+1}`]=h[g],i),{})}).reduce((m,h)=>(m=Object.assign(Object.assign({},m),h),m),{}),a=e??N(s),x=be(s,{generateColorPalettes:Oe,generateNeutralColorPalettes:Ae});return Object.assign(Object.assign(Object.assign(Object.assign({},a),r),x),{colorPrimaryBg:x.colorPrimaryBorder,colorPrimaryBgHover:x.colorPrimaryBorderHover})};function Pe(){const[s,e,r]=Ce();return{theme:s,token:e,hashId:r}}const He={defaultSeed:D.token,useToken:Pe,defaultAlgorithm:N,darkAlgorithm:Me,compactAlgorithm:Ne,getDesignToken:Ee,defaultConfig:D,_internalContext:pe};function Ue({setModalOpen:s,modalOpen:e,mode:r="create",diseases:a,custom_condition:x=[],elderly_id:m}){const{token:h}=He.useToken(),{elderlyDetails:i,getElderlyDetails:v}=d.useContext(Se),[g,O]=d.useState((i==null?void 0:i.diseases)||[]);d.useRef((i==null?void 0:i.diseases)||[]);const[C,T]=d.useState(null),[B,G]=d.useState(!1),[A,Re]=d.useState(!1),[V,Y]=d.useState(""),[Fe,_e]=d.useState(""),[y,M]=d.useState(""),[z,P]=d.useState(""),[H,R]=d.useState(""),F=d.useRef(null),q=d.useRef(null),J=d.useRef(null);d.useEffect(()=>{e||T([]),O(i==null?void 0:i.diseases),T(L(i==null?void 0:i.comments))},[e]),d.useEffect(()=>{T(L(i==null?void 0:i.comments))},[i]);const{register:$e,handleSubmit:Z,reset:K,formState:{errors:Le}}=je(),ee=t=>{},_=d.useCallback(t=>{ve({id:i==null?void 0:i._id,data:{diseases:t}}).then(()=>{b.custom(n=>o.jsx(w,{t:n,text:"Diseases have been updated!"})),v()}).catch(n=>{b.custom(c=>o.jsx(E,{t:c,title:"Error",text:n.message}))})},[i]),te=()=>r==="create"?"Create Health Condition":"Update Wellness Concerns";d.useEffect(()=>{var t,n;B&&((t=F.current)==null||t.focus()),A&&((n=q.current)==null||n.focus())},[B,A]);const se=(t,n,c)=>{n(t.filter(l=>l!==c)),_(t.filter(l=>l!==c))},oe=(t,n,c)=>{n(t.filter(l=>l._id!==c._id)),ze({id:m,commentId:c._id}).then(l=>{b.custom(f=>o.jsx(w,{t:f,text:"Comment has been deleted!"})),v()}).catch(l=>{b.custom(f=>o.jsx(E,{t:f,title:"Error",text:l.message}))})},ne=(t,n)=>{n(t.target.value)};function ae(){y&&z?(R(""),ke({id:m,data:{category:y,comment:z}}).then(t=>{b.custom(n=>o.jsx(w,{t:n,text:"Comment has been added!"})),v()}).catch(t=>{b.custom(n=>o.jsx(E,{t:n,title:"Error",text:t.message}))}),M(""),P("")):R("Please select category and write comment.")}const $=(t,n,c,l,f)=>{c&&t.indexOf(c)===-1&&n([...t,c]),_([...t,c]),l(!1),f("")},L=t=>{const n={};return t==null||t.forEach(c=>{const{category:l}=c;n[l]||(n[l]=[]),n[l].push(c)}),n},re=(t,n,c,l,f,S,k,ce="")=>o.jsx("div",{className:"w-fit flex flex-wrap gap-1 h-auto",children:o.jsxs(X,{theme:{token:{colorPrimary:"#8086AC",fontSize:"15px"}},children:[t==null?void 0:t.map((j,De)=>o.jsx(I,{closable:!0,color:"#7E60BF",onClose:()=>se(t,n,j),children:j},j)),c?o.jsx(U,{ref:f,type:"text",size:"small",style:{width:120,marginTop:8,paddingLeft:"10px"},value:S,onChange:j=>ne(j,k),onBlur:()=>$(t,n,S,l,k),onPressEnter:()=>$(t,n,S,l,k)}):ce!=="customText"&&o.jsxs(I,{onClick:()=>l(!0),style:{background:h.colorBgContainer,borderStyle:"dashed",marginTop:8},children:[o.jsx(we,{})," Create New"]})]})}),ie={Allergy:"Environmental Sensitivities",Disability:"Movement Adaptations"};return o.jsx(Te,{handleSubmit:Z(ee),modalOPen:e,setModalOpen:s,title:te(),buttonText:r==="create"?"Create":"Update",isBottomButtomShow:!1,onclose:()=>{K()},children:o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4 flex flex-col gap-2",children:[o.jsxs("p",{className:"text-base font-semibold text-[#7E60BF] leading-none flex items-center gap-2",children:[o.jsx("div",{id:"dot",className:"w-2 h-2 bg-[#7E60BF] rounded-full"})," ","Conditions"]}),re(g||[],O,B,G,F,V,Y,"diseaseText")]}),C&&Object.keys(C).map((t,n)=>o.jsxs("div",{className:"mb-4",children:[o.jsxs("p",{className:`text-base font-semibold ${t==="Sensitivity"?"text-[#4ca6cf]":t==="Special Needs"?"text-[#f37f13]":"text-[#0a0a2b]"}  leading-none flex items-center gap-2 mb-2`,children:[o.jsx("div",{id:"dot",className:`w-2 h-2 ${t==="Sensitivity"?"bg-[#4ca6cf]":t==="Special Needs"?"bg-[#f37f13]":"bg-[#0a0a2b]"}  rounded-full`})," ",ie[t]??t]}),Array.isArray(C[t])?C[t].map((c,l)=>o.jsx(X,{theme:{token:{colorPrimary:"#8086AC",fontSize:"15px"}},children:o.jsx(I,{closable:!0,color:c.category==="Sensitivity"?"#4ca6cf":c.category==="Special Needs"?"#f37f13":"#0a0a2b",onClose:()=>oe(C[t],f=>{T(S=>({...S,[t]:f}))},c),children:c.comment})},l)):o.jsx("p",{children:"No items available for this category"})]},n)),o.jsxs("div",{className:"mb-4 flex flex-col gap-1",children:[o.jsx("h3",{children:"Add New Comments"}),o.jsx(ye,{placeholder:"Select a category",style:{width:"100%"},size:"large",dropdownMatchSelectWidth:!1,onChange:M,value:y||null,options:[{value:"Sensitivity",label:"Sensitivity"},{value:"Special Needs",label:"Special Needs"},{value:"Custom Text",label:"Custom Text"}]}),o.jsxs("div",{className:"flex mb-2",children:[o.jsx(U,{ref:J,value:z,onChange:t=>P(t.target.value),placeholder:"Enter comment",style:{flex:1,paddingLeft:"10px"}}),o.jsx(Be,{onClick:ae,type:"primary",style:{marginLeft:8,backgroundColor:"#252f67",width:"100px"},children:"Add"})]}),H&&o.jsx("p",{className:"text-red-500",children:H})]})]})})}export{Ue as H};
//# sourceMappingURL=HealthConditionModal-BNS7k1xv.js.map
