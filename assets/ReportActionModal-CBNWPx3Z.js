import{r as s,l as f,j as a,bD as g,a9 as h,bE as b}from"./index-DOojnxRv.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new t.Error().stack;n&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[n]="f454a96a-cf4d-4ac6-ae69-4933a967aa24",t._sentryDebugIdIdentifier="sentry-dbid-f454a96a-cf4d-4ac6-ae69-4933a967aa24")}catch{}function w({report:t}){const[n,r]=s.useState(!1),o=f.get("mainRole"),[c,m]=s.useState((t==null?void 0:t.messages)||[]),[l,d]=s.useState(""),i=s.useRef(null),u=async()=>{const e={text:l,isInstaller:o==="installer",time:new Date().toISOString()};l.trim()&&await b(t==null?void 0:t._id,{text:l,isInstaller:o==="installer",time:new Date().toISOString()})&&(m([...c,e]),d(""))},p=()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)};return s.useEffect(()=>{p()},[c]),a.jsxs(a.Fragment,{children:[a.jsx(g,{size:26,onClick:()=>r(!0),className:"text-text-secondary cursor-pointer"}),a.jsx(h,{modalOPen:n,setModalOpen:r,onCancel:()=>r(!1),title:"Installation Reports",isBottomButtomShow:!1,children:a.jsxs("div",{id:"ReportChatContainer",className:"flex flex-col h-[500px] font-baloo",children:[a.jsx("div",{id:"chatViewArea",className:"flex-1 overflow-y-auto p-4 space-y-4",ref:i,children:c.map((e,x)=>a.jsxs("div",{className:`max-w-[70%] p-3 rounded-lg ${e.isInstaller?"ml-auto bg-[#6dc29a] text-white":"mr-auto bg-[#80CAA7]/10 text-text-primary"}`,children:[a.jsx("p",{className:"text-xs font-bold mb-1",children:o=="installer"?e.isInstaller?"You":"Manager":e.isInstaller?"Installer":"You"}),a.jsx("p",{className:"text-base mb-2",children:e.text}),a.jsx("p",{className:`text-sm  text-right ${e.isInstaller?"text-white":"text-primary"}`,children:new Date(e.time).toDateString()===new Date().toDateString()?new Date(e.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date(e.time).toLocaleString([],{hour:"2-digit",minute:"2-digit",year:"numeric",month:"numeric",day:"numeric"})})]},x))}),a.jsxs("div",{id:"chatInputArea",className:"flex p-4 pb-0 border-t",children:[a.jsx("input",{type:"text",value:l,onChange:e=>d(e.target.value),placeholder:"Type your message...",className:"py-[18px] px-4 text-text-primary placeholder:text-[#A3AED0] h-[50px]  rounded-[16px] w-full text-base outline-none   border-[1px] focus:border-primary rounded-r-none border-r-0",onKeyPress:e=>e.key==="Enter"&&u()}),a.jsx("button",{onClick:u,className:"bg-primary text-white px-8 py-2 rounded-r-[16px] hover:bg-primary focus:outline-none focus:ring-2 ",children:"Send"})]})]})})]})}export{w as R};
//# sourceMappingURL=ReportActionModal-CBNWPx3Z.js.map
