import{r as T,j as m,p as O,E as N,h as V,y as H}from"./index-IRxSIHaz.js";try{let c=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},g=new c.Error().stack;g&&(c._sentryDebugIds=c._sentryDebugIds||{},c._sentryDebugIds[g]="f402f06e-1d9f-42b8-88f4-09c2b3d3f668",c._sentryDebugIdIdentifier="sentry-dbid-f402f06e-1d9f-42b8-88f4-09c2b3d3f668")}catch{}function L({data:c,dataType:g,color:D,chartType:S="Day",toDate:v,fromDate:w,xUnit:f="date",hourLimit:_=12,numberLimit:I=100,dataUnit:z="",chartFor:p=""}){const $=T.useMemo(()=>{if(!(c!=null&&c.length))return null;function B(e){const o=Array.from({length:67},(r,s)=>{const y=60+s*10,d=Math.floor(y/60),h=y%60;return h===0?`${d} hr`:`${d} hr ${h} min`}),t=new Array(o.length).fill(0);e==null||e.forEach(r=>{const s=Math.floor((r.sleep_total_time-60)/10);s>=0&&s<t.length&&t[s]++});const a=t.reduce((r,s)=>r+s,0),l=t.map(r=>a>0?(r/a*100).toFixed(0):"0");return{xaxis:o,data:l}}function E(e){const o=Array.from({length:10},(r,s)=>`${0+s*10}-${0+(s+1)*10}`),t=new Array(o.length).fill(0);e==null||e.forEach(r=>{const s=Math.floor(p!=="deepSleepPercentageDistribution"?(r==null?void 0:r.sleep_efficiency)/10:(r==null?void 0:r.sleep_quality)/10);s>=0&&s<t.length&&t[s]++});const a=e.length,l=t.map(r=>a>0?(r/a*100).toFixed(0):"0");return H.set(p,{xaxis:o,data:l}),{xaxis:o,data:l}}function M(e){const n=Array.from({length:6},(l,r)=>`${r*5}-${(r+1)*5}`),o=new Array(n.length).fill(0);e==null||e.forEach(l=>{const r=parseFloat(l.ahi),s=Math.floor(r/5);s>=0&&s<o.length&&o[s]++});const t=e.length,a=o.map(l=>t>0?(l/t*100).toFixed(0):"0");return{xaxis:n,data:a}}function C(e){const n=[...Array.from({length:12},(l,r)=>`${r*10}-${(r+1)*10} min`),"120min+"],o=new Array(n.length).fill(0);e==null||e.forEach(l=>{const r=l.totalFallAsleepDuration;let s=Math.floor(r/10);r>=120&&(s=o.length-1),s>=0&&s<o.length&&o[s]++});const t=e.length,a=o.map(l=>t>0?(l/t*100).toFixed(0):"0");return{xaxis:n,data:a}}function R(e){const i={xaxis:Array.from({length:31},(r,s)=>s+6).map(r=>r.toString()),data:Array(31).fill(0)};let n=Array(31).fill(0);e.forEach(r=>{const s=r.data_list.filter(d=>d!=="-1"&&d!=="0").map(Number);let y=Array(31).fill(0);s.forEach(d=>{if(d>=6&&d<=36){const h=d-6;y[h]++}}),y.forEach((d,h)=>{n[h]+=d})});const o=n.map((r,s)=>r>0?s:null).filter(r=>r!==null);if(o.length===0)return i;const t=Math.max(o[0]-1,0),a=Math.min(o[o.length-1]+1,30),l=n.slice(t,a+1).reduce((r,s)=>r+s,0);return i.data=n.map((r,s)=>s>=t&&s<=a&&l>0?(r/l*100).toFixed(2):"0.00"),i}const x=["45-50","50-55","55-60","60-65","65-70","70-75","75-80","80-85","85-90","90-95","95-100","100-105","105-110","110-115","115-120"],j=e=>{const u=new Array(x.length).fill(0);e==null||e.forEach(o=>{o.data_list.forEach(t=>{if(t>0)for(let a=0;a<x.length;a++){const[l,r]=x[a].split("-").map(Number);if(t>=l&&t<r){u[a]+=1;break}}})});const i=e==null?void 0:e.reduce((o,t)=>o+t.data_list.filter(a=>a>0).length,0),n=u.map(o=>(o/i*100).toFixed(0));return{xaxis:x,data:n}},b=(()=>{if(f==="number"){if(p==="apneaIndexDistribution"){const{xaxis:e,data:u}=M(c);return e.map((i,n)=>({number:i,value:u[n]}))}else if(p==="heartRateDistribution"){const{xaxis:e,data:u}=j(c);return e.map((i,n)=>({number:i,value:u[n]}))}else if(p==="breathRateDistribution"){const{xaxis:e,data:u}=R(c);return e.map((i,n)=>({number:i,value:u[n]}))}}if(f==="hour")if(c&&c.length>0&&p==="durationDistribution"){const{xaxis:e,data:u}=B(c);return e.map((i,n)=>({hour:i,percentage:parseInt(i,10),value:u[n]}))}else if(c&&c.length>0&&p==="fallAsleepDurationDistribution"){const{xaxis:e,data:u}=C(c);return e.map((i,n)=>({hour:i,percentage:parseInt(i,10),value:u[n]}))}else return Array.from({length:_},(e,u)=>({hour:u,value:0,percentage:0}));else if(f==="percentage")if(p==="efficiencyDistribution"||p==="deepSleepPercentageDistribution"){const{xaxis:e,data:u}=E(c);return e.map((i,n)=>({percentage:i,value:u[n]}))}else{const e=Array.from({length:11},(i,n)=>n*10),u=new Map(c.map(i=>[Math.floor(i.sleep_efficiency/10)*10,{value:i.sleep_efficiency,date:i.date}]));return e.map(i=>{var n,o;return{percentage:i,value:((n=u.get(i))==null?void 0:n.value)||0,date:((o=u.get(i))==null?void 0:o.date)||null}})}else{const e=(t,a)=>{var l,r,s;switch(a){case"roomInOut":return((l=t==null?void 0:t.user_activity)==null?void 0:l.entry_room_count)||"--";case"walkingStepsStatistix":return((r=t==null?void 0:t.user_activity)==null?void 0:r.step_number)||"--";case"walkingSpeedStatistic":return((s=t==null?void 0:t.user_activity)==null?void 0:s.speed)||"--";case"sleedDurationStatistic":return t.sleep_total_time||0;case"deepSleepPercentageStatistic":return t.sleep_quality||"--";case"numberOfBedExitTime":return t.leave_bed_count||"--";default:return t.ratio||t.bed_exit_duration||t.value||t.sleep_time||t.ahi||t.anomalyHeartRate||t.sleep_efficiency||t.totalFallAsleepDuration||"--"}},u=(t,a)=>t!=null&&t.date?t.date.split("T")[0]:t!=null&&t.datestr?a==="roomInOut"||a==="walkingStepsStatistix"||a==="walkingSpeedStatistic"?V(t.datestr).subtract(1,"day").format("YYYY-MM-DD"):t.datestr:null,n=((t,a)=>{const l=[],r=new Date(t);r.setUTCHours(0,0,0,0);const s=new Date(a);for(s.setUTCHours(0,0,0,0);r<=s;)l.push(r.toISOString().split("T")[0]),r.setUTCDate(r.getUTCDate()+1);return l})(w,v),o=new Map;return c==null||c.forEach(t=>{const a=u(t,p),l=e(t,p);a&&l!==0&&l!=="--"?o.set(a,l):a&&!o.has(a)&&o.set(a,0)}),n.map(t=>({date:t,value:o.get(t)||0}))}})(),A=(e,u="axis")=>{if(f==="percentage"||g==="percentage")return`${e}%`;if(g==="duration"){const i=Math.floor(e/60),n=e%60;return i>0?`${i}h ${n}m`:`${n}m`}return e},k=e=>{if(f==="number")return e==null?void 0:e.toString();if(f==="hour")return`${e}`;if(f==="percentage")return`${e}%`;if(S==="Week"){const i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],n=new Date(e);return i[n.getDay()]}return new Date(e).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit"}).replace("/","-")};return{xAxis:{type:"category",data:b.map(e=>k(f==="hour"?e.hour:f==="percentage"?e.percentage:f==="number"?e.number:e.date))},grid:{top:"5%",left:"8%",bottom:"5%",right:"2%"},yAxis:{type:"value",axisLabel:{formatter:A},max:f==="percentage"||g==="percentage"?100:void 0},series:[{data:b.map(e=>e.value),type:"bar",barWidth:10,itemStyle:{color:D||"#000",borderRadius:[50,50,0,0]}}],tooltip:{trigger:"axis",formatter:e=>{if(f==="number")if(p!=="apneaIndexDistribution"){const n=b[e[0].dataIndex];return`<div style="margin-top: 4px">
              <span >${n.value}%</span>
              <br>
              <span style="font-weight: bold">${n.number} BPM</span>
              </div>`}else{const n=b[e[0].dataIndex];return`<div style="margin-top: 4px">
              <span style="font-weight: bold">${n.value}%</span>
              <br>
              <span style="font-weight: normal">${n.number}</span>
              </div>`}else if(f==="hour"){const n=b[e[0].dataIndex];return`<div style="margin-top: 4px">
                    ${n.value?`<span>${n.value}%</span>`:"--"}
                    <br>
                    <span style="font-weight: bold">${n.hour}</span>
                    </div>`}else if(f==="percentage"){const n=b[e[0].dataIndex];if(n.date){const o=new Date(n.date).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-");return`<div style="font-weight: bold">${n.value}%</div>
                     <div style="margin-top: 4px">${o}</div>`}return`<div style="font-weight: bold"> ${n.value}% <br/> <span style="font-weight: normal">${n.percentage}%</span></div>`}const u=b[e[0].dataIndex].date;return`<div style="font-weight: bold">${new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-")}</div>
                  <div style="margin-top: 4px">${A(e[0].value)}${z}</div>`}}}},[c,g,D,S,w,v,f,_,I]);return!(c!=null&&c.length)||!$?m.jsxs("div",{className:"w-full h-full flex items-center justify-center",children:[" ",m.jsx(O,{description:"No data available to show"})]}):m.jsx(N,{option:$,style:{height:"350px"}})}export{L as default};
//# sourceMappingURL=barChart-B7NI57ml.js.map
