import{aw as D,ax as E,r as g,S as M,e as d,j as v,aL as Y}from"./index-Cq-23H-i.js";import{E as C}from"./index-DzjUMGPH.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new t.Error().stack;a&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[a]="9c261fcc-c584-48a8-aa45-1cb6cc8beb32",t._sentryDebugIdIdentifier="sentry-dbid-9c261fcc-c584-48a8-aa45-1cb6cc8beb32")}catch{}var O={exports:{}};(function(t,a){(function(c,o){t.exports=o()})(D,function(){return function(c,o){o.prototype.isSameOrAfter=function(n,i){return this.isSame(n,i)||this.isAfter(n,i)}}})})(O);var I=O.exports;const _=E(I);var w={exports:{}};(function(t,a){(function(c,o){t.exports=o()})(D,function(){return function(c,o){o.prototype.isSameOrBefore=function(n,i){return this.isSame(n,i)||this.isBefore(n,i)}}})})(w);var k=w.exports;const N=E(k);d.extend(_);d.extend(N);function F({data:t,fromDate:a,toDate:c,valueType:o="duration"}){console.log(t,a,c,o);const[n,i]=g.useState([]),{sleepEventsType:h,sleepEventsColor:S}=g.useContext(M);g.useEffect(()=>{i(Array.isArray(t)?t:[]),console.log(t)},[t]);const A=(p,u)=>{if(u==="duration"){const x=Math.floor(p/60),y=p%60;return`${x}hr ${y}m`}return p.toString()},$=g.useMemo(()=>{const u=((r,e)=>{const s=[];let l=d(r);const f=d(e);for(;l.isSameOrBefore(f);)s.push(l.format("YYYY-MM-DD")),l=l.add(1,"day");return s})(a,c);console.log("All Dates:",u);const x=(Array.isArray(n)?n:[]).reduce((r,e)=>{if(!(e!=null&&e.date)||!(e!=null&&e.data))return r;const s=d(e.date).format("YYYY-MM-DD");return r[s]=e.data,r},{});console.log("Data By Date:",x);const y=[...new Set((Array.isArray(n)?n:[]).flatMap(r=>{var e;return((e=r==null?void 0:r.data)==null?void 0:e.map(s=>s.status))||[]}))];console.log("Active Statuses:",y);const b=Object.entries(h).filter(([r])=>y.includes(r));console.log("Active Events:",b);const j=b.map(([r,e])=>{const s=u.map(l=>{const f=x[l],m=f==null?void 0:f.find(B=>B.status===r);return m?Number(m.value):0});return console.log(`Series data for ${e}:`,s),{name:e,type:"bar",stack:"total",data:s,itemStyle:{color:S[e]}}});return{tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:r=>{let e=`${r[0].axisValue}<br/>`;return r.forEach(s=>{s.value>0&&(e+=`${s.marker} ${s.seriesName}: ${A(s.value,o)}<br/>`)}),e}},legend:{data:b.map(([r,e])=>e)},xAxis:{type:"category",data:u},yAxis:{type:"value",axisLabel:{formatter:r=>A(r,o)}},series:j}},[n,a,c,h,S,o]);return(t==null?void 0:t.length)===0||!c||!a?v.jsx(Y,{description:"No data available to show"}):v.jsx(C,{option:$,style:{height:"350px"}})}export{F as default};
//# sourceMappingURL=multibarChart-3Sr_BZPI.js.map
