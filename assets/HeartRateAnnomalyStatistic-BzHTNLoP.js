import{r as o,d as D,j as h}from"./index-CPi8G-lc.js";import{T as v}from"./Template-KySXtW_l.js";import{g as A}from"./utiles-D8Rp3mso.js";import"./mockData-DnyFJQLN.js";import b from"./barChart-QAVpUF88.js";import{C as M}from"./UseCustomContext-CnsOb8Ii.js";import{m as _}from"./ElderlyProfile-BWdCLkdX.js";import"./WeeklyMonthlyPicker-BY6G6ys7.js";import"./SwapRightOutlined-RWuKF7gJ.js";import"./weekOfYear-BIW9_wzg.js";import"./index-Ci9ot4ae.js";import"./weekday-DDj7-htS.js";import"./helper-DzRZPsxz.js";import"./index-d1jc08FB.js";import"./index-Cs29MILQ.js";import"./index-Cx5QaP1Z.js";import"./index-B7WD3ICK.js";import"./index-nr-nHRoT.js";import"./index-D8XprEYS.js";import"./elderly-biEcHDM7.js";import"./HomeOutlined-CX2jPnON.js";import"./PullRequestOutlined-CV_MZFZo.js";function ot({isSummaryBtn:g=!0}){const{title:x,color:c,icon:R,dataAnalysis:E}=A("Heart Rate Anomaly Statistic"),Y=o.useContext(M),{chartToDate:m="",chartFromDate:i="",elderlyDetails:a}=Y||{},[e,T]=o.useState(D().subtract(1,"day").format("YYYY-MM-DD")),[s,C]=o.useState(D().subtract(31,"day").format("YYYY-MM-DD")),[H,S]=o.useState([]),p=o.useCallback(()=>{console.log("fromDate Todate ",s,e),_({uids:a==null?void 0:a.deviceId,to_date:s,from_date:e}).then(t=>{console.log(t==null?void 0:t.data),l(t==null?void 0:t.data),S(l(t==null?void 0:t.data))}).catch(t=>{console.log(t)})},[e,a]);o.useEffect(()=>{p()},[p]),o.useEffect(()=>{m&&i&&(T(m),C(i))},[m]);function l(t){console.log(t);const r=[];return t==null||t.forEach(n=>{var u;const f=n.date;(u=n==null?void 0:n.events)==null||u.forEach(d=>{if(d.event_type===14||d.event_type===15){const y=r.find(j=>j.date===f);y?y.anomalyHeartRate+=1:r.push({date:f,anomalyHeartRate:1})}})}),console.log(r),r}return h.jsx(v,{title:x,color:c,icon:R,dataAnalysis:E,isSummaryBtn:g,children:h.jsx(b,{data:H,color:c,dataType:"number",fromDate:s,toDate:e,chartFor:"heartRateAnomaly"})})}export{ot as default};
