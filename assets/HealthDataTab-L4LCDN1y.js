import{r as i,j as e,a5 as y,_ as u,E as g,aA as j,aB as E,aC as _,d as w,aQ as S}from"./index-DQy7c-QQ.js";import{C as O}from"./CreateAndEditModal-uVDoftts.js";import{b as F}from"./index-CrMkKcXz.js";import{S as k}from"./SuccessModal-9xXBwm8d.js";import{C as b}from"./UseCustomContext-Bv9JlKpe.js";import{a as A,c as T,u as L}from"./elderlySupport-CnK57CVs.js";import{t as I}from"./helper-BBch2RZo.js";import{H as P}from"./HealthConditionModal-DmREDlS5.js";import{c as $,d as R}from"./index-C9-oocVi.js";import{d as z}from"./index-XOwfKSDA.js";import{c as B,e as H}from"./elderly-DcxWQ7Ec.js";import"./index-DahbhpYv.js";import"./weekday-Dp8kpFJs.js";import"./SwapRightOutlined-BA0wviLa.js";import"./weekOfYear-CBuXdiWG.js";import"./leaflet-src-BImD4Ruj.js";/* empty css                */import"./HomeOutlined-BaKS-L7T.js";import"./InfoCircleOutlined-ZEhCMUaZ.js";import"./PlusOutlined-C-ym2-MA.js";function q(){const{elderlyDetails:s}=i.useContext(b),[m,c]=i.useState([]),[a,o]=i.useState(!1);function p(l){var t,n,r;l&&T({event_name:l==null?void 0:l.event_name,date_time:l==null?void 0:l.datetime,place:(t=l==null?void 0:l.place)==null?void 0:t.name,longitude:(n=l==null?void 0:l.place)==null?void 0:n.lng,latitude:(r=l==null?void 0:l.place)==null?void 0:r.lat,note:l==null?void 0:l.textarea,event_status:"pending"}).then(d=>{u.custom(f=>e.jsx(g,{t:f,text:"Event Added Successfully!"})),x()}).catch(d=>{u.custom(f=>e.jsx(j,{t:f,title:"Error",text:d.message}))})}const x=i.useCallback(()=>{A().then(l=>{c(l.data)}).catch(l=>{console.log(l)})},[]);return i.useEffect(()=>{x()},[x]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-4 bg-white rounded-2xl p-4",children:[e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Events"}),e.jsx(y,{onClick:()=>o(!0),children:"Add New Event"})]}),e.jsx("div",{id:"elderlyEvents",className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:m.map((l,t)=>e.jsx(G,{...l,getList:x},t))})]}),e.jsx(O,{modalOpen:a,setModalOpen:o,type:"event",onSubmitData:p,elderlyLatLng:{lat:s==null?void 0:s.latitude,lng:s==null?void 0:s.longitude}})]})}const G=(s,m)=>{const[c,a]=i.useState(!1),[o,p]=i.useState(!1),[x,l]=i.useState(!1),t=r=>{L({id:r.id,data:{event_status:r.event_status}}).then(d=>{u.custom(f=>e.jsx(g,{t:f,text:"Event Added Successfully!"}))}).catch(d=>{u.custom(f=>e.jsx(j,{t:f,title:"Error",text:d.message}))})},n=r=>{const d=w(),h=w(r).diff(d,"second");if(h<=0)return"";const M=Math.floor(h/(24*3600)),N=Math.floor(h%(24*3600)/3600),C=Math.floor(h%3600/60),v=h%60;return M>0?`${M}d ${N}h`:N>0?`${N}h ${C}m`:C>0?`${C}m ${v}s`:`${v}s`};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"eventCard",children:[e.jsxs("div",{id:"header",className:"flex  justify-between items-center bg-[#6AC198] rounded-t-xl p-4",children:[e.jsxs("div",{id:"titleAndRemainingTime",className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:s.event_name}),(s.event_status==="closed"||s.event_status==="open")&&e.jsx("p",{className:"text-primary/80 text-[15px] leading-none bg-white rounded-full p-2 py-2 w-fit",children:s.event_status==="closed"?"Closed":"Done"}),s.event_status==="pending"&&e.jsx("p",{className:"text-primary/80 text-[15px] leading-none bg-white rounded-full p-2 py-2 w-fit",children:s.date_time&&n(s.date_time)!==""?`Remaining Time: ${n(s.date_time)}`:"Out of Date"})]}),e.jsx(E,{content:e.jsxs("div",{className:"flex flex-col p-2 ",children:[e.jsx("p",{className:"text-base text-primary/80 leading-none p-2 rounded-md hover:bg-primary/5 cursor-pointer",onClick:()=>{a(!1),l(!0)},children:"Mark As Done"}),e.jsx("p",{className:"text-base text-red-500 leading-none p-2 rounded-md hover:bg-red-500/5 cursor-pointer",onClick:()=>{a(!1),p(!0)},children:"Close Event"})]}),open:c,onOpenChange:a,placement:"leftTop",trigger:"click",children:e.jsx("div",{className:"cursor-pointer p-2 rounded-full hover:bg-white/10",children:e.jsx(F,{size:20,onClick:()=>a(!0),className:"text-white"})})})]}),e.jsxs("div",{id:"body",className:"flex flex-col gap-2 p-4 border-b border-l border-r border-b-primary/5 rounded-b-xl",children:[e.jsxs("div",{id:"eventDescription",children:[e.jsx("span",{className:"font-bold",children:"Date:"}),e.jsx("p",{className:"text-primary/80 text-[17px]",children:I(s.date_time)})]}),e.jsxs("div",{id:"eventLocation",className:"flex flex-col",children:[e.jsx("span",{className:"font-bold",children:"Place:"}),e.jsx("a",{href:s.latitude&&s.longitude?`https://www.google.com/maps?q=${s.latitude},${s.longitude}`:null,target:"_blank",className:"text-primary/80 text-[17px] hover:underline hover:text-primary",children:s.place})]}),e.jsxs("div",{id:"note",children:[e.jsx("span",{className:"font-bold",children:"Note:"}),e.jsx("p",{className:"text-primary/80 text-[17px]",children:s.note?s.note:"No Note"})]})]})]}),e.jsx(_,{onDelete:()=>t({id:s==null?void 0:s._id,event_status:"closed"}),modalOPen:o,setModalOpen:p,title:"Are you sure to close this event?",title2:"This process cannot be undo.",okText:"Close Event"}),e.jsx(k,{modalOPen:x,setModalOpen:l,onOk:()=>t({id:s==null?void 0:s._id,event_status:"open"}),title:"Are you sure to mark this event as done?",title2:"This process cannot be undo."})]})};function Z(){var l;const{elderlyDetails:s,getElderlyDetails:m}=i.useContext(b),[c,a]=i.useState(!1),[o,p]=i.useState([]),x=t=>{const n={};return t==null||t.forEach(r=>{const{category:d}=r;n[d]||(n[d]=[]),n[d].push(r)}),n};return i.useEffect(()=>{p(x(s.comments))},[s]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-4 bg-white rounded-2xl p-4",children:[e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Health Condition"}),e.jsx(y,{onClick:()=>a(!0),children:"Update Health Condition"})]}),e.jsxs("div",{id:"elderlyDiseasesAllergiesMedications",className:"mt-3 flex flex-col gap-6",children:[e.jsxs("div",{id:"elderlyDiseases",className:"flex flex-col gap-2",children:[e.jsxs("p",{className:"text-base font-semibold text-[#7E60BF] leading-none flex items-center gap-2",children:[e.jsx("div",{id:"dot",className:"w-2 h-2 bg-[#7E60BF] rounded-full"})," ","Diseases"]}),e.jsx("ul",{className:"list-none list-inside flex flex-wrap gap-2",children:(l=s==null?void 0:s.diseases)==null?void 0:l.map((t,n)=>e.jsx("li",{className:"text-base font-medium p-1 px-3 bg-[#F5F3FF] rounded-lg",children:t},n))})]}),Object.keys(o).map((t,n)=>e.jsxs("div",{id:"elderlyDiseases",className:"flex flex-col gap-2",children:[e.jsxs("p",{className:`text-base font-semibold ${t==="Allergies"?"text-[#4ca6cf]":t==="Disabilities"?"text-[#f37f13]":"text-[#0a0a2b]"}  leading-none flex items-center gap-2 mb-2`,children:[e.jsx("div",{id:"dot",className:`w-2 h-2 ${t==="Allergies"?"bg-[#4ca6cf]":t==="Disabilities"?"bg-[#f37f13]":"bg-[#0a0a2b]"}  rounded-full`})," ",t]}),e.jsx("ul",{className:"list-none list-inside flex flex-wrap gap-2",children:Array.isArray(o[t])?o[t].map((r,d)=>e.jsx("li",{className:`text-base font-medium p-1 px-3 ${t==="Allergies"?"bg-[#4ca6cf]/10":t==="Disabilities"?"bg-[#f37f13]/10":"bg-[#0a0a2b]/10"} rounded-lg`,children:r.comment},d)):e.jsx("p",{children:"No Comments"})})]},n))]})]}),e.jsx(P,{modalOpen:c,setModalOpen:a,mode:"edit",diseases:s==null?void 0:s.diseases,custom_condition:s==null?void 0:s.comments,elderly_id:s==null?void 0:s._id})]})}function Q(s){return S({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M12.6569 2.75736C15 0.414213 18.799 0.414214 21.1421 2.75736C23.4853 5.1005 23.4853 8.8995 21.1421 11.2426L11.2426 21.1421C8.89949 23.4853 5.1005 23.4853 2.75736 21.1421C0.414214 18.799 0.414213 15 2.75736 12.6569L12.6569 2.75736ZM19.7279 9.82843L15.4853 14.0711L9.82843 8.41421L14.0711 4.17157C15.6332 2.60948 18.1658 2.60948 19.7279 4.17157C21.29 5.73367 21.29 8.26633 19.7279 9.82843Z",fill:"currentColor"},child:[]}]})(s)}function U(){const{elderlyDetails:s,getElderlyDetails:m}=i.useContext(b),[c,a]=i.useState([]),[o,p]=i.useState(!1),x=t=>{console.log(t),B(t).then(n=>{m(),u.custom(r=>e.jsx(g,{t:r,text:"Medication has been added successfully!"}))}).catch(n=>{u.custom(r=>e.jsx(j,{t:r,title:"Error",text:n.message}))})},l=i.useCallback(()=>{a(s==null?void 0:s.medications)},[s,m]);return i.useEffect(()=>{l()},[l]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-4 bg-white rounded-2xl p-4 w-full",children:[e.jsxs("div",{id:"header",className:"flex justify-between items-center w-full",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Medication"}),e.jsx(y,{onClick:()=>p(!0),children:"Add Medication"})]}),e.jsx("div",{id:"medications",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:c==null?void 0:c.map((t,n)=>e.jsx(V,{medication:t},n))})]}),e.jsx(O,{modalOpen:o,setModalOpen:p,type:"medication",elderlyId:s._id,onSubmitData:x})]})}const V=({medication:s={}})=>{const[m,c]=i.useState(!1),[a,o]=i.useState(!1),{elderlyDetails:p,getElderlyDetails:x}=i.useContext(b);function l(t){H({id:p._id,medicationId:t}).then(()=>{x(),u.custom(n=>e.jsx(g,{t:n,text:"Medication has been deleted!"}))}).catch(n=>{u.custom(r=>e.jsx(j,{t:r,title:"Error",text:n.message}))})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"medicationCard",className:"flex flex-col gap-6  p-4 rounded-lg  w-full",style:{backgroundColor:(s==null?void 0:s.type)==="Pill"?"#DCF3F2":(s==null?void 0:s.type)==="Injection"?"#FCE8EE":(s==null?void 0:s.type)==="Supplement"?"#F5F3FA":"#F6F5F8"},children:[e.jsxs("div",{id:"header",className:"flex flex-col gap-2",children:[e.jsxs("div",{id:"type",className:"flex items-center gap-2 w-full justify-between",children:[e.jsx("div",{id:"icon",className:" size-[40px] rounded-full bg-white flex items-center justify-center",children:(s==null?void 0:s.type)==="Pill"?e.jsx(Q,{size:20,color:"#74CBC6"}):(s==null?void 0:s.type)==="Injection"?e.jsx(z,{size:20,color:"#FF0D0D"}):(s==null?void 0:s.type)==="Supplement"?e.jsx($,{size:20,color:"#947FCA"}):e.jsx(R,{size:20,color:"#0B1132"})}),e.jsx(E,{content:e.jsx("div",{className:"flex flex-col gap-2 ",children:e.jsx("p",{className:"text-base text-primary/80 leading-none p-2 rounded-md hover:bg-primary/5 cursor-pointer",onClick:()=>{c(!0),o(!1)},children:"Remove"})}),open:a,onOpenChange:o,placement:"leftTop",trigger:"click",children:e.jsx("div",{className:"cursor-pointer p-2 rounded-full hover:bg-primary/5",children:e.jsx(F,{size:20,onClick:()=>o(!0),className:"text-primary"})})})]}),e.jsxs("div",{id:"name",children:[e.jsx("h1",{className:"text-xl font-bold text-primary",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-[15px] text-primary/80 leading-none",children:s==null?void 0:s.type})]})]}),e.jsxs("div",{id:"medicationTimes",className:"flex flex-col gap-2",children:[e.jsxs("div",{id:"times",className:"flex flex-col gap-0 items-start",children:[e.jsx("p",{className:"text-sm text-primary/80 leading-none font-semibold py-2",children:"Times:"}),e.jsx("div",{id:"time",className:"flex gap-1 flex-wrap",children:(s==null?void 0:s.does_chart)&&s.does_chart.map((t,n)=>e.jsxs("p",{className:"text-sm text-primary/80 leading-none bg-white rounded-full p-2 font-semibold",children:[t.time," - ",t.tablet_count,"x"]},n))})]}),e.jsxs("div",{id:"frequency",className:"flex flex-col gap-0 items-start ",children:[e.jsx("p",{className:"text-sm text-primary/80 leading-none font-semibold py-2",children:"Frequency:"}),e.jsx("div",{id:"time",className:"flex gap-1 flex-wrap",children:e.jsx("p",{className:"text-sm text-primary/80 leading-none bg-white rounded-full p-2 font-semibold ",children:s==null?void 0:s.frequency})})]}),e.jsxs("div",{id:"days",className:"flex flex-col gap-0  items-start ",children:[e.jsx("p",{className:"text-sm text-primary/80 leading-none font-semibold py-2",children:"Interval:"}),e.jsx("div",{id:"time",className:"flex gap-1 flex-wrap",children:(s==null?void 0:s.interval)&&s.interval.map((t,n)=>e.jsx("p",{className:"text-sm text-primary/80 leading-none bg-white rounded-full p-2 font-semibold",children:t},n))})]})]})]}),e.jsx(_,{modalOPen:m,setModalOpen:c,title:"You want to remove this medication?",okText:"Remove",onDelete:()=>{l(s._id)}})]})};function fe(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col gap-4 mt-6",children:[e.jsx(U,{}),e.jsx(Z,{}),e.jsx(q,{})]})})}export{fe as default};
