import{j as e,r as a,Z as Ue,a0 as $e,Y as Qe,X as Xe,$ as Ye,aN as Ze,aO as G,a9 as fe,E as N,a2 as w,aP as qe,aQ as Je,aR as el,l as K,a3 as ll,ac as ce,aS as tl}from"./index-C6ihtOFT.js";import{E as k}from"./index-BKCtKaZg.js";import"./line-f6U2DSuU.js";import{F as xe}from"./lines-D8lk6nus.js";import"./bar-CkmG9S5L.js";import{b as al,c as sl,d as nl,e as ol,f as il,h as F,i as rl,g as dl}from"./Dashboard-Ciq9rL_j.js";import"./FileSaver.min-BVmcdA2g.js";import{I as cl}from"./index-O_A47OHM.js";import{B as xl}from"./index-CTQKRNam.js";/* empty css                */import{R as ul}from"./ReportActionModal-FMDCAUx-.js";import{W as fl}from"./WeeklyMonthlyPicker-ZyHPDSw0.js";function pl({data:t=[]}){const s=t.map(n=>n._id),o=t.map(n=>n.total_orders),r={tooltip:{trigger:"axis"},grid:{left:"0%",right:"0%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:s},yAxis:{type:"value"},series:[{data:o,type:"line",symbol:"circle",symbolSize:10,itemStyle:{color:"#4379EE"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(67, 121, 238, 0.5)"},{offset:1,color:"rgba(255, 255, 255, 0) "}]}},lineStyle:{color:"#4379EE"}}],graphic:o.length===0?{type:"text",left:"center",top:"middle",style:{text:"No Data Available",fontSize:20,fontWeight:"bold",fill:"#999"}}:null};return e.jsx(k,{notMerge:!0,option:r,style:{width:"100%",height:"100%"}})}function ue({data:t=[],chartFor:s=""}){const o=t.reduce((x,f)=>x+f.total_orders,0),[r,n]=a.useState({}),c={completed:"Completed",pending:"In Progress",cancelled:"Cancelled",not_started:"Not Started"};a.useEffect(()=>{s==="totalSales"?n({completed:"#4379EE",pending:"#F1963A",cancelled:"#D90000"}):s==="totalInstallations"&&n({completed:"#36b610",pending:"#833af1",not_started:"#5d5d5d"})},[s]);const u={tooltip:{trigger:"item"},grid:{left:"0%",right:"0%",bottom:"0%",top:"0%",containLabel:!0},series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!1}},labelLine:{show:!0},data:t.map(x=>({value:x.total_orders,name:c[x.property_name]||"Unknown Status",itemStyle:{color:r[x.property_name]}}))}],graphic:{elements:[{type:"text",id:"center-total-text",left:"center",top:"53%",style:{text:"Total",textAlign:"center",fill:"#333",fontSize:16}},{type:"text",id:"center-value-text",left:"center",top:"45%",style:{text:o,textAlign:"center",fill:"#333",fontSize:22,fontWeight:"bold"},position:[0,50]}]}};return e.jsx(k,{notMerge:!0,option:u,style:{width:"340px",height:"340px"}})}function I({data:t=[],graphTitle:s}){const o=t.map(c=>c.property_name||"Unknown"),r=t.map(c=>c.total_orders),n={xAxis:{max:"dataMax"},tooltip:{},grid:{left:"0%",right:"0%",bottom:"10%",top:"5%",containLabel:!0},yAxis:{type:"category",data:o,inverse:!0,animationDuration:300,animationDurationUpdate:300},dataZoom:[{type:"inside",yAxisIndex:0,start:0,end:100}],series:[{name:s,type:"bar",data:r,itemStyle:{color:"#4379EE"},label:{show:!0,valueAnimation:!0},barWidth:r.length<5?30:"auto"}],label:{show:!0},legend:{show:!1},graphic:r.length===0?{type:"text",left:"center",top:"middle",style:{text:"No Data Available",fontSize:20,fontWeight:"bold",fill:"#999"}}:null};return e.jsx(k,{notMerge:!0,option:n,style:{width:"100%",height:"100%"}})}function P({data:t=[],chartFor:s}){const[o,r]=a.useState({});return a.useEffect(()=>{if(t.length===0){r({graphic:{type:"text",left:"center",top:"middle",style:{text:"No Data Available",fontSize:20,fontWeight:"bold",fill:"#999"}}});return}const c=s==="age"?["20-29","30-39","40-49","50-59","60-69","70-79","80-89","90-99"]:t.map(m=>m._id),u=[{name:"Male",type:"bar",color:"#357AF6",data:c.map(m=>{const g=t.find(b=>b._id===m);return g?g.male_count:0})},{name:"Female",type:"bar",color:"#5CC8BE",data:c.map(m=>{const g=t.find(b=>b._id===m);return g?g.female_count:0})}],x=Math.max(...u.flatMap(m=>m.data)),f={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{show:!0,top:0,data:["Male","Female"]},grid:{left:s==="age"?"0%":"5%",right:"0%",bottom:"10%",top:"10%",containLabel:!0},series:u};s==="age"?(f.xAxis={type:"category",data:c},f.yAxis={type:"value",boundaryGap:[0,.01],min:0,max:x,interval:1,axisLabel:{formatter:m=>Math.floor(m)}}):s==="diseases"&&(f.yAxis={type:"category",data:c},f.xAxis={type:"value",boundaryGap:[0,.01],min:0,max:x,interval:1,axisLabel:{formatter:m=>Math.floor(m)}}),r(f)},[t.length]),e.jsx(k,{notMerge:!0,option:o,style:{width:"100%",height:"100%"}})}function U({data:t=[],chartFor:s}){const[o,r]=a.useState([]);a.useEffect(()=>{let u=t==null?void 0:t.map(x=>{if(s==="device"){console.log(t);const f={completed:"#08A1F7",pending:"#922BF2",not_started:"#FF3B11"},m=t.map(p=>f[p._id]),g={...n,color:m};c(g);const b={not_started:"Not Started",completed:"Completed",pending:"Pending"};return{value:x.count,name:b[x._id]||x._id}}else return{value:x.male_count+x.female_count,name:x._id==="male"?"Male":x._id==="fe-male"?"Female":null}});r(u)},[t]);const[n,c]=a.useState({title:{},tooltip:{trigger:"item"},legend:{show:!1},labelLine:{show:!1},color:["#4379EE","#5CC8BE","#243642","#BC7C7C"]});return a.useEffect(()=>{const u={...n};s=="gender"?u.series=[{type:"pie",radius:"50%",data:o,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]:s=="device"&&(u.series=[{type:"pie",radius:"50%",data:o,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]),c(u)},[s,o]),e.jsx(k,{notMerge:!0,option:n,style:{width:"340px",height:"340px"}})}const hl=[{role:"monitoring_station",label:"Monitoring Station",color:"#EA5A92",icon:Ue,rolesAllowed:["sales_agent","distributor","office"]},{role:"supports_agent",label:"Support Agent",color:"#17C3A5",icon:$e,rolesAllowed:["supports_agent","monitoring_station"]},{role:"nursing_home",label:"Nursing Home",color:"#5096F6",icon:Qe,rolesAllowed:["sales_agent","distributor","office"]},{role:"distributor",label:"Distributor",color:"#FA8035",icon:cl,rolesAllowed:[]},{role:"sales_agent",label:"Sales Agent",color:"#D188E1",icon:Xe,rolesAllowed:["sales_agent","distributor","office"]},{role:"end_user",label:"End User",color:"#7DBBE2",icon:xe,rolesAllowed:["sales_agent","distributor","office"]},{role:"installer",label:"Installer",color:"#7695FF",icon:xe,rolesAllowed:["monitoring_station","office","sales_agent"]},{role:"elderly",label:"Elderly",color:"#FF885B",icon:Ye,rolesAllowed:["monitoring_station"]},{role:"office",label:"Office",color:"#FF885B",icon:Ze,rolesAllowed:[""]},{role:"device",label:"Device",color:"#FF885B",icon:xl,rolesAllowed:["distributor"]}];function ml(){const t=[],s=t.reduce((r,n)=>r+n.value,0),o={tooltip:{trigger:"item"},grid:{left:"0%",right:"0%",bottom:"0%",top:"0%",containLabel:!0},color:["#4379EE","#F1963A","#D90000"],series:[{type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!1}},labelLine:{show:!0},data:t}],graphic:{elements:[{type:"text",id:"center-total-text",left:"center",top:"53%",style:{text:"Total",textAlign:"center",fill:"#333",fontSize:16}},{type:"text",id:"center-value-text",left:"center",top:"45%",style:{text:s,textAlign:"center",fill:"#333",fontSize:22,fontWeight:"bold"},position:[0,50]}]}};return e.jsx(k,{notMerge:!0,option:o,style:{width:"340px",height:"340px"}})}function gl({count:t,chartByAge:s=[],chartByGender:o=[],diseasesCountByGender:r=[]}){return console.log(s),e.jsxs("div",{className:"w-full flex flex-col gap-6 pt-6",children:[e.jsxs("div",{className:"flex gap-6 lg:flex-row flex-col h-fit",children:[e.jsxs("div",{className:"rounded-2xl lg:w-[75%] w-full flex flex-col gap-6 h-full",children:[e.jsx("div",{id:"Reports",className:"w-full rounded-2xl flex flex-col gap-6",children:e.jsx("div",{id:"Cards",className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3",children:t==null?void 0:t.map((n,c)=>{let u=n.icon;return e.jsxs("div",{id:"Card",style:{backgroundColor:n==null?void 0:n.color},className:"cursor-pointer group flex w-full items-center p-4 py-6 text-white gap-3 rounded-[12px] relative overflow-hidden",children:[e.jsx("div",{id:"circle",className:"w-[100px] h-[100px] bg-white/20 absolute -right-11 -top-14 rounded-full group-hover:-right-5 group-hover:-top-[75px] transition-all duration-200 ease-in-out"}),e.jsx("div",{id:"circle",className:"w-[100px] h-[100px] bg-white/10 absolute -right-3 -top-[70px] rounded-full group-hover:-right-[50px] group-hover:-top-[45px] transition-all duration-200 ease-in-out"}),e.jsx("div",{className:"bg-opacity-10 h-fit rounded-[8px] p-2 bg-black/20",children:u&&e.jsx(u,{color:"#fff",size:20})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("h1",{className:"text-[26px] font-semibold leading-none",children:n.count||0}),e.jsx("span",{className:"text-[14px] font-medium text-white/70 leading-none",children:n.label})]})]},c)})})}),e.jsxs("div",{className:"p-[25px] rounded-2xl bg-white w-full h-[445px] flex-grow",children:[e.jsx("div",{id:"ChartHeader",className:"w-full flex justify-between",children:e.jsx("h1",{className:"text-[24px] font-bold",children:"Ages"})}),e.jsx(P,{data:o,chartFor:"age"})]}),e.jsxs("div",{className:"p-[25px] rounded-2xl bg-white w-full h-[445px] flex-grow",children:[e.jsx("div",{id:"ChartHeader",className:"w-full flex justify-between",children:e.jsx("h1",{className:"text-[24px] font-bold",children:"Diseases"})}),e.jsx(P,{data:r,chartFor:"diseases"})]})]}),e.jsxs("div",{className:"rounded-2xl lg:w-[35%] w-full flex flex-col gap-6 h-full",children:[e.jsxs("div",{className:"p-[25px] rounded-2xl bg-white w-full flex flex-col h-[496px] justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{id:"ChartHeader",className:"w-full flex justify-between",children:e.jsx("h1",{className:"text-[24px] font-bold",children:"Gender"})}),e.jsx("div",{className:"h-[260px] my-0 mx-auto flex items-center justify-center",children:e.jsx(U,{data:s,chartFor:"gender"})})]}),e.jsxs("div",{id:"ChartInfo",className:"w-full flex flex-col gap-2",children:[e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] bg-text-primary rounded-full"}),e.jsx("span",{className:"text-lg font-medium",children:"Total"})]}),e.jsx("span",{className:"text-lg font-semibold",children:s.reduce((n,c)=>n+c.male_count+c.female_count,0)})]}),e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] bg-[#4379EE] rounded-full"}),e.jsx("span",{className:"text-lg font-medium",children:"Male"})]}),e.jsx("span",{className:"text-lg font-semibold",children:s.map(n=>n._id==="male"&&n.male_count||0)})]}),e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] bg-[#5CC8BE] rounded-full"}),e.jsx("span",{className:"text-lg font-medium",children:"Female"})]}),e.jsxs("span",{className:"text-lg font-semibold",children:[" ",s.map(n=>n._id==="female"&&n.male_count||0)]})]})]})]}),e.jsxs("div",{className:"p-[25px] rounded-2xl bg-white w-full flex flex-col h-[496px] justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{id:"ChartHeader",className:"w-full flex justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:"Alerts"}),e.jsx("div",{id:"chartController",className:"flex gap-4"})]}),e.jsx("div",{className:"h-[260px] my-0 mx-auto flex items-center justify-center",children:e.jsx(ml,{})})]}),e.jsxs("div",{id:"ChartInfo",className:"w-full flex flex-col gap-2",children:[e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] bg-[#4379EE] rounded-full"}),e.jsx("span",{className:"text-lg font-medium",children:"Problem"})]}),e.jsx("span",{className:"text-lg font-semibold",children:"0"})]}),e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] bg-[#F1963A] rounded-full"}),e.jsx("span",{className:"text-lg font-medium",children:"Warning"})]}),e.jsx("span",{className:"text-lg font-semibold",children:"0"})]}),e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] bg-[#D90000] rounded-full"}),e.jsx("span",{className:"text-lg font-medium",children:"Critical"})]}),e.jsx("span",{className:"text-lg font-semibold",children:"0"})]})]})]})]})]}),e.jsxs("div",{className:"w-full flex gap-6 xl:flex-row flex-col h-[500px] justify-between",children:[e.jsxs("div",{className:"p-[25px] rounded-2xl bg-white w-full h-[445px]",children:[e.jsx("div",{id:"ChartHeader",className:"w-full flex justify-between",children:e.jsx("h1",{className:"text-[24px] font-bold",children:"Most Alerts"})}),e.jsx(I,{})]}),e.jsxs("div",{className:"p-[25px] rounded-2xl bg-white w-full h-[445px]",children:[e.jsx("div",{id:"ChartHeader",className:"w-full flex justify-between",children:e.jsx("h1",{className:"text-[24px] font-bold",children:"Alerts Count"})}),e.jsx(I,{})]})]})]})}function jl({row:t}){const s=a.useContext(fe),[o,r]=a.useState(t==null?void 0:t.installation_status),[n,c]=a.useState(!1),u=x=>{r(x),c(!0),qe(t==null?void 0:t._id,{installation_status:x}).then(f=>{console.log(f),s.getInstallationList.getCompletedandToBeInstalled(),s.getInstallationList.getDeviceSalesCounts(),f&&r(x)}).catch(f=>{console.log(f),r(t==null?void 0:t.installation_status)}).finally(()=>{c(!1)})};return a.useEffect(()=>{r(t==null?void 0:t.installation_status)},[t==null?void 0:t.installation_status]),e.jsxs("div",{className:"flex items-center space-x-2 mr-0 ",children:[e.jsx("span",{className:`w-3 h-3 rounded-full relative -right-2 ${o==="completed"?"bg-[#1EB564]":o==="pending"?"bg-yellow-500":"bg-red-500"}`}),e.jsx(N,{theme:{token:{colorText:"#707EAE",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:e.jsx(w,{value:o,variant:"borderless",onChange:u,loading:n,optionSelectedColor:"#8086AC",className:"w-fit !text-red-100",options:[{value:"completed",label:e.jsx("span",{children:"Complete"})},{value:"pending",label:e.jsx("span",{children:"Pending"})},{value:"not_started",label:e.jsx("span",{children:"Not Started"})}]})})]})}const bl=[{title:"Installation Status",render:t=>e.jsx(jl,{row:t})},{title:"Report",render:t=>e.jsx("div",{className:"flex justify-center",children:e.jsx(ul,{report:t})})},{title:"Product Name",render:t=>e.jsx("button",{children:e.jsx("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary flex  gap-2",children:t.products.filter((s,o,r)=>{const n=s.type==="Seenyor Kit"&&r.findIndex(c=>c.type==="Seenyor Kit")===o;return!/^AI Sensor/.test(s.type)&&(s.type!=="Seenyor Kit"||n)}).map((s,o)=>{const r=s.type==="Seenyor Kit"?"blue":s.type==="Installation"?"orange":"default";return e.jsx(G,{color:r,children:s.type==="Seenyor Kit"?"Package":s.type},o)})})})},{title:"Product Price",render:t=>e.jsx("button",{children:e.jsxs("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary",children:["$",t.products.filter(s=>["Seenyor Kit","Installation","AI Monitoring"].includes(s.type)).reduce((s,o)=>s+o.price,0).toFixed(2)]})})},{title:"Addon Name",render:t=>e.jsx("button",{children:e.jsx("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary flex gap-2",children:t.products.filter(s=>!["Seenyor Kit","Installation","AI Monitoring"].includes(s.type)).map((s,o)=>e.jsx(G,{children:s.type},o)).length===0?e.jsx("span",{children:"--"}):t.products.filter(s=>!["Seenyor Kit","Installation","AI Monitoring"].includes(s.type)).map((s,o)=>e.jsx(G,{children:s.type},o))})})},{title:"Addon Price",render:t=>e.jsx("button",{children:e.jsx("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary text-nowrap",children:t.products.map((s,o)=>["Seenyor Kit","Installation","AI Monitoring"].includes(s.type)?null:e.jsxs("span",{children:["$",s.price.toFixed(2)]},o)).filter(Boolean).length===0?e.jsx("span",{children:"--"}):t.products.map((s,o)=>["Seenyor Kit","Installation","AI Monitoring"].includes(s.type)?null:e.jsxs("span",{children:["$",s.price.toFixed(2)]},o))})})},{title:"Total Price",render:t=>e.jsx("button",{children:e.jsxs("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary text-nowrap",children:["$",t.total]})})},{title:"Date of Sales",render:t=>{const s=new Date(t.created_at).toLocaleDateString("en-CA");return e.jsx("button",{children:e.jsx("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary text-nowrap",children:s})})}},{title:"Location",render:t=>{var s,o,r,n,c,u;return e.jsx("button",{children:e.jsxs("span",{className:"text-[14px] xl:text-base font-normal text-text-secondary text-nowrap",children:[(s=t.address)==null?void 0:s.line1,","," ",(o=t.address)!=null&&o.line2?((r=t.address)==null?void 0:r.line2)+", ":"",","," ",(n=t.address)==null?void 0:n.city,", ",(c=t.address)==null?void 0:c.state,","," ",t.address?t.address.postal_code:" ",", ",(u=t.address)==null?void 0:u.country]})})}},{title:"Payment Status",dataIndex:"payment_status",key:"payment_status",filters:[{text:"Completed",value:"completed"},{text:"Pending",value:"pending"},{text:"Cancelled",value:"cancelled"}],filterMultiple:!0,onFilter:(t,s)=>s.payment_status.includes(t),render:t=>{let s="";switch(t){case"completed":s="green";break;case"pending":s="orange";break;case"cancelled":s="red";break;default:s="black"}return e.jsx("span",{style:{backgroundColor:s,color:"white",padding:"4px 8px",borderRadius:"4px",fontWeight:500,textTransform:"capitalize"},children:t})}}];function yl(){const[t,s]=a.useState(!1),[o,r]=a.useState(1),[n,c]=a.useState(0),[u,x]=a.useState([]);a.useState([]);const[f,m]=a.useState([]);function g(y){s(!0),el(y).then(v=>{x(v.data),c(v.total)}).catch(v=>{console.log(v)}).finally(()=>{s(!1)})}const b=a.useCallback(()=>{al().then(y=>{m(y.data),console.log(y.data)}).catch(y=>{console.log(y)})},[o]),p=a.useCallback(()=>{g({installation_status:"completed",ne:!0,page:o})},[o]);return a.useEffect(()=>{p()},[p]),a.useEffect(()=>{b()},[b]),e.jsx("div",{className:"flex flex-col gap-6 pt-6",children:e.jsxs("div",{className:"w-full flex  gap-6 lg:flex-row flex-col",children:[e.jsxs("div",{id:"NewInstallation",className:"p-[25px] rounded-2xl  bg-white lg:w-[65%] w-full  h-full",children:[e.jsxs("div",{id:"ChartHeader",className:"w-full flex justify-between mb-8",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:"To Be Installed"}),e.jsx("div",{id:"chartController",className:"flex gap-4"})]}),e.jsx(N,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:e.jsx(fe.Provider,{value:{getInstallationList:{getCompletedandToBeInstalled:p,getDeviceSalesCounts:b},total:n,page:o,SetPage:r},children:e.jsx(Je,{loading:t,scroll:{x:750},columns:bl,tableData:u})})})]}),e.jsxs("div",{className:" p-[25px] rounded-2xl  bg-white lg:w-[35%] w-full",children:[e.jsxs("div",{children:[e.jsx("div",{id:"ChartHeader",className:"w-full flex justify-between",children:e.jsx("h1",{className:"text-[24px] font-bold",children:"Device Installed"})}),e.jsx("div",{className:"h-[260px] my-0 mx-auto flex items-center justify-center",children:e.jsx(U,{data:f,chartFor:"device"})})]}),e.jsx("div",{id:"ChartInfo",className:"w-full flex flex-col gap-2",children:["completed","pending","not_started"].map((y,v)=>{const S=f.find(C=>C._id===y)||{_id:y,count:0};return e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:`w-[12px] h-[12px] ${S._id==="completed"?"bg-[#08A1F7]":S._id==="pending"?"bg-[#922BF2]":"bg-[#FF3B11]"} rounded-full`}),e.jsx("span",{className:"text-lg font-medium capitalize",children:S._id==="completed"?"Completed":S._id==="pending"?"Pending":"Not Started"})]}),e.jsx("span",{className:"text-lg font-semibold",children:S.count})]},v)})})]})]})})}const{RangePicker:vl}=ll,wl=t=>{console.log("onOk: ",t)},_=t=>{console.log("search:",t)},zl=()=>{a.useState(!1),a.useState("Overview"),a.useState(""),a.useState(""),a.useState(!1),a.useState([]),a.useState({current:"1",size:"10"});const[t,s]=a.useState({page:1,limit:10}),[o,r]=a.useState(!1),[n,c]=a.useState(K.get("user")),[u,x]=a.useState(K.get("role")),[f,m]=a.useState(K.get("mainRole")),[g,b]=a.useState(null),[p,y]=a.useState(null),[v,S]=a.useState(null),[C,$]=a.useState("all"),[O,pe]=a.useState(null),[M,he]=a.useState(null),[H,me]=a.useState(null),[z,Q]=a.useState(null),[T,X]=a.useState(null),[R,Y]=a.useState(null),[V,Nl]=a.useState(null),[W,Sl]=a.useState(null),[Z,ge]=a.useState([]),[B,je]=a.useState([]),[L,be]=a.useState(null),[E,ye]=a.useState([]),[ve,we]=a.useState([]),[Ne,Se]=a.useState([]),[Ce,Ae]=a.useState([]),[q,_e]=a.useState([]),[J,Ie]=a.useState([]),[Cl,ke]=a.useState([]),[h,ee]=a.useState({}),[De,Al]=a.useState({}),[le,Be]=a.useState([]),[D,Le]=a.useState([]),[te,Ee]=a.useState([]),[Fe,Pe]=a.useState([]),Oe=a.useCallback(()=>{sl().then(l=>{Be(l.data)}).catch(l=>{console.log(l)})},[]),Me=a.useCallback(()=>{nl().then(l=>{Le(l==null?void 0:l.data)}).catch(l=>{console.log(l)})},[]),He=a.useCallback(()=>{ol().then(l=>{Ee(l.data)}).catch(l=>{console.log(l)})},[]);function ze(){dl().then(l=>{const i=hl.map(j=>{var de;const A=(de=l.data)==null?void 0:de.find(Ke=>Ke.role===j.role);return{...j,count:A?A.count:0}}).filter(j=>j.rolesAllowed.includes(n.role));ye(i)}).catch(l=>{console.log(l)})}const ae=a.useCallback((l,d)=>{il({office_id:h.office_id,agent_id:l,payment_status:d,from_date:g,to_date:p}).then(i=>{console.log("sales Overview",i),we(i.data)}).catch(i=>{console.log(i)})},[C,v,h.office_id,p]),se=a.useCallback((l,d)=>{F({...h,total_sales_by:"agent_name",city:l,payment_status:d,from_date:g,to_date:p}).then(i=>{Se(i.data)}).catch(i=>{console.log(i)})},[M,O,h.office_id,p]),ne=a.useCallback((l,d)=>{F({...h,total_sales_by:"location",payment_status:d,agent_id:l,from_date:g,to_date:p}).then(i=>{Ae(i.data),console.log(i)}).catch(i=>{console.log(i)})},[z,H,h.office_id,p]),oe=a.useCallback(l=>{F({...h,total_sales_by:"payment_status",agent_id:l,from_date:g,to_date:p}).then(d=>{_e(d.data),console.log(d)}).catch(d=>{console.log(d)})},[T,h.office_id,p]),ie=a.useCallback(l=>{F({...h,total_sales_by:"installation_status",agent_id:l,from_date:g,to_date:p}).then(d=>{Ie(d.data),console.log(d)}).catch(d=>{console.log(d)})},[R,h.office_id,p]),re=a.useCallback((l,d)=>{r(!0),rl({...t,...h,agent_id:l,payment_status:d,from_date:g,to_date:p}).then(i=>{console.log(i),ke(i),r(!1)}).catch(i=>{console.log(i)})},[V,W,h.office_id,p,t]);a.useEffect(()=>{ae(C==="all"?null:C,v==="all"?null:v)},[ae]),a.useEffect(()=>{se(M==="all"?null:M,O==="all"?null:O)},[se]),a.useEffect(()=>{ne(z==="all"?null:z,H==="all"?null:H)},[ne]),a.useEffect(()=>{oe(T==="all"?null:T)},[oe]),a.useEffect(()=>{ie(R==="all"?null:R)},[ie]),a.useEffect(()=>{re(W==="all"?null:W,V==="all"?null:V)},[re]),a.useEffect(()=>{if(L)if(L==="all"){if(h.office_id){const l={...h};delete l.office_id,ee(l)}}else ee(l=>({...l,office_id:L})),X("all"),Y("all"),Q("all"),$("all")},[L]);function Te(l){console.log(l),b(l.start),y(l.end)}function Re(l){b(l[0]),y(l[1])}function Ve(){ce({role:"office"}).then(l=>{ge(l.data)}).catch(l=>{console.log(l)})}function We(){console.log("called agent get list!",De),ce({...h,role:"sales_agent"}).then(l=>{je(l.data)}).catch(l=>{console.log(l)})}function Ge(){tl({...h}).then(l=>{Pe(l.data)}).catch(l=>{console.log(l)})}return a.useEffect(()=>{ze(),Ve(),Oe(),Me(),He()},[]),a.useEffect(()=>{We(),Ge()},[h]),e.jsxs("div",{className:"",children:[(n.role=="distributor"||n.role=="office"||n.role=="sales_agent")&&e.jsxs("div",{className:"pt-[29px] flex flex-col w-full gap-6 pb-10",children:[e.jsx("div",{id:"Distributor_Dash_Top",className:"flex justify-between w-full mb-5 flex-wrap gap-5",children:e.jsxs(N,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:[n.role=="office"?e.jsx("div",{className:"p-2 px-4 rounded-lg text-[36px] font-bold  text-primary",children:n.office}):n.role=="sales_agent"?null:e.jsx(w,{showSearch:!0,optionFilterProp:"label",onChange:l=>be(l.value),onSearch:_,defaultValue:"all",size:"large",className:"custom-select",labelInValue:!0,options:[{value:"all",label:e.jsxs(e.Fragment,{children:["All Offices"," ",e.jsx("span",{className:"highlighted-number",children:Z.length})]})},...Z.map(l=>({value:l._id,label:l.name}))]}),e.jsxs("div",{id:"DatePickers",className:"flex gap-4 items-center",children:[e.jsx(fl,{placeholder:"Weekly/Monthly",style:{width:"140px",borderRadius:"10px"},handleChnage:Te}),e.jsx(vl,{showTime:!1,style:{width:"200px",borderRadius:"10px"},size:"large",placeholder:["Pick Data Range (Start)","End"],format:"YYYY-MM-DD",onChange:(l,d)=>{Re(d)},onOk:wl})]})]})}),e.jsx("div",{id:"Reports",className:"w-full rounded-2xl bg-transparent flex flex-col gap-6",children:e.jsx("div",{id:"Cards",className:"grid gap-5 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:E==null?void 0:E.map((l,d)=>{let i=l.icon;return e.jsxs("div",{id:"Card",className:"cursor-pointer group flex w-full items-center p-4 py-6 bg-[#fff] text-white gap-3 rounded-[12px] relative overflow-hidden",children:[e.jsx("div",{id:"circle",style:{backgroundColor:l.color,opacity:"0.9"},className:"w-[100px] h-[100px] absolute -right-11 -top-14 rounded-full group-hover:-right-5 group-hover:-top-[75px] transition-all duration-200 ease-in-out"}),e.jsx("div",{id:"circle",style:{backgroundColor:l.color,opacity:"0.2"},className:"w-[100px] h-[100px] absolute -right-3 -top-[70px] rounded-full group-hover:-right-[50px] group-hover:-top-[45px] transition-all duration-200 ease-in-out"}),e.jsx("div",{style:{backgroundColor:`${l.color}15`},className:"h-fit rounded-[8px] p-2",children:i&&e.jsx(i,{style:{color:l==null?void 0:l.color},size:20})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("h1",{className:"text-[26px] font-semibold leading-none text-text-primary",children:l.count}),e.jsx("span",{className:"text-[14px] font-medium text-text-primary/70 leading-none",children:l.label})]})]},d)})})}),e.jsxs("div",{id:"SalesOverview&Total",className:"w-full flex  gap-6 flex-col",children:[e.jsxs("div",{className:"w-full flex gap-6",children:[e.jsxs("div",{className:" p-[25px] rounded-2xl  bg-white lg:w-[50%] w-full  h-[445px]",children:[e.jsxs("div",{id:"ChartHeader",className:"w-full flex justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:"Total Sales"}),e.jsx("div",{id:"chartController",className:"flex gap-4",children:f!=="sales_agent"?e.jsx(N,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:e.jsx(w,{showSearch:!0,optionFilterProp:"label",onChange:l=>X(l.value),onSearch:_,defaultValue:"all",size:"large",style:{maxWidth:150,zIndex:"400"},labelInValue:!0,options:[{value:"all",label:"All Agents"},...B.map(l=>({value:l._id,label:l.name+" "+l.last_name}))]})}):null})]}),e.jsx("div",{className:"h-[260px] my-0 mx-auto flex items-center justify-center",children:e.jsx(ue,{data:q,chartFor:"totalSales"})}),e.jsx("div",{id:"ChartInfo",className:"w-full flex flex-col gap-2",children:["completed","pending","cancelled"].map(l=>{const d=q.find(A=>A.property_name===l)||{property_name:l,total_orders:0};let i,j;switch(d.property_name){case"completed":i="#4379EE",j="Completed";break;case"pending":i="#F1963A",j="Pending";break;case"cancelled":i="#D90000",j="Cancelled";break;default:i="#000000",j="Unknown"}return e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] rounded-full",style:{backgroundColor:i}}),e.jsx("span",{className:"text-lg font-medium",children:j})]}),e.jsx("span",{className:"text-lg font-semibold",children:d.total_orders})]},d.property_name)})})]}),e.jsxs("div",{className:" p-[25px] rounded-2xl  bg-white lg:w-[50%] w-full  h-[445px]",children:[e.jsxs("div",{id:"ChartHeader",className:"w-full flex justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:"Total Installations"}),e.jsx("div",{id:"chartController",className:"flex gap-4",children:f!=="sales_agent"?e.jsx(N,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:e.jsx(w,{showSearch:!0,optionFilterProp:"label",onChange:l=>Y(l.value),onSearch:_,defaultValue:"all",size:"large",style:{maxWidth:150,zIndex:"400"},labelInValue:!0,options:[{value:"all",label:"All Agents"},...B.map(l=>({value:l._id,label:l.name+" "+l.last_name}))]})}):null})]}),e.jsx("div",{className:"h-[260px] my-0 mx-auto flex items-center justify-center",children:e.jsx(ue,{data:J,chartFor:"totalInstallations"})}),e.jsx("div",{id:"ChartInfo",className:"w-full flex flex-col gap-2",children:["completed","pending","not_started"].map(l=>{const d=J.find(A=>A.property_name===l)||{property_name:l,total_orders:0};let i,j;switch(d.property_name){case"completed":i="#36b610",j="Completed";break;case"pending":i="#833af1",j="In Progress";break;case"not_started":i="#5d5d5d",j="Not Started";break;default:i="#000000",j="Unknown"}return e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] rounded-full",style:{backgroundColor:i}}),e.jsx("span",{className:"text-lg font-medium",children:j})]}),e.jsx("span",{className:"text-lg font-semibold",children:d.total_orders})]},d.property_name)})})]})]}),e.jsxs("div",{className:" p-[25px] rounded-2xl  bg-white lg:w-[100%] w-full  h-[445px]",children:[e.jsxs("div",{id:"ChartHeader",className:"w-full flex justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:"Sales Overview"}),e.jsx("div",{id:"chartController",className:"flex gap-4",children:e.jsxs(N,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:[e.jsx(w,{optionFilterProp:"label",onChange:l=>S(l.value),defaultValue:"all",size:"large",labelInValue:!0,options:[{value:"all",label:"All Sales"},{value:"completed",label:"Completed"},{value:"pending",label:"Pending"},{value:"cancelled",label:"Cancelled"}]}),f!=="sales_agent"?e.jsx(w,{showSearch:!0,optionFilterProp:"label",onChange:l=>$(l.value),onSearch:_,value:C,defaultValue:"all",size:"large",style:{maxWidth:150,zIndex:"400"},labelInValue:!0,options:[{value:"all",label:"All Agents"},...B.map(l=>({value:l._id,label:l.name+" "+l.last_name}))]}):null]})})]}),e.jsx(pl,{data:ve})]})]}),e.jsxs("div",{id:"SalesByLucation&Agents",className:"w-full flex gap-6 xl:flex-row flex-col",children:[n.role=="sales_agent"?null:e.jsxs("div",{className:" p-[25px] rounded-2xl  bg-white w-full h-[445px]",children:[e.jsxs("div",{id:"ChartHeader",className:"w-full flex justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:" Sales by Agent"}),e.jsx("div",{id:"chartController",className:"flex gap-4",children:e.jsxs(N,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:[e.jsx(w,{optionFilterProp:"label",onChange:l=>pe(l.value),defaultValue:"all",size:"large",labelInValue:!0,options:[{value:"all",label:"All Sales"},{value:"completed",label:"Completed"},{value:"pending",label:"Pending"},{value:"cancelled",label:"Cancelled"}]}),e.jsx(w,{showSearch:!0,optionFilterProp:"label",onChange:l=>he(l.value),onSearch:_,defaultValue:"all",size:"large",labelInValue:!0,options:[{value:"all",label:"All Locations"},...Fe.map(l=>({value:l.city_name,label:l.city_name}))]})]})})]}),e.jsx(I,{data:Ne,graphTitle:"Sales by Agent"})]}),e.jsxs("div",{className:"p-[25px] rounded-2xl  bg-white w-full h-[445px]",children:[e.jsxs("div",{id:"ChartHeader",className:"w-full flex justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:"Sales by Location"}),e.jsx("div",{id:"chartController",className:"flex gap-4",children:e.jsxs(N,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:[e.jsx(w,{optionFilterProp:"label",onChange:l=>me(l.value),defaultValue:"all",size:"large",labelInValue:!0,options:[{value:"all",label:"All Sales"},{value:"completed",label:"Completed"},{value:"pending",label:"Pending"},{value:"cancelled",label:"Cancelled"}]}),f!=="sales_agent"?e.jsx(w,{showSearch:!0,optionFilterProp:"label",onChange:l=>Q(l.value),onSearch:_,defaultValue:"all",size:"large",labelInValue:!0,options:[{value:"all",label:"All Agents"},...B.map(l=>({value:l._id,label:l.name+" "+l.last_name}))]}):null]})})]}),e.jsx(I,{data:Ce,graphTitle:"Sales by Location"})]})]})]}),n.role=="monitoring_station"?e.jsx(gl,{count:E,chartByAge:D,chartByGender:le,diseasesCountByGender:te}):null,u=="installer"?e.jsx(yl,{}):null,n.role=="nursing_home"?e.jsxs("div",{className:"w-full flex flex-col gap-6 pt-6",children:[e.jsxs("div",{className:"w-full flex gap-6 xl:flex-row flex-col h-fit justify-between",children:[e.jsxs("div",{className:"p-[25px] rounded-2xl bg-white w-full h-[445px]",children:[e.jsx("div",{id:"ChartHeader",className:"w-full flex justify-between",children:e.jsx("h1",{className:"text-[24px] font-bold",children:"Most Alerts"})}),e.jsx(I,{})]}),e.jsxs("div",{className:"p-[25px] rounded-2xl bg-white w-full h-[445px]",children:[e.jsx("div",{id:"ChartHeader",className:"w-full flex justify-between",children:e.jsx("h1",{className:"text-[24px] font-bold",children:"Alerts Count"})}),e.jsx(I,{})]})]}),e.jsxs("div",{className:"flex gap-6 lg:flex-row flex-col h-fit",children:[e.jsxs("div",{className:"rounded-2xl lg:w-[75%] w-full flex flex-col gap-6 h-full",children:[e.jsxs("div",{className:"p-[25px] rounded-2xl bg-white w-full h-[445px] flex-grow",children:[e.jsx("div",{id:"ChartHeader",className:"w-full flex justify-between",children:e.jsx("h1",{className:"text-[24px] font-bold",children:"Ages"})}),e.jsx(P,{chartFor:"age",data:le})]}),e.jsxs("div",{className:"p-[25px] rounded-2xl bg-white w-full h-[445px] flex-grow",children:[e.jsx("div",{id:"ChartHeader",className:"w-full flex justify-between",children:e.jsx("h1",{className:"text-[24px] font-bold",children:"Diseases"})}),e.jsx(P,{chartFor:"diseases",data:te})]})]}),e.jsx("div",{className:"rounded-2xl lg:w-[35%] w-full flex flex-col gap-6 h-full",children:e.jsxs("div",{className:"p-[25px] rounded-2xl bg-white w-full flex flex-col h-[496px] justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{id:"ChartHeader",className:"w-full flex justify-between",children:e.jsx("h1",{className:"text-[24px] font-bold",children:"Gender"})}),e.jsx("div",{className:"h-[260px] my-0 mx-auto flex items-center justify-center",children:e.jsx(U,{data:D,chartFor:"gender"})})]}),e.jsxs("div",{id:"ChartInfo",className:"w-full flex flex-col gap-2",children:[e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] bg-text-primary rounded-full"}),e.jsx("span",{className:"text-lg font-medium",children:"Total"})]}),e.jsx("span",{className:"text-lg font-semibold",children:D.reduce((l,d)=>l+d.male_count+d.female_count,0)})]}),e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] bg-[#4379EE] rounded-full"}),e.jsx("span",{className:"text-lg font-medium",children:"Male"})]}),e.jsx("span",{className:"text-lg font-semibold",children:D.map(l=>l._id==="male"&&l.male_count||0)})]}),e.jsxs("div",{id:"InfoItem",className:"w-full flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("div",{className:"w-[12px] h-[12px] bg-[#5CC8BE] rounded-full"}),e.jsx("span",{className:"text-lg font-medium",children:"Female"})]}),e.jsxs("span",{className:"text-lg font-semibold",children:[" ",D.map(l=>l._id==="female"&&l.male_count||0)]})]})]})]})})]})]}):null]})};export{zl as default};
