import{r as l,i as T,b_ as C,j as e,C as z,D as q,g$ as Q,it as k,iu as S,iv as J}from"./index-BA7Bv3zX.js";import K from"./DurationStatistic-hvlTllA7.js";import X from"./DurationDistribution-BzY4_v4K.js";import Z from"./EfficiencyStatistic-BjB4RKET.js";import ee from"./DeepSleepPercentageDistribution-DY57MCeX.js";import te from"./DeepSleepPercentageStatistic-BmjyVl3k.js";import ie from"./EfficiencyDistribution-Cd09UkMe.js";import ae from"./ApneaIndexStatistic-B_NREVtN.js";import se from"./NumberOfBedExitStatistic-BcE0LCLZ.js";import re from"./DistributionOfBedExitTimes-B5AsByDg.js";import oe from"./TimeToFallAsleepStatistic-DPR1hEOj.js";import ne from"./DistributionOfTimeToFallAsleep-DTYu69nq.js";import le from"./DistributionOfDailyRoutine-C92zSWyI.js";import ce from"./RespiratoryRate-C6VFAVqy.js";import de from"./HeartRate-Dfr1dI_i.js";import"./Template-DxhPQCgP.js";import"./SkeletonBarChart-cyUWtXne.js";import me from"./HeartRateDistribution-BB9c_fJz.js";import fe from"./BreathRateDistribution-B-3LzlLs.js";import{C as E}from"./index-B-hUxiW-.js";import{C as P}from"./Collapse-hKkXIbou.js";import"./mockData-CDtzrQhc.js";import"./barChart-DmOx_PYr.js";import"./utiles-x2CBnFfE.js";import"./scatterChart-AihjNmt4.js";import"./SkeletonRateChart-CaFPdK65.js";import"./index-D8G9vFfh.js";import"./WeeklyMonthlyPicker-DrNkaipz.js";import"./Cascader-BkK2YOqo.js";import"./index-BV5dgksh.js";try{let n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},g=new n.Error().stack;g&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[g]="95f8c89f-bafb-44ba-92ff-608f08ad1b6f",n._sentryDebugIdIdentifier="sentry-dbid-95f8c89f-bafb-44ba-92ff-608f08ad1b6f")}catch{}const{RangePicker:ue}=q,{Panel:pe}=P,{SHOW_CHILD:he}=E;function ze(){const[n,g]=l.useState([]);T().subtract(1,"day").format("YYYY-MM-DD");const[O,W]=l.useState(),[A,F]=l.useState(T().subtract(31,"day").format("YYYY-MM-DD")),[b,L]=l.useState([]),u=l.useRef(null),H=l.useContext(C),[I,c]=l.useState(!1),N=t=>{g(t),F(t[0]),W(t[1])},Y=async()=>{if(u.current){c(!0);try{const t=await S(u.current),i=document.createElement("a");i.href=t.toDataURL("image/png"),i.download="reports.png",i.click()}catch(t){console.error("Error exporting as image:",t)}finally{c(!1)}}},M=async()=>{if(u.current){c(!0);try{const t=await S(u.current,{scale:2,useCORS:!0}),i=t.toDataURL("image/png"),r=`
          <svg xmlns="http://www.w3.org/2000/svg" width="${t.width}" height="${t.height}">
            <image href="${i}" width="${t.width}" height="${t.height}" />
          </svg>
        `,a=new Blob([r],{type:"image/svg+xml;charset=utf-8"}),o=URL.createObjectURL(a),s=document.createElement("a");s.href=o,s.download="reports.svg",s.click(),URL.revokeObjectURL(o)}catch(t){console.error("Error exporting as SVG:",t)}finally{c(!1)}}},U=async()=>{try{c(!0);const t=new J({orientation:"portrait",unit:"pt",format:"a4"}),i=t.internal.pageSize.getWidth(),r=t.internal.pageSize.getHeight(),a=15,o=2;let s=a,p=a,h=0,d=0;const D=Array.from(document.querySelectorAll(".chart"));for(let x=0;x<D.length;x++){const v=D[x],j=v.classList.contains("full-width-chart"),y=await S(v,{scale:2}),R=y.width,w=y.height,_=y.toDataURL("image/png");let m,f,B;j?(m=i-a*2,f=w/R*m,B=2):(m=(i-a*(o+1))/o,f=w/R*m,B=1),p+f+a>r&&(t.addPage(),s=a,p=a,d=0,h=0),t.addImage(_,"JPEG",s,p,m,f,void 0,"MEDIUM",0),j?(p+=f+a,s=a,d=0,h=0):(d===0&&(h=f),d++,s+=m+a,d===o&&(p+=h+a,s=a,d=0,h=0))}t.save("export.pdf")}catch(t){console.log(t)}finally{c(!1)}},V=[{value:"sleep",label:"Sleep",children:[{label:"Sleep Duration Overview",value:"sleepDurationStatistic"},{label:"Sleep Duration Trends",value:"sleepDurationDistribution"},{label:"Sleep Quality Overview",value:"efficiencyStatistic"},{label:"Deep Sleep Proportion Trends",value:"deepSleepPercentageDistribution"},{label:"Deep Sleep Proportion Overview",value:"deepSleepPercentageStatistic"},{label:"Sleep Quality Trends",value:"efficiencyDistribution"},{label:"Sleep Disturbances Index Statistic",value:"apneaIndexStatistic"},{label:"Bed Exit Frequency Overview",value:"numberOfBedExitStatistic"},{label:"Bed Exit Times ",value:"distributionOfBedExitTimes"},{label:"Sleep Latency Trends",value:"distributionOfTimeToFallAsleep"},{label:"Sleep Latency Overview",value:"timeToFallAsleepStatistic"},{label:"Daily Routine Trends",value:"distributionOfDailyRoutine"}]},{value:"health",label:"Health",children:[{label:"Breath Rate",value:"respiratoryRate"},{label:"Heart Rate",value:"heartRate"},{label:"Heart Rate Variation Overview",value:"heartRateAnnomalyStatistic"},{label:"Heart Rate Trends",value:"heartRateDistribution"},{label:"Breathing Rate Trends",value:"breathRateDistribution"}]}],G=t=>{const i=t.map(r=>r[r.length-1]);L(i)},$=t=>{if(b.length===0)return!0;const i=b.includes(t);return console.log(`Checking if ${t} is selected:`,i),i};return e.jsx(e.Fragment,{children:e.jsxs("div",{id:"reports",className:"flex flex-col gap-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-[24px] font-bold",children:"Reports"}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs(z,{theme:{token:{fontFamily:"Baloo2",colorPrimary:"#8086AC",colorLinkActive:"#8086AC",colorLinkHover:"#8086AC",colorLink:"#8086AC"}},children:[e.jsx(ue,{showTime:!1,style:{width:"200px",borderRadius:"10px"},size:"large",placeholder:["Pick Data Range (Start)","End"],format:"YYYY-MM-DD",onChange:(t,i)=>{N(i)}}),e.jsx(E,{style:{width:"300px"},options:V,placeholder:"Select Specific Analysis",multiple:!0,maxTagCount:"responsive",size:"large",showCheckedStrategy:he,onChange:G,defaultValue:b})]}),e.jsxs(Q.Button,{size:"large",style:{backgroundColor:"#fff",width:"fit-content",borderRadius:"10px"},loading:I,menu:{items:[{label:"Export as SVG",key:"1"},{label:"Export as PDF",key:"2"}],onClick:t=>{t.key==="1"?M():t.key==="2"&&U()},icon:e.jsx(k,{})},onClick:Y,children:[e.jsx(k,{}),"Export Report as PNG"]})]})]}),e.jsx(C.Provider,{value:{...H,chartFromDate:A,chartToDate:O},children:e.jsx("div",{id:"reports",ref:u,children:e.jsx(P,{defaultActiveKey:["0"],expandIconPosition:"left",children:ge.map((t,i)=>e.jsx(pe,{style:{backgroundColor:"transparent"},header:e.jsxs("div",{className:"flex items-center justify-between",style:{border:"none",padding:0},children:[e.jsx("span",{children:t.groupName||"Unnamed Group"}),e.jsx("div",{className:"flex-grow mx-2",style:{borderBottom:"none"}})]}),children:e.jsx("div",{className:"gap-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2",children:t.components.map(({id:r,component:a,fullWidth:o},s)=>$(r)&&e.jsx("div",{className:o?"col-span-2 chart full-width-chart":" chart",children:a},s))})},i))})})})]})})}const ge=[{groupName:"Sleep",components:[{id:"sleepDurationStatistic",component:e.jsx(K,{isSummaryBtn:!1}),fullWidth:!1},{id:"sleepDurationDistribution",component:e.jsx(X,{isSummaryBtn:!1}),fullWidth:!1},{id:"efficiencyStatistic",component:e.jsx(Z,{isSummaryBtn:!1}),fullWidth:!1},{id:"deepSleepPercentageDistribution",component:e.jsx(ee,{isSummaryBtn:!1}),fullWidth:!1},{id:"deepSleepPercentageStatistic",component:e.jsx(te,{isSummaryBtn:!1}),fullWidth:!1},{id:"efficiencyDistribution",component:e.jsx(ie,{isSummaryBtn:!1}),fullWidth:!1},{id:"apneaIndexStatistic",component:e.jsx(ae,{isSummaryBtn:!1}),fullWidth:!1},{id:"numberOfBedExitStatistic",component:e.jsx(se,{isSummaryBtn:!1}),fullWidth:!1},{id:"distributionOfBedExitTimes",component:e.jsx(re,{isSummaryBtn:!1}),fullWidth:!0},{id:"timeToFallAsleepStatistic",component:e.jsx(oe,{isSummaryBtn:!1}),fullWidth:!1},{id:"distributionOfTimeToFallAsleep",component:e.jsx(ne,{isSummaryBtn:!1}),fullWidth:!1},{id:"distributionOfDailyRoutine",component:e.jsx(le,{isSummaryBtn:!1}),fullWidth:!0}]},{groupName:"Health",components:[{id:"respiratoryRate",component:e.jsx(ce,{isSummaryBtn:!0,dataType:"Month"}),fullWidth:!0},{id:"heartRate",component:e.jsx(de,{isSummaryBtn:!0,dataType:"Month"}),fullWidth:!0},{id:"heartRateDistribution",component:e.jsx(me,{isSummaryBtn:!1}),fullWidth:!1},{id:"breathRateDistribution",component:e.jsx(fe,{isSummaryBtn:!1}),fullWidth:!1}]}];export{ze as default};
//# sourceMappingURL=ReportsTab-BxXLzZWn.js.map
